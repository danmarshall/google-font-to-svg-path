import{r as Re}from"./index.WFquGv8Z.js";var Jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Gr(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var n=t.default;if(typeof n=="function"){var e=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};e.prototype=n.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),e}var St={exports:{}},Me={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var en;function _r(){if(en)return Me;en=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function e(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var f in i)f!=="key"&&(a[f]=i[f])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return Me.Fragment=n,Me.jsx=e,Me.jsxs=e,Me}var tn;function Hr(){return tn||(tn=1,St.exports=_r()),St.exports}var q=Hr(),Tt={exports:{}},nn;function jr(){return nn||(nn=1,(function(t){var n=(function(){function e(o,c,d,x){typeof c=="object"&&(d=c.depth,x=c.prototype,c.filter,c=c.circular);var S=[],w=[],F=typeof Buffer<"u";typeof c>"u"&&(c=!0),typeof d>"u"&&(d=1/0);function m(l,u){if(l===null)return null;if(u==0)return l;var p,v;if(typeof l!="object")return l;if(e.__isArray(l))p=[];else if(e.__isRegExp(l))p=new RegExp(l.source,f(l)),l.lastIndex&&(p.lastIndex=l.lastIndex);else if(e.__isDate(l))p=new Date(l.getTime());else{if(F&&Buffer.isBuffer(l))return Buffer.allocUnsafe?p=Buffer.allocUnsafe(l.length):p=new Buffer(l.length),l.copy(p),p;typeof x>"u"?(v=Object.getPrototypeOf(l),p=Object.create(v)):(p=Object.create(x),v=x)}if(c){var h=S.indexOf(l);if(h!=-1)return w[h];S.push(l),w.push(p)}for(var g in l){var b;v&&(b=Object.getOwnPropertyDescriptor(v,g)),!(b&&b.set==null)&&(p[g]=m(l[g],u-1))}return p}return m(o,d)}e.clonePrototype=function(c){if(c===null)return null;var d=function(){};return d.prototype=c,new d};function r(o){return Object.prototype.toString.call(o)}e.__objToStr=r;function i(o){return typeof o=="object"&&r(o)==="[object Date]"}e.__isDate=i;function a(o){return typeof o=="object"&&r(o)==="[object Array]"}e.__isArray=a;function s(o){return typeof o=="object"&&r(o)==="[object RegExp]"}e.__isRegExp=s;function f(o){var c="";return o.global&&(c+="g"),o.ignoreCase&&(c+="i"),o.multiline&&(c+="m"),c}return e.__getRegExpFlags=f,e})();t.exports&&(t.exports=n)})(Tt)),Tt.exports}function _t(t,n,e,r,i,a){if(!(i-r<=e)){var s=Math.floor((r+i)/2);Kn(t,n,s,r,i,a%2),_t(t,n,e,r,s-1,a+1),_t(t,n,e,s+1,i,a+1)}}function Kn(t,n,e,r,i,a){for(;i>r;){if(i-r>600){var s=i-r+1,f=e-r+1,o=Math.log(s),c=.5*Math.exp(2*o/3),d=.5*Math.sqrt(o*c*(s-c)/s)*(f-s/2<0?-1:1),x=Math.max(r,Math.floor(e-f*c/s+d)),S=Math.min(i,Math.floor(e+(s-f)*c/s+d));Kn(t,n,e,x,S,a)}var w=n[2*e+a],F=r,m=i;for(Je(t,n,r,e),n[2*i+a]>w&&Je(t,n,r,i);F<m;){for(Je(t,n,F,m),F++,m--;n[2*F+a]<w;)F++;for(;n[2*m+a]>w;)m--}n[2*r+a]===w?Je(t,n,r,m):(m++,Je(t,n,m,i)),m<=e&&(r=m+1),e<=m&&(i=m-1)}}function Je(t,n,e,r){wt(t,e,r),wt(n,2*e,2*r),wt(n,2*e+1,2*r+1)}function wt(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}function qr(t,n,e,r,i,a,s){for(var f=[0,t.length-1,0],o=[],c,d;f.length;){var x=f.pop(),S=f.pop(),w=f.pop();if(S-w<=s){for(var F=w;F<=S;F++)c=n[2*F],d=n[2*F+1],c>=e&&c<=i&&d>=r&&d<=a&&o.push(t[F]);continue}var m=Math.floor((w+S)/2);c=n[2*m],d=n[2*m+1],c>=e&&c<=i&&d>=r&&d<=a&&o.push(t[m]);var l=(x+1)%2;(x===0?e<=c:r<=d)&&(f.push(w),f.push(m-1),f.push(l)),(x===0?i>=c:a>=d)&&(f.push(m+1),f.push(S),f.push(l))}return o}function Wr(t,n,e,r,i,a){for(var s=[0,t.length-1,0],f=[],o=i*i;s.length;){var c=s.pop(),d=s.pop(),x=s.pop();if(d-x<=a){for(var S=x;S<=d;S++)rn(n[2*S],n[2*S+1],e,r)<=o&&f.push(t[S]);continue}var w=Math.floor((x+d)/2),F=n[2*w],m=n[2*w+1];rn(F,m,e,r)<=o&&f.push(t[w]);var l=(c+1)%2;(c===0?e-i<=F:r-i<=m)&&(s.push(x),s.push(w-1),s.push(l)),(c===0?e+i>=F:r+i>=m)&&(s.push(w+1),s.push(d),s.push(l))}return f}function rn(t,n,e,r){var i=t-e,a=n-r;return i*i+a*a}function Vr(t,n,e,r,i){return new Qn(t,n,e,r,i)}function Qn(t,n,e,r,i){n=n||Xr,e=e||Yr,i=i||Array,this.nodeSize=r||64,this.points=t,this.ids=new i(t.length),this.coords=new i(t.length*2);for(var a=0;a<t.length;a++)this.ids[a]=a,this.coords[2*a]=n(t[a]),this.coords[2*a+1]=e(t[a]);_t(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}Qn.prototype={range:function(t,n,e,r){return qr(this.ids,this.coords,t,n,e,r,this.nodeSize)},within:function(t,n,e){return Wr(this.ids,this.coords,t,n,e,this.nodeSize)}};function Xr(t){return t[0]}function Yr(t){return t[1]}const Zr=Object.freeze(Object.defineProperty({__proto__:null,default:Vr},Symbol.toStringTag,{value:"Module"})),Kr=Gr(Zr);var Ct={exports:{}},on;function Qr(){return on||(on=1,(function(t){function n(){this.anchorPoint=void 0,this.reverse=!1,this.points=[]}n.prototype={constructor:n,Point:function(e,r){this.x=e,this.y=r},_findPolarAngle:function(e,r){var i,a,s=57.295779513082;if(!e||!r||(i=r.x-e.x,a=r.y-e.y,i==0&&a==0))return 0;var f=Math.atan2(a,i)*s;return this.reverse?0>=f&&(f+=360):f>=0&&(f+=360),f},addPoint:function(e,r){return this.anchorPoint===void 0?void(this.anchorPoint=new this.Point(e,r)):this.anchorPoint.y>r&&this.anchorPoint.x>e||this.anchorPoint.y===r&&this.anchorPoint.x>e||this.anchorPoint.y>r&&this.anchorPoint.x===e?(this.points.push(new this.Point(this.anchorPoint.x,this.anchorPoint.y)),void(this.anchorPoint=new this.Point(e,r))):void this.points.push(new this.Point(e,r))},_sortPoints:function(){var e=this;return this.points.sort(function(r,i){var a=e._findPolarAngle(e.anchorPoint,r),s=e._findPolarAngle(e.anchorPoint,i);return s>a?-1:a>s?1:0})},_checkPoints:function(e,r,i){var a,s=this._findPolarAngle(e,r),f=this._findPolarAngle(e,i);return s>f?(a=s-f,!(a>180)):f>s?(a=f-s,a>180):!0},getHull:function(){var e,r,i=[];if(this.reverse=this.points.every(function(c){return c.x<0&&c.y<0}),e=this._sortPoints(),r=e.length,3>r)return e.unshift(this.anchorPoint),e;for(i.push(e.shift(),e.shift());;){var a,s,f;if(i.push(e.shift()),a=i[i.length-3],s=i[i.length-2],f=i[i.length-1],this._checkPoints(a,s,f)&&i.splice(i.length-2,1),e.length==0){if(r==i.length){var o=this.anchorPoint;return i=i.filter(function(c){return!!c}),i.some(function(c){return c.x==o.x&&c.y==o.y})||i.unshift(this.anchorPoint),i}e=i,r=e.length,i=[],i.push(e.shift(),e.shift())}}}},t.exports=n})(Ct)),Ct.exports}var Et={exports:{}},At={exports:{}},an;function $n(){return an||(an=1,(function(){var t=Math.abs,n=Math.cos,e=Math.sin,r=Math.acos,i=Math.atan2,a=Math.sqrt,s=Math.pow,f=function(l){return l<0?-s(-l,1/3):s(l,1/3)},o=Math.PI,c=2*o,d=o/2,x=1e-6,S=Number.MAX_SAFE_INTEGER||9007199254740991,w=Number.MIN_SAFE_INTEGER||-9007199254740991,F={x:0,y:0,z:0},m={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(l,u){var p=u(l),v=p.x*p.x+p.y*p.y;return typeof p.z<"u"&&(v+=p.z*p.z),a(v)},compute:function(l,u,p){if(l===0)return u[0];var v=u.length-1;if(l===1)return u[v];var h=u,g=1-l;if(v===0)return u[0];if(v===1)return U={x:g*h[0].x+l*h[1].x,y:g*h[0].y+l*h[1].y},p&&(U.z=g*h[0].z+l*h[1].z),U;if(v<4){var b=g*g,y=l*l,T,D,C,P=0;v===2?(h=[h[0],h[1],h[2],F],T=b,D=g*l*2,C=y):v===3&&(T=b*g,D=b*l*3,C=g*y*3,P=l*y);var U={x:T*h[0].x+D*h[1].x+C*h[2].x+P*h[3].x,y:T*h[0].y+D*h[1].y+C*h[2].y+P*h[3].y};return p&&(U.z=T*h[0].z+D*h[1].z+C*h[2].z+P*h[3].z),U}for(var E=JSON.parse(JSON.stringify(u));E.length>1;){for(var L=0;L<E.length-1;L++)E[L]={x:E[L].x+(E[L+1].x-E[L].x)*l,y:E[L].y+(E[L+1].y-E[L].y)*l},typeof E[L].z<"u"&&(E[L]=E[L].z+(E[L+1].z-E[L].z)*l);E.splice(E.length-1,1)}return E[0]},computeWithRatios:function(l,u,p,v){var h=1-l,g=p,b=u,y,T=g[0],D=g[1],C=g[2],P=g[3];if(T*=h,D*=l,b.length===2)return y=T+D,{x:(T*b[0].x+D*b[1].x)/y,y:(T*b[0].y+D*b[1].y)/y,z:v?(T*b[0].z+D*b[1].z)/y:!1};if(T*=h,D*=2*h,C*=l*l,b.length===3)return y=T+D+C,{x:(T*b[0].x+D*b[1].x+C*b[2].x)/y,y:(T*b[0].y+D*b[1].y+C*b[2].y)/y,z:v?(T*b[0].z+D*b[1].z+C*b[2].z)/y:!1};if(T*=h,D*=1.5*h,C*=3*h,P*=l*l*l,b.length===4)return y=T+D+C+P,{x:(T*b[0].x+D*b[1].x+C*b[2].x+P*b[3].x)/y,y:(T*b[0].y+D*b[1].y+C*b[2].y+P*b[3].y)/y,z:v?(T*b[0].z+D*b[1].z+C*b[2].z+P*b[3].z)/y:!1}},derive:function(l,u){for(var p=[],v=l,h=v.length,g=h-1;h>1;h--,g--){for(var b=[],y=0,T;y<g;y++)T={x:g*(v[y+1].x-v[y].x),y:g*(v[y+1].y-v[y].y)},u&&(T.z=g*(v[y+1].z-v[y].z)),b.push(T);p.push(b),v=b}return p},between:function(l,u,p){return u<=l&&l<=p||m.approximately(l,u)||m.approximately(l,p)},approximately:function(l,u,p){return t(l-u)<=(p||x)},length:function(l){var u=.5,p=0,v=m.Tvalues.length,h,g;for(h=0;h<v;h++)g=u*m.Tvalues[h]+u,p+=m.Cvalues[h]*m.arcfn(g,l);return u*p},map:function(l,u,p,v,h){var g=p-u,b=h-v,y=l-u,T=y/g;return v+b*T},lerp:function(l,u,p){var v={x:u.x+l*(p.x-u.x),y:u.y+l*(p.y-u.y)};return u.z&&p.z&&(v.z=u.z+l*(p.z-u.z)),v},pointToString:function(l){var u=l.x+"/"+l.y;return typeof l.z<"u"&&(u+="/"+l.z),u},pointsToString:function(l){return"["+l.map(m.pointToString).join(", ")+"]"},copy:function(l){return JSON.parse(JSON.stringify(l))},angle:function(l,u,p){var v=u.x-l.x,h=u.y-l.y,g=p.x-l.x,b=p.y-l.y,y=v*b-h*g,T=v*g+h*b;return i(y,T)},round:function(l,u){var p=""+l,v=p.indexOf(".");return parseFloat(p.substring(0,v+1+u))},dist:function(l,u){var p=l.x-u.x,v=l.y-u.y;return a(p*p+v*v)},closest:function(l,u){var p=s(2,63),v,h;return l.forEach(function(g,b){h=m.dist(u,g),h<p&&(p=h,v=b)}),{mdist:p,mpos:v}},abcratio:function(l,u){if(u!==2&&u!==3)return!1;if(typeof l>"u")l=.5;else if(l===0||l===1)return l;var p=s(l,u)+s(1-l,u),v=p-1;return t(v/p)},projectionratio:function(l,u){if(u!==2&&u!==3)return!1;if(typeof l>"u")l=.5;else if(l===0||l===1)return l;var p=s(1-l,u),v=s(l,u)+p;return p/v},lli8:function(l,u,p,v,h,g,b,y){var T=(l*v-u*p)*(h-b)-(l-p)*(h*y-g*b),D=(l*v-u*p)*(g-y)-(u-v)*(h*y-g*b),C=(l-p)*(g-y)-(u-v)*(h-b);return C==0?!1:{x:T/C,y:D/C}},lli4:function(l,u,p,v){var h=l.x,g=l.y,b=u.x,y=u.y,T=p.x,D=p.y,C=v.x,P=v.y;return m.lli8(h,g,b,y,T,D,C,P)},lli:function(l,u){return m.lli4(l,l.c,u,u.c)},makeline:function(l,u){var p=kn(),v=l.x,h=l.y,g=u.x,b=u.y,y=(g-v)/3,T=(b-h)/3;return new p(v,h,v+y,h+T,v+2*y,h+2*T,g,b)},findbbox:function(l){var u=S,p=S,v=w,h=w;return l.forEach(function(g){var b=g.bbox();u>b.x.min&&(u=b.x.min),p>b.y.min&&(p=b.y.min),v<b.x.max&&(v=b.x.max),h<b.y.max&&(h=b.y.max)}),{x:{min:u,mid:(u+v)/2,max:v,size:v-u},y:{min:p,mid:(p+h)/2,max:h,size:h-p}}},shapeintersections:function(l,u,p,v,h){if(!m.bboxoverlap(u,v))return[];var g=[],b=[l.startcap,l.forward,l.back,l.endcap],y=[p.startcap,p.forward,p.back,p.endcap];return b.forEach(function(T){T.virtual||y.forEach(function(D){if(!D.virtual){var C=T.intersects(D,h);C.length>0&&(C.c1=T,C.c2=D,C.s1=l,C.s2=p,g.push(C))}})}),g},makeshape:function(l,u,p){var v=u.points.length,h=l.points.length,g=m.makeline(u.points[v-1],l.points[0]),b=m.makeline(l.points[h-1],u.points[0]),y={startcap:g,forward:l,back:u,endcap:b,bbox:m.findbbox([g,l,u,b])},T=m;return y.intersections=function(D){return T.shapeintersections(y,y.bbox,D,D.bbox,p)},y},getminmax:function(l,u,p){if(!p)return{min:0,max:0};var v=S,h=w,g,b;p.indexOf(0)===-1&&(p=[0].concat(p)),p.indexOf(1)===-1&&p.push(1);for(var y=0,T=p.length;y<T;y++)g=p[y],b=l.get(g),b[u]<v&&(v=b[u]),b[u]>h&&(h=b[u]);return{min:v,mid:(v+h)/2,max:h,size:h-v}},align:function(l,u){var p=u.p1.x,v=u.p1.y,h=-i(u.p2.y-v,u.p2.x-p),g=function(b){return{x:(b.x-p)*n(h)-(b.y-v)*e(h),y:(b.x-p)*e(h)+(b.y-v)*n(h)}};return l.map(g)},roots:function(l,u){u=u||{p1:{x:0,y:0},p2:{x:1,y:0}};var p=l.length-1,O=m.align(l,u),v=function(be){return 0<=be&&be<=1};if(p===2){var U=O[0].y,E=O[1].y,L=O[2].y,P=U-2*E+L;if(P!==0){var h=-a(E*E-U*L),g=-U+E,Q=-(h+g)/P,b=-(-h+g)/P;return[Q,b].filter(v)}else if(E!==L&&P===0)return[(2*E-L)/(2*E-2*L)].filter(v);return[]}var y=O[0].y,T=O[1].y,D=O[2].y,C=O[3].y,P=-y+3*T-3*D+C,U=3*y-6*T+3*D,E=-3*y+3*T,L=y;if(m.approximately(P,0)){if(m.approximately(U,0))return m.approximately(E,0)?[]:[-L/E].filter(v);var I=a(E*E-4*U*L),A=2*U;return[(I-E)/A,(-E-I)/A].filter(v)}U/=P,E/=P,L/=P;var O=(3*E-U*U)/3,R=O/3,I=(2*U*U*U-9*U*E+27*L)/27,z=I/2,H=z*z+R*R*R,Z,Q,$,B,N;if(H<0){var G=-O/3,j=G*G*G,V=a(j),K=-I/(2*V),ie=K<-1?-1:K>1?1:K,k=r(ie),te=f(V),me=2*te;return $=me*n(k/3)-U/3,B=me*n((k+c)/3)-U/3,N=me*n((k+2*c)/3)-U/3,[$,B,N].filter(v)}else{if(H===0)return Z=z<0?f(-z):-f(z),$=2*Z-U/3,B=-Z-U/3,[$,B].filter(v);var fe=a(H);return Z=f(-z+fe),Q=f(z+fe),[Z-Q-U/3].filter(v)}},droots:function(l){if(l.length===3){var u=l[0],p=l[1],v=l[2],h=u-2*p+v;if(h!==0){var g=-a(p*p-u*v),b=-u+p,y=-(g+b)/h,T=-(-g+b)/h;return[y,T]}else if(p!==v&&h===0)return[(2*p-v)/(2*(p-v))];return[]}if(l.length===2){var u=l[0],p=l[1];return u!==p?[u/(u-p)]:[]}},curvature:function(l,u,p,v){var h=m.derive(u),g=h[0],b=h[1],y,T,D,C,P=0,U=0,E=m.compute(l,g),L=m.compute(l,b),A=E.x*E.x+E.y*E.y;if(p?(y=a(s(E.y*L.z-L.y*E.z,2)+s(E.z*L.x-L.z*E.x,2)+s(E.x*L.y-L.x*E.y,2)),T=s(A+E.z*E.z,3/2)):(y=E.x*L.y-E.y*L.x,T=s(A,3/2)),y===0||T===0)return{k:0,r:0};if(P=y/T,U=T/y,!v){var O=m.curvature(l-.001,u,p,!0).k,R=m.curvature(l+.001,u,p,!0).k;C=(R-P+(P-O))/2,D=(t(R-P)+t(P-O))/2}return{k:P,r:U,dk:C,adk:D}},inflections:function(l){if(l.length<4)return[];var u=m.align(l,{p1:l[0],p2:l.slice(-1)[0]}),p=u[2].x*u[1].y,v=u[3].x*u[1].y,h=u[1].x*u[2].y,P=u[3].x*u[2].y,g=18*(-3*p+2*v+3*h-P),b=18*(3*p-v-3*h),y=18*(h-p);if(m.approximately(g,0)){if(!m.approximately(b,0)){var T=-y/b;if(0<=T&&T<=1)return[T]}return[]}var D=b*b-4*g*y,C=Math.sqrt(D),P=2*g;return m.approximately(P,0)?[]:[(C-b)/P,-(b+C)/P].filter(function(U){return 0<=U&&U<=1})},bboxoverlap:function(l,u){var p=["x","y"],v=p.length,h,g,b,y,T;for(h=0;h<v;h++)if(g=p[h],b=l[g].mid,y=u[g].mid,T=(l[g].size+u[g].size)/2,t(b-y)>=T)return!1;return!0},expandbox:function(l,u){u.x.min<l.x.min&&(l.x.min=u.x.min),u.y.min<l.y.min&&(l.y.min=u.y.min),u.z&&u.z.min<l.z.min&&(l.z.min=u.z.min),u.x.max>l.x.max&&(l.x.max=u.x.max),u.y.max>l.y.max&&(l.y.max=u.y.max),u.z&&u.z.max>l.z.max&&(l.z.max=u.z.max),l.x.mid=(l.x.min+l.x.max)/2,l.y.mid=(l.y.min+l.y.max)/2,l.z&&(l.z.mid=(l.z.min+l.z.max)/2),l.x.size=l.x.max-l.x.min,l.y.size=l.y.max-l.y.min,l.z&&(l.z.size=l.z.max-l.z.min)},pairiteration:function(l,u,p){var v=l.bbox(),h=u.bbox(),g=1e5,b=p||.5;if(v.x.size+v.y.size<b&&h.x.size+h.y.size<b)return[(g*(l._t1+l._t2)/2|0)/g+"/"+(g*(u._t1+u._t2)/2|0)/g];var y=l.split(.5),T=u.split(.5),D=[{left:y.left,right:T.left},{left:y.left,right:T.right},{left:y.right,right:T.right},{left:y.right,right:T.left}];D=D.filter(function(P){return m.bboxoverlap(P.left.bbox(),P.right.bbox())});var C=[];return D.length===0||(D.forEach(function(P){C=C.concat(m.pairiteration(P.left,P.right,b))}),C=C.filter(function(P,U){return C.indexOf(P)===U})),C},getccenter:function(l,u,p){var v=u.x-l.x,h=u.y-l.y,g=p.x-u.x,b=p.y-u.y,y=v*n(d)-h*e(d),T=v*e(d)+h*n(d),D=g*n(d)-b*e(d),C=g*e(d)+b*n(d),P=(l.x+u.x)/2,U=(l.y+u.y)/2,E=(u.x+p.x)/2,L=(u.y+p.y)/2,A=P+y,O=U+T,R=E+D,I=L+C,z=m.lli8(P,U,A,O,E,L,R,I),H=m.dist(z,l),Z=i(l.y-z.y,l.x-z.x),Q=i(u.y-z.y,u.x-z.x),$=i(p.y-z.y,p.x-z.x),B;return Z<$?((Z>Q||Q>$)&&(Z+=c),Z>$&&(B=$,$=Z,Z=B)):$<Q&&Q<Z?(B=$,$=Z,Z=B):$+=c,z.s=Z,z.e=$,z.r=H,z},numberSort:function(l,u){return l-u}};At.exports=m})()),At.exports}var Pt={exports:{}},sn;function $r(){return sn||(sn=1,(function(){var t=$n(),n=function(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)};n.prototype={valueOf:function(){return this.toString()},toString:function(){return"["+this.curves.map(function(e){return t.pointsToString(e.points)}).join(", ")+"]"},addCurve:function(e){this.curves.push(e),this._3d=this._3d||e._3d},length:function(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})},curve:function(e){return this.curves[e]},bbox:function(){for(var e=this.curves,r=e[0].bbox(),i=1;i<e.length;i++)t.expandbox(r,e[i].bbox());return r},offset:function(e){var r=[];return this.curves.forEach(function(i){r=r.concat(i.offset(e))}),new n(r)}},Pt.exports=n})()),Pt.exports}var Ft,un;function kr(){if(un)return Ft;un=1;function t(n){n=n.replace(/,/g," ").replace(/-/g," - ").replace(/-\s+/g,"-").replace(/([a-zA-Z])/g," $1 ");var e=n.replace(/([a-zA-Z])\s?/g,"|$1").split("|"),r=e.length,i,a,s,f,o=[],c,d,x=0,S=0,w=0,F=0,m=0,l=0,u=0,p=0,v="";for(i=1;i<r;i++)if(a=e[i],s=a.substring(0,1),f=s.toLowerCase(),o=a.replace(s,"").trim().split(" "),o=o.filter(function(h){return h!==""}).map(parseFloat),c=o.length,f==="m"){if(v+="M ",s==="m"?(w+=o[0],F+=o[1]):(w=o[0],F=o[1]),x=w,S=F,v+=w+" "+F+" ",c>2)for(d=0;d<c;d+=2)s==="m"?(w+=o[d],F+=o[d+1]):(w=o[d],F=o[d+1]),v+=["L",w,F,""].join(" ")}else if(f==="l")for(d=0;d<c;d+=2)s==="l"?(w+=o[d],F+=o[d+1]):(w=o[d],F=o[d+1]),v+=["L",w,F,""].join(" ");else if(f==="h")for(d=0;d<c;d++)s==="h"?w+=o[d]:w=o[d],v+=["L",w,F,""].join(" ");else if(f==="v")for(d=0;d<c;d++)s==="v"?F+=o[d]:F=o[d],v+=["L",w,F,""].join(" ");else if(f==="q")for(d=0;d<c;d+=4)s==="q"?(m=w+o[d],l=F+o[d+1],w+=o[d+2],F+=o[d+3]):(m=o[d],l=o[d+1],w=o[d+2],F=o[d+3]),v+=["Q",m,l,w,F,""].join(" ");else if(f==="t")for(d=0;d<c;d+=2)m=w+(w-m),l=F+(F-l),s==="t"?(w+=o[d],F+=o[d+1]):(w=o[d],F=o[d+1]),v+=["Q",m,l,w,F,""].join(" ");else if(f==="c")for(d=0;d<c;d+=6)s==="c"?(m=w+o[d],l=F+o[d+1],u=w+o[d+2],p=F+o[d+3],w+=o[d+4],F+=o[d+5]):(m=o[d],l=o[d+1],u=o[d+2],p=o[d+3],w=o[d+4],F=o[d+5]),v+=["C",m,l,u,p,w,F,""].join(" ");else if(f==="s")for(d=0;d<c;d+=4)m=w+(w-u),l=F+(F-p),s==="s"?(u=w+o[d],p=F+o[d+1],w+=o[d+2],F+=o[d+3]):(u=o[d],p=o[d+1],w=o[d+2],F=o[d+3]),v+=["C",m,l,u,p,w,F,""].join(" ");else f==="z"&&(v+="Z ",w=x,F=S);return v.trim()}return Ft=t,Ft}var Ot,ln;function Mr(){if(ln)return Ot;ln=1;var t=kr(),n={x:!1,y:!1};function e(i,a,s){if(a!=="Z"){if(a==="M"){n={x:s[0],y:s[1]};return}var f=[!1,n.x,n.y].concat(s),o=i.bind.apply(i,f),c=new o,d=s.slice(-2);return n={x:d[0],y:d[1]},c}}function r(i,a){for(var s=t(a).split(" "),f,o=new RegExp("[MLCQZ]",""),c,d,x=[],S={C:6,Q:4,L:2,M:2};s.length;)f=s.splice(0,1)[0],o.test(f)&&(d=s.splice(0,S[f]).map(parseFloat),c=e(i,f,d),c&&x.push(c));return new i.PolyBezier(x)}return Ot=r,Ot}var fn;function kn(){return fn||(fn=1,(function(){var t=Math.abs,n=Math.min,e=Math.max,r=Math.cos,i=Math.sin,a=Math.acos,s=Math.sqrt,f=Math.PI,o={x:0,y:0,z:0},c=$n(),d=$r(),x=function(m){var l=m&&m.forEach?m:[].slice.call(arguments),u=!1;if(typeof l[0]=="object"){u=l.length;var p=[];l.forEach(function(P){["x","y","z"].forEach(function(U){typeof P[U]<"u"&&p.push(P[U])})}),l=p}var v=!1,h=l.length;if(u){if(u>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");v=!0}}else if(h!==6&&h!==8&&h!==9&&h!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");var g=!v&&(h===9||h===12)||m&&m[0]&&typeof m[0].z<"u";this._3d=g;for(var b=[],y=0,T=g?3:2;y<h;y+=T){var D={x:l[y],y:l[y+1]};g&&(D.z=l[y+2]),b.push(D)}this.order=b.length-1,this.points=b;var C=["x","y"];g&&C.push("z"),this.dims=C,this.dimlen=C.length,(function(P){for(var U=P.order,E=P.points,L=c.align(E,{p1:E[0],p2:E[U]}),A=0;A<L.length;A++)if(t(L[A].y)>1e-4){P._linear=!1;return}P._linear=!0})(this),this._t1=0,this._t2=1,this.update()},S=Mr();x.SVGtoBeziers=function(m){return S(x,m)};function w(m,l,u,p,v){typeof v>"u"&&(v=.5);var h=c.projectionratio(v,m),g=1-h,b={x:h*l.x+g*p.x,y:h*l.y+g*p.y},y=c.abcratio(v,m),T={x:u.x+(u.x-b.x)/y,y:u.y+(u.y-b.y)/y};return{A:T,B:u,C:b}}x.quadraticFromPoints=function(m,l,u,p){if(typeof p>"u"&&(p=.5),p===0)return new x(l,l,u);if(p===1)return new x(m,l,l);var v=w(2,m,l,u,p);return new x(m,v.A,u)},x.cubicFromPoints=function(m,l,u,p,v){typeof p>"u"&&(p=.5);var h=w(3,m,l,u,p);typeof v>"u"&&(v=c.dist(l,h.C));var g=v*(1-p)/p,b=c.dist(m,u),y=(u.x-m.x)/b,T=(u.y-m.y)/b,D=v*y,C=v*T,P=g*y,U=g*T,E={x:l.x-D,y:l.y-C},L={x:l.x+P,y:l.y+U},A=h.A,O={x:A.x+(E.x-A.x)/(1-p),y:A.y+(E.y-A.y)/(1-p)},R={x:A.x+(L.x-A.x)/p,y:A.y+(L.y-A.y)/p},I={x:m.x+(O.x-m.x)/p,y:m.y+(O.y-m.y)/p},z={x:u.x+(R.x-u.x)/(1-p),y:u.y+(R.y-u.y)/(1-p)};return new x(m,I,z,u)};var F=function(){return c};x.getUtils=F,x.PolyBezier=d,x.prototype={getUtils:F,valueOf:function(){return this.toString()},toString:function(){return c.pointsToString(this.points)},toSVG:function(m){if(this._3d)return!1;for(var l=this.points,u=l[0].x,p=l[0].y,v=["M",u,p,this.order===2?"Q":"C"],h=1,g=l.length;h<g;h++)v.push(l[h].x),v.push(l[h].y);return v.join(" ")},setRatios:function(m){if(m.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=m,this._lut=[]},verify:function(){var m=this.coordDigest();m!==this._print&&(this._print=m,this.update())},coordDigest:function(){return this.points.map(function(m,l){return""+l+m.x+m.y+(m.z?m.z:0)}).join("")},update:function(m){this._lut=[],this.dpoints=c.derive(this.points,this._3d),this.computedirection()},computedirection:function(){var m=this.points,l=c.angle(m[0],m[this.order],m[1]);this.clockwise=l>0},length:function(){return c.length(this.derivative.bind(this))},_lut:[],getLUT:function(m){if(this.verify(),m=m||100,this._lut.length===m)return this._lut;this._lut=[],m--;for(var l=0;l<=m;l++)this._lut.push(this.compute(l/m));return this._lut},on:function(m,l){l=l||5;for(var u=this.getLUT(),p=[],v,h=0,g=0;g<u.length;g++)v=u[g],c.dist(v,m)<l&&(p.push(v),h+=g/u.length);return p.length?h/=p.length:!1},project:function(m){var l=this.getLUT(),u=l.length-1,p=c.closest(l,m),v=p.mdist,h=p.mpos,g,b,y,T,D=(h-1)/u,C=(h+1)/u,P=.1/u;for(v+=1,b=D,g=b;b<C+P;b+=P)y=this.compute(b),T=c.dist(m,y),T<v&&(v=T,g=b);return y=this.compute(g),y.t=g,y.d=v,y},get:function(m){return this.compute(m)},point:function(m){return this.points[m]},compute:function(m){return this.ratios?c.computeWithRatios(m,this.points,this.ratios,this._3d):c.compute(m,this.points,this._3d,this.ratios)},raise:function(){for(var m=this.points,l=[m[0]],u,p=m.length,v,h,u=1;u<p;u++)v=m[u],h=m[u-1],l[u]={x:(p-u)/p*v.x+u/p*h.x,y:(p-u)/p*v.y+u/p*h.y};return l[p]=m[p-1],new x(l)},derivative:function(m){var l=1-m,u,p,v=0,h=this.dpoints[0];this.order===2&&(h=[h[0],h[1],o],u=l,p=m),this.order===3&&(u=l*l,p=l*m*2,v=m*m);var g={x:u*h[0].x+p*h[1].x+v*h[2].x,y:u*h[0].y+p*h[1].y+v*h[2].y};return this._3d&&(g.z=u*h[0].z+p*h[1].z+v*h[2].z),g},curvature:function(m){return c.curvature(m,this.points,this._3d)},inflections:function(){return c.inflections(this.points)},normal:function(m){return this._3d?this.__normal3(m):this.__normal2(m)},__normal2:function(m){var l=this.derivative(m),u=s(l.x*l.x+l.y*l.y);return{x:-l.y/u,y:l.x/u}},__normal3:function(m){var l=this.derivative(m),u=this.derivative(m+.01),p=s(l.x*l.x+l.y*l.y+l.z*l.z),v=s(u.x*u.x+u.y*u.y+u.z*u.z);l.x/=p,l.y/=p,l.z/=p,u.x/=v,u.y/=v,u.z/=v;var h={x:u.y*l.z-u.z*l.y,y:u.z*l.x-u.x*l.z,z:u.x*l.y-u.y*l.x},g=s(h.x*h.x+h.y*h.y+h.z*h.z);h.x/=g,h.y/=g,h.z/=g;var b=[h.x*h.x,h.x*h.y-h.z,h.x*h.z+h.y,h.x*h.y+h.z,h.y*h.y,h.y*h.z-h.x,h.x*h.z-h.y,h.y*h.z+h.x,h.z*h.z],y={x:b[0]*l.x+b[1]*l.y+b[2]*l.z,y:b[3]*l.x+b[4]*l.y+b[5]*l.z,z:b[6]*l.x+b[7]*l.y+b[8]*l.z};return y},hull:function(m){var l=this.points,u=[],p,v=[],h=0,g=0,b=0;for(v[h++]=l[0],v[h++]=l[1],v[h++]=l[2],this.order===3&&(v[h++]=l[3]);l.length>1;){for(u=[],g=0,b=l.length-1;g<b;g++)p=c.lerp(m,l[g],l[g+1]),v[h++]=p,u.push(p);l=u}return v},split:function(m,l){if(m===0&&l)return this.split(l).left;if(l===1)return this.split(m).right;var u=this.hull(m),p={left:this.order===2?new x([u[0],u[3],u[5]]):new x([u[0],u[4],u[7],u[9]]),right:this.order===2?new x([u[5],u[4],u[2]]):new x([u[9],u[8],u[6],u[3]]),span:u};if(p.left._t1=c.map(0,0,1,this._t1,this._t2),p.left._t2=c.map(m,0,1,this._t1,this._t2),p.right._t1=c.map(m,0,1,this._t1,this._t2),p.right._t2=c.map(1,0,1,this._t1,this._t2),!l)return p;l=c.map(l,m,1,0,1);var v=p.right.split(l);return v.left},extrema:function(){var m=this.dims,l={},u=[],p,v;return m.forEach(function(h){v=function(g){return g[h]},p=this.dpoints[0].map(v),l[h]=c.droots(p),this.order===3&&(p=this.dpoints[1].map(v),l[h]=l[h].concat(c.droots(p))),l[h]=l[h].filter(function(g){return g>=0&&g<=1}),u=u.concat(l[h].sort(c.numberSort))}.bind(this)),u=u.sort(c.numberSort).filter(function(h,g){return u.indexOf(h)===g}),l.values=u,l},bbox:function(){var m=this.extrema(),l={};return this.dims.forEach(function(u){l[u]=c.getminmax(this,u,m[u])}.bind(this)),l},overlaps:function(m){var l=this.bbox(),u=m.bbox();return c.bboxoverlap(l,u)},offset:function(m,l){if(typeof l<"u"){var u=this.get(m),p=this.normal(m),v={c:u,n:p,x:u.x+p.x*l,y:u.y+p.y*l};return this._3d&&(v.z=u.z+p.z*l),v}if(this._linear){var h=this.normal(0),g=this.points.map(function(y){var T={x:y.x+m*h.x,y:y.y+m*h.y};return y.z&&p.z&&(T.z=y.z+m*h.z),T});return[new x(g)]}var b=this.reduce();return b.map(function(y){return y._linear?y.offset(m)[0]:y.scale(m)})},simple:function(){if(this.order===3){var m=c.angle(this.points[0],this.points[3],this.points[1]),l=c.angle(this.points[0],this.points[3],this.points[2]);if(m>0&&l<0||m<0&&l>0)return!1}var u=this.normal(0),p=this.normal(1),v=u.x*p.x+u.y*p.y;this._3d&&(v+=u.z*p.z);var h=t(a(v));return h<f/3},reduce:function(){var m,l=0,u=0,p=.01,v,h=[],g=[],b=this.extrema().values;for(b.indexOf(0)===-1&&(b=[0].concat(b)),b.indexOf(1)===-1&&b.push(1),l=b[0],m=1;m<b.length;m++)u=b[m],v=this.split(l,u),v._t1=l,v._t2=u,h.push(v),l=u;return h.forEach(function(y){for(l=0,u=0;u<=1;)for(u=l+p;u<=1+p;u+=p)if(v=y.split(l,u),!v.simple()){if(u-=p,t(l-u)<p)return[];v=y.split(l,u),v._t1=c.map(l,0,1,y._t1,y._t2),v._t2=c.map(u,0,1,y._t1,y._t2),g.push(v),l=u;break}l<1&&(v=y.split(l,1),v._t1=c.map(l,0,1,y._t1,y._t2),v._t2=y._t2,g.push(v))}),g},scale:function(m){var l=this.order,u=!1;if(typeof m=="function"&&(u=m),u&&l===2)return this.raise().scale(u);var p=this.clockwise,v=u?u(0):m,h=u?u(1):m,g=[this.offset(0,10),this.offset(1,10)],b=c.lli4(g[0],g[0].c,g[1],g[1].c);if(!b)throw new Error("cannot scale this curve. Try reducing it first.");var y=this.points,T=[];return[0,1].forEach(function(D){var C=T[D*l]=c.copy(y[D*l]);C.x+=(D?h:v)*g[D].n.x,C.y+=(D?h:v)*g[D].n.y}.bind(this)),u?([0,1].forEach(function(D){if(!(this.order===2&&D)){var C=y[D+1],P={x:C.x-b.x,y:C.y-b.y},U=u?u((D+1)/l):m;u&&!p&&(U=-U);var E=s(P.x*P.x+P.y*P.y);P.x/=E,P.y/=E,T[D+1]={x:C.x+U*P.x,y:C.y+U*P.y}}}.bind(this)),new x(T)):([0,1].forEach(function(D){if(!(this.order===2&&D)){var C=T[D*l],P=this.derivative(D),U={x:C.x+P.x,y:C.y+P.y};T[D+1]=c.lli4(C,U,b,y[D+1])}}.bind(this)),new x(T))},outline:function(m,l,u,p){l=typeof l>"u"?m:l;var v=this.reduce(),h=v.length,g=[],b=[],y,T=0,D=this.length(),C=typeof u<"u"&&typeof p<"u";function P(H,Z,Q,$,B){return function(N){var G=$/Q,j=($+B)/Q,V=Z-H;return c.map(N,0,1,H+G*V,H+j*V)}}v.forEach(function(H){z=H.length(),C?(g.push(H.scale(P(m,u,D,T,z))),b.push(H.scale(P(-l,-p,D,T,z)))):(g.push(H.scale(m)),b.push(H.scale(-l))),T+=z}),b=b.map(function(H){return y=H.points,y[3]?H.points=[y[3],y[2],y[1],y[0]]:H.points=[y[2],y[1],y[0]],H}).reverse();var U=g[0].points[0],E=g[h-1].points[g[h-1].points.length-1],L=b[h-1].points[b[h-1].points.length-1],A=b[0].points[0],O=c.makeline(L,U),R=c.makeline(E,A),I=[O].concat(g).concat([R]).concat(b),z=I.length;return new d(I)},outlineshapes:function(m,l,u){l=l||m;for(var p=this.outline(m,l).curves,v=[],h=1,g=p.length;h<g/2;h++){var b=c.makeshape(p[h],p[g-h],u);b.startcap.virtual=h>1,b.endcap.virtual=h<g/2-1,v.push(b)}return v},intersects:function(m,l){return m?m.p1&&m.p2?this.lineIntersects(m):(m instanceof x&&(m=m.reduce()),this.curveintersects(this.reduce(),m,l)):this.selfintersects(l)},lineIntersects:function(m){var l=n(m.p1.x,m.p2.x),u=n(m.p1.y,m.p2.y),p=e(m.p1.x,m.p2.x),v=e(m.p1.y,m.p2.y),h=this;return c.roots(this.points,m).filter(function(g){var b=h.get(g);return c.between(b.x,l,p)&&c.between(b.y,u,v)})},selfintersects:function(m){var l=this.reduce(),u,p=l.length-2,v=[],h,g,b;for(u=0;u<p;u++)g=l.slice(u,u+1),b=l.slice(u+2),h=this.curveintersects(g,b,m),v=v.concat(h);return v},curveintersects:function(m,l,u){var p=[];m.forEach(function(h){l.forEach(function(g){h.overlaps(g)&&p.push({left:h,right:g})})});var v=[];return p.forEach(function(h){var g=c.pairiteration(h.left,h.right,u);g.length>0&&(v=v.concat(g))}),v},arcs:function(m){m=m||.5;var l=[];return this._iterate(m,l)},_error:function(m,l,u,p){var v=(p-u)/4,h=this.get(u+v),g=this.get(p-v),b=c.dist(m,l),y=c.dist(m,h),T=c.dist(m,g);return t(y-b)+t(T-b)},_iterate:function(m,l){var u=0,p=1,v;do{v=0,p=1;var h=this.get(u),g,b,y,T,D=!1,C=!1,P,U=p,E=1;do{C=D,T=y,U=(u+p)/2,g=this.get(U),b=this.get(p),y=c.getccenter(h,g,b),y.interval={start:u,end:p};var L=this._error(y,h,u,p);if(D=L<=m,P=C&&!D,P||(E=p),D){if(p>=1){if(y.interval.end=E=1,T=y,p>1){var A={x:y.x+y.r*r(y.e),y:y.y+y.r*i(y.e)};y.e+=c.angle({x:y.x,y:y.y},A,this.get(1))}break}p=p+(p-u)/2}else p=U}while(!P&&v++<100);if(v>=100)break;T=T||y,l.push(T),u=E}while(p<1);return l}},Et.exports=x})()),Et.exports}var Lt,cn;function Jr(){return cn||(cn=1,Lt=kn()),Lt}var Ut,pn;function ei(){if(pn)return Ut;pn=1;var t;(function(e){e.version="debug",e.environmentTypes={BrowserUI:"browser",NodeJs:"node",WebWorker:"worker",Unknown:"unknown"};var r=Number.EPSILON||Math.pow(2,-52);function i(){var C=function(){return typeof self<"u"?self:typeof Jt<"u"?Jt:this||{}},P=C();return P.self&&P.WorkerGlobalScope&&!P.window?e.environmentTypes.WebWorker:P.window&&P.document?e.environmentTypes.BrowserUI:P.global&&P.process?e.environmentTypes.NodeJs:e.environmentTypes.Unknown}e.environment=i(),e.unitType={Centimeter:"cm",Foot:"foot",Inch:"inch",Meter:"m",Millimeter:"mm"};function a(C,P){var U=C.indexOf(P);return U<0?[C]:U>0?[C.substr(0,U),C.substr(U+1)]:["",C]}function s(C){var P=C.toString();return P.indexOf("e")>0&&(P=C.toFixed(20).match(/.*[^(0+$)]/)[0]),a(P,".")}e.splitDecimal=s;function f(C,P){if(P===void 0&&(P=1e-7),C%1===0)return C;var U=1/P;return Math.round((C+r)*U)/U}e.round=f;function o(C){for(var P=[],U=0;U<C.length;U++){var E=C[U],L;U%2===0?L=(U>0?".":"")+E:L=JSON.stringify([E]),P.push(L)}return P.join("")}e.createRouteKey=o;function c(C,P){if(!C||!P)return null;var U;Array.isArray(P)?U=P:U=JSON.parse(P);for(var E=U.slice(),L=C,A=C.origin||[0,0];E.length;){var O=E.shift();if(L=L[O],!L)return null;L.origin&&E.length&&(A=e.point.add(A,L.origin))}return{result:L,offset:A}}e.travel=c;var d=jr();function x(C){return d(C)}e.cloneObject=x;function S(C,P){if(C&&P){for(var U in P)if(P.hasOwnProperty(U)&&typeof P[U]<"u"){if(U==="__proto__"||U==="constructor"||U==="prototype")continue;C[U]=P[U]}}return C}e.extendObject=S;function w(C){return typeof C=="function"}e.isFunction=w;function F(C){return typeof C=="number"}e.isNumber=F;function m(C){return typeof C=="object"}e.isObject=m;function l(C){return C&&Array.isArray(C)&&C.length==2&&F(C[0])&&F(C[1])}e.isPoint=l;function u(C){return C&&C.type&&l(C.origin)}e.isPath=u;function p(C){return u(C)&&C.type==e.pathType.Line&&l(C.end)}e.isPathLine=p;function v(C){return u(C)&&C.type==e.pathType.Circle&&F(C.radius)}e.isPathCircle=v;function h(C){return u(C)&&C.type==e.pathType.Arc&&F(C.radius)&&F(C.startAngle)&&F(C.endAngle)}e.isPathArc=h;function g(C){return h(C)&&m(C.bezierData)&&F(C.bezierData.startT)&&F(C.bezierData.endT)}e.isPathArcInBezierCurve=g,e.pathType={Line:"line",Circle:"circle",Arc:"arc",BezierSeed:"bezier-seed"};function b(C){return C&&(C.paths||C.models)}e.isModel=b;function y(C){var P=C;return P&&P.links&&Array.isArray(P.links)&&F(P.pathLength)}e.isChain=y;var T=(function(){function C(P,U){this._module=P,this.$initial=U;for(var E in this._module)this._shadow(E);this.$result=U}return C.prototype._shadow=function(P){var U=this;this[P]=function(){return U._apply(U._module[P],arguments)}},C.prototype._apply=function(P,U){var E=[].slice.call(U);return E.unshift(this.$result),this.$result=P.apply(void 0,E),this},C.prototype.$reset=function(){return this.$result=this.$initial,this},C})();function D(C){if(b(C))return new T(e.model,C);if(u(C))return new T(e.path,C);if(l(C))return new T(e.point,C)}e.$=D})(t||(t={})),Ut=t;var t;(function(e){(function(r){function i(h){return e.splitDecimal(h)[1]}function a(h,g){return g?+(e.splitDecimal(h)[0]+"."+g):h}function s(h,g){return h<0&&g<0||h>0&&g>0?a(g,i(h)):g}function f(h){var g=Math.floor(h/360);if(g===0)return h;var b=h-360*g;return s(h,b)}r.noRevolutions=f;function o(h){return f(h)*Math.PI/180}r.toRadians=o;function c(h){return h*180/Math.PI}r.toDegrees=c;function d(h){if(h.endAngle<h.startAngle){var g=Math.ceil((h.startAngle-h.endAngle)/360),b=g*360+h.endAngle;return s(h.endAngle,b)}return h.endAngle}r.ofArcEnd=d;function x(h,g){return g===void 0&&(g=.5),h.startAngle+S(h)*g}r.ofArcMiddle=x;function S(h){var g=r.ofArcEnd(h),b=g-h.startAngle;return e.round(b)>360?f(b):b}r.ofArcSpan=S;function w(h){return f(c(m(h.origin,h.end)))}r.ofLineInDegrees=w;function F(h,g){return c(m(h,g))}r.ofPointInDegrees=F;function m(h,g){var b=e.point.subtract(g,h),y=b[0],T=b[1];return Math.atan2(-T,-y)+Math.PI}r.ofPointInRadians=m;function l(h,g,b){return b&&(h=360-h),g&&(h=(h<180?180:540)-h),h}r.mirror=l;var u={};u[e.pathType.Arc]=function(h,g,b){var y=g!=b,T=y?h.endAngle-90:h.startAngle+90,D=e.point.fromArc(h)[y?1:0],C=e.point.rotate(e.point.add(D,[h.radius,0]),T,D);return new e.paths.Line(g?[C,D]:[D,C])},u[e.pathType.Line]=function(h,g,b){return b?new e.paths.Line(h.end,h.origin):h};function p(h,g){if(h){var b=h.walkedPath.pathContext,y=u[b.type];if(y)return y(b,g,h.reversed)}}function v(h,g){if(arguments.length<2)return null;var b=[h,g].map(function(T,D){return p(T,D===0)}),y=f(w(b[1])-w(b[0]));return y>180&&(y-=360),y}r.ofChainLinkJoint=v})(e.angle||(e.angle={}))})(t||(t={}));var t;(function(e){(function(r){function i(P,U,E){var L=s(P);if(!U)return L;for(var A=2;A--;)E?L[A]-=U[A]:L[A]+=U[A];return L}r.add=i;function a(P,U){function E(L){return(P[L]+U[L])/2}return[E(0),E(1)]}r.average=a;function s(P){return P?[P[0],P[1]]:r.zero()}r.clone=s;function f(P,U){for(var E={index:0,distance:-1},L=0;L<U.length;L++){var A=e.measure.pointDistance(P,U[L]);(E.distance==-1||A<E.distance)&&(E.distance=A,E.index=L)}return U[E.index]}r.closest=f;var o={};o[Math.PI/2]=!0,o[3*Math.PI/2]=!0;var c={};c[Math.PI]=!0,c[2*Math.PI]=!0;function d(P,U){return[P in o?0:e.round(U*Math.cos(P)),P in c?0:e.round(U*Math.sin(P))]}r.fromPolar=d;function x(P,U){return i(U.origin,d(e.angle.toRadians(P),U.radius))}r.fromAngleOnCircle=x;function S(P){return[x(P.startAngle,P),x(P.endAngle,P)]}r.fromArc=S;var w={};w[e.pathType.Arc]=function(P){return r.fromArc(P)},w[e.pathType.Line]=function(P){return[P.origin,P.end]},w[e.pathType.BezierSeed]=w[e.pathType.Line];function F(P,U){var E=null,L=w[P.type];return L&&(E=L(P),U&&(E=E.map(function(A){return i(A,U)}))),E}r.fromPathEnds=F;function m(P,U){var E=P.origin[0],L=U.slope*E+U.yIntercept;return[E,L]}function l(P,U,E){E===void 0&&(E={});var L=e.measure.lineSlope(P),A=e.measure.lineSlope(U);if(e.measure.isSlopeParallel(L,A))return e.measure.isSlopeEqual(L,A)&&(E.out_AreOverlapped=e.measure.isLineOverlapping(P,U,E.excludeTangents)),null;var O;if(!L.hasSlope)O=m(P,A);else if(!A.hasSlope)O=m(U,L);else{var R=(A.yIntercept-L.yIntercept)/(L.slope-A.slope),I=L.slope*R+L.yIntercept;O=[R,I]}return O}r.fromSlopeIntersection=l;function u(P,U){return r.add(P.origin,r.fromPolar(e.angle.toRadians(U),P.radius))}var p={};p[e.pathType.Arc]=function(P,U){var E=e.angle.ofArcMiddle(P,U);return u(P,E)},p[e.pathType.Circle]=function(P,U){return u(P,360*U)},p[e.pathType.Line]=function(P,U){function E(L,A){return L+(A-L)*U}return[E(P.origin[0],P.end[0]),E(P.origin[1],P.end[1])]},p[e.pathType.BezierSeed]=function(P,U){return e.models.BezierCurve.computePoint(P,U)};function v(P,U){U===void 0&&(U=.5);var E=null,L=p[P.type];return L&&(E=L(P,U)),E}r.middle=v;function h(P,U,E){var L=s(P);return U&&(L[0]=-L[0]),E&&(L[1]=-L[1]),L}r.mirror=h;function g(P,U){return[e.round(P[0],U),e.round(P[1],U)]}r.rounded=g;function b(P,U,E){E===void 0&&(E=[0,0]);var L=e.angle.ofPointInRadians(E,P),A=e.measure.pointDistance(E,P),O=d(L+e.angle.toRadians(U),A);return i(E,O)}r.rotate=b;function y(P,U){for(var E=s(P),L=2;L--;)E[L]*=U;return E}r.scale=y;function T(P,U,E){return[P[0]*U,P[1]*E]}r.distort=T;function D(P,U){return i(P,U,!0)}r.subtract=D;function C(){return[0,0]}r.zero=C})(e.point||(e.point={}))})(t||(t={}));var t;(function(e){(function(r){function i(A,O,R,I){return I===void 0&&(I=!1),e.model.addPath(O,A,R,I),A}r.addTo=i;function a(A,O){A&&O&&typeof A.layer<"u"&&(O.layer=A.layer),A&&O&&"bezierData"in A&&(O.bezierData=A.bezierData)}var s={};s[e.pathType.Circle]=function(A,O,R){O.radius=A.radius},s[e.pathType.Arc]=function(A,O,R){s[e.pathType.Circle](A,O,R),O.startAngle=A.startAngle,O.endAngle=A.endAngle},s[e.pathType.Line]=function(A,O,R){O.end=e.point.add(A.end,R)},s[e.pathType.BezierSeed]=function(A,O,R){s[e.pathType.Line](A,O,R),O.controls=A.controls.map(function(I){return e.point.add(I,R)})};function f(A,O){var R={type:A.type,origin:e.point.add(A.origin,O)},I=s[A.type];return I&&I(A,R,O),a(A,R),R}r.clone=f;function o(A,O){var R=s[A.type];return R&&(O.origin=e.point.clone(A.origin),R(A,O)),a(A,O),A}r.copyProps=o;var c={};c[e.pathType.Line]=function(A,O,R,I){return new e.paths.Line(O,e.point.mirror(A.end,R,I))},c[e.pathType.Circle]=function(A,O,R,I){return new e.paths.Circle(O,A.radius)},c[e.pathType.Arc]=function(A,O,R,I){var z=e.angle.mirror(A.startAngle,R,I),H=e.angle.mirror(e.angle.ofArcEnd(A),R,I),Z=R!=I;return new e.paths.Arc(O,A.radius,Z?H:z,Z?z:H)},c[e.pathType.BezierSeed]=function(A,O,R,I){var z=c[e.pathType.Line](A,O,R,I);return z.type=e.pathType.BezierSeed,z.controls=A.controls.map(function(H){return e.point.mirror(H,R,I)}),z};function d(A,O){return A.layer=O,A}r.layer=d;function x(A,O,R){var I=null;if(A){var z=e.point.mirror(A.origin,O,R),H=c[A.type];H&&(I=H(A,z,O,R))}return a(A,I),I}r.mirror=x;var S={};S[e.pathType.Line]=function(A,O){var R=e.point.subtract(A.end,A.origin);A.end=e.point.add(O,R)};function w(A,O){if(A){var R=S[A.type];R&&R(A,O),A.origin=O}return A}r.move=w;var F={};F[e.pathType.Line]=function(A,O,R){A.end=e.point.add(A.end,O,R)},F[e.pathType.BezierSeed]=function(A,O,R){F[e.pathType.Line](A,O,R),A.controls=A.controls.map(function(I){return e.point.add(I,O,R)})};function m(A,O,R){if(A&&O){A.origin=e.point.add(A.origin,O,R);var I=F[A.type];I&&I(A,O,R)}return A}r.moveRelative=m;function l(A,O,R){var I=!1;function z(H,Z){O[Z]&&m(H,O[Z],I)}A.map(z),R(),I=!0,A.map(z)}r.moveTemporary=l;var u={};u[e.pathType.Line]=function(A,O,R){A.end=e.point.rotate(A.end,O,R)},u[e.pathType.Arc]=function(A,O,R){A.startAngle=e.angle.noRevolutions(A.startAngle+O),A.endAngle=e.angle.noRevolutions(A.endAngle+O)},u[e.pathType.BezierSeed]=function(A,O,R){u[e.pathType.Line](A,O,R),A.controls=A.controls.map(function(I){return e.point.rotate(I,O,R)})};function p(A,O,R){if(R===void 0&&(R=[0,0]),!A||!O)return A;A.origin=e.point.rotate(A.origin,O,R);var I=u[A.type];return I&&I(A,O,R),A}r.rotate=p;var v={};v[e.pathType.Line]=function(A,O){A.end=e.point.scale(A.end,O)},v[e.pathType.BezierSeed]=function(A,O){v[e.pathType.Line](A,O),A.controls=A.controls.map(function(R){return e.point.scale(R,O)})},v[e.pathType.Circle]=function(A,O){A.radius*=O},v[e.pathType.Arc]=v[e.pathType.Circle];function h(A,O){if(!A||O===1||!O)return A;A.origin=e.point.scale(A.origin,O);var R=v[A.type];return R&&R(A,O),A}r.scale=h;var g={};g[e.pathType.Arc]=function(A,O,R){return new e.models.EllipticArc(A,O,R)},g[e.pathType.Circle]=function(A,O,R){var I=new e.models.Ellipse(A.radius*O,A.radius*R);return I.origin=e.point.distort(A.origin,O,R),I},g[e.pathType.Line]=function(A,O,R){return new e.paths.Line([A.origin,A.end].map(function(I){return e.point.distort(I,O,R)}))},g[e.pathType.BezierSeed]=function(A,O,R){var I=e.point.distort;return{type:e.pathType.BezierSeed,origin:I(A.origin,O,R),controls:A.controls.map(function(z){return I(z,O,R)}),end:I(A.end,O,R)}};function b(A,O,R){if(!A||!O||!R)return null;var I=g[A.type];if(I){var z=I(A,O,R);return typeof A.layer<"u"&&(z.layer=A.layer),z}return null}r.distort=b;function y(A,O,R,I){var z=e.point.fromSlopeIntersection(A,O);if(z){let Q=function($,B){var N;B?N=$.origin:N=$.end,N[0]=z[0],N[1]=z[1]};var H=[A,O],Z=[R,I];arguments.length===2&&H.forEach(function($,B){Z[B]=e.point.closest(z,[$.origin,$.end])===$.origin}),H.forEach(function($,B){Q($,Z[B])})}return z}r.converge=y;var T={};T[e.pathType.Arc]=function(A,O,R,I){var z=e.angle.ofArcSpan(A),H=(O+R)*z/O-z;I?A.startAngle-=H:A.endAngle+=H},T[e.pathType.Circle]=function(A,O,R,I){A.radius*=(O+R)/O},T[e.pathType.Line]=function(A,O,R,I){var z=e.point.scale(e.point.subtract(A.end,A.origin),R/O);I?A.origin=e.point.subtract(A.origin,z):A.end=e.point.add(A.end,z)};function D(A,O,R){if(R===void 0&&(R=!1),!A||!O)return null;var I=T[A.type];if(I){var z=e.measure.pathLength(A);return!z||-O>=z?null:(I(A,z,O,R),A)}return null}r.alterLength=D;function C(A,O){if(O==1)return[e.point.middle(A)];var R=[],I=O;A.type!=e.pathType.Circle&&I--;for(var z=0;z<O;z++)R.push(e.point.middle(A,z/I));return R}r.toPoints=C;var P={};P[e.pathType.Line]=function(A){return 2},P[e.pathType.Circle]=function(A,O){var R=e.measure.pathLength(A);return R?(O=O||R,Math.max(8,Math.ceil(R/(O||R)))):0},P[e.pathType.Arc]=function(A,O){var R=e.measure.pathLength(A);if(!R)return 0;var I=Math.ceil(e.angle.ofArcSpan(A)/45)+1;return Math.max(I,Math.ceil(R/(O||R)))};function U(A,O){if(A.type==e.pathType.BezierSeed){var R=new e.models.BezierCurve(A),I;return e.model.findChains(R,function(Z,Q,$){if(Z.length==1){var B=Z[0];switch(B.links[0].walkedPath.pathId){case"arc_0":case"line_0":break;default:e.chain.reverse(B)}I=e.chain.toKeyPoints(B)}else Q.length===1&&(I=U(Q[0].pathContext))}),I}else{var z=P[A.type];if(z){var H=z(A,O);if(H)return C(A,H)}}return[]}r.toKeyPoints=U;function E(A){var O=e.measure.pathExtents(A),R=e.point.average(O.high,O.low),I=e.point.subtract(A.origin||[0,0],R);return w(A,I),A}r.center=E;function L(A){var O=e.measure.pathExtents(A),R=e.point.subtract(A.origin||[0,0],O.low);return w(A,R),A}r.zero=L})(e.path||(e.path={}))})(t||(t={}));var t;(function(e){(function(r){var i={};i[e.pathType.Arc]=function(s,f){var o=e.angle.ofPointInDegrees(s.origin,f);if(e.measure.isAngleEqual(o,s.startAngle)||e.measure.isAngleEqual(o,s.endAngle))return null;function c(){for(var w=e.angle.noRevolutions(s.startAngle),F=w+e.angle.ofArcEnd(s)-s.startAngle,m=[0,1,-1],l=0;l<m.length;l++){var u=360*m[l];if(e.measure.isBetween(o+u,w,F,!0))return s.startAngle+o+u-w}return null}var d=c();if(d==null)return null;var x=s.endAngle;s.endAngle=d;var S=e.cloneObject(s);return S.startAngle=d,S.endAngle=x,S},i[e.pathType.Circle]=function(s,f){s.type=e.pathType.Arc;var o=s,c=e.angle.ofPointInDegrees(s.origin,f);return o.startAngle=c,o.endAngle=c+360,null},i[e.pathType.Line]=function(s,f){if(!e.measure.isBetweenPoints(f,s,!0))return null;var o=s.end;s.end=f;var c=e.cloneObject(s);return c.origin=f,c.end=o,c};function a(s,f){if(s&&f){var o=i[s.type];if(o){var c=o(s,f);return c&&"layer"in s&&(c.layer=s.layer),c}}return null}r.breakAtPoint=a})(e.path||(e.path={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function c(){for(var d=[],x=0;x<arguments.length;x++)d[x]=arguments[x];var S,w;function F(P){var U=e.angle.ofPointInDegrees(P,d[C?1:0]),E=e.angle.ofPointInDegrees(P,d[C?0:1]);return E<U&&(E+=360),{origin:P,startAngle:U,endAngle:E,size:E-U}}switch(d.length){case 5:var m=d[0],l=d[1];this.radius=d[2];var u=d[3],C=d[4],p,v=e.measure.pointDistance(m,l)/2;if(e.round(this.radius-v)<=0)this.radius=v,p=F(e.point.average(m,l));else{for(var h=(w=(S=e.path.intersection(new a(m,this.radius),new a(l,this.radius)))===null||S===void 0?void 0:S.intersectionPoints)!==null&&w!==void 0?w:[m,l],g=[],b=h.length;b--;)p=F(h[b]),g.length==0||p.size>g[0].size?g.push(p):g.unshift(p);var y=u?1:0;p=g[y]}this.origin=p.origin,this.startAngle=p.startAngle,this.endAngle=p.endAngle;break;case 4:this.origin=d[0],this.radius=d[1],this.startAngle=d[2],this.endAngle=d[3];break;case 3:if(e.isPoint(d[2])){a.apply(this,d);for(var T=[],D=0;D<3;D++)T.push(e.angle.ofPointInDegrees(this.origin,d[D]));this.startAngle=T[0],this.endAngle=T[2],e.measure.isBetweenArcAngles(T[1],this,!1)||(this.startAngle=T[2],this.endAngle=T[0]);break}case 2:var C=d[2];a.call(this,d[0],d[1]),this.startAngle=e.angle.ofPointInDegrees(this.origin,d[C?1:0]),this.endAngle=e.angle.ofPointInDegrees(this.origin,d[C?0:1]);break}this.type=e.pathType.Arc}return c})();r.Arc=i;var a=(function(){function c(){for(var d=[],x=0;x<arguments.length;x++)d[x]=arguments[x];switch(this.type=e.pathType.Circle,d.length){case 1:this.origin=[0,0],this.radius=d[0];break;case 2:e.isNumber(d[1])?(this.origin=d[0],this.radius=d[1]):(this.origin=e.point.average(d[0],d[1]),this.radius=e.measure.pointDistance(this.origin,d[0]));break;default:for(var S=[new s(d[0],d[1]),new s(d[1],d[2])],w=[],F=2;F--;){var m=e.point.middle(S[F]);w.push(e.path.rotate(S[F],90,m))}var l=e.point.fromSlopeIntersection(w[0],w[1]);if(l)this.origin=l,this.radius=e.measure.pointDistance(this.origin,d[0]);else throw"invalid parameters - attempted to construct a circle from 3 points on a line: "+JSON.stringify(d);break}}return c})();r.Circle=a;var s=(function(){function c(){for(var d=[],x=0;x<arguments.length;x++)d[x]=arguments[x];switch(this.type=e.pathType.Line,d.length){case 1:var S=d[0];this.origin=S[0],this.end=S[1];break;case 2:this.origin=d[0],this.end=d[1];break}}return c})();r.Line=s;var f=(function(){function c(d){var x=e.point.fromArc(d);this.type=e.pathType.Line,this.origin=x[0],this.end=x[1]}return c})();r.Chord=f;var o=(function(){function c(d,x,S){this.type=e.pathType.Line,this.origin=e.point.clone(d.origin),this.end=e.point.clone(d.end);var w=e.angle.ofLineInDegrees(this);function F(u){var p=e.point.add(d.origin,e.point.fromPolar(e.angle.toRadians(w+u),x));return{origin:p,nearness:e.measure.pointDistance(p,S)}}var m=[F(-90),F(90)],l=m[0].nearness<m[1].nearness?m[0].origin:m[1].origin;e.path.move(this,l)}return c})();r.Parallel=o})(e.paths||(e.paths={}))})(t||(t={}));var t;(function(e){(function(r){function i(E,L,A,O){return A||(A=e.point.zero()),O||(O=e.point.clone(A)),E.caption={text:L,anchor:new e.paths.Line(A,O)},E}r.addCaption=i;function a(E,L,A,O){O===void 0&&(O=!1);var R=O?A:w(E,A);return E.paths=E.paths||{},E.paths[R]=L,E}r.addPath=a;function s(E,L,A,O){O===void 0&&(O=!1);var R=O?A:S(E,A);return E.models=E.models||{},E.models[R]=L,E}r.addModel=s;function f(E,L,A,O){return O===void 0&&(O=!1),s(L,E,A,O),E}r.addTo=f;function o(E){return e.cloneObject(E)}r.clone=o;function c(E){var L=0;if(E.models)for(var A in E.models)L++;return L}r.countChildModels=c;function d(E){var L=[];function A(O,R,I){O.caption&&L.push({text:O.caption.text,anchor:e.path.clone(O.caption.anchor,e.point.add(O.origin,R)),layer:O.caption.anchor.layer||I})}return A(E,E.origin,E.layer),r.walk(E,{afterChildWalk:function(O){return A(O.childModel,O.offset,O.layer)}}),L}r.getAllCaptionsOffset=d;function x(E,L){if(!E)return L;for(var A=0,O=L;O in E;)A++,O=[L,A].join("_");return O}function S(E,L){return x(E.models,L)}r.getSimilarModelId=S;function w(E,L){return x(E.paths,L)}r.getSimilarPathId=w;function F(E,L){return E.layer=L,E}r.layer=F;function m(E,L){function A(O,R){if(O){var I=e.point.add(O.origin,R);if(O.type===e.models.BezierCurve.typeName&&e.path.moveRelative(O.seed,I),O.paths)for(var z in O.paths)e.path.moveRelative(O.paths[z],I);if(O.models)for(var z in O.models)A(O.models[z],I);O.caption&&e.path.moveRelative(O.caption.anchor,I),O.origin=e.point.zero()}}return A(E,L?e.point.subtract([0,0],L):[0,0]),L&&(E.origin=L),E}r.originate=m;function l(E,L,A){L===void 0&&(L=!0),A===void 0&&(A=!0);var O=e.measure.modelExtents(E),R=E.origin||[0,0];return L&&(R[0]-=O.center[0]),A&&(R[1]-=O.center[1]),E.origin=R,E}r.center=l;function u(E,L,A){var O={};if(!E)return null;if(E.origin&&(O.origin=e.point.mirror(E.origin,L,A)),E.type&&(O.type=E.type),"layer"in E&&(O.layer=E.layer),E.units&&(O.units=E.units),E.type===e.models.BezierCurve.typeName&&(O.type=e.models.BezierCurve.typeName,O.seed=e.path.mirror(E.seed,L,A)),E.paths){O.paths={};for(var R in E.paths){var I=E.paths[R];if(I){var z=e.path.mirror(I,L,A);z&&(O.paths[R]=z)}}}if(E.models){O.models={};for(var R in E.models){var H=E.models[R];if(H){var Z=u(H,L,A);Z&&(O.models[R]=Z)}}}return E.caption&&(O.caption=e.cloneObject(E.caption),O.caption.anchor=e.path.mirror(E.caption.anchor,L,A)),O}r.mirror=u;function p(E,L){return E.origin=e.point.clone(L),E}r.move=p;function v(E,L){return E&&(E.origin=e.point.add(E.origin||e.point.zero(),L)),E}r.moveRelative=v;function h(E,L){var A=[];P(E,{onPath:function(I){A.push(I)}});for(var O=0;O<A.length;O++){var R=A[O];delete R.modelContext.paths[R.pathId],R.modelContext.paths[L+R.pathId]=R.pathContext}return E}r.prefixPathIds=h;function g(E,L,A){if(A===void 0&&(A=[0,0]),!E||!L)return E;var O=e.point.subtract(A,E.origin);if(E.type===e.models.BezierCurve.typeName&&e.path.rotate(E.seed,L,O),E.paths)for(var R in E.paths)e.path.rotate(E.paths[R],L,O);if(E.models)for(var R in E.models)g(E.models[R],L,O);return E.caption&&e.path.rotate(E.caption.anchor,L,O),E}r.rotate=g;function b(E,L,A){if(A===void 0&&(A=!1),A&&E.origin&&(E.origin=e.point.scale(E.origin,L)),E.type===e.models.BezierCurve.typeName&&e.path.scale(E.seed,L),E.paths)for(var O in E.paths)e.path.scale(E.paths[O],L);if(E.models)for(var O in E.models)b(E.models[O],L,!0);return E.caption&&e.path.scale(E.caption.anchor,L),E}r.scale=b;function y(E,L,A,O,R,I,z){var H=e.path.distort(L,R,I);if(O=O||L.layer,O&&(H.layer=O),e.isPath(H))if(H.type===e.pathType.BezierSeed){var Z=new e.models.BezierCurve(H,z);s(E,Z,A)}else a(E,H,A);else s(E,H,A)}function T(E,L,A,O,R){O===void 0&&(O=!1);var I={};if(E.layer&&(I.layer=E.layer),O&&E.origin&&(I.origin=e.point.distort(E.origin,L,A)),E.type===e.models.BezierCurve.typeName){var z=E,H=e.models.BezierCurve.getBezierSeeds(z,{byLayers:!0,pointMatchingDistance:R}),Z=function(V){var K=H[V];K.forEach(function(ie,k){y(I,ie,k.toString(),V,L,A,R)})};for(var Q in H)Z(Q)}else if(E.paths)for(var $ in E.paths){var B=E.paths[$];y(I,B,$,null,L,A,R)}if(E.models)for(var N in E.models){var G=E.models[N],j=T(G,L,A,!0,R);s(I,j,N)}return E.caption&&(I.caption=e.cloneObject(E.caption),I.caption.anchor=e.path.distort(E.caption.anchor,L,A)),I}r.distort=T;function D(E,L){if(E.units&&e.units.isValidUnit(E.units)&&e.units.isValidUnit(L)){var A=e.units.conversionScale(E.units,L);A!=1&&(b(E,A),E.units=L)}return E}r.convertUnits=D;function C(E,L){if(E.paths)for(var A in E.paths)E.paths[A]&&L(E,A,E.paths[A]);if(E.models)for(var O in E.models)E.models[O]&&C(E.models[O],L)}r.walkPaths=C;function P(E,L){if(!E)return;function A(O,R,I,z,H){var Z=e.point.add(O.origin,I);if(R=R??"",O.paths)for(var Q in O.paths){var $=O.paths[Q];if($){var B={modelContext:O,layer:$.layer!=null?$.layer:R,offset:Z,pathContext:$,pathId:Q,route:z.concat(["paths",Q]),routeKey:H+(H?".":"")+"paths"+JSON.stringify([Q])};L.onPath&&L.onPath(B)}}if(O.models)for(var N in O.models){var G=O.models[N];if(G){var j={parentModel:O,layer:G.layer!=null?G.layer:R,offset:Z,route:z.concat(["models",N]),routeKey:H+(H?".":"")+"models"+JSON.stringify([N]),childId:N,childModel:G};L.beforeChildWalk&&!L.beforeChildWalk(j)||(A(j.childModel,j.layer,Z,j.route,j.routeKey),L.afterChildWalk&&L.afterChildWalk(j))}}}return A(E,E.layer,[0,0],[],""),E}r.walk=P;function U(E,L,A){L===void 0&&(L=!0),A===void 0&&(A=!0);var O=e.measure.modelExtents(E),R=E.origin||[0,0];return L&&(R[0]-=O.low[0]),A&&(R[1]-=O.low[1]),E.origin=R,E}r.zero=U})(e.model||(e.model={}))})(t||(t={}));var t;(function(e){(function(r){function i(l,u){var p=e.cloneObject(l);if(!p)return null;var v=e.path.breakAtPoint(p,u);if(v){for(var h=[p,v],g=2;g--;)if(e.round(e.measure.pathLength(h[g]),1e-4)==0)return null;return h}else if(l.type==e.pathType.Circle)return[p];return null}function a(l,u,p){var v=[];return l.forEach(function(h){e.measure.isPointOnPath(h,u,1e-5,null,p)&&v.push(h)}),v}function s(l,u,p){var v=p.pathContext,h=l.segments;if(e.measure.isPathEqual(h[0].absolutePath,v,1e-4,null,p.offset)){h[0].overlapped=!0,h[0].duplicate=!0,u.push(h[0]);return}for(var g={},b={path1Offset:l.offset,path2Offset:p.offset},y=e.path.intersection(l.pathContext,v,b),T=y?y.intersectionPoints:null,D=e.point.fromPathEnds(v,p.offset)||[],C=0;C<h.length;C++){var P=T?D.concat(T):D,U=a(P,h[C].absolutePath,g);if(b.out_AreOverlapped&&(h[C].overlapped=!0,u.push(h[C])),U.length>0){for(var E=null,L=0;!E&&L<U.length;)E=i(h[C].absolutePath,U[L]),L++;if(E){if(l.broken=!0,h[C].absolutePath=E[0],E[1]){var A={absolutePath:E[1],pathId:h[0].pathId,overlapped:h[C].overlapped,uniqueForeignIntersectionPoints:[]};h[C].overlapped&&u.push(A),h.push(A)}C--}}}}function f(l,u,p,v,h){var g={farPoint:v,measureAtlas:h},b=e.point.add(e.point.middle(l),p);return e.measure.isPointInsideModel(b,u,g)}r.isPathInsideModel=f;function o(l,u){var p=new e.measure.Atlas(l);p.measureModels();var v;return u?(v=new e.measure.Atlas(u),v.measureModels()):(u=l,v=p),c(l,u||l,!1,p,v),l}r.breakPathsAtIntersections=o;function c(l,u,p,v,h,g){var b=[],y=[],T={onPath:function(D){var C={absolutePath:e.path.clone(D.pathContext,D.offset),pathId:D.pathId,overlapped:!1,uniqueForeignIntersectionPoints:[]},P=D;P.broken=!1,P.segments=[C];var U={onPath:function(O){D.pathContext!==O.pathContext&&e.measure.isMeasurementOverlapping(v.pathMap[D.routeKey],h.pathMap[O.routeKey])&&s(P,y,O)},beforeChildWalk:function(O){var R=h.modelMap[O.routeKey];return R&&e.measure.isMeasurementOverlapping(v.pathMap[D.routeKey],R)}};if(r.walk(u,U),p)for(var E=0;E<P.segments.length;E++){var L=e.point.middle(P.segments[E].absolutePath),A={measureAtlas:h,farPoint:g};P.segments[E].isInside=e.measure.isPointInsideModel(L,u,A),P.segments[E].uniqueForeignIntersectionPoints=A.out_intersectionPoints}b.push(P)}};return r.walk(l,T),{crossedPaths:b,overlappedSegments:y}}function d(l,u,p){function v(b,y){e.measure.isPathEqual(b.absolutePath,y.absolutePath,p)&&(b.duplicate=y.duplicate=!0)}function h(b){for(var y=0;y<u.length;y++)v(u[y],b)}for(var g=0;g<l.length;g++)h(l[g])}function x(l,u,p,v,h,g){function b(C,P,U){var E=r.getSimilarPathId(C,P),L=E==P?l.routeKey:e.createRouteKey(l.route.slice(0,-1).concat([E]));if(U.addedPath=e.cloneObject(l.pathContext),U.addedPath.type=U.absolutePath.type,e.path.copyProps(U.absolutePath,U.addedPath),e.path.moveRelative(U.addedPath,l.offset,!0),C.paths[E]=U.addedPath,l.broken){var A=e.measure.pathExtents(U.absolutePath);h.pathMap[L]=A,h.modelsMeasured=!1}else h.pathMap[L]=T}function y(C,P,U){U.isInside&&u||!U.isInside&&p?b(C,P,U):(h.modelsMeasured=!1,g(U.absolutePath,l.routeKey,"segment is "+(U.isInside?"inside":"outside")+" intersectionPoints="+JSON.stringify(U.uniqueForeignIntersectionPoints)))}var T=h.pathMap[l.routeKey];delete l.modelContext.paths[l.pathId],delete h.pathMap[l.routeKey];for(var D=0;D<l.segments.length;D++)l.segments[D].duplicate?v?b(l.modelContext,l.pathId,l.segments[D]):g(l.segments[D].absolutePath,l.routeKey,"segment is duplicate"):y(l.modelContext,l.pathId,l.segments[D])}function S(l,u,p,v,h,g,b){p===void 0&&(p=!1),v===void 0&&(v=!0),h===void 0&&(h=!1),g===void 0&&(g=!0);var y={trimDeadEnds:!0,pointMatchingDistance:.005,out_deleted:[{paths:{}},{paths:{}}]};if(e.extendObject(y,b),y.measureA=y.measureA||new e.measure.Atlas(l),y.measureB=y.measureB||new e.measure.Atlas(u),y.measureA.measureModels(),y.measureB.measureModels(),!y.farPoint){var T=e.measure.increase(e.measure.increase({high:[null,null],low:[null,null]},y.measureA.modelMap[""]),y.measureB.modelMap[""]);y.farPoint=e.point.add(T.high,[1,1])}var D=c(l,u,!0,y.measureA,y.measureB,y.farPoint),C=c(u,l,!0,y.measureB,y.measureA,y.farPoint);d(D.overlappedSegments,C.overlappedSegments,y.pointMatchingDistance);function P(A,O,R,I){r.addPath(y.out_deleted[A],O,"deleted");var z=O;z.reason=I,z.routeKey=R}for(var U=0;U<D.crossedPaths.length;U++)x(D.crossedPaths[U],p,v,!0,y.measureA,function(A,O,R){return P(0,A,O,R)});for(var U=0;U<C.crossedPaths.length;U++)x(C.crossedPaths[U],h,g,!1,y.measureB,function(O,R,I){return P(1,O,R,I)});var E={models:{a:l,b:u}};if(y.trimDeadEnds){var L;!p&&!h&&(L=function(A){for(var O=0;O<D.overlappedSegments.length;O++)if(D.overlappedSegments[O].duplicate&&A.pathContext===D.overlappedSegments[O].addedPath)return!1;return!0}),r.removeDeadEnds(E,null,L,function(A,O){var R=A.route[1]==="a"?0:1;P(R,A.pathContext,A.routeKey,O)})}return e.extendObject(b,y),E}r.combine=S;function w(l,u){return S(l,u,!0,!1,!0,!1)}r.combineIntersection=w;function F(l,u){return S(l,u,!1,!0,!0,!1)}r.combineSubtraction=F;function m(l,u){return S(l,u,!1,!0,!1,!0)}r.combineUnion=m})(e.model||(e.model={}))})(t||(t={}));var t;(function(e){var r=(function(){function f(o){this.comparer=o,this.collections=[]}return f.prototype.addItemToCollection=function(o,c){var d=this.findCollection(o);if(d)d.push(c);else{var x={key:o,items:[c]};this.collections.push(x)}},f.prototype.findCollection=function(o,c){for(var d=0;d<this.collections.length;d++){var x=this.collections[d];if(this.comparer(o,x.key))return c&&c(d),x.items}return null},f.prototype.removeCollection=function(o){var c=this;return!!this.findCollection(o,function(d){c.collections.splice(d,1)})},f.prototype.removeItemFromCollection=function(o,c){var d=this.findCollection(o);if(d){for(var x=0;x<d.length;x++)if(d[x]===c)return d.splice(x,1),!0;return!1}},f.prototype.getCollectionsOfMultiple=function(o){for(var c=0;c<this.collections.length;c++){var d=this.collections[c];d.items.length>1&&o(d.key,d.items)}},f})();e.Collector=r;var i=Kr,a=i.default||i,s=(function(){function f(){this.reset()}return f.prototype.reset=function(){this.insertedCount=0,this.graph={},this.index={},this.merged={},this.values=[]},f.prototype.insertValue=function(o){return this.values.push(o),this.values.length-1},f.prototype.insertValueIdAtPoint=function(o,c){var d=c[0],x=c[1];this.graph[d]||(this.graph[d]={});var S=this.graph[d],w=x in S,F,m;return w?(m=S[x],m in this.merged&&(m=this.merged[m]),F=this.index[m],F.valueIds.push(o)):(S[x]=m=this.insertedCount++,F={pointId:m,point:c,valueIds:[o]},this.index[m]=F),{existed:w,pointId:m}},f.prototype.mergePoints=function(o){var c=this,d=[],x=[];for(var S in this.index){var w=this.index[S],F=w.point;w.kdId=d.length,d.push(F),x.push(w)}this.kdbush=a(d);var m=function(u){if(u in l.merged)return"continue";var p=l.index[u],v=l.kdbush.within(p.point[0],p.point[1],o);v.forEach(function(h){h!==p.kdId&&c.mergeIndexElements(p,x[h])})},l=this;for(var S in this.index)m(S)},f.prototype.mergeNearestSinglePoints=function(o){var c=this,d=[];for(var x in this.index){var S=this.index[x];S.valueIds.length===1&&d.push(S)}this.kdbush=a(d.map(function(w){return w.point})),d.forEach(function(w){if(!(w.pointId in c.merged)){var F=c.kdbush.within(w.point[0],w.point[1],o),m=[];F.forEach(function(p){var v=d[p];v.pointId!==w.pointId&&m.push({el:v,distance:e.measure.pointDistance(v.point,w.point)})}),m.sort(function(p,v){return p.distance-v.distance});for(var l=0;l<m.length;l++){var u=m[l].el;if(!(u.pointId in c.merged)){u.merged&&u.merged.length>0?c.mergeIndexElements(u,w):c.mergeIndexElements(w,u);return}}}})},f.prototype.mergeIndexElements=function(o,c){return o.merged=o.merged||[],o.merged.push(c.pointId),this.merged[c.pointId]=o.pointId,o.valueIds.push.apply(o.valueIds,c.valueIds),delete this.index[c.pointId],o.pointId},f.prototype.forEachPoint=function(o){for(var c=this,d=0;d<this.insertedCount;d++){var x=this.index[d];if(x){var S=x.valueIds.length;S>0&&o(x.point,x.valueIds.map(function(w){return c.values[w]}),d,x)}}},f.prototype.getIdOfPoint=function(o){var c=this.graph[o[0]];if(c){var d=c[o[1]];if(d>=0)return d in this.merged?this.merged[d]:d}},f.prototype.getElementAtPoint=function(o){var c=this.getIdOfPoint(o);if(c>=0)return this.index[c]},f})();e.PointGraph=s})(t||(t={}));var t;(function(e){(function(r){function i(s,f,o){var c=0;do{var d=s[c];do for(var x=!1,S=c+1;S<s.length;S++){var w=s[S];if(x=f(d.pathContext,w.pathContext,!1),x){o(d.pathContext,w.pathContext),delete w.modelContext.paths[w.pathId],s.splice(S,1);break}}while(x);c++}while(c<s.length)}function a(s,f){function o(m,l){if(Math.abs(m.radius-l.radius)<=w.scalarMatchingDistance){var u=e.measure.pointDistance(m.origin,l.origin);return u<=w.pointMatchingDistance}return!1}var c=new e.Collector(o),d=new e.Collector(o),x=new e.Collector(e.measure.isSlopeEqual),S={};S[e.pathType.Arc]=function(m){c.addItemToCollection(m.pathContext,m)},S[e.pathType.Circle]=function(m){d.addItemToCollection(m.pathContext,m)},S[e.pathType.Line]=function(m){var l=e.measure.lineSlope(m.pathContext);x.addItemToCollection(l,m)};var w={scalarMatchingDistance:.001,pointMatchingDistance:.005};e.extendObject(w,f);var F={onPath:function(m){var l=S[m.pathContext.type];l&&l(m)}};return r.walk(s,F),c.getCollectionsOfMultiple(function(m,l){i(l,e.measure.isArcOverlapping,function(u,p){var v=e.measure.isBetweenArcAngles(u.endAngle,p,!1),h=e.measure.isBetweenArcAngles(p.endAngle,u,!1);if(v&&h){u.endAngle=u.startAngle+360;return}var g=v?[u,p]:[p,u];u.startAngle=e.angle.noRevolutions(g[0].startAngle),u.endAngle=g[1].endAngle})}),d.getCollectionsOfMultiple(function(m,l){for(var u=1;u<l.length;u++){var p=l[u];delete p.modelContext.paths[p.pathId]}}),x.getCollectionsOfMultiple(function(m,l){i(l,e.measure.isLineOverlapping,function(u,p){var v={paths:{lineA:u,lineB:p}},h=e.measure.modelExtents(v);m.hasSlope?m.slope<0?(u.origin=[h.low[0],h.high[1]],u.end=[h.high[0],h.low[1]]):m.slope>0?(u.origin=h.low,u.end=h.high):(u.origin[0]=h.low[0],u.end[0]=h.high[0]):(u.origin[1]=h.low[1],u.end[1]=h.high[1])})}),s}r.simplify=a})(e.model||(e.model={}))})(t||(t={}));var t;(function(e){(function(r){var i={};i[e.pathType.Arc]=function(f,o,c){return new e.models.OvalArc(f.startAngle,f.endAngle,f.radius,o,!1,c)},i[e.pathType.Circle]=function(f,o,c){return new e.models.Ring(f.radius+o,f.radius-o)},i[e.pathType.Line]=function(f,o,c){return new e.models.Slot(f.origin,f.end,o,c)};function a(f,o,c){if(!f)return null;var d=null,x=i[f.type];return x&&(d=x(f,o,c),d.origin=f.origin),d}r.expand=a;function s(f,o,c,d){var x=e.angle.ofArcSpan(f),S=1;x>=270?S=4:x>180?S=3:(x>150||o)&&(S=2);for(var w=e.angle.toRadians(x/S),F=e.models.Polygon.circumscribedRadius(f.radius,w),m=e.point.fromArc(f),l=[e.point.subtract(m[0],f.origin)],u=e.angle.toRadians(f.startAngle)+w/2,p=0;p<S;p++)l.push(e.point.fromPolar(u,F)),u+=w;l.push(e.point.subtract(m[1],f.origin));var v=new e.models.ConnectTheDots(d,l);return v.origin=f.origin,typeof c=="string"&&c.length&&e.model.prefixPathIds(v,c),v}r.straighten=s})(e.path||(e.path={}))})(t||(t={})),(function(e){(function(r){function i(o,c,d,x){if(d===void 0&&(d=0),x===void 0&&(x={}),c<=0)return null;var S={models:{expansions:{models:{}},caps:{models:{}}}},w=!0,F=x.farPoint,m={onPath:function(v){if(!(x.pointMatchingDistance&&e.measure.pathLength(v.pathContext)<x.pointMatchingDistance)){var h=e.path.expand(v.pathContext,c,!0);if(h){r.moveRelative(h,v.offset);var g=r.getSimilarModelId(S.models.expansions,v.pathId);if(r.prefixPathIds(h,v.pathId+"_"),r.originate(h),w||(r.combine(S,h,!1,!0,!1,!0,x),x.measureA.modelsMeasured=!1,F=x.farPoint,delete x.farPoint,delete x.measureB),S.models.expansions.models[g]=h,h.models){var b=h.models.Caps;b&&(delete h.models.Caps,S.models.caps.models[g]=b)}w=!1}}}};if(r.walk(o,m),d){var l=S.models.caps,u={models:{}};S.models.straightcaps=u,r.simplify(l);for(var p in l.models)u.models[p]={models:{}},r.walk(l.models[p],{onPath:function(v){var h=v.pathContext,g=e.path.straighten(h,d==2,v.pathId+"_",!0);r.combine(S,g,!1,!0,!1,!0,x),x.measureA.modelsMeasured=!1,F=x.farPoint,delete x.farPoint,delete x.measureB,u.models[p].models[v.pathId]=g,delete v.modelContext.paths[v.pathId]}});delete S.models.caps}return x.farPoint=F,S}r.expandPaths=i;function a(o){var c=[];return r.findChains(o,function(d,x,S){c=d.filter(function(w){return w.endless})}),c}function s(o){var c=a(o);if(c.length==0)return null;var d={models:{}};return c.forEach(function(x,S){d.models[S]=e.chain.toNewModel(x)}),d}function f(o,c,d,x,S){d===void 0&&(d=0),x===void 0&&(x=!1),S===void 0&&(S={});var w=i(o,c,d,S);if(!w)return null;var F=s(o);if(F){var m=0,l={models:{}},u=a(w);return u.forEach(function(p){var v=p.links[0].walkedPath,h=e.measure.isPointInsideModel(e.point.middle(v.pathContext),F,v.offset);(x&&h||!x&&!h)&&(l.models[m++]=e.chain.toNewModel(p))}),l}else return w}r.outline=f})(e.model||(e.model={}))})(t||(t={}));var t;(function(e){(function(r){var i=e.unitType.Millimeter;function a(){o(e.unitType.Centimeter,10),o(e.unitType.Meter,1e3),o(e.unitType.Inch,25.4),o(e.unitType.Foot,25.4*12)}var s;function f(x,S,w){function F(m){return s[m]||(s[m]={}),s[m]}F(x)[S]=w,F(S)[x]=1/w}function o(x,S){f(x,i,S)}function c(x,S){return x==S?1:(s||(s={},a()),s[x][S]||f(x,S,s[x][i]*s[i][S]),s[x]&&s[x][S])}r.conversionScale=c;function d(x){for(var S in e.unitType)if(e.unitType[S]==x)return!0;return!1}r.isValidUnit=d})(e.units||(e.units={}))})(t||(t={}));var t;(function(e){(function(r){function i(m,l,u){u===void 0&&(u=1e-4);var p=e.angle.noRevolutions(m),v=e.angle.noRevolutions(l),h=e.angle.noRevolutions(e.round(v-p,u));return h==0}r.isAngleEqual=i;var a={};a[e.pathType.Line]=function(m,l,u){return f(m.origin,l.origin,u)&&f(m.end,l.end,u)||f(m.origin,l.end,u)&&f(m.end,l.origin,u)},a[e.pathType.Circle]=function(m,l,u){return f(m.origin,l.origin,u)&&m.radius==l.radius},a[e.pathType.Arc]=function(m,l,u){return a[e.pathType.Circle](m,l,u)&&i(m.startAngle,l.startAngle)&&i(m.endAngle,l.endAngle)};function s(m,l,u,p,v){var h=!1;if(m.type==l.type){var g=a[m.type];if(g){let b=function(){h=g(m,l,u)};p||v?e.path.moveTemporary([m,l],[p,v],b):b()}}return h}r.isPathEqual=s;function f(m,l,u){if(u){if(!m||!l)return!1;var p=r.pointDistance(m,l);return p<=u}else return e.round(m[0]-l[0])==0&&e.round(m[1]-l[1])==0}r.isPointEqual=f;function o(m,l,u){for(var p=0;p<l.length;p++)if(f(l[p],m,u))return!1;return!0}r.isPointDistinct=o;function c(m,l,u){return u===void 0&&(u=0),l.hasSlope?Math.abs(m[1]-(l.slope*m[0]+l.yIntercept))<=u:Math.abs(m[0]-l.line.origin[0])<=u}r.isPointOnSlope=c;function d(m,l,u){u===void 0&&(u=0);var p=Math.abs(r.pointDistance(m,l.origin)-l.radius);return p<=u}r.isPointOnCircle=d;var x={};x[e.pathType.Circle]=function(m,l,u){return d(m,l,u)},x[e.pathType.Arc]=function(m,l,u){if(x[e.pathType.Circle](m,l,u)){var p=e.angle.ofPointInDegrees(l.origin,m);return r.isBetweenArcAngles(p,l,!1)}return!1},x[e.pathType.Line]=function(m,l,u,p){var v=p&&p.cachedLineSlope||r.lineSlope(l);return p&&!p.cachedLineSlope&&(p.cachedLineSlope=v),c(m,v,u)&&r.isBetweenPoints(m,l,!1)};function S(m,l,u,p,v){u===void 0&&(u=0);var h=x[l.type];if(h){var g=p?e.path.clone(l,p):l;return h(m,g,u,v)}return!1}r.isPointOnPath=S;function w(m,l){if(!F(m,l))return!1;if(!m.hasSlope&&!l.hasSlope)return e.round(m.line.origin[0]-l.line.origin[0])==0;var u=[m,l],p=u.map(function(b){return e.angle.toDegrees(Math.atan(b.slope))}),v=u.map(function(b){return e.path.clone(b.line)}),h=v[0].origin;v.forEach(function(b,y){return e.path.rotate(b,-p[y],h)});var g=v.map(function(b){return(b.origin[1]+b.end[1])/2});return e.round(g[0]-g[1],1e-5)==0}r.isSlopeEqual=w;function F(m,l){return!!(!m.hasSlope&&!l.hasSlope||m.hasSlope&&l.hasSlope&&e.round(m.slope-l.slope,1e-5)==0)}r.isSlopeParallel=F})(e.measure||(e.measure={}))})(t||(t={}));var t;(function(e){(function(r){function i(B,N,G){function j(V,K,ie){if(K)for(var k=2;k--;)K[k]!=null&&(V[k]==null?V[k]=K[k]:V[k]=ie(V[k],K[k]))}return N&&(j(B.low,N.low,Math.min),j(B.high,N.high,Math.max)),G&&U(B),B}r.increase=i;function a(B,N){if(v(B.origin,N)<=B.radius)return!0;var G=new e.paths.Line(e.point.middle(B),N),j={},V=e.path.intersection(G,new e.paths.Chord(B),j);return!!(V||j.out_AreOverlapped)}r.isArcConcaveTowardsPoint=a;function s(B,N,G){return f(B,N,G)}r.isArcOverlapping=s;function f(B,N,G){function j(V,K){function ie(k){return c(k,V,G)}return ie(K.startAngle)||ie(K.endAngle)}return j(B,N)||j(N,B)||B.startAngle==N.startAngle&&B.endAngle==N.endAngle}r.isArcSpanOverlapping=f;function o(B,N,G,j){return j?Math.min(N,G)<B&&B<Math.max(N,G):Math.min(N,G)<=B&&B<=Math.max(N,G)}r.isBetween=o;function c(B,N,G){var j=e.angle.noRevolutions(N.startAngle),V=e.angle.ofArcSpan(N),K=j+V;return B=e.angle.noRevolutions(B),o(B,j,K,G)||o(B,j+360,K+360,G)||o(B,j-360,K-360,G)}r.isBetweenArcAngles=c;function d(B,N,G){for(var j=!1,V=2;V--;){if(e.round(N.origin[V]-N.end[V],1e-6)==0){if(j)return!1;j=!0;continue}var K=e.round(N.origin[V]),ie=e.round(N.end[V]);if(!o(e.round(B[V]),K,ie,G))return!1}return!0}r.isBetweenPoints=d;function x(B,N){for(var G=p(B),j=0;j<B.controls.length;j++)if(!r.isPointOnSlope(B.controls[j],G)&&(!N||d(B.controls[j],B,!1)))return!1;return!0}r.isBezierSeedLinear=x;var S=Qr();function w(B){return B.join(",")}function F(B,N){if(!B.endless||B.links.length===1)return null;var G=e.chain.toKeyPoints(B);return m(G,N)}r.isChainClockwise=F;function m(B,N){var G=new S,j=[];function V(te){G.addPoint(te[0],te[1]),j.push(w(te))}B.forEach(V);var K=G.getHull(),ie=K.slice(0,3).map(function(te){return w([te.x,te.y])}),k=[];switch(j.forEach(function(te){~ie.indexOf(te)&&k.push(te)}),k.indexOf(ie[1])){case 0:k.unshift(k.pop());break;case 2:k.push(k.shift());break}return N&&(N.hullPoints=K.map(function(te){return[te.x,te.y]}),N.keyPoints=B),ie[0]!=k[0]}r.isPointArrayClockwise=m;function l(B,N,G){function j(V,K,ie){function k(te){return d(te,K,G)}return k(ie.origin)||k(ie.end)}return j(0,B,N)||j(1,N,B)}r.isLineOverlapping=l;function u(B,N){for(var G=2;G--;)if(!(e.round(B.low[G]-N.high[G])<=0&&e.round(B.high[G]-N.low[G])>=0))return!1;return!0}r.isMeasurementOverlapping=u;function p(B){var N=B.end[0]-B.origin[0];if(e.round(N,1e-6)==0)return{line:B,hasSlope:!1};var G=B.end[1]-B.origin[1],j=G/N,V=B.origin[1]-j*B.origin[0];return{line:B,hasSlope:!0,slope:j,yIntercept:V}}r.lineSlope=p;function v(B,N){var G=N[0]-B[0],j=N[1]-B[1];return Math.sqrt(G*G+j*j)}r.pointDistance=v;function h(B,N,G){return[G(B[0],N[0]),G(B[1],N[1])]}var g={};g[e.pathType.Line]=function(B){return{low:h(B.origin,B.end,Math.min),high:h(B.origin,B.end,Math.max)}},g[e.pathType.Circle]=function(B){var N=B.radius;return{low:e.point.add(B.origin,[-N,-N]),high:e.point.add(B.origin,[N,N])}},g[e.pathType.Arc]=function(B){var N=B.radius,G=e.point.fromArc(B);function j(V,K,ie){for(var k=h(G[0],G[1],ie),te=2;te--;)c(V[te],B,!1)&&(k[te]=K+B.origin[te]);return k}return{low:j([180,270],-N,Math.min),high:j([360,90],N,Math.max)}};function b(B,N){if(B){var G=g[B.type];if(G){var j=G(B);return N&&(j.high=e.point.add(j.high,N),j.low=e.point.add(j.low,N)),j}}return{low:null,high:null}}r.pathExtents=b;var y={};y[e.pathType.Line]=function(B){return v(B.origin,B.end)},y[e.pathType.Circle]=function(B){return 2*Math.PI*B.radius},y[e.pathType.Arc]=function(B){var N=y[e.pathType.Circle](B),G=e.angle.ofArcSpan(B)/360;return N*=G,N},y[e.pathType.BezierSeed]=function(B){return e.models.BezierCurve.computeLength(B)};function T(B){if(B){var N=y[B.type];if(N)return N(B)}return 0}r.pathLength=T;function D(B){var N=0;return e.model.walk(B,{onPath:function(G){N+=T(G.pathContext)}}),N}r.modelPathLength=D;function C(B){return{high:e.point.clone(B.high),low:e.point.clone(B.low)}}function P(B,N){function G(K,ie){if(ie){var k=K.slice(0,-2),te=e.createRouteKey(k);te in N.modelMap?i(N.modelMap[te],ie):N.modelMap[te]=C(ie)}}N||(N=new E(B));var j={onPath:function(K){K.routeKey in N.pathMap||(N.pathMap[K.routeKey]=b(K.pathContext,K.offset)),G(K.route,N.pathMap[K.routeKey])},afterChildWalk:function(K){G(K.route,N.modelMap[K.routeKey])}};e.model.walk(B,j),N.modelsMeasured=!0;var V=N.modelMap[""];return V?U(V):null}r.modelExtents=P;function U(B){var N=B;return N.center=e.point.average(N.high,N.low),N.width=N.high[0]-N.low[0],N.height=N.high[1]-N.low[1],N}r.augment=U;var E=(function(){function B(N){this.modelContext=N,this.modelsMeasured=!1,this.modelMap={},this.pathMap={}}return B.prototype.measureModels=function(){this.modelsMeasured||P(this.modelContext,this)},B})();r.Atlas=E;function L(B,N){return N>=B?N-B:N<0?N+B:N}function A(B,N){return B.slope*N+B.yIntercept}function O(B,N){var G=p(B);return[N,A(G,N)]}function R(B){for(var N=1;N<3;N++)if(!r.isPointEqual(B[0].center,B[N].center,1e-6)||e.round(B[0].width-B[N].width)!==0)return!1;return!0}function I(B,N,G,j){e.model.rotate(N,G);var V=P(N),K={index:B,rotation:j,center:e.point.rotate(V.center,j),width:V.height,height:V.width,bottom:new e.paths.Line(V.low,[V.high[0],V.low[1]]),middle:new e.paths.Line([V.low[0],V.center[1]],[V.high[0],V.center[1]]),top:new e.paths.Line(V.high,[V.low[0],V.high[1]])};return[K.top,K.middle,K.bottom].forEach(function(ie){return e.path.rotate(ie,j)}),K}function z(B,N){var G=B[1].origin,j=G[0],V=B[3].origin[0],K=B[0].origin[0],ie=j-K;if(K-V>2*ie)return null;var k=(j-V)/3;if(ie<k)return null;var te=Math.min(k,ie),me=e.solvers.equilateralSide(te),fe=[e.point.fromSlopeIntersection(B[1],B[2]),e.point.fromSlopeIntersection(B[4],B[5])],be=fe.map(function(ae){return Math.abs(ae[1]-G[1])}),ge=be[0]>be[1]?0:1,we=be[ge];if(we>me){var Se=e.solvers.equilateralAltitude(we),Le=j-2*Se;if(K>Le+Se||V<Le-Se)return null;var ve=V-Le+Se,Te=2*Se-N[ge+1].width,oe=Math.min(ve,Te)/2;return{origin:O(N[2-ge].middle,Le+oe),radius:we,type:"peak "+ge}}else return{origin:[j-2*te,G[1]],radius:me,type:"side"}}function H(B){var N=e.cloneObject(B);e.model.originate(N);var G=P(N),j=[],V={paths:{}};e.model.center(N);function K(ve,Te,oe){return{radius:ve,paths:new e.models.Polygon(6,ve,30).paths,origin:e.point.add(Te,G.center),notes:oe}}for(var ie=[[90,-90],[-60,-30],[-60,30]];ie.length;){var k=ie.shift(),te=I(j.length,N,k[0],k[1]),me=e.solvers.equilateralSide(te.width/2);if(me>=te.height)return K(me,te.center,"solved by bound "+j.length);j.push(te)}if(R(j))return K(e.solvers.equilateralSide(j[0].width/2),j[0].center,"solved as circular");var fe=j.map(function(ve){return ve.top}).concat(j.map(function(ve){return ve.bottom}));fe.forEach(function(ve,Te){V.paths[Te]=ve,e.path.converge(fe[L(6,Te+2)],ve,!0)}),j.forEach(function(ve,Te){V.paths["m"+Te]=ve.middle});for(var be=j.slice(),ge,we=0;we<6;we++){we>0&&(fe.push(fe.shift()),be.push(be.shift()),e.model.rotate(V,-60));var Se=z(fe,be);Se&&(!ge||Se.radius<ge.radius)&&(ge=Se,ge.index=we)}var Le=e.point.rotate(ge.origin,ge.index*60);return K(ge.radius,Le,"solved by "+ge.index+" as "+ge.type)}r.boundingHexagon=H;function Z(B,N){var G=0;return N.forEach(function(j){r.isPointDistinct(j,B,1e-8)&&(B.push(j),G++)}),G}function Q(B,N,G){if(N)return N;var j=P(B).high;return j?e.point.add(j,[1,1]):[7654321,1234567]}function $(B,N,G){G===void 0&&(G={}),G.farPoint||(G.farPoint=Q(N,G.farPoint,G.measureAtlas)),G.out_intersectionPoints=[];var j,V=new e.paths.Line(B,G.farPoint),K=b(V),ie={onPath:function(k){if(!(G.measureAtlas&&!u(K,G.measureAtlas.pathMap[k.routeKey]))){var te={path2Offset:k.offset},me=e.path.intersection(V,k.pathContext,te);if(me){var fe=Z(G.out_intersectionPoints,me.intersectionPoints);fe%2==1&&(j=!j)}}},beforeChildWalk:function(k){if(!G.measureAtlas)return!0;var te=G.measureAtlas.modelMap[k.routeKey];return te&&u(K,te)}};return e.model.walk(N,ie),!!j}r.isPointInsideModel=$})(e.measure||(e.measure={}))})(t||(t={}));var t;(function(e){(function(r){function i(s,f){f===void 0&&(f={});function o(c,d){if(e.isNumber(d)){var x=e.round(d,f.accuracy);return x}if(e.isPoint(d)){var S=e.point.rounded(d,f.accuracy);return S}return d}return JSON.stringify(s,f.accuracy&&o,f.indentation)}r.toJson=i;function a(s){if(e.isModel(s))return s.units}r.tryGetModelUnits=a,r.colors={black:0,red:1,yellow:2,lime:3,aqua:4,blue:5,fuchsia:6,white:7,gray:9,maroon:14,orange:30,olive:58,green:94,teal:134,navy:174,purple:214,silver:254}})(e.exporter||(e.exporter={}))})(t||(t={}));var t;(function(e){(function(r){function i(a){for(var s=[],f=/-?(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o;(o=f.exec(a))!==null;)o.index===f.lastIndex&&f.lastIndex++,o[0]!==""&&s.push(parseFloat(o[0]));return s}r.parseNumericList=i})(e.importer||(e.importer={}))})(t||(t={}));var t;(function(e){(function(r){function i(f,o){o===void 0&&(o={});var c={fontSize:9},d=[],x={entities:[],header:{},tables:{}};if(e.extendObject(c,o),e.isModel(f)){var S=f;S.exporterOptions&&e.extendObject(c,S.exporterOptions.toDXF)}function w(L){if(c.layerOptions&&c.layerOptions[L])return c.layerOptions[L];if(L in r.colors)return{color:r.colors[L]}}function F(L){return c.layerOptions&&c.layerOptions[L]&&c.layerOptions[L].lineType?c.layerOptions[L].lineType:"CONTINUOUS"}function m(L,A){var O=L&&L.layer||A||"0";return d.indexOf(O)<0&&d.push(O),O}var l={};l[e.pathType.Line]=function(L,A,O){var R=m(L,O),I={type:"LINE",layer:R,vertices:[{x:e.round(L.origin[0]+A[0],c.accuracy),y:e.round(L.origin[1]+A[1],c.accuracy)},{x:e.round(L.end[0]+A[0],c.accuracy),y:e.round(L.end[1]+A[1],c.accuracy)}]};return I.lineType=F(R),I},l[e.pathType.Circle]=function(L,A,O){var R=m(L,O),I={type:"CIRCLE",layer:R,center:{x:e.round(L.origin[0]+A[0],c.accuracy),y:e.round(L.origin[1]+A[1],c.accuracy)},radius:e.round(L.radius,c.accuracy)};return I.lineType=F(R),I},l[e.pathType.Arc]=function(L,A,O){var R=m(L,O),I={type:"ARC",layer:R,center:{x:e.round(L.origin[0]+A[0],c.accuracy),y:e.round(L.origin[1]+A[1],c.accuracy)},radius:e.round(L.radius,c.accuracy),startAngle:e.round(L.startAngle,c.accuracy),endAngle:e.round(L.endAngle,c.accuracy)};return I.lineType=F(R),I};function u(L,A,O){var R={type:"VERTEX",layer:m(null,A),x:e.round(L[0],c.accuracy),y:e.round(L[1],c.accuracy),bulge:O};return R}function p(L){var A={type:"POLYLINE",layer:m(null,L.layer),shape:L.chain.endless,vertices:[]};if(A.lineType=F(A.layer),L.chain.links.forEach(function(I,z){var H;if(I.walkedPath.pathContext.type===e.pathType.Arc){var Z=I.walkedPath.pathContext;H=e.round(Math.tan(e.angle.toRadians(e.angle.ofArcSpan(Z))/4),c.accuracy),I.reversed&&(H*=-1)}var Q=I.endPoints[I.reversed?1:0];A.vertices.push(u(Q,L.layer,H))}),!L.chain.endless){var O=L.chain.links[L.chain.links.length-1],R=O.endPoints[O.reversed?0:1];A.vertices.push(u(R,L.layer))}return A}function v(L){var A=m(null,L.layer),O=w(A),R=e.point.middle(L.anchor),I={type:"TEXT",startPoint:u(R,null),endPoint:u(R,null),layer:A,textHeight:O&&O.fontSize||c.fontSize,text:L.text,halign:4,valign:0,rotation:e.angle.ofPointInDegrees(L.anchor.origin,L.anchor.end)};return I}function h(L,A){var O={name:L,color:A};return O.lineType=F(L),O}function g(){var L={lineTypes:{CONTINUOUS:{name:"CONTINUOUS",description:"______",patternLength:0,elements:[]},DASHED:{name:"DASHED",description:"_ _ _ ",elements:[5,-2.5],patternLength:7.5},DOTTED:{name:"DOTTED",description:". . . ",elements:[.5,-1],patternLength:1.5}}},A="lineType";x.tables[A]=L}function b(){var L={layers:{}};d.forEach(function(O){var R=w(O);R&&(L.layers[O]=h(O,R.color))});var A="layer";x.tables[A]=L}function y(){if(c.units){var L=s[c.units];x.header.$INSUNITS=L}}function T(L,A,O){var R=x.entities;R.push.apply(R,A.map(p)),L.forEach(function(I){var z=l[I.pathContext.type];if(z){var H=z(I.pathContext,I.offset,I.layer);R.push(H)}}),R.push.apply(R,O.map(v))}if(!c.units){var D=r.tryGetModelUnits(f);D&&(c.units=D)}e.extendObject(o,c);var C=[],P=[];if(c.usePOLYLINE){var U=function(L,A,O){L.forEach(function(R){if(R.endless&&R.links.length===1&&R.links[0].walkedPath.pathContext.type===e.pathType.Circle){P.push(R.links[0].walkedPath);return}var I={chain:R,layer:O};C.push(I)}),P.push.apply(P,A)};e.model.findChains(S,U,{byLayers:!0,pointMatchingDistance:c.pointMatchingDistance})}else{var E={onPath:function(L){P.push(L)}};e.model.walk(S,E)}return T(P,C,e.model.getAllCaptionsOffset(S)),y(),g(),b(),a(x)}r.toDXF=i;function a(f){var o=[];function c(){for(var g=[],b=0;b<arguments.length;b++)g[b]=arguments[b];o.push.apply(o,g)}function d(g){var b=g.lineType;b&&c("6",b)}var x={};x.LINE=function(g){c("0","LINE","8",g.layer),d(g),c("10",g.vertices[0].x,"20",g.vertices[0].y,"11",g.vertices[1].x,"21",g.vertices[1].y)},x.CIRCLE=function(g){c("0","CIRCLE","8",g.layer),d(g),c("10",g.center.x,"20",g.center.y,"40",g.radius)},x.ARC=function(g){c("0","ARC","8",g.layer),d(g),c("10",g.center.x,"20",g.center.y,"40",g.radius,"50",g.startAngle,"51",g.endAngle)},x.VERTEX=function(g){c("0","VERTEX","8",g.layer,"10",g.x,"20",g.y),g.bulge!==void 0&&c("42",g.bulge)},x.POLYLINE=function(g){c("0","POLYLINE","8",g.layer),d(g),c("66",1,"70",g.shape?1:0),g.vertices.forEach(function(b){return x.VERTEX(b)}),c("0","SEQEND")},x.TEXT=function(g){c("0","TEXT","10",g.startPoint.x,"20",g.startPoint.y,"11",g.endPoint.x,"21",g.endPoint.y,"40",g.textHeight,"1",g.text,"50",g.rotation,"8",g.layer,"72",g.halign,"73",g.valign)};function S(g){c("0","SECTION"),g(),c("0","ENDSEC")}function w(g){c("0","TABLE"),g(),c("0","ENDTAB")}function F(){c("2","TABLES"),w(u),w(p)}function m(g){var b=g.lineType||"CONTINUOUS";c("0","LAYER","2",g.name,"70","0","62",g.color,"6",b)}function l(g){var b=g.elements||[];c("0","LTYPE","72","65","70","0","2",g.name,"3",g.description,"73",b.length,"40",g.patternLength),b.forEach(function(y){return c("49",y)})}function u(){var g="lineType",b=f.tables[g];c("2","LTYPE");for(var y in b.lineTypes){var T=b.lineTypes[y];l(T)}}function p(){var g="layer",b=f.tables[g];c("2","LAYER");for(var y in b.layers){var T=b.layers[y];m(T)}}function v(){c("2","HEADER");for(var g in f.header){var b=f.header[g];c("9",g,"70",b)}}function h(g){c("2","ENTITIES"),g.forEach(function(b){var y=x[b.type];y&&y(b)})}return S(v),S(F),S(function(){return h(f.entities)}),c("0","EOF"),o.join(`
`)}var s={};s[""]=0,s[e.unitType.Inch]=1,s[e.unitType.Foot]=2,s[e.unitType.Millimeter]=4,s[e.unitType.Centimeter]=5,s[e.unitType.Meter]=6})(e.exporter||(e.exporter={}))})(t||(t={}));var t;(function(e){(function(r){var i=Math.sqrt(3)/2;function a(d){return d*i}r.equilateralAltitude=a;function s(d){return d/i}r.equilateralSide=s;function f(d,x,S){return e.angle.toDegrees(Math.acos((x*x+S*S-d*d)/(2*x*S)))}r.solveTriangleSSS=f;function o(d,x,S){var w=180-d-S;return x*Math.sin(e.angle.toRadians(d))/Math.sin(e.angle.toRadians(w))}r.solveTriangleASA=o;function c(d,x,S){S===void 0&&(S=!1);var w=new e.paths.Line(d.origin,x.origin),F=e.measure.pointDistance(d.origin,x.origin);if(d.radius>=F+x.radius||x.radius>=F+d.radius||S&&d.radius+x.radius>=F)return null;var m;if(!S&&e.round(d.radius-x.radius)==0)m=[90,270];else{var l=F/2,u=new e.paths.Circle([l,0],l),p=new e.paths.Circle(d.radius>x.radius?[0,0]:[F,0],S?d.radius+x.radius:Math.abs(d.radius-x.radius)),v=e.path.intersection(p,u);if(!v||!v.path1Angles)return null;m=v.path1Angles}var h=e.angle.ofLineInDegrees(w);return m.map(function(g){return e.angle.noRevolutions(g+h)})}r.circleTangentAngles=c})(e.solvers||(e.solvers={}))})(t||(t={}));var t;(function(e){(function(r){var i={};i[e.pathType.Arc]={},i[e.pathType.Circle]={},i[e.pathType.Line]={},i[e.pathType.Arc][e.pathType.Arc]=function(w,F,m,l){var u=null;return a([w,F],m,l,function(){var p=S(w,F,m);if(p){var v=d(p[0],w,m),h=d(p[1],F,m);if(v&&h)if(v.length===1||h.length===1)for(var g=0;g<v.length;g++)for(var b=0;b<h.length;b++){var y=e.point.fromAngleOnCircle(v[g],w),T=e.point.fromAngleOnCircle(h[b],F);if(e.measure.isPointEqual(y,T,1e-4)){u={intersectionPoints:[y],path1Angles:[v[g]],path2Angles:[h[b]]};return}}else u={intersectionPoints:c(v,w),path1Angles:v,path2Angles:h}}else m.out_AreOverlapped&&(m.out_AreOverlapped=e.measure.isArcOverlapping(w,F,m.excludeTangents))}),u},i[e.pathType.Arc][e.pathType.Circle]=function(w,F,m,l){var u=null;return a([w,F],m,l,function(){var p=S(w,F,m);if(p){var v=d(p[0],w,m);if(v){var h;if(v.length==2)h=p[1];else{var g=o(p[0],v[0]);h=[p[1][g]]}u={intersectionPoints:c(v,w),path1Angles:v,path2Angles:h}}}}),u},i[e.pathType.Arc][e.pathType.Line]=function(w,F,m,l){var u=null;return a([w,F],m,l,function(){var p=x(F,w,m);if(p){var v=d(p,w,m);v&&(u={intersectionPoints:c(v,w),path1Angles:v})}}),u},i[e.pathType.Circle][e.pathType.Arc]=function(w,F,m){var l=i[e.pathType.Arc][e.pathType.Circle](F,w,m,!0);return l?s(l):null},i[e.pathType.Circle][e.pathType.Circle]=function(w,F,m,l){var u=null;return a([w,F],m,l,function(){var p=S(w,F,m);p&&(u={intersectionPoints:c(p[0],w),path1Angles:p[0],path2Angles:p[1]})}),u},i[e.pathType.Circle][e.pathType.Line]=function(w,F,m,l){var u=null;return a([w,F],m,l,function(){var p=x(F,w,m);p&&(u={intersectionPoints:c(p,w),path1Angles:p})}),u},i[e.pathType.Line][e.pathType.Arc]=function(w,F,m){var l=i[e.pathType.Arc][e.pathType.Line](F,w,m,!0);return l?s(l):null},i[e.pathType.Line][e.pathType.Circle]=function(w,F,m){var l=i[e.pathType.Circle][e.pathType.Line](F,w,m,!0);return l?s(l):null},i[e.pathType.Line][e.pathType.Line]=function(w,F,m,l){var u=null;return a([w,F],m,l,function(){var p=e.point.fromSlopeIntersection(w,F,m);p&&e.measure.isBetweenPoints(p,w,m.excludeTangents)&&e.measure.isBetweenPoints(p,F,m.excludeTangents)&&(u={intersectionPoints:[p]})}),u};function a(w,F,m,l){var u=m?[F.path2Offset,F.path1Offset]:[F.path1Offset,F.path2Offset];r.moveTemporary(w,u,l)}function s(w){var F=w.path1Angles;return w.path2Angles?w.path1Angles=w.path2Angles:delete w.path1Angles,F&&(w.path2Angles=F),w}function f(w,F,m){if(m===void 0&&(m={}),w&&F){var l=i[w.type][F.type];if(l)return l(w,F,m)}return null}r.intersection=f;function o(w,F){for(var m=2;m--;)if(w[m]===F)return m}function c(w,F){for(var m=[],l=0;l<w.length;l++)m.push(e.point.fromAngleOnCircle(w[l],F));return m}function d(w,F,m){if(!w)return null;for(var l=[],u=0;u<w.length;u++)e.measure.isBetweenArcAngles(w[u],F,m.excludeTangents)&&l.push(w[u]);return l.length==0?null:l}function x(w,F,m){var l=e.round(F.radius);if(F.radius<=0)return null;var u=new e.paths.Line(e.point.subtract(w.origin,F.origin),e.point.subtract(w.end,F.origin)),p=e.angle.ofLineInDegrees(w),v=p>=180?p-360:p;r.rotate(u,-v,e.point.zero());function h(P){var U=P+v;return e.round(e.angle.noRevolutions(U))}var g=e.round(u.origin[1]),b=Math.abs(g);if(b>l)return null;var y=[];if(b==l){if(m.excludeTangents)return null;y.push(h(g>0?90:270))}else{let P=function(U,E){e.measure.isBetween(e.round(U),e.round(u.origin[0]),e.round(u.end[0]),m.excludeTangents)&&y.push(h(E))};var T=Math.asin(g/l),D=e.angle.toDegrees(T),C=Math.cos(T)*l;P(-C,180-D),P(C,D)}return y.length>0?y:null}function S(w,F,m){if(w.radius<=0||F.radius<=0)return null;if(w.radius==F.radius&&e.measure.isPointEqual(w.origin,F.origin,1e-4))return m.out_AreOverlapped=!0,null;e.point.subtract(e.point.zero(),w.origin);var l=new e.paths.Circle(e.point.zero(),w.radius),u=new e.paths.Circle(e.point.subtract(F.origin,w.origin),F.radius),p=e.angle.ofPointInDegrees(e.point.zero(),u.origin);r.rotate(u,-p,e.point.zero());function v(T){var D=T+p;return e.angle.noRevolutions(D)}var h=u.origin[0];if(e.round(u.radius-h-l.radius)==0)return m.excludeTangents?null:[[v(180)],[v(180)]];if(e.round(u.radius+h-l.radius)==0)return m.excludeTangents?null:[[v(0)],[v(0)]];if(e.round(h-u.radius-l.radius)==0)return m.excludeTangents?null:[[v(0)],[v(180)]];if(e.round(h-u.radius)>l.radius||e.round(h+u.radius)<l.radius||e.round(h-u.radius)<-l.radius)return null;function g(T){return[v(T),v(e.angle.mirror(T,!1,!0))]}var b=e.solvers.solveTriangleSSS(u.radius,l.radius,h),y=e.solvers.solveTriangleSSS(l.radius,h,u.radius);return[g(b),g(180-y)]}})(e.path||(e.path={}))})(t||(t={}));var t;(function(e){(function(r){var i={};i[e.pathType.Arc]=function(p){return["startAngle","endAngle"]},i[e.pathType.Line]=function(p){return["origin","end"]};function a(p){var v=e.point.fromPathEnds(p);if(v){let b=function(y){return{point:v[y],propertyName:h[y]}};var h=null,g=i[p.type];if(g)return h=g(p),[b(0),b(1)]}return null}function s(p,v,h){var g=a(p),b=a(v),y=null;function T(C,P,U){return{path:C,isStart:U==0,propertyName:P[U].propertyName,point:P[U].point,oppositePoint:P[1-U].point}}function D(C,P){return e.measure.isPointEqual(g[C].point,b[P].point,1e-4)?(y=[T(p,g,C),T(v,b,P)],!0):!1}return D(0,0)||D(0,1)||D(1,0)||D(1,1),y}function f(p,v,h,g){for(var b=new e.paths.Circle(v,p),y=0;y<2;y++){var T=r.intersection(b,h[y].path);if(!T)return!1;if(h[y].shardPoint=T.intersectionPoints[0],e.measure.isPointEqual(h[y].point,T.intersectionPoints[0],1e-4))if(T.intersectionPoints.length>1)h[y].shardPoint=T.intersectionPoints[1];else return!1}return!0}function o(p,v){var h=r.clone(p),g=r.breakAtPoint(h,v);return[h,g]}var c={};c[e.pathType.Arc]=function(p,v,h,g,b){var y=p.radius,T=o(p,g)[b?0:1];return T?(e.measure.isArcConcaveTowardsPoint(T,h)?y-=v:y+=v,e.round(y)<=0?null:new e.paths.Arc(p.origin,y,p.startAngle,p.endAngle)):null},c[e.pathType.Line]=function(p,v,h,g,b){return new e.paths.Parallel(p,v,h)};function d(p,v,h){var g=null,b=c[p.path.type];return b&&(g=b(p.path,v,h,p.shardPoint,p.isStart)),g}var x={};x[e.pathType.Arc]=function(p,v,h,g){var b=new e.paths.Line(p.origin,g),y=e.angle.ofLineInDegrees(b),T=y;return e.measure.isArcConcaveTowardsPoint(p,g)||(T+=180),{filletAngle:e.angle.noRevolutions(T),clipPath:function(){p[v]=y}}},x[e.pathType.Line]=function(p,v,h,g){var b=new e.paths.Line([0,0],[0,1]),y=e.angle.ofLineInDegrees(p);r.rotate(b,y,[0,0]),r.moveRelative(b,g);var T=e.point.fromSlopeIntersection(p,b);return T?{filletAngle:e.angle.ofPointInDegrees(g,T),clipPath:function(){p[v]=T}}:null};function S(p,v,h){var g=null,b=x[p.path.type];return b&&(g=b(p.path,p.propertyName,v,h)),F(p,g)||(g=null),g}function w(p,v){var h={filletAngle:e.angle.ofPointInDegrees(v,p.shardPoint),clipPath:function(){p.path[p.propertyName]=p.shardPoint}};return F(p,h)||(h=null),h}function F(p,v){var h=!1;if(v){var g=p.path[p.propertyName];v.clipPath(),e.measure.pathLength(p.path)>0&&(h=!0),p.path[p.propertyName]=g}return h}function m(p){for(var v=0,h=[],g=0;g<p.length;g++){var b=e.measure.pathLength(p[g]);h.push(b),v+=b}return h[0]/v}function l(p,v,h,g){if(e.isPathLine(p)&&e.isPathLine(v)&&h&&h>0){var b={pointMatchingDistance:.005};e.extendObject(b,g);var y=s(p,v);if(y){var T=m([p,v]),D=new e.paths.Line(y[0].oppositePoint,y[1].oppositePoint),C=e.point.middle(D,T),P=e.angle.ofPointInDegrees(y[0].point,C),U=e.point.add(y[0].point,e.point.fromPolar(e.angle.toRadians(P),h));if(!f(h,U,y))return null;for(var E=[],L=0;L<2;L++){var A=w(y[L],U);if(!A)return null;E.push(A)}var O=new e.paths.Arc(U,h,E[0].filletAngle,E[1].filletAngle);return e.round(e.angle.noRevolutions(e.angle.ofArcMiddle(O)))==e.round(P)&&(O.startAngle=E[1].filletAngle,O.endAngle=E[0].filletAngle),E[0].clipPath(),E[1].clipPath(),O}}return null}r.dogbone=l;function u(p,v,h,g){if(p&&v&&h&&h>0){var b={pointMatchingDistance:.005};e.extendObject(b,g);var y=s(p,v);if(y){if(!f(h,y[0].point,y))return null;for(var T=[],D=0;D<2;D++){var C=y[1-D].shardPoint;if(!C)return null;var P=d(y[D],h,C);T.push(P)}var U=r.intersection(T[0],T[1]);if(U){var E;U.intersectionPoints.length==1?E=U.intersectionPoints[0]:E=e.point.closest(y[0].point,U.intersectionPoints);for(var L=[],D=0;D<2;D++){var A=S(y[D],h,E);if(!A)return null;L.push(A)}if(e.round(L[0].filletAngle-L[1].filletAngle)==0)return null;var O=new e.paths.Arc(E,h,L[0].filletAngle,L[1].filletAngle),R=e.angle.ofArcSpan(O);return R==180?null:(R>180&&(O.startAngle=L[1].filletAngle,O.endAngle=L[0].filletAngle),L[0].clipPath(),L[1].clipPath(),O)}}}return null}r.fillet=u})(e.path||(e.path={}))})(t||(t={})),(function(e){(function(r){function i(f,o){return s(!1,f,o)}r.dogbone=i;function a(f,o){return s(!0,f,o)}r.fillet=a;function s(f,o,c){var d={paths:{}},x=0,S=o.links;function w(m,l){var u=S[m].walkedPath,p=S[l].walkedPath;u.modelContext===p.modelContext&&u.modelContext.type==e.models.BezierCurve.typeName||e.path.moveTemporary([u.pathContext,p.pathContext],[u.offset,p.offset],function(){var v;if(e.isObject(c)){var h=e.angle.ofChainLinkJoint(S[m],S[l]);if(e.round(h)===0)return;v=h>0?c.left:c.right}else v=c;if(!(!v||v<0)){var g;f?g=e.path.fillet(u.pathContext,p.pathContext,v):g=e.path.dogbone(u.pathContext,p.pathContext,v),g&&(d.paths["fillet"+x]=g,x++)}})}for(var F=1;F<S.length;F++)w(F-1,F);return o.endless&&w(F-1,0),x?d:null}})(e.chain||(e.chain={}))})(t||(t={}));var t;(function(e){(function(r){function i(s,f){function o(){return s.apply(this,f)}return o.prototype=s.prototype,new o}r.construct=i;function a(s){var f=[],o=s.metaParameters;if(o)for(var c=0;c<o.length;c++){var d=o[c].value;Array.isArray(d)&&(d=d[0]),f.push(d)}return f}r.getParameterValues=a})(e.kit||(e.kit={}))})(t||(t={}));var t;(function(e){(function(r){function i(S,w){return S[0].walkedPath.pathContext===w?S[1]:S[0]}function a(S,w,F){function m(l,u,p){for(;l;){u.links.push(l),u.pathLength+=l.pathLength;var v=l.reversed?0:1,h=l.endPoints[v],g=S.getElementAtPoint(h);if(!g||g.valueIds.length===0)break;var b=g.valueIds.map(function(T){return S.values[T]}),y=i(b,l.walkedPath.pathContext);if(g.valueIds.splice(0,2),!y)break;if(y.walkedPath.pathContext===p.walkedPath.pathContext){u.links.length>1&&(u.endless=!0);break}l=y}}S.forEachPoint(function(l,u,p,v){if(v.valueIds.length>0){var h={links:[],pathLength:0};if(m(u[0],h,u[0]),h.endless)w(h,!1);else{h.links.reverse();var g=h.links[0];h.links.map(function(y){y.reversed=!y.reversed}),h.pathLength-=h.links[h.links.length-1].pathLength;var b=h.links.pop();m(b,h,g),h.links.length>1?w(h,!0):F(h.links[0].walkedPath)}}})}function s(S){var w=null;return o(S,function(F,m,l){w=F[0]},{byLayers:!1}),w}r.findSingleChain=s;function f(S,w){var F=w===S.reversed?1:0;return S.endPoints[F]}function o(S){for(var w=[],F=1;F<arguments.length;F++)w[F-1]=arguments[F];var m,l;switch(w.length){case 1:typeof w[0]=="function"?l=w[0]:m=w[0];break;case 2:l=w[0],m=w[1];break}var u={pointMatchingDistance:.005};e.extendObject(u,m);var p={},v={},h={},g={onPath:function(U){var E=u.byLayers?U.layer:"";p[E]||(p[E]=new e.PointGraph);var L=p[E],A=e.measure.pathLength(U.pathContext);if(U.pathContext.type===e.pathType.Circle||U.pathContext.type===e.pathType.Arc&&e.round(e.angle.ofArcSpan(U.pathContext)-360)===0||U.pathContext.type===e.pathType.BezierSeed&&e.measure.isPointEqual(U.pathContext.origin,U.pathContext.end,u.pointMatchingDistance)){var O={links:[{walkedPath:U,reversed:null,endPoints:null,pathLength:A}],endless:!0,pathLength:A};v[E]||(v[E]=[]),v[E].push(O)}else{if(A<u.pointMatchingDistance/5){h[E]||(h[E]=[]),h[E].push(U);return}for(var R=e.point.fromPathEnds(U.pathContext,U.offset),I=0;I<2;I++){var z={walkedPath:U,endPoints:R,reversed:I!=0,pathLength:A},H=L.insertValue(z);L.insertValueIdAtPoint(H,R[I])}}}};u.shallow&&(g.beforeChildWalk=function(){return!1});var b;u.unifyBeziers&&(b=d(S),x(b,!0,u.pointMatchingDistance)),r.walk(S,g);var y=function(U){var E=p[U];E.mergeNearestSinglePoints(u.pointMatchingDistance),T=[],v[U]||(v[U]=[]),a(E,function(L,A){A?L.endless=e.measure.isPointEqual(f(L.links[0],!0),f(L.links[L.links.length-1],!1),u.pointMatchingDistance):L.endless=!!L.endless,v[U].push(L)},function(L){T.push(L)}),v[U].sort(function(L,A){return A.pathLength-L.pathLength}),u.contain&&(D=e.isObject(u.contain)?u.contain:{alternateDirection:!1},C=c(v[U],D),v[U]=C),l&&l(v[U],T,U,h[U])},T,D,C;for(var P in p)y(P);return b&&x(b,!1,u.pointMatchingDistance),u.byLayers?v:v[""]}r.findChains=o;function c(S,w){var F=S.map(function(u){return e.chain.toNewModel(u)}),m=[];S.forEach(function(u,p){if(u.endless){var v=u.links[0].walkedPath,h=e.path.clone(v.pathContext,v.offset);S.forEach(function(g,b){u!==g&&g.endless&&e.measure.isPointInsideModel(e.point.middle(h),F[b])&&(m[p]=g)})}});var l=[];if(S.forEach(function(u,p){var v=m[p];v?(v.contains||(v.contains=[]),v.contains.push(u)):l.push(u)}),w.alternateDirection){let u=function(p,v){p.forEach(function(h,g){var b=e.measure.isChainClockwise(h);b!==null&&(!b&&v||b&&!v)&&e.chain.reverse(h),h.contains&&u(h.contains,!v)})};u(l,!0)}return l}function d(S){var w=[];function F(u){u.childModel.type===e.models.BezierCurve.typeName&&w.push(u)}var m={beforeChildWalk:function(u){return F(u),!0}},l={childId:"",childModel:S,layer:S.layer,offset:S.origin,parentModel:null,route:[],routeKey:""};return F(l),r.walk(S,m),w}function x(S,w,F){var m="tempPaths",l="tempLayer";S.forEach(function(u){var p=u.childModel;if(w){u.layer!=null&&u.layer!==""&&(p[l]=p.layer,p.layer=u.layer);var v=e.models.BezierCurve.getBezierSeeds(p,{byLayers:!0,pointMatchingDistance:F});for(var h in v){var g=v[h];if(g.length>0){p[m]=p.paths;var b={};g.forEach(function(y,T){y.layer=h,b["seed_"+T]=y}),p.paths=b}}}else m in p&&(p.paths=p[m],delete p[m]),l in p&&(p[l]==null?delete p.layer:p.layer=p[l],delete p[l])})}})(e.model||(e.model={}))})(t||(t={})),(function(e){(function(r){function i(x,S){if(S===void 0&&(S=1),!!x.endless){for(var w=Math.abs(S),F=0;F<w;F++)S<0?x.links.push(x.links.shift()):x.links.unshift(x.links.pop());return x}}r.cycle=i;function a(x){return x.links.reverse(),x.links.forEach(function(S){return S.reversed=!S.reversed}),x}r.reverse=a;function s(x,S){if(x.endless){for(var w=-1,F=0;F<x.links.length;F++)if(x.links[F].walkedPath.routeKey==S){w=F;break}return w>0&&i(x,w),x}}r.startAt=s;function f(x,S){S===void 0&&(S=!1);for(var w={paths:{}},F=0;F<x.links.length;F++){var m=x.links[F].walkedPath;if(m.pathContext.type===e.pathType.BezierSeed){S&&delete m.modelContext.paths[m.pathId],w.models||(w.models={});var l=e.model.getSimilarModelId(w,m.pathId);w.models[l]=e.model.moveRelative(new e.models.BezierCurve(m.pathContext),m.offset)}else{var u;S?(u=m.pathContext,delete m.modelContext.paths[m.pathId]):u=e.path.clone(m.pathContext);var p=e.model.getSimilarPathId(w,m.pathId);w.paths[p]=e.path.moveRelative(u,m.offset)}}return w}r.toNewModel=f;function o(x,S){!x||S.length<2||e.measure.isPointEqual(S[0],S[S.length-1],1e-5)&&S.pop()}function c(x,S,w){var F=[],m=0,l=0,u;Array.isArray(S)&&(u=S);for(var p=0;p<x.links.length;p++){for(var v=x.links[p],h=v.walkedPath,g=v.pathLength;e.round(g-l)>0;){var b=l/g;if(v.reversed&&(b=1-b),F.push(e.point.add(e.point.middle(h.pathContext,b),h.offset)),w&&F.length>=w)return F;var y;if(u){if(y=u[m],m++,m>u.length)return F}else y=S;l+=y}l-=g}return o(x.endless,F),F}r.toPoints=c;function d(x,S){for(var w=[],F=0;F<x.links.length;F++){var m=x.links[F],l=m.walkedPath,u=e.path.toKeyPoints(l.pathContext,S);if(u.length>0){m.reversed&&u.reverse(),F>0&&u.shift();var p=u.map(function(v){return e.point.add(v,l.offset)});w.push.apply(w,p)}}return o(x.endless,w),w}r.toKeyPoints=d})(e.chain||(e.chain={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function s(f,o){this.modelContext=f,this.options=o,this.pointMap=new e.PointGraph,this.list=[],this.removed=[],this.ordinals={},this.load()}return s.prototype.load=function(){var f=this,o={onPath:function(c){var d=e.point.fromPathEnds(c.pathContext,c.offset);if(d){var x=c;x.endPoints=d;for(var S=f.pointMap.insertValue(x),w=2;w--;)f.pointMap.insertValueIdAtPoint(S,d[w])}}};r.walk(this.modelContext,o),this.options.pointMatchingDistance&&this.pointMap.mergePoints(this.options.pointMatchingDistance)},s.prototype.findDeadEnds=function(){var f=this,o=0;this.pointMap.forEachPoint(function(x,S,w,F){f.ordinals[w]=o++,f.list.push(F)}),o=0;for(var c=function(){var x=d.list[o];x.valueIds.length===1?d.removePath(x,x.valueIds[0],o):d.options.keep&&x.valueIds.length%2&&x.valueIds.forEach(function(S){var w=f.pointMap.values[S];f.options.keep(w)||f.removePath(x,S,o)}),o++},d=this;o<this.list.length;)c();return this.removed},s.prototype.removePath=function(f,o,c){var d=this.pointMap.values[o],x=this.getOtherPointId(d.endPoints,f.pointId),S=this.pointMap.index[x];this.removed.push(d),this.removeValue(f,o),this.removeValue(S,o),S.valueIds.length>0&&this.appendQueue(S,c)},s.prototype.removeValue=function(f,o){var c=f.valueIds.indexOf(o);c>=0&&f.valueIds.splice(c,1)},s.prototype.appendQueue=function(f,o){var c=this.ordinals[f.pointId];c<o&&(this.list[c]=null,this.list.push(f),this.ordinals[f.pointId]=this.list.length)},s.prototype.getOtherPointId=function(f,o){for(var c=0;c<f.length;c++){var d=this.pointMap.getIdOfPoint(f[c]);if(o!==d)return d}},s})();function a(s,f,o,c){var d={pointMatchingDistance:f||.005,keep:o},x=new i(s,d),S=x.findDeadEnds();return S.length<x.pointMap.values.length&&S.forEach(function(w){c(w,"dead end"),delete w.modelContext.paths[w.pathId]}),s}r.removeDeadEnds=a})(e.model||(e.model={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f){this.name=s,this.attrs=f,this.innerText=""}return a.escapeString=function(s){var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};for(var o in f)s=s.split(o).join(f[o]);return s},a.prototype.getOpeningTag=function(s){var f="";function o(d,x){x==null||typeof x>"u"||((Array.isArray(x)||typeof x=="object")&&(x=JSON.stringify(x)),typeof x=="string"&&(x=a.escapeString(x)),f+=" "+d+'="'+x+'"')}for(var c in this.attrs)o(c,this.attrs[c]);return"<"+this.name+f+(s?"/":"")+">"},a.prototype.getInnerText=function(){return this.innerTextEscaped?this.innerText:a.escapeString(this.innerText)},a.prototype.getClosingTag=function(){return"</"+this.name+">"},a.prototype.toString=function(){var s=!this.innerText;return s&&!this.closingTags?this.getOpeningTag(!0):this.getOpeningTag(!1)+this.getInnerText()+this.getClosingTag()},a})();r.XmlTag=i})(e.exporter||(e.exporter={}))})(t||(t={}));var t;(function(e){(function(r){function i(F,m,l){return F+"("+m+")"}function a(F,m){if(m){var l=new e.paths.Circle([0,0],F.radius),u=e.measure.pathLength(l);if(u)return Math.ceil(u/m)}}function s(F,m,l){var u="",p="",v=!0,h=!1,g=!1,b={};b[e.pathType.Circle]=function(E,L){var A={center:e.point.rounded(e.point.add(E.origin,L.walkedPath.offset),l),radius:e.round(E.radius,l),resolution:a(E,m)};u=i("CAG.circle",JSON.stringify(A)),h=!0},b[e.pathType.Line]=function(E,L){var A=L.endPoints.map(function(O){return e.point.rounded(O,l)});L.reversed&&A.reverse(),u=i("new CSG.Path2D",JSON.stringify(A))},b[e.pathType.Arc]=function(E,L){var A=e.angle.ofArcEnd(E);L.reversed&&(g=!0);var O={center:e.point.rounded(e.point.add(E.origin,L.walkedPath.offset),l),radius:e.round(E.radius,l),startangle:e.round(E.startAngle,l),endangle:e.round(A,l),resolution:a(E,m)};u=i("new CSG.Path2D.arc",JSON.stringify(O))};var y={};y[e.pathType.Line]=function(E,L){var A=g!=L.reversed,O=e.point.rounded(L.endPoints[A?0:1],l);T(i(".appendPoint",JSON.stringify(O)))},y[e.pathType.Arc]=function(E,L){var A=g!=L.reversed,O=e.angle.ofArcEnd(E),R={radius:e.round(E.radius,l),clockwise:A,large:Math.abs(O-E.startAngle)>180,resolution:a(E,m)},I=e.point.rounded(L.endPoints[A?0:1],l);T(i(".appendArc",JSON.stringify(I)+","+JSON.stringify(R)))};function T(E){g?p=E+p:p+=E}for(var D=0;D<F.links.length;D++){var C=F.links[D],P=C.walkedPath.pathContext,U=v?b[P.type]:y[P.type];if(U&&U(P,C),h)return u;v=!1}return u+p+".close().innerToCAG()"}function f(F,m,l){return function(p){F&&F({progress:m+p.progress*l/100})}}function o(F,m,l){function u(h,g){var b=e.chain.toKeyPoints(h,g);return b.push(b[0]),F.fromPoints(b)}function p(h,g){return h.union(g)}function v(h,g){return h.subtract(g)}return c(u,p,v,m,l)}r.toJscadCAG=o;function c(F,m,l,u,p){p===void 0&&(p={});var v={},h={total:0,complete:0};function g(L,A,O){var R=O.shift();return O.forEach(function(I){return R=m(R,I)}),h.complete++,p.statusCallback&&p.statusCallback({progress:L+A*h.complete/h.total}),R}function b(L,A){var O=[];return A.forEach(function(R){R.endless&&(R.contains&&y(L,R.contains),h.total++,O.unshift(F(R,p.maxArcFacet)))}),O}function y(L,A){A.forEach(function(O){if(O.endless){var R={cag:F(O,p.maxArcFacet),subtracts:[]};if(O.contains){var I=b(L,O.contains);I.length>0&&R.subtracts.push(I)}h.total++,L in v||(v[L]=[]),v[L].unshift(R)}})}var T={pointMatchingDistance:p.pointMatchingDistance,byLayers:p.byLayers,contain:!0};p.statusCallback&&p.statusCallback({progress:25});var D=e.model.findChains(u,T);if(Array.isArray(D))y("",D);else for(var C in D)y(C,D[C]);p.statusCallback&&p.statusCallback({progress:50});var P=0;for(var C in v)P+=v[C].length;if(P===0)throw p.statusCallback&&p.statusCallback({progress:100}),"No closed geometries found.";var U={};for(var C in v){var E=v[C].map(function(A){var O=A.cag;return A.subtracts.forEach(function(R){var I=g(50,50,R);O=l(O,I)}),O});U[C]=g(50,50,E)}return p.statusCallback&&p.statusCallback({progress:100}),T.byLayers?U:U[""]}function d(F,m,l){function u(h){return o(F,m,h)}function p(h,g,b){var y=h.extrude({offset:[0,0,g]});return b&&(y=y.translate([0,0,b])),y}function v(h,g){return h.union(g)}return x(u,p,v,m,l)}r.toJscadCSG=d;function x(F,m,l,u,p){p===void 0&&(p={});var v=p.statusCallback;function h(U,E){return e.isNumber(U)?U:E}u.exporterOptions&&e.extendObject(p,u.exporterOptions.toJscadCSG),p.byLayers=p.byLayers||p.layerOptions&&!0,p.statusCallback=f(v,0,50);var g=F(p),b=[];if(p.byLayers)for(var y in g){var T=p.layerOptions[y],D=m(g[y],T.extrude||p.extrude,h(T.z,p.z));b.push(D)}else{var D=m(g,p.extrude,p.z);b.push(D)}p.statusCallback=f(v,50,100);var C={total:b.length-1,complete:0},P=b.shift();return b.forEach(function(U,E){P=l(P,U),C.complete++,p.statusCallback({progress:C.complete/C.total})}),P}function S(F,m){m===void 0&&(m={});function l(D,C){return g(s(D,C,m.accuracy))}function u(D,C){return D+".union(".concat(C,")")}function p(D,C){return D+".subtract(".concat(C,")")}function v(D){return c(l,u,p,F,m)}function h(D,C,P){var U=D+".extrude({ offset: [0, 0, ".concat(C,"] })");return P&&(U=U+".translate([0, 0, ".concat(P,"])")),U}function g(D){return"".concat(y).concat(b).concat(D).concat(y)}var b=new Array((m.indent||0)+1).join(" "),y=m.indent?`
`:"",T=x(v,h,u,F,m).trim();return"function ".concat(m.functionName||"main","(){").concat(g("return ".concat(T,";")),"}").concat(y)}r.toJscadScript=S;function w(F,m,l,u){var p=u.statusCallback;u.statusCallback=f(p,0,50);var v=d(F,l,u);return m.serialize(v,{binary:!1,statusCallback:f(p,50,50)})}r.toJscadSTL=w})(e.exporter||(e.exporter={}))})(t||(t={}));var t;(function(e){(function(r){function i(a,s,f){if(s){var o={fontName:"Courier",fontSize:9,origin:[0,0],stroke:"#000"};e.extendObject(o,f);var c=1,d=o.units||s.units;d?c=e.units.conversionScale(d,e.unitType.Inch):c=1/100,c*=72;var x=e.model.scale(e.cloneObject(s),c),S=e.measure.modelExtents(x),w=-S.low[0],F=[w,S.high[1]];F=e.point.add(F,o.origin),e.model.findChains(x,function(m,l,u){function p(v){var h=r.pathToSVGPathData(v.pathContext,v.offset,F);a.path(h).stroke(o.stroke)}m.map(function(v){if(v.links.length>1){var h=r.chainToSVGPathData(v,F);a.path(h).stroke(o.stroke)}else{var g=v.links[0].walkedPath;if(g.pathContext.type===e.pathType.Circle){var b;e.path.moveTemporary([g.pathContext],[g.offset],function(){b=e.path.mirror(g.pathContext,!1,!0)}),e.path.moveRelative(b,F),a.circle(b.origin[0],b.origin[1],g.pathContext.radius).stroke(o.stroke)}else p(g)}}),l.map(p)},{byLayers:!1}),a.font(o.fontName).fontSize(o.fontSize),e.model.getAllCaptionsOffset(x).forEach(function(m){var l=e.angle.ofLineInDegrees(m.anchor),u=e.path.mirror(m.anchor,!1,!0);e.path.moveRelative(u,F);var p=m.text,v=[a.widthOfString(p)/2,a.heightOfString(p)/2],h=e.point.middle(u),g=e.point.subtract(h,v);a.rotate(-l,{origin:h}),a.text(p,g[0],g[1]),a.rotate(l,{origin:h})})}}r.toPDF=i})(e.exporter||(e.exporter={}))})(t||(t={}));var t;(function(e){(function(r){var i={};i[e.pathType.Arc]=function(u,p,v,h,g){h.push("A"),l(h,u.radius,p,g,e.angle.ofArcSpan(u)>180,v?u.startAngle>u.endAngle:u.startAngle<u.endAngle)},i[e.pathType.Line]=function(u,p,v,h,g){h.push("L",e.round(p[0],g),e.round(p[1],g))},i[e.pathType.BezierSeed]=function(u,p,v,h,g){m(h,u,g,v)};function a(u){return e.point.mirror(u,!1,!0)}function s(u){var p=e.angle.ofArcSpan(u);u.startAngle=e.angle.noRevolutions(u.startAngle),u.endAngle=u.startAngle+p}function f(u,p,v,h){function g(A){return e.point.add(A,p)}if(h!==void 0){var b=e.measure.isChainClockwise(u);b!==null&&b!==h&&(u=e.cloneObject(u),e.chain.reverse(u))}for(var y=u.links[0],T=g(a(y.endPoints[y.reversed?1:0])),D=["M",e.round(T[0],v),e.round(T[1],v)],C=0;C<u.links.length;C++){var P=u.links[C],U=P.walkedPath.pathContext,E=i[U.type];if(E){var L;e.path.moveTemporary([U],[P.walkedPath.offset],function(){L=e.path.mirror(U,!1,!0)}),e.path.moveRelative(L,p),E(L,g(a(P.endPoints[P.reversed?0:1])),P.reversed,D,v)}}return u.endless&&D.push("Z"),D.join(" ")}r.chainToSVGPathData=f;function o(u,p,v){return["M",e.round(u[0],v),e.round(u[1],v)].concat(p)}var c={};c[e.pathType.Line]=function(u,p){return o(u.origin,e.point.rounded(u.end,p),p)},c[e.pathType.Circle]=function(u,p,v){return o(u.origin,F(u.radius,p,v),p)},c[e.pathType.Arc]=function(u,p){s(u);var v=e.point.fromArc(u);if(e.measure.isPointEqual(v[0],v[1]))return c[e.pathType.Circle](u,p);var h=["A"];return l(h,u.radius,v[1],p,e.angle.ofArcSpan(u)>180,u.startAngle>u.endAngle),o(v[0],h,p)},c[e.pathType.BezierSeed]=function(u,p){var v=[];return m(v,u,p),o(u.origin,v,p)};function d(u,p,v,h,g){var b=c[u.type];if(b){var y;e.path.moveTemporary([u],[p],function(){y=e.path.mirror(u,!1,!0)}),e.path.moveRelative(y,v);var T=b(y,h,g);return T.join(" ")}return""}r.pathToSVGPathData=d;function x(u,p,v,h){var g={};return v.unifyBeziers=!0,e.model.findChains(u,function(b,y,T){function D(P,U){var E=d(P.pathContext,P.offset,p,h,U);g[T].push(E)}g[T]=[];function C(P,U){P.forEach(function(E){if(E.links.length>1){var L=f(E,p,h,U);g[T].push(L)}else D(E.links[0].walkedPath,U);E.contains&&C(E.contains,!U)})}C(b,!0),y.forEach(function(P){return D(P)})},v),g}function S(u){for(var p=[],v=1;v<arguments.length;v++)p[v-1]=arguments[v];var h={fillRule:"evenodd"};typeof p[0]=="boolean"?(h.byLayers=p[0],h.origin=p[1],h.accuracy=p[2]):e.isObject(p[0])&&e.extendObject(h,p[0]);var g={byLayers:h.byLayers,contain:!1};h.fillRule==="nonzero"&&(g.contain={alternateDirection:!0});var b=e.measure.modelExtents(u);h.origin||(h.origin=[-b.low[0],b.high[1]]);var y=x(u,h.origin,g,h.accuracy),T={};for(var D in y)T[D]=y[D].join(" ");return g.byLayers?T:T[""]}r.toSVGPathData=S;function w(u,p){function v(oe,ae,pe){pe===void 0&&(pe=!1),!pe&&typeof ae=="string"&&ae.length>0?(ae in L||(L[ae]=[]),L[ae].push(oe)):E.push(oe)}function h(oe){var ae=[];function pe(Ce,Be){Be!==void 0&&ae.push(Ce+":"+Be)}return pe("stroke",oe.stroke),pe("stroke-width",oe.strokeWidth),pe("fill",oe.fill),ae.join(";")}function g(oe,ae){ae&&e.extendObject(oe,{stroke:ae.stroke,"stroke-width":ae.strokeWidth,fill:ae.fill,style:ae.cssStyle||h(ae),class:ae.className})}function b(oe){if(C.layerOptions&&C.layerOptions[oe])return C.layerOptions[oe];if(oe in r.colors)return{stroke:oe}}function y(oe,ae,pe,Ce,Be){Ce===void 0&&(Ce=null),Be===void 0&&(Be=!1),oe!=="text"&&g(ae,b(pe)),C.scalingStroke||(ae["vector-effect"]="non-scaling-stroke");var Ye=new r.XmlTag(oe,ae);Ye.closingTags=C.closingTags,Ce&&(Ye.innerText=Ce),v(Ye.toString(),pe,Be)}function T(oe){var ae=a(oe);return e.point.scale(ae,C.scale)}function D(oe,ae){var pe=e.path.mirror(oe,!1,!0);return e.path.moveRelative(e.path.scale(pe,C.scale),ae)}var C={accuracy:.001,annotate:!1,origin:null,scale:1,stroke:"#000",strokeLineCap:"round",strokeWidth:"0.25mm",fill:"none",fillRule:"evenodd",fontSize:"9pt",useSvgPathOnly:!0,viewBox:!0};e.extendObject(C,p);var P,U=e.isModel(u);U&&(P=u,P.exporterOptions&&e.extendObject(C,P.exporterOptions.toSVG));var E=[],L={};if(U)P=u;else if(Array.isArray(u)){var A={};u.forEach(function(oe,ae){A[ae]=oe}),P={paths:A}}else e.isPath(u)&&(P={paths:{modelToMeasure:u}});var O=e.measure.modelExtents(P),R=e.model.getAllCaptionsOffset(P);if(R.forEach(function(oe){e.measure.increase(O,e.measure.pathExtents(oe.anchor),!0)}),!C.units){var I=r.tryGetModelUnits(u);I&&(C.units=I)}var z=r.svgUnit[C.units];if(z&&C.viewBox&&(C.scale*=z.scaleConversion),O&&!C.origin){var H=-O.low[0]*C.scale;C.origin=[H,O.high[1]*C.scale]}e.extendObject(p,C);var Z={};if(O&&C.viewBox){var Q=e.round(O.width*C.scale,C.accuracy),$=e.round(O.height*C.scale,C.accuracy),B=[0,0,Q,$],N=z?z.svgUnitType:"";Z={width:Q+N,height:$+N,viewBox:B.join(" ")}}Z.xmlns="http://www.w3.org/2000/svg";var G=new r.XmlTag("svg",e.extendObject(Z,C.svgAttrs));v(G.getOpeningTag(!1));var j={id:"svgGroup","stroke-linecap":C.strokeLineCap,"fill-rule":C.fillRule,"font-size":C.fontSize};g(j,C);var V=new r.XmlTag("g",j);if(v(V.getOpeningTag(!1)),C.useSvgPathOnly){var K={byLayers:!0};C.fillRule==="nonzero"&&(K.contain={alternateDirection:!0});var ie=x(P,C.origin,K,C.accuracy);for(var k in ie){var te=ie[k].join(" "),me={d:te};k.length>0&&(me.id=k),y("path",me,k,null,!0)}}else{let oe=function(re,ee,le){y("text",{id:re+"_text",x:e.round(ee[0],C.accuracy),y:e.round(ee[1],C.accuracy)},le,re)},ae=function(re,ee,le,Ae,ye,xe,Ee,ue,Ue){y("path",{id:re,"data-route":xe,d:["M",e.round(ee,C.accuracy),e.round(le,C.accuracy)].concat(Ae).join(" ")},ye),ue&&oe(re,Ee,ye)},pe=function(re,ee,le,Ae,ye,xe,Ee){var ue=F(le,C.accuracy);ae(re,ee[0],ee[1],ue,Ae,ye,ee,xe)},Ce=function(re,ee,le,Ae,ye){var xe="flow";fe[e.pathType.Circle]("",new e.paths.Circle(le,re.size/2),ee,xe,null,!1,null);var Ee=[-1*re.size,re.size/2],ue=[Ee,e.point.mirror(Ee,!1,!0)].map(function(Ue){return new e.paths.Line(e.point.add(e.point.rotate(Ue,ye),Ae),Ae)});ue.forEach(function(Ue){return fe[e.pathType.Line]("",Ue,ee,xe,null,!1,null)})},Be=function(re,ee){be.attrs={id:re},v(be.getOpeningTag(!1),ee.layer)},Ye=function(re){v(be.getClosingTag(),re.layer)};var fe={};fe[e.pathType.Line]=function(re,ee,le,Ae,ye,xe,Ee){var ue=ee.origin,Ue=ee.end;y("line",{id:re,class:Ae,"data-route":ye,x1:e.round(ue[0],C.accuracy),y1:e.round(ue[1],C.accuracy),x2:e.round(Ue[0],C.accuracy),y2:e.round(Ue[1],C.accuracy)},le),xe&&oe(re,e.point.middle(ee),le),Ee&&Ce(Ee,le,ee.origin,ee.end,e.angle.ofLineInDegrees(ee))},fe[e.pathType.Circle]=function(re,ee,le,Ae,ye,xe,Ee){var ue=ee.origin;y("circle",{id:re,class:Ae,"data-route":ye,r:ee.radius,cx:e.round(ue[0],C.accuracy),cy:e.round(ue[1],C.accuracy)},le),xe&&oe(re,ue,le)},fe[e.pathType.Arc]=function(re,ee,le,Ae,ye,xe,Ee){s(ee);var ue=e.point.fromArc(ee);if(e.measure.isPointEqual(ue[0],ue[1]))pe(re,ee.origin,ee.radius,le,ye,xe);else{var Ue=["A"];l(Ue,ee.radius,ue[1],C.accuracy,e.angle.ofArcSpan(ee)>180,ee.startAngle>ee.endAngle),ae(re,ue[0][0],ue[0][1],Ue,le,ye,e.point.middle(ee),xe),Ee&&Ce(Ee,le,ue[1],ue[0],e.angle.noRevolutions(ee.startAngle-90))}},fe[e.pathType.BezierSeed]=function(re,ee,le,Ae,ye,xe,Ee){var ue=[];m(ue,ee,C.accuracy),ae(re,ee.origin[0],ee.origin[1],ue,le,ye,e.point.middle(ee),xe)};var be=new r.XmlTag("g"),ge={beforeChildWalk:function(re){return Be(re.childId,re.childModel),!0},onPath:function(re){var ee=fe[re.pathContext.type];if(ee){var le=e.point.add(T(re.offset),C.origin);ee(re.pathId,D(re.pathContext,le),re.layer,null,re.route,C.annotate,C.flow)}},afterChildWalk:function(re){Ye(re.childModel)}};Be("0",P),e.model.walk(P,ge);for(var we in L){var Se=new r.XmlTag("g",{id:we});g(Se.attrs,b(we));for(var Le=0;Le<L[we].length;Le++)Se.innerText+=L[we][Le];Se.innerTextEscaped=!0,v(Se.toString())}Ye(P)}var ve=R.map(function(oe){var ae=D(oe.anchor,C.origin),pe=e.point.rounded(e.point.middle(ae),C.accuracy),Ce=new r.XmlTag("text",{"alignment-baseline":"middle","text-anchor":"middle",transform:"rotate(".concat(e.angle.ofLineInDegrees(ae),",").concat(pe[0],",").concat(pe[1],")"),x:pe[0],y:pe[1]});return g(Ce.attrs,b(oe.layer)),Ce.innerText=oe.text,Ce.toString()});if(ve.length){var Te=new r.XmlTag("g",{id:"captions"});g(Te.attrs,b(Te.attrs.id)),Te.innerText=ve.join(""),Te.innerTextEscaped=!0,v(Te.toString())}return v(V.getClosingTag()),v(G.getClosingTag()),E.join("")}r.toSVG=w;function F(u,p,v){var h=e.round(u,p),g=["m",-h,0];function b(y){g.push("a"),l(g,h,[2*h*y,0],p,!1,!v)}return b(1),b(-1),g.push("z"),g}function m(u,p,v,h){if(p.controls.length===1)u.push("Q",e.round(p.controls[0][0],v),e.round(p.controls[0][1],v));else{var g=h?[p.controls[1],p.controls[0]]:p.controls;u.push("C",e.round(g[0][0],v),e.round(g[0][1],v),e.round(g[1][0],v),e.round(g[1][1],v))}var b=h?p.origin:p.end;u.push(e.round(b[0],v),e.round(b[1],v))}function l(u,p,v,h,g,b){var y=e.round(p,h),T=v;u.push(y,y),u.push(0),u.push(g?1:0),u.push(b?0:1),u.push(e.round(T[0],h),e.round(T[1],h))}r.svgUnit={},r.svgUnit[e.unitType.Inch]={svgUnitType:"in",scaleConversion:1},r.svgUnit[e.unitType.Millimeter]={svgUnitType:"mm",scaleConversion:1},r.svgUnit[e.unitType.Centimeter]={svgUnitType:"cm",scaleConversion:1},r.svgUnit[e.unitType.Foot]={svgUnitType:"in",scaleConversion:12},r.svgUnit[e.unitType.Meter]={svgUnitType:"cm",scaleConversion:100}})(e.exporter||(e.exporter={}))})(t||(t={})),(function(e){(function(r){function i(a,s){s===void 0&&(s={});var f={};function o(y){f.paths||(f.paths={}),f.paths["p_"+ ++m]=y}function c(y){f.models||(f.models={}),f.models["p_"+ ++m]=y}function d(y,T,D){T===void 0&&(T=0),D===void 0&&(D=y.from),T<0&&(T=T+y.data.length);var C=e.point.mirror([y.data[0+T],y.data[1+T]],!1,!0);return y.absolute?C:e.point.add(C,D)}function x(y,T){return e.measure.isPointEqual(y.from,T)||o(new e.paths.Line(y.from,T)),T}var S={};S.M=function(y){if(w=d(y),y.data.length>2){y.from=w;for(var T=2;T<y.data.length;T=T+2)y.from=x(y,d(y,T));return y.from}else return w},S.Z=function(y){return x(y,w)},S.H=function(y){var T=e.point.clone(y.from);return y.absolute?T[0]=y.data[0]:T[0]+=y.data[0],x(y,T)},S.V=function(y){var T=e.point.clone(y.from);return y.absolute?T[1]=-y.data[0]:T[1]-=y.data[0],x(y,T)},S.L=function(y){for(var T,D=0;D<y.data.length;D=D+2)T=d(y,D),y.from=x(y,T);return y.from},S.A=function(y){for(var T,D,C,P,U,E,L,A,O,R,I,z=0;z<y.data.length;z=z+7)T=y.data[0+z],D=y.data[1+z],C=y.data[2+z],P=y.data[3+z]===1,U=y.data[4+z]===1,E=d(y,5+z),L=T!==D,A=new e.paths.Line(y.from,e.point.rotate(E,C,y.from)),L&&(A=e.path.distort(A,1,T/D)),O=new e.paths.Arc(A.origin,A.end,T,P,U),L?(T<O.radius&&(R=O.radius/T,T*=R,D*=R),I=new e.models.EllipticArc(O,1,D/T,s.bezierAccuracy),e.model.rotate(I,-C,y.from),c(I)):(e.path.rotate(O,-C,y.from),o(O)),y.from=E;return E},S.C=function(y){for(var T,D,C=y.from,P,U=0;U<y.data.length;U=U+6)y.from=C,T=d(y,0+U,C),D=d(y,2+U,C),P=d(y,4+U,C),c(new e.models.BezierCurve(C,T,D,P,s.bezierAccuracy)),C=P;return P},S.S=function(y){var T,D,C,P=y.from,U;y.prev.command==="C"||y.prev.command==="S"?D=d(y.prev,-4):D=y.from;for(var E=0;E<y.data.length;E=E+4)y.from=P,T=e.point.rotate(D,180,P),C=d(y,0+E),U=d(y,2+E),c(new e.models.BezierCurve(P,T,C,U,s.bezierAccuracy)),P=U,D=C;return U},S.Q=function(y){for(var T,D=y.from,C,P=0;P<y.data.length;P=P+4)y.from=D,T=d(y,0+P),C=d(y,2+P),c(new e.models.BezierCurve(D,T,C,s.bezierAccuracy)),D=C;return C},S.T=function(y){var T,D,C;y.prev.command==="Q"?(D=d(y.prev,-4),T=e.point.rotate(D,180,y.from)):y.prev.command==="T"?(y.prev.absolute=!0,T=d(y.prev,-2)):T=y.from;for(var P=0;P<y.data.length;P=P+2)C=d(y,0+P),c(new e.models.BezierCurve(y.from,T,C,s.bezierAccuracy)),y.from=C,T=e.point.rotate(T,180,y.from);var U=e.point.mirror(T,!1,!0);return y.data.push.apply(y.data,U),C};for(var w=[0,0],F=[0,0],m=0,l,u=/([achlmqstvz])([0-9e\.,\+-\s]*)/ig,p;(p=u.exec(a))!==null;){p.index===u.lastIndex&&u.lastIndex++;var v=p[1],h=p[2],g={command:v.toUpperCase(),data:[],from:F,prev:l};v===g.command&&(g.absolute=!0),g.data=r.parseNumericList(h);var b=S[g.command];b&&(F=b(g)),l=g}return f}r.fromSVGPathData=i})(e.importer||(e.importer={}))})(t||(t={}));var t;(function(e){(function(r){function i(v,h){var g=new e.measure.Atlas(v),b=e.measure.modelExtents(v,g),y=b.high[1],T=[],D={},C={beforeChildWalk:function(O){var R=O.childModel,I=g.modelMap[O.routeKey];if(I){var z=e.measure.augment(I);e.model.originate(R,[z.center[0],y*h]);var H=R.origin[0]-b.low[0];D[O.childId]=H;var Z=H/b.width;return T.push({childId:O.childId,xRatio:Z}),!1}}};e.model.walk(v,C),T.sort(function(O,R){return O.xRatio-R.xRatio});var P=T[0],U=T[T.length-1];if(T.length>1){var E=P.xRatio,L=U.xRatio,A=L-E;T.forEach(function(O){return O.xRatio=(O.xRatio-E)/A})}return{cpa:T,firstX:D[P.childId],lastX:b.width-D[U.childId]}}function a(v,h,g){h.forEach(function(b){var y=v.models[b.childId];y.origin=b.origin,g&&e.model.rotate(y,b.angle,b.origin)})}var s={};s[e.pathType.Arc]=function(v,h,g){var b=e.angle.ofArcSpan(v);g.forEach(function(y){return y.angle=h?v.endAngle-y.xRatio*b-90:v.startAngle+y.xRatio*b+90})},s[e.pathType.Line]=function(v,h,g){var b=e.angle.ofLineInDegrees(v);g.forEach(function(y){return y.angle=b})};function f(v,h,g,b,y,T){g===void 0&&(g=0),b===void 0&&(b=!1),y===void 0&&(y=!1),T===void 0&&(T=!0);var D=i(v,g),C=D.cpa,P=h;if(y&&C.length>1){var U=e.measure.pathLength(h);D.firstX+D.lastX<U&&(P=e.path.clone(h),e.path.alterLength(P,-D.firstX,!0),e.path.alterLength(P,-D.lastX))}C.forEach(function(L){return L.origin=e.point.middle(P,b?1-L.xRatio:L.xRatio)});var E=s[P.type];return E&&E(P,b,C),a(v,C,T),v}r.childrenOnPath=f;function o(v,h){var g=new e.paths.Arc([0,0],0,0,0);return v.map(function(b,y){var T;return y===0?T=e.angle.ofPointInDegrees(b,v[y+1])+90:y===v.length-1?T=e.angle.ofPointInDegrees(v[y-1],b)+90:(g.origin=b,g.startAngle=e.angle.ofPointInDegrees(b,v[y+1]),g.endAngle=e.angle.ofPointInDegrees(b,v[y-1]),T=e.angle.ofArcMiddle(g)),T+h})}function c(v,h,g,b,y,T){g===void 0&&(g=0),b===void 0&&(b=!1),y===void 0&&(y=!1),T===void 0&&(T=!0);var D=i(v,g),C=D.cpa,P=h.pathLength,U;if(C.length>1){y&&(P-=D.firstX+D.lastX);var E=C.map(function(R){return(b?1-R.xRatio:R.xRatio)*P}),L;if(b&&E.reverse(),L=E.map(function(R,I){return Math.abs(R-(I==0?0:E[I-1]))}),y?L[0]+=b?D.lastX:D.firstX:L.shift(),U=e.chain.toPoints(h,L),U.length<C.length){var A=h.links[h.links.length-1];U.push(A.endPoints[A.reversed?0:1])}y&&U.shift()}else U=e.chain.toPoints(h,.5*P),U.length=2,U.push(h.links[h.links.length-1].endPoints[h.links[h.links.length-1].reversed?0:1]);b&&U.reverse();var O=o(U,-90);return C.length>1?C.forEach(function(R,I){R.angle=O[I],R.origin=U[I]}):(C[0].angle=O[1],C[0].origin=U[1]),a(v,C,T),v}r.childrenOnChain=c;function d(v,h,g,b){var y={},T,D;e.isModel(v)?(T=y.models={},D=e.model.rotate):(T=y.paths={},D=e.path.rotate);for(var C=0;C<h;C++)T[C]=D(e.cloneObject(v),C*g,b);return y}r.cloneToRadial=d;function x(v,h,g,b){var y={},T,D,C;e.isModel(h)?(D=e.measure.modelExtents,T=y.models={},C=e.model.move):(D=e.measure.pathExtents,T=y.paths={},C=e.path.move);for(var P=D(h),U=P.high[v]-P.low[v],E=0;E<g;E++){var L=[0,0];L[v]=E*(U+b),T[E]=C(e.cloneObject(h),L)}return y}function S(v,h,g){return g===void 0&&(g=0),x(1,v,h,g)}r.cloneToColumn=S;function w(v,h,g){return g===void 0&&(g=0),x(0,v,h,g)}r.cloneToRow=w;function F(v,h,g,b){var y=m(b);return S(w(v,h,y[0]),g,y[1])}r.cloneToGrid=F;function m(v){return Array.isArray(v)?v:[v,v]}function l(v,h,g,b){var y;e.isModel(v)?y=v:y={paths:{0:v}};for(var T=b(y),D={models:{}},C=0;C<g;C++){var P=C%2;D.models[C]=e.model.move(w(v,h+P,T.xMargin),[P*T.x,C*T.y])}return D}function u(v,h,g,b){var y=m(b);function T(D){var C=e.measure.modelExtents(D),P=y[0]||0,U=y[1]||0;return{x:(C.width+P)/-2,y:C.height+U,xMargin:P}}return l(v,h,g,T)}r.cloneToBrick=u;function p(v,h,g,b){b===void 0&&(b=0);function y(T){var D=e.measure.boundingHexagon(T),C=2*e.solvers.equilateralAltitude(D.radius),P=C+b;return{x:P/-2,y:e.solvers.equilateralAltitude(P),xMargin:b}}return l(v,h,g,y)}r.cloneToHoneycomb=p})(e.layout||(e.layout={}))})(t||(t={}));var t;(function(e){(function(r){var i=!1;function a(){if(!i)try{var h=n.prototype;i=!0}catch{throw"Bezier library not found. If you are using Node, try running 'npm install' or if you are in the browser, download http://pomax.github.io/bezierjs/bezier.js to your website and add a script tag."}}var s;function f(h){var g=[h.origin];g.push.apply(g,h.controls),g.push(h.end);var b=g.map(function(y){var T={x:y[0],y:y[1]};return T});return s?n.apply(s,b):(a(),s=new n(b)),s}function o(h,g){var b=h.points.map(x),y=new p(b);return y}function c(h){var g=[];return g.push.apply(g,h.origin),g.push.apply(g,h.controls[0]),h.controls.length>1&&g.push.apply(g,h.controls[1]),g.push.apply(g,h.end),a(),new n(g)}function d(h){var g=h.extrema().values.map(function(b){return e.round(b)}).filter(function(b,y,T){return T.indexOf(b)===y}).sort();return g.length===0?[0,1]:(g[0]!==0&&g.unshift(0),g[g.length-1]!==1&&g.push(1),g)}function x(h){return[h.x,h.y]}var S=(function(){function h(g,b,y){this.t=b,this.point=e.point.add(x(g.get(b)),y)}return h})();function w(h,g,b,y,T){var D=b-g;function C(P){var U=g+D*P,E=x(h.get(U)),L=e.point.middle(y,T?1-P:P);return e.measure.pointDistance(L,E)}return C(.25)+C(.75)}function F(h,g,b,y){for(var T,D,C=new S(h,g),P=new S(h,b),U=P,E=C,L=0,A=U,O;L<100;){var R=x(h.get((C.t+A.t)/2));try{T=new e.paths.Arc(C.point,R,A.point)}catch{if(D)return D;break}O===void 0&&(O=e.measure.isPointEqual(C.point,e.point.fromAngleOnCircle(T.endAngle,T)));var I=w(h,g,A.t,T,O);if(I<=y?(T.bezierData={startT:g,endT:A.t},E=A,D=T):U=A,E.t===U.t||D&&D!==T&&e.angle.ofArcSpan(T)-e.angle.ofArcSpan(D)<.5)return D;L++,A=new S(h,(E.t+U.t)/2)}var z=new e.paths.Line(C.point,A.point);return z.bezierData={startT:g,endT:A.t},z}function m(h,g,b,y,T,D){for(var C=0,P;y<T;){P=F(g,y,T,b),y=P.bezierData.endT;var U=e.measure.pathLength(P);U<1e-4||(h.paths[P.type+"_"+(D+C)]=P,C++)}return C}function l(h,g,b,y,T){var D=f(h.seed),C=[g.bezierData.startT,g.bezierData.endT].map(function(L){return new S(D,L,y)}),P=b.slice(),U=P.map(function(L){return e.measure.pointDistance(L,C[0].point)});U[0]>U[1]&&P.reverse();for(var E=2;E--;)if(!e.measure.isPointEqual(P[E],C[E].point,T))return null;return g.bezierData}function u(h,g,b,y,T){var D=[g.links[0],g.links[g.links.length-1]];D[0].walkedPath.pathContext.bezierData.startT>D[1].walkedPath.pathContext.bezierData.startT&&(e.chain.reverse(g),D.reverse());var C=D.map(function(U){return l(h,U.walkedPath.pathContext,U.endPoints,U.walkedPath.offset,T)}),P={startT:C[0]?C[0].startT:null,endT:C[1]?C[1].endT:null};return P.startT!==null&&P.endT!==null?P:g.links.length>2?(P.startT===null&&(y(g.links[0].walkedPath.pathContext,b,!0),P.startT=g.links[1].walkedPath.pathContext.bezierData.startT),P.endT===null&&(y(g.links[g.links.length-1].walkedPath.pathContext,b,!0),P.endT=g.links[g.links.length-2].walkedPath.pathContext.bezierData.endT),P):null}var p=(function(){function h(){for(var g=[],b=0;b<arguments.length;b++)g[b]=arguments[b];switch(this.type=e.pathType.BezierSeed,g.length){case 1:var y=g[0];this.origin=y[0],y.length===3?(this.controls=[y[1]],this.end=y[2]):y.length===4?(this.controls=[y[1],y[2]],this.end=y[3]):this.end=y[1];break;case 3:Array.isArray(g[1])?this.controls=g[1]:this.controls=[g[1]],this.end=g[2];break;case 4:this.controls=[g[1],g[2]],this.end=g[3];break}}return h})(),v=(function(){function h(){for(var g=[],b=0;b<arguments.length;b++)g[b]=arguments[b];this.type=h.typeName;var y=Array.isArray(g[0]);switch(g.length){case 2:if(y)this.accuracy=g[1];else{this.seed=g[0],this.accuracy=g[1];break}case 1:if(y){var T=g[0];this.seed=new p(T)}else this.seed=g[0];break;default:switch(g.length){case 4:if(e.isPoint(g[3])){this.seed=new p(g);break}else this.accuracy=g[3];case 3:y&&(this.seed=new p(g.slice(0,3)));break;case 5:this.accuracy=g[4],this.seed=new p(g.slice(0,4));break}break}if(this.paths={},e.measure.isBezierSeedLinear(this.seed)){var D=new e.paths.Line(e.point.clone(this.seed.origin),e.point.clone(this.seed.end));D.bezierData={startT:0,endT:1},this.paths={0:D};return}var C=c(this.seed),P=d(C);if(this.paths={},!this.accuracy){var U=C.length();this.accuracy=U/100}for(var E=0,L=1;L<P.length;L++){var A=P[L]-P[L-1];E+=m(this,C,this.accuracy*A,P[L-1],P[L],E)}}return h.getBezierSeeds=function(g,b){b===void 0&&(b={}),b.shallow=!0,b.unifyBeziers=!1;var y={},T=function(D,C,P){P===void 0&&(P=!1),y[C]||(y[C]=[]),y[C].push(P?e.path.clone(D):D)};return e.model.findChains(g,function(D,C,P){D.forEach(function(U){var E=u(g,U,P,T,b.pointMatchingDistance);if(E){var L=f(g.seed),A=L.split(E.startT,E.endT);T(o(A),P)}else U.links.forEach(function(O){return T(O.walkedPath.pathContext,P,!0)})}),C.forEach(function(U){if(U.pathContext.type===e.pathType.Line)return T(U.pathContext,P,!0);var E=l(g,U.pathContext,e.point.fromPathEnds(U.pathContext),U.offset,b.pointMatchingDistance);if(E){var L=f(g.seed),A=L.split(E.startT,E.endT);T(o(A),P)}else T(U.pathContext,P,!0)})},b),b.byLayers?y:y[""]},h.computeLength=function(g){var b=c(g);return b.length()},h.computePoint=function(g,b){var y=f(g),T=y.compute(b);return x(T)},h.typeName="BezierCurve",h})();r.BezierCurve=v,v.metaParameters=[{title:"points",type:"select",value:[[[100,0],[-80,-60],[100,220],[100,60]],[[0,0],[100,0],[100,100]],[[0,0],[20,0],[80,100],[100,100]]]}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=45;function a(d){return 4*(Math.tan(d/4)/3)}function s(d){var x=e.angle.ofArcSpan(d),S=a(e.angle.toRadians(x)),w=[d.radius,d.radius*S],F=e.point.rotate(e.point.mirror(w,!1,!0),x,[0,0]);return[w,F].map(function(m){return e.point.add(d.origin,e.point.rotate(m,d.startAngle,[0,0]))})}function f(d){var x=e.angle.ofArcSpan(d);if(x<=90){var S=e.point.fromPathEnds(d),w=s(d);return{type:e.pathType.BezierSeed,origin:S[0],controls:w,end:S[1]}}return null}var o=(function(){function d(){for(var x=[],S=0;S<arguments.length;S++)x[S]=arguments[S];var w=this;this.models={};var F=360/i,m,l=e.isPoint(x[0]),u=function(p){switch(p){case 2:l&&(w.origin=x[0]);break;case 3:w.origin=x[0];break;case 4:w.origin=[x[0],x[1]];break}for(var v=360/F,h=new e.paths.Arc([0,0],1,0,v),g=0;g<F;g++){var b=f(h);switch(p){case 1:b=e.path.scale(b,x[0]);break;case 2:l?b=e.path.scale(b,x[1]):b=e.path.distort(b,x[0],x[1]);break;case 3:b=e.path.distort(b,x[1],x[2]);break;case 4:b=e.path.distort(b,x[2],x[3]);break}w.models["Curve_"+(1+g)]=new r.BezierCurve(b,m),h.startAngle+=v,h.endAngle+=v}};switch(x.length){case 2:u(2);break;case 3:l?u(3):(m=x[2],u(2));break;case 4:l?(m=x[3],u(3)):u(4);break;case 5:m=x[4],u(4);break}}return d})();r.Ellipse=o,o.metaParameters=[{title:"radiusX",type:"range",min:1,max:50,value:50},{title:"radiusY",type:"range",min:1,max:50,value:25}];var c=(function(){function d(){for(var x=[],S=0;S<arguments.length;S++)x[S]=arguments[S];this.models={};var w,F,m,l;e.isPathArc(x[0])?(w=x[0],m=x[1],l=x[2],F=x[3]):(w=new e.paths.Arc([0,0],1,x[0],x[1]),m=x[2],l=x[3],F=x[4]);for(var u=e.angle.ofArcSpan(w),p=Math.ceil(u/i),v=u/p,h=e.path.clone(w),g=0;g<p;g++){h.startAngle=w.startAngle+g*v,h.endAngle=h.startAngle+v;var b=f(h);b=e.path.distort(b,m,l),this.models["Curve_"+(1+g)]=new r.BezierCurve(b,F)}}return d})();r.EllipticArc=c,c.metaParameters=[{title:"startAngle",type:"range",min:0,max:90,value:0},{title:"endAngle",type:"range",min:90,max:360,value:180},{title:"radiusX",type:"range",min:1,max:50,value:50},{title:"radiusY",type:"range",min:1,max:50,value:25}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){function i(s){var f;if(Array.isArray(s)){if(e.isPoint(s[0]))return s;f=s}else f=e.importer.parseNumericList(s);for(var o=[],c=0;c<f.length;c+=2)o.push([f[c],f[c+1]]);return o}var a=(function(){function s(){for(var f=[],o=0;o<arguments.length;o++)f[o]=arguments[o];var c=this;this.paths={};var d,x;switch(f.length){case 1:d=!0,x=i(f[0]);break;case 2:d=f[0],x=i(f[1]);break}for(var S=function(F,m,l){l===void 0&&(l=!1),!(l&&e.measure.pointDistance(x[F],x[m])==0)&&(c.paths["ShapeLine"+w]=new e.paths.Line(x[F],x[m]))},w=1;w<x.length;w++)S(w-1,w);d&&x.length>2&&S(x.length-1,0,!0)}return s})();r.ConnectTheDots=a,a.metaParameters=[{title:"closed",type:"bool",value:!0},{title:"points",type:"select",value:[[[0,0],[40,40],[60,20],[100,100],[60,60],[40,80]],[[0,0],[100,0],[50,87]],[-10,0,10,0,0,20],"-10 0 10 0 0 20"]}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f,o,c){this.paths={},this.paths=new r.ConnectTheDots(!0,a.getPoints(s,f,o,c)).paths}return a.circumscribedRadius=function(s,f){return s/Math.cos(f/2)},a.getPoints=function(s,f,o,c){o===void 0&&(o=0),c===void 0&&(c=!1);var d=[],x=e.angle.toRadians(o),S=2*Math.PI/s;c&&(f=a.circumscribedRadius(f,S));for(var w=0;w<s;w++)d.push(e.point.fromPolar(S*w+x,f));return d},a})();r.Polygon=i,i.metaParameters=[{title:"number of sides",type:"range",min:3,max:24,value:6},{title:"radius",type:"range",min:1,max:100,value:50},{title:"offset angle",type:"range",min:0,max:180,value:0},{title:"radius on flats (vs radius on vertexes)",type:"bool",value:!1}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f,o){this.paths={};for(var c=0;c<f.length;c++){var d=o?o[c]:c.toString();this.paths[d]=new e.paths.Circle(f[c],s)}}return a})();r.Holes=i,i.metaParameters=[{title:"holeRadius",type:"range",min:.1,max:10,step:.1,value:1},{title:"points",type:"select",value:[[[0,0],[10,10],[20,20],[30,30],[40,40],[50,50],[60,60],[70,70],[80,80]],[[0,0],[0,25],[0,50],[0,75],[0,100],[25,50],[50,50],[75,50],[100,100],[100,75],[100,50],[100,25],[100,0]]]}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f,o,c){c===void 0&&(c=0),this.paths={};var d=r.Polygon.getPoints(o,s,c),x=d.map(function(S,w){return"bolt "+w});this.paths=new r.Holes(f,d,x).paths}return a})();r.BoltCircle=i,i.metaParameters=[{title:"bolt circle radius",type:"range",min:1,max:100,value:50},{title:"hole radius",type:"range",min:1,max:50,value:5},{title:"bolt count",type:"range",min:3,max:24,value:12},{title:"offset angle",type:"range",min:0,max:180,value:0}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f,o){this.paths={};var c=[[0,0],[s,0],[s,f],[0,f]],d=["BottomLeft_bolt","BottomRight_bolt","TopRight_bolt","TopLeft_bolt"];this.paths=new r.Holes(o,c,d).paths}return a})();r.BoltRectangle=i,i.metaParameters=[{title:"width",type:"range",min:1,max:100,value:100},{title:"height",type:"range",min:1,max:100,value:50},{title:"hole radius",type:"range",min:1,max:50,value:5}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f,o,c,d){c===void 0&&(c=0),d===void 0&&(d=!1),this.paths={};var x=Math.min(f,s)/2,S;switch(c){case-1:case 1:S=x/2;break;case 0:default:S=x*Math.SQRT2/2;break}o=Math.min(o,S);var w,F,m,l,u;switch(c){case-1:w=0,F=o,m=0,l=o*2,u=[180,0,0,180];break;case 1:w=o,F=0,m=o*2,l=0,u=[270,270,90,90];break;case 0:default:w=F=o/Math.SQRT2,m=l=w*2,u=[225,315,45,135];break}d?(this.paths.Left=new e.paths.Line([0,0],[0,f-l]),this.paths.Right=new e.paths.Line([s,0],[s,f-l])):(this.paths.Left=new e.paths.Line([0,l],[0,f-l]),this.paths.Right=new e.paths.Line([s,l],[s,f-l]),this.paths.Bottom=new e.paths.Line([m,0],[s-m,0]),this.paths.BottomLeft=new e.paths.Arc([w,F],o,u[0]-90,u[0]+90),this.paths.BottomRight=new e.paths.Arc([s-w,F],o,u[1]-90,u[1]+90)),this.paths.TopRight=new e.paths.Arc([s-w,f-F],o,u[2]-90,u[2]+90),this.paths.TopLeft=new e.paths.Arc([w,f-F],o,u[3]-90,u[3]+90),this.paths.Top=new e.paths.Line([m,f],[s-m,f])}return a})();r.Dogbone=i,i.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100},{title:"radius",type:"range",min:0,max:50,value:5},{title:"style",type:"select",value:[0,1,-1]},{title:"bottomless",type:"bool",value:!1}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f,o,c){this.paths={};var d=s/2;o<0&&(o=0),o===void 0&&(o=d),o=Math.min(o,d),o=Math.min(o,f);var x=Math.max(d-o,0),S=Math.max(f-o,0);c||(this.paths.Bottom=new e.paths.Line([-d,0],[d,0])),S&&(this.paths.Left=new e.paths.Line([-d,0],[-d,S]),this.paths.Right=new e.paths.Line([d,0],[d,S])),o>0&&(this.paths.TopLeft=new e.paths.Arc([-x,S],o,90,180),this.paths.TopRight=new e.paths.Arc([x,S],o,0,90)),x&&(this.paths.Top=new e.paths.Line([-x,f],[x,f]))}return a})();r.Dome=i,i.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100},{title:"radius",type:"range",min:0,max:50,value:25},{title:"bottomless",type:"bool",value:!1}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];this.paths={};var o,c,d=0;switch(s.length){case 3:o=s[0],c=s[1],d=s[2];break;case 2:d=s[1];case 1:var x=e.measure.modelExtents(s[0]);this.origin=e.point.subtract(x.low,[d,d]),o=x.high[0]-x.low[0]+2*d,c=x.high[1]-x.low[1]+2*d;break}var S=Math.min(c,o)/2;d=Math.min(d,S);var w=o-d,F=c-d;d>0&&(this.paths.BottomLeft=new e.paths.Arc([d,d],d,180,270),this.paths.BottomRight=new e.paths.Arc([w,d],d,270,0),this.paths.TopRight=new e.paths.Arc([w,F],d,0,90),this.paths.TopLeft=new e.paths.Arc([d,F],d,90,180)),w-d>0&&(this.paths.Bottom=new e.paths.Line([d,0],[w,0]),this.paths.Top=new e.paths.Line([w,c],[d,c])),F-d>0&&(this.paths.Right=new e.paths.Line([o,d],[o,F]),this.paths.Left=new e.paths.Line([0,F],[0,d]))}return a})();r.RoundRectangle=i,i.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100},{title:"radius",type:"range",min:0,max:50,value:11}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f){this.paths={},this.paths=new r.RoundRectangle(s,f,Math.min(f/2,s/2)).paths}return a})();r.Oval=i,i.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f,o,c,d,x){d===void 0&&(d=!1),x===void 0&&(x=!1);var S=this;this.paths={};var w;if(x&&(w={models:{}},this.models={Caps:w}),!(c<=0||o<=0)&&(s=e.angle.noRevolutions(s),f=e.angle.noRevolutions(f),e.round(s-f)!=0)){f<s&&(f+=360);var F=function(h,g,b,y){var T;return x?(T={paths:{}},w.models[h]=T):T=S,T.paths[h]=new e.paths.Arc(e.point.fromPolar(e.angle.toRadians(g),o),c,g+b,g+y)},m=function(h,g){return S.paths[h]=new e.paths.Arc([0,0],o+g,s,f)};m("Outer",c);var l=o-c>0;l&&m("Inner",-c);var u=[];u.push(F("StartCap",s,180,0)),u.push(F("EndCap",f,0,180));var p=e.measure.pointDistance(u[0].origin,u[1].origin);if(p/2<c){var v=e.path.intersection(u[0],u[1]);v&&((!l||!d)&&(u[0].startAngle=v.path1Angles[0],u[1].endAngle=v.path2Angles[0]),!d&&l&&v.intersectionPoints.length==2&&(F("StartCap2",s,180,0).endAngle=v.path1Angles[1],F("EndCap2",f,0,180).startAngle=v.path2Angles[1]+360))}}}return a})();r.OvalArc=i,i.metaParameters=[{title:"start angle",type:"range",min:-360,max:360,step:1,value:180},{title:"end angle",type:"range",min:-360,max:360,step:1,value:0},{title:"sweep",type:"range",min:0,max:100,step:1,value:50},{title:"radius",type:"range",min:0,max:100,step:1,value:15},{title:"self intersect",type:"bool",value:!1}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];this.paths={};var o,c;if(s.length===2&&!e.isObject(s[0]))o=s[0],c=s[1];else{var d=0,x;e.isModel(s[0])?(x=e.measure.modelExtents(s[0]),s.length===2&&(d=s[1])):x=s[0],this.origin=e.point.subtract(x.low,[d,d]),o=x.high[0]-x.low[0]+2*d,c=x.high[1]-x.low[1]+2*d}this.paths=new r.ConnectTheDots(!0,[[0,0],[o,0],[o,c],[0,c]]).paths}return a})();r.Rectangle=i,i.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f){this.paths={};var o={Ring_outer:s,Ring_inner:f};for(var c in o){var d=o[c];d===void 0||d<=0||(this.paths[c]=new e.paths.Circle(e.point.zero(),d))}}return a})();r.Ring=i,i.metaParameters=[{title:"outer radius",type:"range",min:0,max:100,step:1,value:50},{title:"inner radius",type:"range",min:0,max:100,step:1,value:20}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f,o){this.paths={};var c=new e.paths.Arc([0,0],s,0,360),d=new e.paths.Arc([f,0],o,0,360),x=e.solvers.circleTangentAngles(c,d);x?(x=x.sort(function(S,w){return S-w}),c.startAngle=x[0],c.endAngle=x[1],d.startAngle=x[1],d.endAngle=x[0],this.paths.Left=c,this.paths.Right=d,this.paths.Top=new e.paths.Line(e.point.fromAngleOnCircle(x[0],c),e.point.fromAngleOnCircle(x[0],d)),this.paths.Bottom=new e.paths.Line(e.point.fromAngleOnCircle(x[1],c),e.point.fromAngleOnCircle(x[1],d))):this.paths.Belt=new e.paths.Circle(Math.max(s,o))}return a})();r.Belt=i,i.metaParameters=[{title:"left radius",type:"range",min:0,max:100,value:30},{title:"distance between centers",type:"range",min:0,max:100,value:50},{title:"right radius",type:"range",min:0,max:100,value:15}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f){this.paths={};function o(l,u){return l+(u*u-l*l)/(2*l)}var c=f/2,d=s/2,x,S,w,F;s>f?(x=o(c,d),S=270,w=360-e.angle.toDegrees(Math.acos(d/x)),F=[0,x]):(x=o(d,c),S=180-e.angle.toDegrees(Math.asin(c/x)),w=180,F=[x,0]);var m=new e.paths.Arc(F,x,S,w);this.paths.curve_start=m,this.paths.curve_end=e.path.moveRelative(e.path.mirror(m,!0,!0),[s,f])}return a})();r.SCurve=i,i.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f,o,c){c===void 0&&(c=!1);var d=this;this.paths={};var x;c&&(x={models:{}},this.models={Caps:x});var S=function(m,l){var u;c?(u={paths:{}},x.models[m]=u):u=d,u.paths[m]=l},w=e.angle.ofPointInDegrees(s,f),F=e.measure.pointDistance(s,f);this.paths.Top=new e.paths.Line([0,o],[F,o]),this.paths.Bottom=new e.paths.Line([0,-o],[F,-o]),S("StartCap",new e.paths.Arc([0,0],o,90,270)),S("EndCap",new e.paths.Arc([F,0],o,270,90)),e.model.rotate(this,w,[0,0]),this.origin=s}return a})();r.Slot=i,i.metaParameters=[{title:"origin",type:"select",value:[[0,0],[10,0],[10,10]]},{title:"end",type:"select",value:[[80,0],[0,30],[10,30]]},{title:"radius",type:"range",min:1,max:50,value:10}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s){this.paths={},this.paths=new r.Rectangle(s,s).paths}return a})();r.Square=i,i.metaParameters=[{title:"side",type:"range",min:1,max:100,value:100}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f,o,c){c===void 0&&(c=2),this.paths={},o||(o=f*a.InnerRadiusRatio(s,c));for(var d=r.Polygon.getPoints(s,f),x=r.Polygon.getPoints(s,o,180/s),S=[],w=0;w<s;w++)S.push(d[w]),S.push(x[w]);var F=new r.ConnectTheDots(!0,S);this.paths=F.paths,delete F.paths}return a.InnerRadiusRatio=function(s,f){return s>0&&f>1&&f<s/2?Math.cos(Math.PI*f/s)/Math.cos(Math.PI*(f-1)/s):0},a})();r.Star=i,i.metaParameters=[{title:"number of sides",type:"range",min:3,max:24,value:8},{title:"outer radius",type:"range",min:1,max:100,value:50},{title:"inner radius",type:"range",min:0,max:100,value:15},{title:"skip points (when inner radius is zero)",type:"range",min:0,max:12,value:2}]})(e.models||(e.models={}))})(t||(t={}));var t;(function(e){(function(r){var i=(function(){function a(s,f,o,c,d,x,S){c===void 0&&(c=!1),d===void 0&&(d=!1);var w=this;this.models={};var F=0,m,l,u=function(E,L,A,O,R){var I=a.glyphToModel(E,O,x,s);if(I.origin=[L,0],d&&(I.paths||I.models)){var z=e.measure.modelExtents(I);if(z){var H=z.high[0]-z.low[0];e.model.originate(I,[z.low[0]+H/2,0])}}if(c&&F>0){var Z={},Q;m?Q={models:{deleted:m,char:l}}:Q=l,e.model.combine(Q,I,!1,!0,!1,!0,Z),m=Z.out_deleted[1]}w.models[F]=I,F++,l=I};if(s.layout&&typeof s.layout=="function")for(var p=s,v=S,h=p.layout(f,v?.features,v?.script,v?.language,v?.direction),g=o/p.unitsPerEm,b=0,y=0;y<h.glyphs.length;y++){var T=h.glyphs[y],D=h.positions[y],C=b+(D.xOffset||0)*g,P=(D.yOffset||0)*g;u(T,C,P,o),b+=(D.xAdvance||0)*g}else{var U=s;U.forEachGlyph(f,0,0,o,S,u)}}return a.glyphToModel=function(s,f,o,c){var d={},x,S,w=0;function F(y,T){d.paths||(d.paths={}),T&&(d.layer||(d.layer=T)),d.paths["p_"+ ++w]=y}function m(y,T){d.models||(d.models={}),T&&(d.layer||(d.layer=T)),d.models["p_"+ ++w]=y}var l=s.path&&!s.getPath,u;if(l&&c){var p=f/c.unitsPerEm;if(u=s.path,s.layers&&s.layers.length>0)return s.layers.forEach(function(y,T){var D=c.getGlyph(y.glyph),C=D.path;if(C&&C.commands){var P=void 0;if(c.COLR&&c.CPAL&&y.color!==void 0){var U=c.CPAL,E=U.colorPalettes||U.colorRecords;if(E&&E.length>0){var L=E[0];if(L&&L.length>y.color){var A=L[y.color];if(A){var O=A.red!==void 0?A.red:A.r||0,R=A.green!==void 0?A.green:A.g||0,I=A.blue!==void 0?A.blue:A.b||0;P="color_".concat(O.toString(16).padStart(2,"0")).concat(R.toString(16).padStart(2,"0")).concat(I.toString(16).padStart(2,"0"))}}}}for(var z=void 0,H=void 0,Z=0,Q=C.commands;Z<Q.length;Z++){var $=Q[Z],B=a.convertFontkitCommand($,p);switch($.command){case"moveTo":z=B[0],H=B[0];break;case"closePath":B[0]=z;case"lineTo":H&&!e.measure.isPointEqual(H,B[0])&&F(new e.paths.Line(H,B[0]),P),H=B[0];break;case"bezierCurveTo":H&&m(new r.BezierCurve(H,B[0],B[1],B[2],o),P),H=B[2];break;case"quadraticCurveTo":H&&m(new r.BezierCurve(H,B[0],B[1],o),P),H=B[1];break}}}}),d;if(!u||!u.commands)return d;for(var v=0,h=u.commands;v<h.length;v++){var g=h[v],b=a.convertFontkitCommand(g,p);switch(g.command){case"moveTo":x=b[0],S=b[0];break;case"closePath":b[0]=x;case"lineTo":e.measure.isPointEqual(S,b[0])||F(new e.paths.Line(S,b[0])),S=b[0];break;case"bezierCurveTo":m(new r.BezierCurve(S,b[0],b[1],b[2],o)),S=b[2];break;case"quadraticCurveTo":m(new r.BezierCurve(S,b[0],b[1],o)),S=b[1];break}}}else u=s.getPath(0,0,f),u.commands.map(function(y,T){var D=[[y.x,y.y],[y.x1,y.y1],[y.x2,y.y2]].map(function(C){if(C[0]!==void 0)return e.point.mirror(C,!1,!0)});switch(y.type){case"M":x=D[0];break;case"Z":D[0]=x;case"L":e.measure.isPointEqual(S,D[0])||F(new e.paths.Line(S,D[0]));break;case"C":m(new r.BezierCurve(S,D[1],D[2],D[0],o));break;case"Q":m(new r.BezierCurve(S,D[1],D[0],o));break}S=D[0]});return d},a.convertFontkitCommand=function(s,f){var o=[];switch(s.command){case"moveTo":case"lineTo":o.push([s.args[0]*f,s.args[1]*f]);break;case"quadraticCurveTo":o.push([s.args[0]*f,s.args[1]*f]),o.push([s.args[2]*f,s.args[3]*f]);break;case"bezierCurveTo":o.push([s.args[0]*f,s.args[1]*f]),o.push([s.args[2]*f,s.args[3]*f]),o.push([s.args[4]*f,s.args[5]*f]);break}return o},a})();r.Text=i,i.metaParameters=[{title:"font",type:"font",value:"*"},{title:"text",type:"text",value:"Hello"},{title:"font size",type:"range",min:10,max:200,value:72},{title:"combine",type:"bool",value:!1},{title:"center character origin",type:"bool",value:!1}]})(e.models||(e.models={}))})(t||(t={})),t.version="0.19.2";var n=Jr();return Ut}var ti=ei();const et=Zn(ti);var Dt,hn;function ni(){if(hn)return Dt;hn=1;var t=0,n=-3;function e(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function r(T,D){this.source=T,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=D,this.destLen=0,this.ltree=new e,this.dtree=new e}var i=new e,a=new e,s=new Uint8Array(30),f=new Uint16Array(30),o=new Uint8Array(30),c=new Uint16Array(30),d=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),x=new e,S=new Uint8Array(320);function w(T,D,C,P){var U,E;for(U=0;U<C;++U)T[U]=0;for(U=0;U<30-C;++U)T[U+C]=U/C|0;for(E=P,U=0;U<30;++U)D[U]=E,E+=1<<T[U]}function F(T,D){var C;for(C=0;C<7;++C)T.table[C]=0;for(T.table[7]=24,T.table[8]=152,T.table[9]=112,C=0;C<24;++C)T.trans[C]=256+C;for(C=0;C<144;++C)T.trans[24+C]=C;for(C=0;C<8;++C)T.trans[168+C]=280+C;for(C=0;C<112;++C)T.trans[176+C]=144+C;for(C=0;C<5;++C)D.table[C]=0;for(D.table[5]=32,C=0;C<32;++C)D.trans[C]=C}var m=new Uint16Array(16);function l(T,D,C,P){var U,E;for(U=0;U<16;++U)T.table[U]=0;for(U=0;U<P;++U)T.table[D[C+U]]++;for(T.table[0]=0,E=0,U=0;U<16;++U)m[U]=E,E+=T.table[U];for(U=0;U<P;++U)D[C+U]&&(T.trans[m[D[C+U]]++]=U)}function u(T){T.bitcount--||(T.tag=T.source[T.sourceIndex++],T.bitcount=7);var D=T.tag&1;return T.tag>>>=1,D}function p(T,D,C){if(!D)return C;for(;T.bitcount<24;)T.tag|=T.source[T.sourceIndex++]<<T.bitcount,T.bitcount+=8;var P=T.tag&65535>>>16-D;return T.tag>>>=D,T.bitcount-=D,P+C}function v(T,D){for(;T.bitcount<24;)T.tag|=T.source[T.sourceIndex++]<<T.bitcount,T.bitcount+=8;var C=0,P=0,U=0,E=T.tag;do P=2*P+(E&1),E>>>=1,++U,C+=D.table[U],P-=D.table[U];while(P>=0);return T.tag=E,T.bitcount-=U,D.trans[C+P]}function h(T,D,C){var P,U,E,L,A,O;for(P=p(T,5,257),U=p(T,5,1),E=p(T,4,4),L=0;L<19;++L)S[L]=0;for(L=0;L<E;++L){var R=p(T,3,0);S[d[L]]=R}for(l(x,S,0,19),A=0;A<P+U;){var I=v(T,x);switch(I){case 16:var z=S[A-1];for(O=p(T,2,3);O;--O)S[A++]=z;break;case 17:for(O=p(T,3,3);O;--O)S[A++]=0;break;case 18:for(O=p(T,7,11);O;--O)S[A++]=0;break;default:S[A++]=I;break}}l(D,S,0,P),l(C,S,P,U)}function g(T,D,C){for(;;){var P=v(T,D);if(P===256)return t;if(P<256)T.dest[T.destLen++]=P;else{var U,E,L,A;for(P-=257,U=p(T,s[P],f[P]),E=v(T,C),L=T.destLen-p(T,o[E],c[E]),A=L;A<L+U;++A)T.dest[T.destLen++]=T.dest[A]}}}function b(T){for(var D,C,P;T.bitcount>8;)T.sourceIndex--,T.bitcount-=8;if(D=T.source[T.sourceIndex+1],D=256*D+T.source[T.sourceIndex],C=T.source[T.sourceIndex+3],C=256*C+T.source[T.sourceIndex+2],D!==(~C&65535))return n;for(T.sourceIndex+=4,P=D;P;--P)T.dest[T.destLen++]=T.source[T.sourceIndex++];return T.bitcount=0,t}function y(T,D){var C=new r(T,D),P,U,E;do{switch(P=u(C),U=p(C,2,0),U){case 0:E=b(C);break;case 1:E=g(C,i,a);break;case 2:h(C,C.ltree,C.dtree),E=g(C,C.ltree,C.dtree);break;default:E=n}if(E!==t)throw new Error("Data error")}while(!P);return C.destLen<C.dest.length?typeof C.dest.slice=="function"?C.dest.slice(0,C.destLen):C.dest.subarray(0,C.destLen):C.dest}return F(i,a),w(s,f,4,3),w(o,c,2,1),s[28]=0,f[28]=258,Dt=y,Dt}var ri=ni();const ii=Zn(ri);function Ze(t,n,e,r,i){return Math.pow(1-i,3)*t+3*Math.pow(1-i,2)*i*n+3*(1-i)*Math.pow(i,2)*e+Math.pow(i,3)*r}function qe(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}qe.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};qe.prototype.addPoint=function(t,n){typeof t=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof n=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=n,this.y2=n),n<this.y1&&(this.y1=n),n>this.y2&&(this.y2=n))};qe.prototype.addX=function(t){this.addPoint(t,null)};qe.prototype.addY=function(t){this.addPoint(null,t)};qe.prototype.addBezier=function(t,n,e,r,i,a,s,f){const o=[t,n],c=[e,r],d=[i,a],x=[s,f];this.addPoint(t,n),this.addPoint(s,f);for(let S=0;S<=1;S++){const w=6*o[S]-12*c[S]+6*d[S],F=-3*o[S]+9*c[S]-9*d[S]+3*x[S],m=3*c[S]-3*o[S];if(F===0){if(w===0)continue;const v=-m/w;0<v&&v<1&&(S===0&&this.addX(Ze(o[S],c[S],d[S],x[S],v)),S===1&&this.addY(Ze(o[S],c[S],d[S],x[S],v)));continue}const l=Math.pow(w,2)-4*m*F;if(l<0)continue;const u=(-w+Math.sqrt(l))/(2*F);0<u&&u<1&&(S===0&&this.addX(Ze(o[S],c[S],d[S],x[S],u)),S===1&&this.addY(Ze(o[S],c[S],d[S],x[S],u)));const p=(-w-Math.sqrt(l))/(2*F);0<p&&p<1&&(S===0&&this.addX(Ze(o[S],c[S],d[S],x[S],p)),S===1&&this.addY(Ze(o[S],c[S],d[S],x[S],p)))}};qe.prototype.addQuad=function(t,n,e,r,i,a){const s=t+.6666666666666666*(e-t),f=n+2/3*(r-n),o=s+1/3*(i-t),c=f+1/3*(a-n);this.addBezier(t,n,s,f,o,c,i,a)};function he(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}he.prototype.moveTo=function(t,n){this.commands.push({type:"M",x:t,y:n})};he.prototype.lineTo=function(t,n){this.commands.push({type:"L",x:t,y:n})};he.prototype.curveTo=he.prototype.bezierCurveTo=function(t,n,e,r,i,a){this.commands.push({type:"C",x1:t,y1:n,x2:e,y2:r,x:i,y:a})};he.prototype.quadTo=he.prototype.quadraticCurveTo=function(t,n,e,r){this.commands.push({type:"Q",x1:t,y1:n,x:e,y:r})};he.prototype.close=he.prototype.closePath=function(){this.commands.push({type:"Z"})};he.prototype.extend=function(t){if(t.commands)t=t.commands;else if(t instanceof qe){const n=t;this.moveTo(n.x1,n.y1),this.lineTo(n.x2,n.y1),this.lineTo(n.x2,n.y2),this.lineTo(n.x1,n.y2),this.close();return}Array.prototype.push.apply(this.commands,t)};he.prototype.getBoundingBox=function(){const t=new qe;let n=0,e=0,r=0,i=0;for(let a=0;a<this.commands.length;a++){const s=this.commands[a];switch(s.type){case"M":t.addPoint(s.x,s.y),n=r=s.x,e=i=s.y;break;case"L":t.addPoint(s.x,s.y),r=s.x,i=s.y;break;case"Q":t.addQuad(r,i,s.x1,s.y1,s.x,s.y),r=s.x,i=s.y;break;case"C":t.addBezier(r,i,s.x1,s.y1,s.x2,s.y2,s.x,s.y),r=s.x,i=s.y;break;case"Z":r=n,i=e;break;default:throw new Error("Unexpected path command "+s.type)}}return t.isEmpty()&&t.addPoint(0,0),t};he.prototype.draw=function(t){t.beginPath();for(let n=0;n<this.commands.length;n+=1){const e=this.commands[n];e.type==="M"?t.moveTo(e.x,e.y):e.type==="L"?t.lineTo(e.x,e.y):e.type==="C"?t.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y):e.type==="Q"?t.quadraticCurveTo(e.x1,e.y1,e.x,e.y):e.type==="Z"&&t.closePath()}this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&(t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke())};he.prototype.toPathData=function(t){t=t!==void 0?t:2;function n(i){return Math.round(i)===i?""+Math.round(i):i.toFixed(t)}function e(){let i="";for(let a=0;a<arguments.length;a+=1){const s=arguments[a];s>=0&&a>0&&(i+=" "),i+=n(s)}return i}let r="";for(let i=0;i<this.commands.length;i+=1){const a=this.commands[i];a.type==="M"?r+="M"+e(a.x,a.y):a.type==="L"?r+="L"+e(a.x,a.y):a.type==="C"?r+="C"+e(a.x1,a.y1,a.x2,a.y2,a.x,a.y):a.type==="Q"?r+="Q"+e(a.x1,a.y1,a.x,a.y):a.type==="Z"&&(r+="Z")}return r};he.prototype.toSVG=function(t){let n='<path d="';return n+=this.toPathData(t),n+='"',this.fill&&this.fill!=="black"&&(this.fill===null?n+=' fill="none"':n+=' fill="'+this.fill+'"'),this.stroke&&(n+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),n+="/>",n};he.prototype.toDOMElement=function(t){const n=this.toPathData(t),e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",n),e};function Mn(t){throw new Error(t)}function dn(t,n){t||Mn(n)}const ne={fail:Mn,argument:dn,assert:dn},gn=32768,vn=2147483648,ke={},W={},M={};function Fe(t){return function(){return t}}W.BYTE=function(t){return ne.argument(t>=0&&t<=255,"Byte value should be between 0 and 255."),[t]};M.BYTE=Fe(1);W.CHAR=function(t){return[t.charCodeAt(0)]};M.CHAR=Fe(1);W.CHARARRAY=function(t){const n=[];for(let e=0;e<t.length;e+=1)n[e]=t.charCodeAt(e);return n};M.CHARARRAY=function(t){return t.length};W.USHORT=function(t){return[t>>8&255,t&255]};M.USHORT=Fe(2);W.SHORT=function(t){return t>=gn&&(t=-(2*gn-t)),[t>>8&255,t&255]};M.SHORT=Fe(2);W.UINT24=function(t){return[t>>16&255,t>>8&255,t&255]};M.UINT24=Fe(3);W.ULONG=function(t){return[t>>24&255,t>>16&255,t>>8&255,t&255]};M.ULONG=Fe(4);W.LONG=function(t){return t>=vn&&(t=-(2*vn-t)),[t>>24&255,t>>16&255,t>>8&255,t&255]};M.LONG=Fe(4);W.FIXED=W.ULONG;M.FIXED=M.ULONG;W.FWORD=W.SHORT;M.FWORD=M.SHORT;W.UFWORD=W.USHORT;M.UFWORD=M.USHORT;W.LONGDATETIME=function(t){return[0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255]};M.LONGDATETIME=Fe(8);W.TAG=function(t){return ne.argument(t.length===4,"Tag should be exactly 4 ASCII characters."),[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]};M.TAG=Fe(4);W.Card8=W.BYTE;M.Card8=M.BYTE;W.Card16=W.USHORT;M.Card16=M.USHORT;W.OffSize=W.BYTE;M.OffSize=M.BYTE;W.SID=W.USHORT;M.SID=M.USHORT;W.NUMBER=function(t){return t>=-107&&t<=107?[t+139]:t>=108&&t<=1131?(t=t-108,[(t>>8)+247,t&255]):t>=-1131&&t<=-108?(t=-t-108,[(t>>8)+251,t&255]):t>=-32768&&t<=32767?W.NUMBER16(t):W.NUMBER32(t)};M.NUMBER=function(t){return W.NUMBER(t).length};W.NUMBER16=function(t){return[28,t>>8&255,t&255]};M.NUMBER16=Fe(3);W.NUMBER32=function(t){return[29,t>>24&255,t>>16&255,t>>8&255,t&255]};M.NUMBER32=Fe(5);W.REAL=function(t){let n=t.toString();const e=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(n);if(e){const a=parseFloat("1e"+((e[2]?+e[2]:0)+e[1].length));n=(Math.round(t*a)/a).toString()}let r="";for(let a=0,s=n.length;a<s;a+=1){const f=n[a];f==="e"?r+=n[++a]==="-"?"c":"b":f==="."?r+="a":f==="-"?r+="e":r+=f}r+=r.length&1?"f":"ff";const i=[30];for(let a=0,s=r.length;a<s;a+=2)i.push(parseInt(r.substr(a,2),16));return i};M.REAL=function(t){return W.REAL(t).length};W.NAME=W.CHARARRAY;M.NAME=M.CHARARRAY;W.STRING=W.CHARARRAY;M.STRING=M.CHARARRAY;ke.UTF8=function(t,n,e){const r=[],i=e;for(let a=0;a<i;a++,n+=1)r[a]=t.getUint8(n);return String.fromCharCode.apply(null,r)};ke.UTF16=function(t,n,e){const r=[],i=e/2;for(let a=0;a<i;a++,n+=2)r[a]=t.getUint16(n);return String.fromCharCode.apply(null,r)};W.UTF16=function(t){const n=[];for(let e=0;e<t.length;e+=1){const r=t.charCodeAt(e);n[n.length]=r>>8&255,n[n.length]=r&255}return n};M.UTF16=function(t){return t.length*2};const Ht={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};ke.MACSTRING=function(t,n,e,r){const i=Ht[r];if(i===void 0)return;let a="";for(let s=0;s<e;s++){const f=t.getUint8(n+s);f<=127?a+=String.fromCharCode(f):a+=i[f&127]}return a};const ot=typeof WeakMap=="function"&&new WeakMap;let at;const oi=function(t){if(!at){at={};for(let i in Ht)at[i]=new String(i)}const n=at[t];if(n===void 0)return;if(ot){const i=ot.get(n);if(i!==void 0)return i}const e=Ht[t];if(e===void 0)return;const r={};for(let i=0;i<e.length;i++)r[e.charCodeAt(i)]=i+128;return ot&&ot.set(n,r),r};W.MACSTRING=function(t,n){const e=oi(n);if(e===void 0)return;const r=[];for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);if(a>=128&&(a=e[a],a===void 0))return;r[i]=a}return r};M.MACSTRING=function(t,n){const e=W.MACSTRING(t,n);return e!==void 0?e.length:0};function jt(t){return t>=-128&&t<=127}function ai(t,n,e){let r=0;const i=t.length;for(;n<i&&r<64&&t[n]===0;)++n,++r;return e.push(128|r-1),n}function si(t,n,e){let r=0;const i=t.length;let a=n;for(;a<i&&r<64;){const s=t[a];if(!jt(s)||s===0&&a+1<i&&t[a+1]===0)break;++a,++r}e.push(r-1);for(let s=n;s<a;++s)e.push(t[s]+256&255);return a}function ui(t,n,e){let r=0;const i=t.length;let a=n;for(;a<i&&r<64;){const s=t[a];if(s===0||jt(s)&&a+1<i&&jt(t[a+1]))break;++a,++r}e.push(64|r-1);for(let s=n;s<a;++s){const f=t[s];e.push(f+65536>>8&255,f+256&255)}return a}W.VARDELTAS=function(t){let n=0;const e=[];for(;n<t.length;){const r=t[n];r===0?n=ai(t,n,e):r>=-128&&r<=127?n=si(t,n,e):n=ui(t,n,e)}return e};W.INDEX=function(t){let n=1;const e=[n],r=[];for(let f=0;f<t.length;f+=1){const o=W.OBJECT(t[f]);Array.prototype.push.apply(r,o),n+=o.length,e.push(n)}if(r.length===0)return[0,0];const i=[],a=1+Math.floor(Math.log(n)/Math.log(2))/8|0,s=[void 0,W.BYTE,W.USHORT,W.UINT24,W.ULONG][a];for(let f=0;f<e.length;f+=1){const o=s(e[f]);Array.prototype.push.apply(i,o)}return Array.prototype.concat(W.Card16(t.length),W.OffSize(a),i,r)};M.INDEX=function(t){return W.INDEX(t).length};W.DICT=function(t){let n=[];const e=Object.keys(t),r=e.length;for(let i=0;i<r;i+=1){const a=parseInt(e[i],0),s=t[a];n=n.concat(W.OPERAND(s.value,s.type)),n=n.concat(W.OPERATOR(a))}return n};M.DICT=function(t){return W.DICT(t).length};W.OPERATOR=function(t){return t<1200?[t]:[12,t-1200]};W.OPERAND=function(t,n){let e=[];if(Array.isArray(n))for(let r=0;r<n.length;r+=1)ne.argument(t.length===n.length,"Not enough arguments given for type"+n),e=e.concat(W.OPERAND(t[r],n[r]));else if(n==="SID")e=e.concat(W.NUMBER(t));else if(n==="offset")e=e.concat(W.NUMBER32(t));else if(n==="number")e=e.concat(W.NUMBER(t));else if(n==="real")e=e.concat(W.REAL(t));else throw new Error("Unknown operand type "+n);return e};W.OP=W.BYTE;M.OP=M.BYTE;const st=typeof WeakMap=="function"&&new WeakMap;W.CHARSTRING=function(t){if(st){const r=st.get(t);if(r!==void 0)return r}let n=[];const e=t.length;for(let r=0;r<e;r+=1){const i=t[r];n=n.concat(W[i.type](i.value))}return st&&st.set(t,n),n};M.CHARSTRING=function(t){return W.CHARSTRING(t).length};W.OBJECT=function(t){const n=W[t.type];return ne.argument(n!==void 0,"No encoding function for type "+t.type),n(t.value)};M.OBJECT=function(t){const n=M[t.type];return ne.argument(n!==void 0,"No sizeOf function for type "+t.type),n(t.value)};W.TABLE=function(t){let n=[];const e=t.fields.length,r=[],i=[];for(let a=0;a<e;a+=1){const s=t.fields[a],f=W[s.type];ne.argument(f!==void 0,"No encoding function for field type "+s.type+" ("+s.name+")");let o=t[s.name];o===void 0&&(o=s.value);const c=f(o);s.type==="TABLE"?(i.push(n.length),n=n.concat([0,0]),r.push(c)):n=n.concat(c)}for(let a=0;a<r.length;a+=1){const s=i[a],f=n.length;ne.argument(f<65536,"Table "+t.tableName+" too big."),n[s]=f>>8,n[s+1]=f&255,n=n.concat(r[a])}return n};M.TABLE=function(t){let n=0;const e=t.fields.length;for(let r=0;r<e;r+=1){const i=t.fields[r],a=M[i.type];ne.argument(a!==void 0,"No sizeOf function for field type "+i.type+" ("+i.name+")");let s=t[i.name];s===void 0&&(s=i.value),n+=a(s),i.type==="TABLE"&&(n+=2)}return n};W.RECORD=W.TABLE;M.RECORD=M.TABLE;W.LITERAL=function(t){return t};M.LITERAL=function(t){return t.length};function de(t,n,e){for(let r=0;r<n.length;r+=1){const i=n[r];this[i.name]=i.value}if(this.tableName=t,this.fields=n,e){const r=Object.keys(e);for(let i=0;i<r.length;i+=1){const a=r[i],s=e[a];this[a]!==void 0&&(this[a]=s)}}}de.prototype.encode=function(){return W.TABLE(this)};de.prototype.sizeOf=function(){return M.TABLE(this)};function nt(t,n,e){e===void 0&&(e=n.length);const r=new Array(n.length+1);r[0]={name:t+"Count",type:"USHORT",value:e};for(let i=0;i<n.length;i++)r[i+1]={name:t+i,type:"USHORT",value:n[i]};return r}function qt(t,n,e){const r=n.length,i=new Array(r+1);i[0]={name:t+"Count",type:"USHORT",value:r};for(let a=0;a<r;a++)i[a+1]={name:t+a,type:"TABLE",value:e(n[a],a)};return i}function ct(t,n,e){const r=n.length;let i=[];i[0]={name:t+"Count",type:"USHORT",value:r};for(let a=0;a<r;a++)i=i.concat(e(n[a],a));return i}function pt(t){t.format===1?de.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(nt("glyph",t.glyphs))):ne.assert(!1,"Can't create coverage table format 2 yet.")}pt.prototype=Object.create(de.prototype);pt.prototype.constructor=pt;function ht(t){de.call(this,"scriptListTable",ct("scriptRecord",t,function(n,e){const r=n.script;let i=r.defaultLangSys;return ne.assert(!!i,"Unable to write GSUB: script "+n.tag+" has no default language system."),[{name:"scriptTag"+e,type:"TAG",value:n.tag},{name:"script"+e,type:"TABLE",value:new de("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new de("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(nt("featureIndex",i.featureIndexes)))}].concat(ct("langSys",r.langSysRecords,function(a,s){const f=a.langSys;return[{name:"langSysTag"+s,type:"TAG",value:a.tag},{name:"langSys"+s,type:"TABLE",value:new de("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:f.reqFeatureIndex}].concat(nt("featureIndex",f.featureIndexes)))}]})))}]}))}ht.prototype=Object.create(de.prototype);ht.prototype.constructor=ht;function dt(t){de.call(this,"featureListTable",ct("featureRecord",t,function(n,e){const r=n.feature;return[{name:"featureTag"+e,type:"TAG",value:n.tag},{name:"feature"+e,type:"TABLE",value:new de("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(nt("lookupListIndex",r.lookupListIndexes)))}]}))}dt.prototype=Object.create(de.prototype);dt.prototype.constructor=dt;function gt(t,n){de.call(this,"lookupListTable",qt("lookup",t,function(e){let r=n[e.lookupType];return ne.assert(!!r,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new de("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(qt("subtable",e.subtables,r)))}))}gt.prototype=Object.create(de.prototype);gt.prototype.constructor=gt;const J={Table:de,Record:de,Coverage:pt,ScriptList:ht,FeatureList:dt,LookupList:gt,ushortList:nt,tableList:qt,recordList:ct};function mn(t,n){return t.getUint8(n)}function vt(t,n){return t.getUint16(n,!1)}function li(t,n){return t.getInt16(n,!1)}function Kt(t,n){return t.getUint32(n,!1)}function Jn(t,n){const e=t.getInt16(n,!1),r=t.getUint16(n+2,!1);return e+r/65535}function fi(t,n){let e="";for(let r=n;r<n+4;r+=1)e+=String.fromCharCode(t.getInt8(r));return e}function ci(t,n,e){let r=0;for(let i=0;i<e;i+=1)r<<=8,r+=t.getUint8(n+i);return r}function pi(t,n,e){const r=[];for(let i=n;i<e;i+=1)r.push(t.getUint8(i));return r}function hi(t){let n="";for(let e=0;e<t.length;e+=1)n+=String.fromCharCode(t[e]);return n}const di={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function _(t,n){this.data=t,this.offset=n,this.relativeOffset=0}_.prototype.parseByte=function(){const t=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t};_.prototype.parseChar=function(){const t=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t};_.prototype.parseCard8=_.prototype.parseByte;_.prototype.parseUShort=function(){const t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t};_.prototype.parseCard16=_.prototype.parseUShort;_.prototype.parseSID=_.prototype.parseUShort;_.prototype.parseOffset16=_.prototype.parseUShort;_.prototype.parseShort=function(){const t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t};_.prototype.parseF2Dot14=function(){const t=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,t};_.prototype.parseULong=function(){const t=Kt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t};_.prototype.parseFixed=function(){const t=Jn(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t};_.prototype.parseString=function(t){const n=this.data,e=this.offset+this.relativeOffset;let r="";this.relativeOffset+=t;for(let i=0;i<t;i++)r+=String.fromCharCode(n.getUint8(e+i));return r};_.prototype.parseTag=function(){return this.parseString(4)};_.prototype.parseLongDateTime=function(){let t=Kt(this.data,this.offset+this.relativeOffset+4);return t-=2082844800,this.relativeOffset+=8,t};_.prototype.parseVersion=function(){const t=vt(this.data,this.offset+this.relativeOffset),n=vt(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,t+n/4096/10};_.prototype.skip=function(t,n){n===void 0&&(n=1),this.relativeOffset+=di[t]*n};_.prototype.parseOffset16List=_.prototype.parseUShortList=function(t){t===void 0&&(t=this.parseUShort());const n=new Array(t),e=this.data;let r=this.offset+this.relativeOffset;for(let i=0;i<t;i++)n[i]=e.getUint16(r),r+=2;return this.relativeOffset+=t*2,n};_.prototype.parseShortList=function(t){const n=new Array(t),e=this.data;let r=this.offset+this.relativeOffset;for(let i=0;i<t;i++)n[i]=e.getInt16(r),r+=2;return this.relativeOffset+=t*2,n};_.prototype.parseByteList=function(t){const n=new Array(t),e=this.data;let r=this.offset+this.relativeOffset;for(let i=0;i<t;i++)n[i]=e.getUint8(r++);return this.relativeOffset+=t,n};_.prototype.parseList=function(t,n){n||(n=t,t=this.parseUShort());const e=new Array(t);for(let r=0;r<t;r++)e[r]=n.call(this);return e};_.prototype.parseRecordList=function(t,n){n||(n=t,t=this.parseUShort());const e=new Array(t),r=Object.keys(n);for(let i=0;i<t;i++){const a={};for(let s=0;s<r.length;s++){const f=r[s],o=n[f];a[f]=o.call(this)}e[i]=a}return e};_.prototype.parseStruct=function(t){if(typeof t=="function")return t.call(this);{const n=Object.keys(t),e={};for(let r=0;r<n.length;r++){const i=n[r],a=t[i];e[i]=a.call(this)}return e}};_.prototype.parsePointer=function(t){const n=this.parseOffset16();if(n>0)return new _(this.data,this.offset+n).parseStruct(t)};_.prototype.parseListOfLists=function(t){const n=this.parseOffset16List(),e=n.length,r=this.relativeOffset,i=new Array(e);for(let a=0;a<e;a++){const s=n[a];if(s===0){i[a]=void 0;continue}if(this.relativeOffset=s,t){const f=this.parseOffset16List(),o=new Array(f.length);for(let c=0;c<f.length;c++)this.relativeOffset=s+f[c],o[c]=t.call(this);i[a]=o}else i[a]=this.parseUShortList()}return this.relativeOffset=r,i};_.prototype.parseCoverage=function(){const t=this.offset+this.relativeOffset,n=this.parseUShort(),e=this.parseUShort();if(n===1)return{format:1,glyphs:this.parseUShortList(e)};if(n===2){const r=new Array(e);for(let i=0;i<e;i++)r[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}}throw new Error("0x"+t.toString(16)+": Coverage format must be 1 or 2.")};_.prototype.parseClassDef=function(){const t=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(n===2)return{format:2,ranges:this.parseRecordList({start:_.uShort,end:_.uShort,classId:_.uShort})};throw new Error("0x"+t.toString(16)+": ClassDef format must be 1 or 2.")};_.list=function(t,n){return function(){return this.parseList(t,n)}};_.recordList=function(t,n){return function(){return this.parseRecordList(t,n)}};_.pointer=function(t){return function(){return this.parsePointer(t)}};_.tag=_.prototype.parseTag;_.byte=_.prototype.parseByte;_.uShort=_.offset16=_.prototype.parseUShort;_.uShortList=_.prototype.parseUShortList;_.struct=_.prototype.parseStruct;_.coverage=_.prototype.parseCoverage;_.classDef=_.prototype.parseClassDef;const yn={reserved:_.uShort,reqFeatureIndex:_.uShort,featureIndexes:_.uShortList};_.prototype.parseScriptList=function(){return this.parsePointer(_.recordList({tag:_.tag,script:_.pointer({defaultLangSys:_.pointer(yn),langSysRecords:_.recordList({tag:_.tag,langSys:_.pointer(yn)})})}))};_.prototype.parseFeatureList=function(){return this.parsePointer(_.recordList({tag:_.tag,feature:_.pointer({featureParams:_.offset16,lookupListIndexes:_.uShortList})}))};_.prototype.parseLookupList=function(t){return this.parsePointer(_.list(_.pointer(function(){const n=this.parseUShort();ne.argument(1<=n&&n<=8,"GSUB lookup type "+n+" unknown.");const e=this.parseUShort(),r=e&16;return{lookupType:n,lookupFlag:e,subtables:this.parseList(_.pointer(t[n])),markFilteringSet:r?this.parseUShort():void 0}})))};const Y={getByte:mn,getCard8:mn,getUShort:vt,getCard16:vt,getShort:li,getULong:Kt,getFixed:Jn,getTag:fi,getOffset:ci,getBytes:pi,bytesToString:hi,Parser:_};function gi(t,n){n.parseUShort(),t.length=n.parseULong(),t.language=n.parseULong();let e;t.groupCount=e=n.parseULong(),t.glyphIndexMap={};for(let r=0;r<e;r+=1){const i=n.parseULong(),a=n.parseULong();let s=n.parseULong();for(let f=i;f<=a;f+=1)t.glyphIndexMap[f]=s,s++}}function vi(t,n,e,r,i){t.length=n.parseUShort(),t.language=n.parseUShort();let a;t.segCount=a=n.parseUShort()>>1,n.skip("uShort",3),t.glyphIndexMap={};const s=new Y.Parser(e,r+i+14),f=new Y.Parser(e,r+i+16+a*2),o=new Y.Parser(e,r+i+16+a*4),c=new Y.Parser(e,r+i+16+a*6);let d=r+i+16+a*8;for(let x=0;x<a-1;x+=1){let S;const w=s.parseUShort(),F=f.parseUShort(),m=o.parseShort(),l=c.parseUShort();for(let u=F;u<=w;u+=1)l!==0?(d=c.offset+c.relativeOffset-2,d+=l,d+=(u-F)*2,S=Y.getUShort(e,d),S!==0&&(S=S+m&65535)):S=u+m&65535,t.glyphIndexMap[u]=S}}function mi(t,n){const e={};e.version=Y.getUShort(t,n),ne.argument(e.version===0,"cmap table version should be 0."),e.numTables=Y.getUShort(t,n+2);let r=-1;for(let a=e.numTables-1;a>=0;a-=1){const s=Y.getUShort(t,n+4+a*8),f=Y.getUShort(t,n+4+a*8+2);if(s===3&&(f===0||f===1||f===10)){r=Y.getULong(t,n+4+a*8+4);break}}if(r===-1)throw new Error("No valid cmap sub-tables found.");const i=new Y.Parser(t,n+r);if(e.format=i.parseUShort(),e.format===12)gi(e,i);else if(e.format===4)vi(e,i,t,n,r);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+e.format+").");return e}function yi(t,n,e){t.segments.push({end:n,start:n,delta:-(n-e),offset:0})}function xi(t){t.segments.push({end:65535,start:65535,delta:1,offset:0})}function bi(t){const n=new J.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);n.segments=[];for(let o=0;o<t.length;o+=1){const c=t.get(o);for(let d=0;d<c.unicodes.length;d+=1)yi(n,c.unicodes[d],o);n.segments=n.segments.sort(function(d,x){return d.start-x.start})}xi(n);let e;e=n.segments.length,n.segCountX2=e*2,n.searchRange=Math.pow(2,Math.floor(Math.log(e)/Math.log(2)))*2,n.entrySelector=Math.log(n.searchRange/2)/Math.log(2),n.rangeShift=n.segCountX2-n.searchRange;let r=[],i=[],a=[],s=[],f=[];for(let o=0;o<e;o+=1){const c=n.segments[o];r=r.concat({name:"end_"+o,type:"USHORT",value:c.end}),i=i.concat({name:"start_"+o,type:"USHORT",value:c.start}),a=a.concat({name:"idDelta_"+o,type:"SHORT",value:c.delta}),s=s.concat({name:"idRangeOffset_"+o,type:"USHORT",value:c.offset}),c.glyphId!==void 0&&(f=f.concat({name:"glyph_"+o,type:"USHORT",value:c.glyphId}))}return n.fields=n.fields.concat(r),n.fields.push({name:"reservedPad",type:"USHORT",value:0}),n.fields=n.fields.concat(i),n.fields=n.fields.concat(a),n.fields=n.fields.concat(s),n.fields=n.fields.concat(f),n.length=14+r.length*2+2+i.length*2+a.length*2+s.length*2+f.length*2,n}const er={parse:mi,make:bi},ft=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Si=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Ti=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Ve=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function tr(t){this.font=t}tr.prototype.charToGlyphIndex=function(t){const n=t.charCodeAt(0),e=this.font.glyphs;if(e)for(let r=0;r<e.length;r+=1){const i=e.get(r);for(let a=0;a<i.unicodes.length;a+=1)if(i.unicodes[a]===n)return r}return null};function nr(t){this.cmap=t}nr.prototype.charToGlyphIndex=function(t){return this.cmap.glyphIndexMap[t.charCodeAt(0)]||0};function mt(t,n){this.encoding=t,this.charset=n}mt.prototype.charToGlyphIndex=function(t){const n=t.charCodeAt(0),e=this.encoding[n];return this.charset.indexOf(e)};function Qt(t){switch(t.version){case 1:this.names=Ve.slice();break;case 2:this.names=new Array(t.numberOfGlyphs);for(let n=0;n<t.numberOfGlyphs;n++)t.glyphNameIndex[n]<Ve.length?this.names[n]=Ve[t.glyphNameIndex[n]]:this.names[n]=t.names[t.glyphNameIndex[n]-Ve.length];break;case 2.5:this.names=new Array(t.numberOfGlyphs);for(let n=0;n<t.numberOfGlyphs;n++)this.names[n]=Ve[n+t.glyphNameIndex[n]];break;case 3:this.names=[];break;default:this.names=[];break}}Qt.prototype.nameToGlyphIndex=function(t){return this.names.indexOf(t)};Qt.prototype.glyphIndexToName=function(t){return this.names[t]};function wi(t){let n;const e=t.tables.cmap.glyphIndexMap,r=Object.keys(e);for(let i=0;i<r.length;i+=1){const a=r[i],s=e[a];n=t.glyphs.get(s),n.addUnicode(parseInt(a))}for(let i=0;i<t.glyphs.length;i+=1)n=t.glyphs.get(i),t.cffEncoding?t.isCIDFont?n.name="gid"+i:n.name=t.cffEncoding.charset[i]:t.glyphNames.names&&(n.name=t.glyphNames.glyphIndexToName(i))}function Ci(t,n,e,r,i){t.beginPath(),t.moveTo(n,e),t.lineTo(r,i),t.stroke()}const We={line:Ci};function xn(t,n,e,r,i){let a;return(n&r)>0?(a=t.parseByte(),(n&i)===0&&(a=-a),a=e+a):(n&i)>0?a=e:a=e+t.parseShort(),a}function Ei(t,n,e){const r=new Y.Parser(n,e);t.numberOfContours=r.parseShort(),t._xMin=r.parseShort(),t._yMin=r.parseShort(),t._xMax=r.parseShort(),t._yMax=r.parseShort();let i,a;if(t.numberOfContours>0){const s=t.endPointIndices=[];for(let o=0;o<t.numberOfContours;o+=1)s.push(r.parseUShort());t.instructionLength=r.parseUShort(),t.instructions=[];for(let o=0;o<t.instructionLength;o+=1)t.instructions.push(r.parseByte());const f=s[s.length-1]+1;i=[];for(let o=0;o<f;o+=1)if(a=r.parseByte(),i.push(a),(a&8)>0){const c=r.parseByte();for(let d=0;d<c;d+=1)i.push(a),o+=1}if(ne.argument(i.length===f,"Bad flags."),s.length>0){const o=[];let c;if(f>0){for(let S=0;S<f;S+=1)a=i[S],c={},c.onCurve=!!(a&1),c.lastPointOfContour=s.indexOf(S)>=0,o.push(c);let d=0;for(let S=0;S<f;S+=1)a=i[S],c=o[S],c.x=xn(r,a,d,2,16),d=c.x;let x=0;for(let S=0;S<f;S+=1)a=i[S],c=o[S],c.y=xn(r,a,x,4,32),x=c.y}t.points=o}else t.points=[]}else if(t.numberOfContours===0)t.points=[];else{t.isComposite=!0,t.points=[],t.components=[];let s=!0;for(;s;){i=r.parseUShort();const f={glyphIndex:r.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(i&1)>0?(i&2)>0?(f.dx=r.parseShort(),f.dy=r.parseShort()):f.matchedPoints=[r.parseUShort(),r.parseUShort()]:(i&2)>0?(f.dx=r.parseChar(),f.dy=r.parseChar()):f.matchedPoints=[r.parseByte(),r.parseByte()],(i&8)>0?f.xScale=f.yScale=r.parseF2Dot14():(i&64)>0?(f.xScale=r.parseF2Dot14(),f.yScale=r.parseF2Dot14()):(i&128)>0&&(f.xScale=r.parseF2Dot14(),f.scale01=r.parseF2Dot14(),f.scale10=r.parseF2Dot14(),f.yScale=r.parseF2Dot14()),t.components.push(f),s=!!(i&32)}if(i&256){t.instructionLength=r.parseUShort(),t.instructions=[];for(let f=0;f<t.instructionLength;f+=1)t.instructions.push(r.parseByte())}}}function Rt(t,n){const e=[];for(let r=0;r<t.length;r+=1){const i=t[r],a={x:n.xScale*i.x+n.scale01*i.y+n.dx,y:n.scale10*i.x+n.yScale*i.y+n.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};e.push(a)}return e}function Ai(t){const n=[];let e=[];for(let r=0;r<t.length;r+=1){const i=t[r];e.push(i),i.lastPointOfContour&&(n.push(e),e=[])}return ne.argument(e.length===0,"There are still points left in the current contour."),n}function rr(t){const n=new he;if(!t)return n;const e=Ai(t);for(let r=0;r<e.length;++r){const i=e[r];let a=null,s=i[i.length-1],f=i[0];if(s.onCurve)n.moveTo(s.x,s.y);else if(f.onCurve)n.moveTo(f.x,f.y);else{const o={x:(s.x+f.x)*.5,y:(s.y+f.y)*.5};n.moveTo(o.x,o.y)}for(let o=0;o<i.length;++o)if(a=s,s=f,f=i[(o+1)%i.length],s.onCurve)n.lineTo(s.x,s.y);else{let c=a,d=f;a.onCurve||(c={x:(s.x+a.x)*.5,y:(s.y+a.y)*.5},n.lineTo(c.x,c.y)),f.onCurve||(d={x:(s.x+f.x)*.5,y:(s.y+f.y)*.5}),n.lineTo(c.x,c.y),n.quadraticCurveTo(s.x,s.y,d.x,d.y)}n.closePath()}return n}function Pi(t,n){if(n.isComposite)for(let e=0;e<n.components.length;e+=1){const r=n.components[e],i=t.get(r.glyphIndex);if(i.getPath(),i.points){let a;if(r.matchedPoints===void 0)a=Rt(i.points,r);else{if(r.matchedPoints[0]>n.points.length-1||r.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+n.name);const s=n.points[r.matchedPoints[0]];let f=i.points[r.matchedPoints[1]];const o={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};f=Rt([f],o)[0],o.dx=s.x-f.x,o.dy=s.y-f.y,a=Rt(i.points,o)}n.points=n.points.concat(a)}}return rr(n.points)}function Fi(t,n,e,r){const i=new Qe.GlyphSet(r);for(let a=0;a<e.length-1;a+=1){const s=e[a],f=e[a+1];s!==f?i.push(a,Qe.ttfGlyphLoader(r,a,Ei,t,n+s,Pi)):i.push(a,Qe.glyphLoader(r,a))}return i}const ir={getPath:rr,parse:Fi};function Oi(t,n){let e=n||{commands:[]};return{configurable:!0,get:function(){return typeof e=="function"&&(e=e()),e},set:function(r){e=r}}}function Pe(t){this.bindConstructorValues(t)}Pe.prototype.bindConstructorValues=function(t){this.index=t.index||0,this.name=t.name||null,this.unicode=t.unicode||void 0,this.unicodes=t.unicodes||t.unicode!==void 0?[t.unicode]:[],t.xMin&&(this.xMin=t.xMin),t.yMin&&(this.yMin=t.yMin),t.xMax&&(this.xMax=t.xMax),t.yMax&&(this.yMax=t.yMax),t.advanceWidth&&(this.advanceWidth=t.advanceWidth),Object.defineProperty(this,"path",Oi(this,t.path))};Pe.prototype.addUnicode=function(t){this.unicodes.length===0&&(this.unicode=t),this.unicodes.push(t)};Pe.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};Pe.prototype.getPath=function(t,n,e,r,i){t=t!==void 0?t:0,n=n!==void 0?n:0,e=e!==void 0?e:72;let a,s;r||(r={});let f=r.xScale,o=r.yScale;if(r.hinting&&i&&i.hinting&&(s=this.path&&i.hinting.exec(this,e)),s)a=ir.getPath(s).commands,t=Math.round(t),n=Math.round(n),f=o=1;else{a=this.path.commands;const d=1/this.path.unitsPerEm*e;f===void 0&&(f=d),o===void 0&&(o=d)}const c=new he;for(let d=0;d<a.length;d+=1){const x=a[d];x.type==="M"?c.moveTo(t+x.x*f,n+-x.y*o):x.type==="L"?c.lineTo(t+x.x*f,n+-x.y*o):x.type==="Q"?c.quadraticCurveTo(t+x.x1*f,n+-x.y1*o,t+x.x*f,n+-x.y*o):x.type==="C"?c.curveTo(t+x.x1*f,n+-x.y1*o,t+x.x2*f,n+-x.y2*o,t+x.x*f,n+-x.y*o):x.type==="Z"&&c.closePath()}return c};Pe.prototype.getContours=function(){if(this.points===void 0)return[];const t=[];let n=[];for(let e=0;e<this.points.length;e+=1){const r=this.points[e];n.push(r),r.lastPointOfContour&&(t.push(n),n=[])}return ne.argument(n.length===0,"There are still points left in the current contour."),t};Pe.prototype.getMetrics=function(){const t=this.path.commands,n=[],e=[];for(let i=0;i<t.length;i+=1){const a=t[i];a.type!=="Z"&&(n.push(a.x),e.push(a.y)),(a.type==="Q"||a.type==="C")&&(n.push(a.x1),e.push(a.y1)),a.type==="C"&&(n.push(a.x2),e.push(a.y2))}const r={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,e),xMax:Math.max.apply(null,n),yMax:Math.max.apply(null,e),leftSideBearing:this.leftSideBearing};return isFinite(r.xMin)||(r.xMin=0),isFinite(r.xMax)||(r.xMax=this.advanceWidth),isFinite(r.yMin)||(r.yMin=0),isFinite(r.yMax)||(r.yMax=0),r.rightSideBearing=this.advanceWidth-r.leftSideBearing-(r.xMax-r.xMin),r};Pe.prototype.draw=function(t,n,e,r,i){this.getPath(n,e,r,i).draw(t)};Pe.prototype.drawPoints=function(t,n,e,r){function i(c,d,x,S){const w=Math.PI*2;t.beginPath();for(let F=0;F<c.length;F+=1)t.moveTo(d+c[F].x*S,x+c[F].y*S),t.arc(d+c[F].x*S,x+c[F].y*S,2,0,w,!1);t.closePath(),t.fill()}n=n!==void 0?n:0,e=e!==void 0?e:0,r=r!==void 0?r:24;const a=1/this.path.unitsPerEm*r,s=[],f=[],o=this.path;for(let c=0;c<o.commands.length;c+=1){const d=o.commands[c];d.x!==void 0&&s.push({x:d.x,y:-d.y}),d.x1!==void 0&&f.push({x:d.x1,y:-d.y1}),d.x2!==void 0&&f.push({x:d.x2,y:-d.y2})}t.fillStyle="blue",i(s,n,e,a),t.fillStyle="red",i(f,n,e,a)};Pe.prototype.drawMetrics=function(t,n,e,r){let i;n=n!==void 0?n:0,e=e!==void 0?e:0,r=r!==void 0?r:24,i=1/this.path.unitsPerEm*r,t.lineWidth=1,t.strokeStyle="black",We.line(t,n,-1e4,n,1e4),We.line(t,-1e4,e,1e4,e);const a=this.xMin||0;let s=this.yMin||0;const f=this.xMax||0;let o=this.yMax||0;const c=this.advanceWidth||0;t.strokeStyle="blue",We.line(t,n+a*i,-1e4,n+a*i,1e4),We.line(t,n+f*i,-1e4,n+f*i,1e4),We.line(t,-1e4,e+-s*i,1e4,e+-s*i),We.line(t,-1e4,e+-o*i,1e4,e+-o*i),t.strokeStyle="green",We.line(t,n+c*i,-1e4,n+c*i,1e4)};function ut(t,n,e){Object.defineProperty(t,n,{get:function(){return t.path,t[e]},set:function(r){t[e]=r},enumerable:!0,configurable:!0})}function $t(t,n){if(this.font=t,this.glyphs={},Array.isArray(n))for(let e=0;e<n.length;e++)this.glyphs[e]=n[e];this.length=n&&n.length||0}$t.prototype.get=function(t){return typeof this.glyphs[t]=="function"&&(this.glyphs[t]=this.glyphs[t]()),this.glyphs[t]};$t.prototype.push=function(t,n){this.glyphs[t]=n,this.length++};function Li(t,n){return new Pe({index:n,font:t})}function Ui(t,n,e,r,i,a){return function(){const s=new Pe({index:n,font:t});return s.path=function(){e(s,r,i);const f=a(t.glyphs,s);return f.unitsPerEm=t.unitsPerEm,f},ut(s,"xMin","_xMin"),ut(s,"xMax","_xMax"),ut(s,"yMin","_yMin"),ut(s,"yMax","_yMax"),s}}function Di(t,n,e,r){return function(){const i=new Pe({index:n,font:t});return i.path=function(){const a=e(t,i,r);return a.unitsPerEm=t.unitsPerEm,a},i}}const Qe={GlyphSet:$t,glyphLoader:Li,ttfGlyphLoader:Ui,cffGlyphLoader:Di};function or(t,n){if(t===n)return!0;if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(let e=0;e<t.length;e+=1)if(!or(t[e],n[e]))return!1;return!0}else return!1}function Wt(t){let n;return t.length<1240?n=107:t.length<33900?n=1131:n=32768,n}function He(t,n,e){const r=[],i=[],a=Y.getCard16(t,n);let s,f;if(a!==0){const o=Y.getByte(t,n+2);s=n+(a+1)*o+2;let c=n+3;for(let d=0;d<a+1;d+=1)r.push(Y.getOffset(t,c,o)),c+=o;f=s+r[a]}else f=n+2;for(let o=0;o<r.length-1;o+=1){let c=Y.getBytes(t,s+r[o],s+r[o+1]);e&&(c=e(c)),i.push(c)}return{objects:i,startOffset:n,endOffset:f}}function Ri(t){let n="";const r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(;;){const i=t.parseByte(),a=i>>4,s=i&15;if(a===15||(n+=r[a],s===15))break;n+=r[s]}return parseFloat(n)}function Ii(t,n){let e,r,i,a;if(n===28)return e=t.parseByte(),r=t.parseByte(),e<<8|r;if(n===29)return e=t.parseByte(),r=t.parseByte(),i=t.parseByte(),a=t.parseByte(),e<<24|r<<16|i<<8|a;if(n===30)return Ri(t);if(n>=32&&n<=246)return n-139;if(n>=247&&n<=250)return e=t.parseByte(),(n-247)*256+e+108;if(n>=251&&n<=254)return e=t.parseByte(),-(n-251)*256-e-108;throw new Error("Invalid b0 "+n)}function Bi(t){const n={};for(let e=0;e<t.length;e+=1){const r=t[e][0],i=t[e][1];let a;if(i.length===1?a=i[0]:a=i,n.hasOwnProperty(r)&&!isNaN(n[r]))throw new Error("Object "+n+" already has key "+r);n[r]=a}return n}function ar(t,n,e){n=n!==void 0?n:0;const r=new Y.Parser(t,n),i=[];let a=[];for(e=e!==void 0?e:t.length;r.relativeOffset<e;){let s=r.parseByte();s<=21?(s===12&&(s=1200+r.parseByte()),i.push([s,a]),a=[]):a.push(Ii(r,s))}return Bi(i)}function tt(t,n){return n<=390?n=ft[n]:n=t[n-391],n}function sr(t,n,e){const r={};let i;for(let a=0;a<n.length;a+=1){const s=n[a];if(Array.isArray(s.type)){const f=[];f.length=s.type.length;for(let o=0;o<s.type.length;o++)i=t[s.op]!==void 0?t[s.op][o]:void 0,i===void 0&&(i=s.value!==void 0&&s.value[o]!==void 0?s.value[o]:null),s.type[o]==="SID"&&(i=tt(e,i)),f[o]=i;r[s.name]=f}else i=t[s.op],i===void 0&&(i=s.value!==void 0?s.value:null),s.type==="SID"&&(i=tt(e,i)),r[s.name]=i}return r}function Ni(t,n){const e={};return e.formatMajor=Y.getCard8(t,n),e.formatMinor=Y.getCard8(t,n+1),e.size=Y.getCard8(t,n+2),e.offsetSize=Y.getCard8(t,n+3),e.startOffset=n,e.endOffset=n+4,e}const ur=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],lr=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function zi(t,n){const e=ar(t,0,t.byteLength);return sr(e,ur,n)}function fr(t,n,e,r){const i=ar(t,n,e);return sr(i,lr,r)}function bn(t,n,e,r){const i=[];for(let a=0;a<e.length;a+=1){const s=new DataView(new Uint8Array(e[a]).buffer),f=zi(s,r);f._subrs=[],f._subrsBias=0;const o=f.private[0],c=f.private[1];if(o!==0&&c!==0){const d=fr(t,c+n,o,r);if(f._defaultWidthX=d.defaultWidthX,f._nominalWidthX=d.nominalWidthX,d.subrs!==0){const x=c+d.subrs,S=He(t,x+n);f._subrs=S.objects,f._subrsBias=Wt(f._subrs)}f._privateDict=d}i.push(f)}return i}function Gi(t,n,e,r){let i,a;const s=new Y.Parser(t,n);e-=1;const f=[".notdef"],o=s.parseCard8();if(o===0)for(let c=0;c<e;c+=1)i=s.parseSID(),f.push(tt(r,i));else if(o===1)for(;f.length<=e;){i=s.parseSID(),a=s.parseCard8();for(let c=0;c<=a;c+=1)f.push(tt(r,i)),i+=1}else if(o===2)for(;f.length<=e;){i=s.parseSID(),a=s.parseCard16();for(let c=0;c<=a;c+=1)f.push(tt(r,i)),i+=1}else throw new Error("Unknown charset format "+o);return f}function _i(t,n,e){let r;const i={},a=new Y.Parser(t,n),s=a.parseCard8();if(s===0){const f=a.parseCard8();for(let o=0;o<f;o+=1)r=a.parseCard8(),i[r]=o}else if(s===1){const f=a.parseCard8();r=1;for(let o=0;o<f;o+=1){const c=a.parseCard8(),d=a.parseCard8();for(let x=c;x<=c+d;x+=1)i[x]=r,r+=1}}else throw new Error("Unknown encoding format "+s);return new mt(i,e)}function Hi(t,n,e){let r,i,a,s;const f=new he,o=[];let c=0,d=!1,x=!1,S=0,w=0,F,m,l,u;if(t.isCIDFont){const b=t.tables.cff.topDict._fdSelect[n.index],y=t.tables.cff.topDict._fdArray[b];F=y._subrs,m=y._subrsBias,l=y._defaultWidthX,u=y._nominalWidthX}else F=t.tables.cff.topDict._subrs,m=t.tables.cff.topDict._subrsBias,l=t.tables.cff.topDict._defaultWidthX,u=t.tables.cff.topDict._nominalWidthX;let p=l;function v(b,y){x&&f.closePath(),f.moveTo(b,y),x=!0}function h(){let b;b=o.length%2!==0,b&&!d&&(p=o.shift()+u),c+=o.length>>1,o.length=0,d=!0}function g(b){let y,T,D,C,P,U,E,L,A,O,R,I,z=0;for(;z<b.length;){let H=b[z];switch(z+=1,H){case 1:h();break;case 3:h();break;case 4:o.length>1&&!d&&(p=o.shift()+u,d=!0),w+=o.pop(),v(S,w);break;case 5:for(;o.length>0;)S+=o.shift(),w+=o.shift(),f.lineTo(S,w);break;case 6:for(;o.length>0&&(S+=o.shift(),f.lineTo(S,w),o.length!==0);)w+=o.shift(),f.lineTo(S,w);break;case 7:for(;o.length>0&&(w+=o.shift(),f.lineTo(S,w),o.length!==0);)S+=o.shift(),f.lineTo(S,w);break;case 8:for(;o.length>0;)r=S+o.shift(),i=w+o.shift(),a=r+o.shift(),s=i+o.shift(),S=a+o.shift(),w=s+o.shift(),f.curveTo(r,i,a,s,S,w);break;case 10:P=o.pop()+m,U=F[P],U&&g(U);break;case 11:return;case 12:switch(H=b[z],z+=1,H){case 35:r=S+o.shift(),i=w+o.shift(),a=r+o.shift(),s=i+o.shift(),E=a+o.shift(),L=s+o.shift(),A=E+o.shift(),O=L+o.shift(),R=A+o.shift(),I=O+o.shift(),S=R+o.shift(),w=I+o.shift(),o.shift(),f.curveTo(r,i,a,s,E,L),f.curveTo(A,O,R,I,S,w);break;case 34:r=S+o.shift(),i=w,a=r+o.shift(),s=i+o.shift(),E=a+o.shift(),L=s,A=E+o.shift(),O=s,R=A+o.shift(),I=w,S=R+o.shift(),f.curveTo(r,i,a,s,E,L),f.curveTo(A,O,R,I,S,w);break;case 36:r=S+o.shift(),i=w+o.shift(),a=r+o.shift(),s=i+o.shift(),E=a+o.shift(),L=s,A=E+o.shift(),O=s,R=A+o.shift(),I=O+o.shift(),S=R+o.shift(),f.curveTo(r,i,a,s,E,L),f.curveTo(A,O,R,I,S,w);break;case 37:r=S+o.shift(),i=w+o.shift(),a=r+o.shift(),s=i+o.shift(),E=a+o.shift(),L=s+o.shift(),A=E+o.shift(),O=L+o.shift(),R=A+o.shift(),I=O+o.shift(),Math.abs(R-S)>Math.abs(I-w)?S=R+o.shift():w=I+o.shift(),f.curveTo(r,i,a,s,E,L),f.curveTo(A,O,R,I,S,w);break;default:console.log("Glyph "+n.index+": unknown operator 1200"+H),o.length=0}break;case 14:o.length>0&&!d&&(p=o.shift()+u,d=!0),x&&(f.closePath(),x=!1);break;case 18:h();break;case 19:case 20:h(),z+=c+7>>3;break;case 21:o.length>2&&!d&&(p=o.shift()+u,d=!0),w+=o.pop(),S+=o.pop(),v(S,w);break;case 22:o.length>1&&!d&&(p=o.shift()+u,d=!0),S+=o.pop(),v(S,w);break;case 23:h();break;case 24:for(;o.length>2;)r=S+o.shift(),i=w+o.shift(),a=r+o.shift(),s=i+o.shift(),S=a+o.shift(),w=s+o.shift(),f.curveTo(r,i,a,s,S,w);S+=o.shift(),w+=o.shift(),f.lineTo(S,w);break;case 25:for(;o.length>6;)S+=o.shift(),w+=o.shift(),f.lineTo(S,w);r=S+o.shift(),i=w+o.shift(),a=r+o.shift(),s=i+o.shift(),S=a+o.shift(),w=s+o.shift(),f.curveTo(r,i,a,s,S,w);break;case 26:for(o.length%2&&(S+=o.shift());o.length>0;)r=S,i=w+o.shift(),a=r+o.shift(),s=i+o.shift(),S=a,w=s+o.shift(),f.curveTo(r,i,a,s,S,w);break;case 27:for(o.length%2&&(w+=o.shift());o.length>0;)r=S+o.shift(),i=w,a=r+o.shift(),s=i+o.shift(),S=a+o.shift(),w=s,f.curveTo(r,i,a,s,S,w);break;case 28:y=b[z],T=b[z+1],o.push((y<<24|T<<16)>>16),z+=2;break;case 29:P=o.pop()+t.gsubrsBias,U=t.gsubrs[P],U&&g(U);break;case 30:for(;o.length>0&&(r=S,i=w+o.shift(),a=r+o.shift(),s=i+o.shift(),S=a+o.shift(),w=s+(o.length===1?o.shift():0),f.curveTo(r,i,a,s,S,w),o.length!==0);)r=S+o.shift(),i=w,a=r+o.shift(),s=i+o.shift(),w=s+o.shift(),S=a+(o.length===1?o.shift():0),f.curveTo(r,i,a,s,S,w);break;case 31:for(;o.length>0&&(r=S+o.shift(),i=w,a=r+o.shift(),s=i+o.shift(),w=s+o.shift(),S=a+(o.length===1?o.shift():0),f.curveTo(r,i,a,s,S,w),o.length!==0);)r=S,i=w+o.shift(),a=r+o.shift(),s=i+o.shift(),S=a+o.shift(),w=s+(o.length===1?o.shift():0),f.curveTo(r,i,a,s,S,w);break;default:H<32?console.log("Glyph "+n.index+": unknown operator "+H):H<247?o.push(H-139):H<251?(y=b[z],z+=1,o.push((H-247)*256+y+108)):H<255?(y=b[z],z+=1,o.push(-(H-251)*256-y-108)):(y=b[z],T=b[z+1],D=b[z+2],C=b[z+3],z+=4,o.push((y<<24|T<<16|D<<8|C)/65536))}}}return g(e),n.advanceWidth=p,f}function ji(t,n,e,r){const i=[];let a;const s=new Y.Parser(t,n),f=s.parseCard8();if(f===0)for(let o=0;o<e;o++){if(a=s.parseCard8(),a>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+r+")");i.push(a)}else if(f===3){const o=s.parseCard16();let c=s.parseCard16();if(c!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+c);let d;for(let x=0;x<o;x++){if(a=s.parseCard8(),d=s.parseCard16(),a>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+r+")");if(d>e)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+d);for(;c<d;c++)i.push(a);c=d}if(d!==e)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+d)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+f);return i}function qi(t,n,e){e.tables.cff={};const r=Ni(t,n),i=He(t,r.endOffset,Y.bytesToString),a=He(t,i.endOffset),s=He(t,a.endOffset,Y.bytesToString),f=He(t,s.endOffset);e.gsubrs=f.objects,e.gsubrsBias=Wt(e.gsubrs);const o=bn(t,n,a.objects,s.objects);if(o.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+o.length);const c=o[0];if(e.tables.cff.topDict=c,c._privateDict&&(e.defaultWidthX=c._privateDict.defaultWidthX,e.nominalWidthX=c._privateDict.nominalWidthX),c.ros[0]!==void 0&&c.ros[1]!==void 0&&(e.isCIDFont=!0),e.isCIDFont){let F=c.fdArray,m=c.fdSelect;if(F===0||m===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");F+=n;const l=He(t,F),u=bn(t,n,l.objects,s.objects);c._fdArray=u,m+=n,c._fdSelect=ji(t,m,e.numGlyphs,u.length)}const d=n+c.private[1],x=fr(t,d,c.private[0],s.objects);if(e.defaultWidthX=x.defaultWidthX,e.nominalWidthX=x.nominalWidthX,x.subrs!==0){const F=d+x.subrs,m=He(t,F);e.subrs=m.objects,e.subrsBias=Wt(e.subrs)}else e.subrs=[],e.subrsBias=0;const S=He(t,n+c.charStrings);e.nGlyphs=S.objects.length;const w=Gi(t,n+c.charset,e.nGlyphs,s.objects);c.encoding===0?e.cffEncoding=new mt(Si,w):c.encoding===1?e.cffEncoding=new mt(Ti,w):e.cffEncoding=_i(t,n+c.encoding,w),e.encoding=e.encoding||e.cffEncoding,e.glyphs=new Qe.GlyphSet(e);for(let F=0;F<e.nGlyphs;F+=1){const m=S.objects[F];e.glyphs.push(F,Qe.cffGlyphLoader(e,F,Hi,m))}}function cr(t,n){let e,r=ft.indexOf(t);return r>=0&&(e=r),r=n.indexOf(t),r>=0?e=r+ft.length:(e=ft.length+n.length,n.push(t)),e}function Wi(){return new J.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function Vi(t){const n=new J.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);n.names=[];for(let e=0;e<t.length;e+=1)n.names.push({name:"name_"+e,type:"NAME",value:t[e]});return n}function pr(t,n,e){const r={};for(let i=0;i<t.length;i+=1){const a=t[i];let s=n[a.name];s!==void 0&&!or(s,a.value)&&(a.type==="SID"&&(s=cr(s,e)),r[a.op]={name:a.name,type:a.type,value:s})}return r}function Sn(t,n){const e=new J.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return e.dict=pr(ur,t,n),e}function Tn(t){const n=new J.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return n.topDicts=[{name:"topDict_0",type:"TABLE",value:t}],n}function Xi(t){const n=new J.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);n.strings=[];for(let e=0;e<t.length;e+=1)n.strings.push({name:"string_"+e,type:"STRING",value:t[e]});return n}function Yi(){return new J.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function Zi(t,n){const e=new J.Record("Charsets",[{name:"format",type:"Card8",value:0}]);for(let r=0;r<t.length;r+=1){const i=t[r],a=cr(i,n);e.fields.push({name:"glyph_"+r,type:"SID",value:a})}return e}function Ki(t){const n=[],e=t.path;n.push({name:"width",type:"NUMBER",value:t.advanceWidth});let r=0,i=0;for(let a=0;a<e.commands.length;a+=1){let s,f,o=e.commands[a];if(o.type==="Q"){const c=.3333333333333333,d=2/3;o={type:"C",x:o.x,y:o.y,x1:c*r+d*o.x1,y1:c*i+d*o.y1,x2:c*o.x+d*o.x1,y2:c*o.y+d*o.y1}}if(o.type==="M")s=Math.round(o.x-r),f=Math.round(o.y-i),n.push({name:"dx",type:"NUMBER",value:s}),n.push({name:"dy",type:"NUMBER",value:f}),n.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(o.x),i=Math.round(o.y);else if(o.type==="L")s=Math.round(o.x-r),f=Math.round(o.y-i),n.push({name:"dx",type:"NUMBER",value:s}),n.push({name:"dy",type:"NUMBER",value:f}),n.push({name:"rlineto",type:"OP",value:5}),r=Math.round(o.x),i=Math.round(o.y);else if(o.type==="C"){const c=Math.round(o.x1-r),d=Math.round(o.y1-i),x=Math.round(o.x2-o.x1),S=Math.round(o.y2-o.y1);s=Math.round(o.x-o.x2),f=Math.round(o.y-o.y2),n.push({name:"dx1",type:"NUMBER",value:c}),n.push({name:"dy1",type:"NUMBER",value:d}),n.push({name:"dx2",type:"NUMBER",value:x}),n.push({name:"dy2",type:"NUMBER",value:S}),n.push({name:"dx",type:"NUMBER",value:s}),n.push({name:"dy",type:"NUMBER",value:f}),n.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(o.x),i=Math.round(o.y)}}return n.push({name:"endchar",type:"OP",value:14}),n}function Qi(t){const n=new J.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(let e=0;e<t.length;e+=1){const r=t.get(e),i=Ki(r);n.charStrings.push({name:r.name,type:"CHARSTRING",value:i})}return n}function $i(t,n){const e=new J.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return e.dict=pr(lr,t,n),e}function ki(t,n){const e=new J.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),r=1/n.unitsPerEm,i={version:n.version,fullName:n.fullName,familyName:n.familyName,weight:n.weightName,fontBBox:n.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},a={},s=[];let f;for(let x=1;x<t.length;x+=1)f=t.get(x),s.push(f.name);const o=[];e.header=Wi(),e.nameIndex=Vi([n.postScriptName]);let c=Sn(i,o);e.topDictIndex=Tn(c),e.globalSubrIndex=Yi(),e.charsets=Zi(s,o),e.charStringsIndex=Qi(t),e.privateDict=$i(a,o),e.stringIndex=Xi(o);const d=e.header.sizeOf()+e.nameIndex.sizeOf()+e.topDictIndex.sizeOf()+e.stringIndex.sizeOf()+e.globalSubrIndex.sizeOf();return i.charset=d,i.encoding=0,i.charStrings=i.charset+e.charsets.sizeOf(),i.private[1]=i.charStrings+e.charStringsIndex.sizeOf(),c=Sn(i,o),e.topDictIndex=Tn(c),e}const hr={parse:qi,make:ki};function Mi(t,n){const e={},r=new Y.Parser(t,n);return e.version=r.parseVersion(),e.fontRevision=Math.round(r.parseFixed()*1e3)/1e3,e.checkSumAdjustment=r.parseULong(),e.magicNumber=r.parseULong(),ne.argument(e.magicNumber===1594834165,"Font header has wrong magic number."),e.flags=r.parseUShort(),e.unitsPerEm=r.parseUShort(),e.created=r.parseLongDateTime(),e.modified=r.parseLongDateTime(),e.xMin=r.parseShort(),e.yMin=r.parseShort(),e.xMax=r.parseShort(),e.yMax=r.parseShort(),e.macStyle=r.parseUShort(),e.lowestRecPPEM=r.parseUShort(),e.fontDirectionHint=r.parseShort(),e.indexToLocFormat=r.parseShort(),e.glyphDataFormat=r.parseShort(),e}function Ji(t){const n=Math.round(new Date().getTime()/1e3)+2082844800;let e=n;return t.createdTimestamp&&(e=t.createdTimestamp+2082844800),new J.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:e},{name:"modified",type:"LONGDATETIME",value:n},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],t)}const dr={parse:Mi,make:Ji};function eo(t,n){const e={},r=new Y.Parser(t,n);return e.version=r.parseVersion(),e.ascender=r.parseShort(),e.descender=r.parseShort(),e.lineGap=r.parseShort(),e.advanceWidthMax=r.parseUShort(),e.minLeftSideBearing=r.parseShort(),e.minRightSideBearing=r.parseShort(),e.xMaxExtent=r.parseShort(),e.caretSlopeRise=r.parseShort(),e.caretSlopeRun=r.parseShort(),e.caretOffset=r.parseShort(),r.relativeOffset+=8,e.metricDataFormat=r.parseShort(),e.numberOfHMetrics=r.parseUShort(),e}function to(t){return new J.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],t)}const gr={parse:eo,make:to};function no(t,n,e,r,i){let a,s;const f=new Y.Parser(t,n);for(let o=0;o<r;o+=1){o<e&&(a=f.parseUShort(),s=f.parseShort());const c=i.get(o);c.advanceWidth=a,c.leftSideBearing=s}}function ro(t){const n=new J.Table("hmtx",[]);for(let e=0;e<t.length;e+=1){const r=t.get(e),i=r.advanceWidth||0,a=r.leftSideBearing||0;n.fields.push({name:"advanceWidth_"+e,type:"USHORT",value:i}),n.fields.push({name:"leftSideBearing_"+e,type:"SHORT",value:a})}return n}const vr={parse:no,make:ro};function io(t){const n=new J.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:t.length}]);let e="";const r=12+t.length*4;for(let i=0;i<t.length;++i){let a=e.indexOf(t[i]);a<0&&(a=e.length,e+=t[i]),n.fields.push({name:"offset "+i,type:"USHORT",value:r+a}),n.fields.push({name:"length "+i,type:"USHORT",value:t[i].length})}return n.fields.push({name:"stringPool",type:"CHARARRAY",value:e}),n}function oo(t,n){const e=new Y.Parser(t,n),r=e.parseULong();ne.argument(r===1,"Unsupported ltag table version."),e.skip("uLong",1);const i=e.parseULong(),a=[];for(let s=0;s<i;s++){let f="";const o=n+e.parseUShort(),c=e.parseUShort();for(let d=o;d<o+c;++d)f+=String.fromCharCode(t.getInt8(d));a.push(f)}return a}const mr={make:io,parse:oo};function ao(t,n){const e={},r=new Y.Parser(t,n);return e.version=r.parseVersion(),e.numGlyphs=r.parseUShort(),e.version===1&&(e.maxPoints=r.parseUShort(),e.maxContours=r.parseUShort(),e.maxCompositePoints=r.parseUShort(),e.maxCompositeContours=r.parseUShort(),e.maxZones=r.parseUShort(),e.maxTwilightPoints=r.parseUShort(),e.maxStorage=r.parseUShort(),e.maxFunctionDefs=r.parseUShort(),e.maxInstructionDefs=r.parseUShort(),e.maxStackElements=r.parseUShort(),e.maxSizeOfInstructions=r.parseUShort(),e.maxComponentElements=r.parseUShort(),e.maxComponentDepth=r.parseUShort()),e}function so(t){return new J.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:t}])}const yr={parse:ao,make:so},xr=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],br={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},uo={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Sr={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function lo(t,n,e){switch(t){case 0:if(n===65535)return"und";if(e)return e[n];break;case 1:return br[n];case 3:return Sr[n]}}const Vt="utf-16",fo={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},co={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Tr(t,n,e){switch(t){case 0:return Vt;case 1:return co[e]||fo[n];case 3:if(n===1||n===10)return Vt;break}}function po(t,n,e){const r={},i=new Y.Parser(t,n),a=i.parseUShort(),s=i.parseUShort(),f=i.offset+i.parseUShort();for(let o=0;o<s;o++){const c=i.parseUShort(),d=i.parseUShort(),x=i.parseUShort(),S=i.parseUShort(),w=xr[S]||S,F=i.parseUShort(),m=i.parseUShort(),l=lo(c,x,e),u=Tr(c,d,x);if(u!==void 0&&l!==void 0){let p;if(u===Vt?p=ke.UTF16(t,f+m,F):p=ke.MACSTRING(t,f+m,F,u),p){let v=r[w];v===void 0&&(v=r[w]={}),v[l]=p}}}return a===1&&i.parseUShort(),r}function It(t){const n={};for(let e in t)n[t[e]]=parseInt(e);return n}function wn(t,n,e,r,i,a){return new J.Record("NameRecord",[{name:"platformID",type:"USHORT",value:t},{name:"encodingID",type:"USHORT",value:n},{name:"languageID",type:"USHORT",value:e},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:a}])}function ho(t,n){const e=t.length,r=n.length-e+1;e:for(let i=0;i<r;i++)for(;i<r;i++){for(let a=0;a<e;a++)if(n[i+a]!==t[a])continue e;return i}return-1}function Cn(t,n){let e=ho(t,n);if(e<0){e=n.length;let r=0;const i=t.length;for(;r<i;++r)n.push(t[r])}return e}function go(t,n){let e;const r=[],i={},a=It(xr);for(let x in t){let S=a[x];if(S===void 0&&(S=x),e=parseInt(S),isNaN(e))throw new Error('Name table entry "'+x+'" does not exist, see nameTableNames for complete list.');i[e]=t[x],r.push(e)}const s=It(br),f=It(Sr),o=[],c=[];for(let x=0;x<r.length;x++){e=r[x];const S=i[e];for(let w in S){const F=S[w];let m=1,l=s[w],u=uo[l];const p=Tr(m,u,l);let v=W.MACSTRING(F,p);v===void 0&&(m=0,l=n.indexOf(w),l<0&&(l=n.length,n.push(w)),u=4,v=W.UTF16(F));const h=Cn(v,c);o.push(wn(m,u,l,e,v.length,h));const g=f[w];if(g!==void 0){const b=W.UTF16(F),y=Cn(b,c);o.push(wn(3,1,g,e,b.length,y))}}}o.sort(function(x,S){return x.platformID-S.platformID||x.encodingID-S.encodingID||x.languageID-S.languageID||x.nameID-S.nameID});const d=new J.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:o.length},{name:"stringOffset",type:"USHORT",value:6+o.length*12}]);for(let x=0;x<o.length;x++)d.fields.push({name:"record_"+x,type:"RECORD",value:o[x]});return d.fields.push({name:"strings",type:"LITERAL",value:c}),d}const wr={parse:po,make:go},Xt=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function vo(t){for(let n=0;n<Xt.length;n+=1){const e=Xt[n];if(t>=e.begin&&t<e.end)return n}return-1}function mo(t,n){const e={},r=new Y.Parser(t,n);e.version=r.parseUShort(),e.xAvgCharWidth=r.parseShort(),e.usWeightClass=r.parseUShort(),e.usWidthClass=r.parseUShort(),e.fsType=r.parseUShort(),e.ySubscriptXSize=r.parseShort(),e.ySubscriptYSize=r.parseShort(),e.ySubscriptXOffset=r.parseShort(),e.ySubscriptYOffset=r.parseShort(),e.ySuperscriptXSize=r.parseShort(),e.ySuperscriptYSize=r.parseShort(),e.ySuperscriptXOffset=r.parseShort(),e.ySuperscriptYOffset=r.parseShort(),e.yStrikeoutSize=r.parseShort(),e.yStrikeoutPosition=r.parseShort(),e.sFamilyClass=r.parseShort(),e.panose=[];for(let i=0;i<10;i++)e.panose[i]=r.parseByte();return e.ulUnicodeRange1=r.parseULong(),e.ulUnicodeRange2=r.parseULong(),e.ulUnicodeRange3=r.parseULong(),e.ulUnicodeRange4=r.parseULong(),e.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),e.fsSelection=r.parseUShort(),e.usFirstCharIndex=r.parseUShort(),e.usLastCharIndex=r.parseUShort(),e.sTypoAscender=r.parseShort(),e.sTypoDescender=r.parseShort(),e.sTypoLineGap=r.parseShort(),e.usWinAscent=r.parseUShort(),e.usWinDescent=r.parseUShort(),e.version>=1&&(e.ulCodePageRange1=r.parseULong(),e.ulCodePageRange2=r.parseULong()),e.version>=2&&(e.sxHeight=r.parseShort(),e.sCapHeight=r.parseShort(),e.usDefaultChar=r.parseUShort(),e.usBreakChar=r.parseUShort(),e.usMaxContent=r.parseUShort()),e}function yo(t){return new J.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],t)}const Yt={parse:mo,make:yo,unicodeRanges:Xt,getUnicodeRange:vo};function xo(t,n){const e={},r=new Y.Parser(t,n);switch(e.version=r.parseVersion(),e.italicAngle=r.parseFixed(),e.underlinePosition=r.parseShort(),e.underlineThickness=r.parseShort(),e.isFixedPitch=r.parseULong(),e.minMemType42=r.parseULong(),e.maxMemType42=r.parseULong(),e.minMemType1=r.parseULong(),e.maxMemType1=r.parseULong(),e.version){case 1:e.names=Ve.slice();break;case 2:e.numberOfGlyphs=r.parseUShort(),e.glyphNameIndex=new Array(e.numberOfGlyphs);for(let i=0;i<e.numberOfGlyphs;i++)e.glyphNameIndex[i]=r.parseUShort();e.names=[];for(let i=0;i<e.numberOfGlyphs;i++)if(e.glyphNameIndex[i]>=Ve.length){const a=r.parseChar();e.names.push(r.parseString(a))}break;case 2.5:e.numberOfGlyphs=r.parseUShort(),e.offset=new Array(e.numberOfGlyphs);for(let i=0;i<e.numberOfGlyphs;i++)e.offset[i]=r.parseChar();break}return e}function bo(){return new J.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}const Cr={parse:xo,make:bo},Ie=new Array(9);Ie[1]=function(){const n=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{substFormat:1,coverage:this.parsePointer(_.coverage),deltaGlyphId:this.parseUShort()};if(e===2)return{substFormat:2,coverage:this.parsePointer(_.coverage),substitute:this.parseOffset16List()};ne.assert(!1,"0x"+n.toString(16)+": lookup type 1 format must be 1 or 2.")};Ie[2]=function(){const n=this.parseUShort();return ne.argument(n===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:n,coverage:this.parsePointer(_.coverage),sequences:this.parseListOfLists()}};Ie[3]=function(){const n=this.parseUShort();return ne.argument(n===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:n,coverage:this.parsePointer(_.coverage),alternateSets:this.parseListOfLists()}};Ie[4]=function(){const n=this.parseUShort();return ne.argument(n===1,"GSUB ligature table identifier-format must be 1"),{substFormat:n,coverage:this.parsePointer(_.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};const $e={sequenceIndex:_.uShort,lookupListIndex:_.uShort};Ie[5]=function(){const n=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{substFormat:e,coverage:this.parsePointer(_.coverage),ruleSets:this.parseListOfLists(function(){const r=this.parseUShort(),i=this.parseUShort();return{input:this.parseUShortList(r-1),lookupRecords:this.parseRecordList(i,$e)}})};if(e===2)return{substFormat:e,coverage:this.parsePointer(_.coverage),classDef:this.parsePointer(_.classDef),classSets:this.parseListOfLists(function(){const r=this.parseUShort(),i=this.parseUShort();return{classes:this.parseUShortList(r-1),lookupRecords:this.parseRecordList(i,$e)}})};if(e===3){const r=this.parseUShort(),i=this.parseUShort();return{substFormat:e,coverages:this.parseList(r,_.pointer(_.coverage)),lookupRecords:this.parseRecordList(i,$e)}}ne.assert(!1,"0x"+n.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};Ie[6]=function(){const n=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{substFormat:1,coverage:this.parsePointer(_.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList($e)}})};if(e===2)return{substFormat:2,coverage:this.parsePointer(_.coverage),backtrackClassDef:this.parsePointer(_.classDef),inputClassDef:this.parsePointer(_.classDef),lookaheadClassDef:this.parsePointer(_.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList($e)}})};if(e===3)return{substFormat:3,backtrackCoverage:this.parseList(_.pointer(_.coverage)),inputCoverage:this.parseList(_.pointer(_.coverage)),lookaheadCoverage:this.parseList(_.pointer(_.coverage)),lookupRecords:this.parseRecordList($e)};ne.assert(!1,"0x"+n.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};Ie[7]=function(){const n=this.parseUShort();ne.argument(n===1,"GSUB Extension Substitution subtable identifier-format must be 1");const e=this.parseUShort(),r=new _(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:e,extension:Ie[e].call(r)}};Ie[8]=function(){const n=this.parseUShort();return ne.argument(n===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:n,coverage:this.parsePointer(_.coverage),backtrackCoverage:this.parseList(_.pointer(_.coverage)),lookaheadCoverage:this.parseList(_.pointer(_.coverage)),substitutes:this.parseUShortList()}};function So(t,n){n=n||0;const e=new _(t,n),r=e.parseVersion();return ne.argument(r===1,"Unsupported GSUB table version."),{version:r,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(Ie)}}const xt=new Array(9);xt[1]=function(n){return n.substFormat===1?new J.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new J.Coverage(n.coverage)},{name:"deltaGlyphID",type:"USHORT",value:n.deltaGlyphId}]):new J.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new J.Coverage(n.coverage)}].concat(J.ushortList("substitute",n.substitute)))};xt[3]=function(n){return ne.assert(n.substFormat===1,"Lookup type 3 substFormat must be 1."),new J.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new J.Coverage(n.coverage)}].concat(J.tableList("altSet",n.alternateSets,function(e){return new J.Table("alternateSetTable",J.ushortList("alternate",e))})))};xt[4]=function(n){return ne.assert(n.substFormat===1,"Lookup type 4 substFormat must be 1."),new J.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new J.Coverage(n.coverage)}].concat(J.tableList("ligSet",n.ligatureSets,function(e){return new J.Table("ligatureSetTable",J.tableList("ligature",e,function(r){return new J.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:r.ligGlyph}].concat(J.ushortList("component",r.components,r.components.length+1)))}))})))};function To(t){return new J.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new J.ScriptList(t.scripts)},{name:"features",type:"TABLE",value:new J.FeatureList(t.features)},{name:"lookups",type:"TABLE",value:new J.LookupList(t.lookups,xt)}])}const Er={parse:So,make:To};function wo(t,n){const e=new Y.Parser(t,n),r=e.parseULong();ne.argument(r===1,"Unsupported META table version."),e.parseULong(),e.parseULong();const i=e.parseULong(),a={};for(let s=0;s<i;s++){const f=e.parseTag(),o=e.parseULong(),c=e.parseULong(),d=ke.UTF8(t,n+o,c);a[f]=d}return a}function Co(t){const n=Object.keys(t).length;let e="";const r=16+n*12,i=new J.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:n}]);for(let a in t){const s=e.length;e+=t[a],i.fields.push({name:"tag "+a,type:"TAG",value:a}),i.fields.push({name:"offset "+a,type:"ULONG",value:r+s}),i.fields.push({name:"length "+a,type:"ULONG",value:t[a].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:e}),i}const Ar={parse:wo,make:Co};function En(t){return Math.log(t)/Math.log(2)|0}function kt(t){for(;t.length%4!==0;)t.push(0);let n=0;for(let e=0;e<t.length;e+=4)n+=(t[e]<<24)+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];return n%=Math.pow(2,32),n}function An(t,n,e,r){return new J.Record("Table Record",[{name:"tag",type:"TAG",value:t!==void 0?t:""},{name:"checkSum",type:"ULONG",value:n!==void 0?n:0},{name:"offset",type:"ULONG",value:e!==void 0?e:0},{name:"length",type:"ULONG",value:r!==void 0?r:0}])}function Pr(t){const n=new J.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);n.tables=t,n.numTables=t.length;const e=Math.pow(2,En(n.numTables));n.searchRange=16*e,n.entrySelector=En(e),n.rangeShift=n.numTables*16-n.searchRange;const r=[],i=[];let a=n.sizeOf()+An().sizeOf()*n.numTables;for(;a%4!==0;)a+=1,i.push({name:"padding",type:"BYTE",value:0});for(let s=0;s<t.length;s+=1){const f=t[s];ne.argument(f.tableName.length===4,"Table name"+f.tableName+" is invalid.");const o=f.sizeOf(),c=An(f.tableName,kt(f.encode()),a,o);for(r.push({name:c.tag+" Table Record",type:"RECORD",value:c}),i.push({name:f.tableName+" table",type:"RECORD",value:f}),a+=o,ne.argument(!isNaN(a),"Something went wrong calculating the offset.");a%4!==0;)a+=1,i.push({name:"padding",type:"BYTE",value:0})}return r.sort(function(s,f){return s.value.tag>f.value.tag?1:-1}),n.fields=n.fields.concat(r),n.fields=n.fields.concat(i),n}function Pn(t,n,e){for(let r=0;r<n.length;r+=1){const i=t.charToGlyphIndex(n[r]);if(i>0)return t.glyphs.get(i).getMetrics()}return e}function Eo(t){let n=0;for(let e=0;e<t.length;e+=1)n+=t[e];return n/t.length}function Ao(t){const n=[],e=[],r=[],i=[],a=[],s=[],f=[];let o,c=0,d=0,x=0,S=0,w=0;for(let Q=0;Q<t.glyphs.length;Q+=1){const $=t.glyphs.get(Q),B=$.unicode|0;if(isNaN($.advanceWidth))throw new Error("Glyph "+$.name+" ("+Q+"): advanceWidth is not a number.");(o>B||o===void 0)&&B>0&&(o=B),c<B&&(c=B);const N=Yt.getUnicodeRange(B);if(N<32)d|=1<<N;else if(N<64)x|=1<<N-32;else if(N<96)S|=1<<N-64;else if(N<123)w|=1<<N-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if($.name===".notdef")continue;const G=$.getMetrics();n.push(G.xMin),e.push(G.yMin),r.push(G.xMax),i.push(G.yMax),s.push(G.leftSideBearing),f.push(G.rightSideBearing),a.push($.advanceWidth)}const F={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,e),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,a),advanceWidthAvg:Eo(a),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,f)};F.ascender=t.ascender,F.descender=t.descender;const m=dr.make({flags:3,unitsPerEm:t.unitsPerEm,xMin:F.xMin,yMin:F.yMin,xMax:F.xMax,yMax:F.yMax,lowestRecPPEM:3,createdTimestamp:t.createdTimestamp}),l=gr.make({ascender:F.ascender,descender:F.descender,advanceWidthMax:F.advanceWidthMax,minLeftSideBearing:F.minLeftSideBearing,minRightSideBearing:F.minRightSideBearing,xMaxExtent:F.maxLeftSideBearing+(F.xMax-F.xMin),numberOfHMetrics:t.glyphs.length}),u=yr.make(t.glyphs.length),p=Yt.make({xAvgCharWidth:Math.round(F.advanceWidthAvg),usWeightClass:t.tables.os2.usWeightClass,usWidthClass:t.tables.os2.usWidthClass,usFirstCharIndex:o,usLastCharIndex:c,ulUnicodeRange1:d,ulUnicodeRange2:x,ulUnicodeRange3:S,ulUnicodeRange4:w,fsSelection:t.tables.os2.fsSelection,sTypoAscender:F.ascender,sTypoDescender:F.descender,sTypoLineGap:0,usWinAscent:F.yMax,usWinDescent:Math.abs(F.yMin),ulCodePageRange1:1,sxHeight:Pn(t,"xyvw",{yMax:Math.round(F.ascender/2)}).yMax,sCapHeight:Pn(t,"HIKLEFJMNTZBDPRAGOQSUVWXY",F).yMax,usDefaultChar:t.hasChar(" ")?32:0,usBreakChar:t.hasChar(" ")?32:0}),v=vr.make(t.glyphs),h=er.make(t.glyphs),g=t.getEnglishName("fontFamily"),b=t.getEnglishName("fontSubfamily"),y=g+" "+b;let T=t.getEnglishName("postScriptName");T||(T=g.replace(/\s/g,"")+"-"+b);const D={};for(let Q in t.names)D[Q]=t.names[Q];D.uniqueID||(D.uniqueID={en:t.getEnglishName("manufacturer")+":"+y}),D.postScriptName||(D.postScriptName={en:T}),D.preferredFamily||(D.preferredFamily=t.names.fontFamily),D.preferredSubfamily||(D.preferredSubfamily=t.names.fontSubfamily);const C=[],P=wr.make(D,C),U=C.length>0?mr.make(C):void 0,E=Cr.make(),L=hr.make(t.glyphs,{version:t.getEnglishName("version"),fullName:y,familyName:g,weightName:b,postScriptName:T,unitsPerEm:t.unitsPerEm,fontBBox:[0,F.yMin,F.ascender,F.advanceWidthMax]}),A=t.metas&&Object.keys(t.metas).length>0?Ar.make(t.metas):void 0,O=[m,l,u,p,P,h,E,L,v];U&&O.push(U),t.tables.gsub&&O.push(Er.make(t.tables.gsub)),A&&O.push(A);const R=Pr(O),I=R.encode(),z=kt(I),H=R.fields;let Z=!1;for(let Q=0;Q<H.length;Q+=1)if(H[Q].name==="head table"){H[Q].value.checkSumAdjustment=2981146554-z,Z=!0;break}if(!Z)throw new Error("Could not find head table with checkSum to adjust.");return R}const Po={make:Pr,fontToTable:Ao,computeCheckSum:kt};function Bt(t,n){let e=0,r=t.length-1;for(;e<=r;){const i=e+r>>>1,a=t[i].tag;if(a===n)return i;a<n?e=i+1:r=i-1}return-e-1}function Fo(t,n){let e=0,r=t.length-1;for(;e<=r;){const i=e+r>>>1,a=t[i];if(a===n)return i;a<n?e=i+1:r=i-1}return-e-1}function Mt(t,n){this.font=t,this.tableName=n}Mt.prototype={searchTag:Bt,binSearch:Fo,getTable:function(t){let n=this.font.tables[this.tableName];return!n&&t&&(n=this.font.tables[this.tableName]=this.createDefaultTable()),n},getScriptNames:function(){let t=this.getTable();return t?t.scripts.map(function(n){return n.tag}):[]},getDefaultScriptName:function(){let t=this.getTable();if(!t)return;let n=!1;for(let e=0;e<t.scripts.length;e++){const r=t.scripts[e].tag;if(r==="DFLT")return r;r==="latn"&&(n=!0)}if(n)return"latn"},getScriptTable:function(t,n){const e=this.getTable(n);if(e){t=t||"DFLT";const r=e.scripts,i=Bt(e.scripts,t);if(i>=0)return r[i].script;if(n){const a={tag:t,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-i,0,a),a.script}}},getLangSysTable:function(t,n,e){const r=this.getScriptTable(t,e);if(r){if(!n||n==="dflt"||n==="DFLT")return r.defaultLangSys;const i=Bt(r.langSysRecords,n);if(i>=0)return r.langSysRecords[i].langSys;if(e){const a={tag:n,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-i,0,a),a.langSys}}},getFeatureTable:function(t,n,e,r){const i=this.getLangSysTable(t,n,r);if(i){let a;const s=i.featureIndexes,f=this.font.tables[this.tableName].features;for(let o=0;o<s.length;o++)if(a=f[s[o]],a.tag===e)return a.feature;if(r){const o=f.length;return ne.assert(o===0||e>=f[o-1].tag,"Features must be added in alphabetical order."),a={tag:e,feature:{params:0,lookupListIndexes:[]}},f.push(a),s.push(o),a.feature}}},getLookupTables:function(t,n,e,r,i){const a=this.getFeatureTable(t,n,e,i),s=[];if(a){let f;const o=a.lookupListIndexes,c=this.font.tables[this.tableName].lookups;for(let d=0;d<o.length;d++)f=c[o[d]],f.lookupType===r&&s.push(f);if(s.length===0&&i){f={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};const d=c.length;return c.push(f),o.push(d),[f]}}return s},expandCoverage:function(t){if(t.format===1)return t.glyphs;{const n=[],e=t.ranges;for(let r=0;r<e.length;r++){const i=e[r],a=i.start,s=i.end;for(let f=a;f<=s;f++)n.push(f)}return n}}};function Oe(t){Mt.call(this,t,"gsub")}function Oo(t,n){const e=t.length;if(e!==n.length)return!1;for(let r=0;r<e;r++)if(t[r]!==n[r])return!1;return!0}function Fr(t,n,e){const r=t.subtables;for(let i=0;i<r.length;i++){const a=r[i];if(a.substFormat===n)return a}if(e)return r.push(e),e}Oe.prototype=Mt.prototype;Oe.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};Oe.prototype.getSingle=function(t,n,e){const r=[],i=this.getLookupTables(n,e,t,1);for(let a=0;a<i.length;a++){const s=i[a].subtables;for(let f=0;f<s.length;f++){const o=s[f],c=this.expandCoverage(o.coverage);let d;if(o.substFormat===1){const x=o.deltaGlyphId;for(d=0;d<c.length;d++){const S=c[d];r.push({sub:S,by:S+x})}}else{const x=o.substitute;for(d=0;d<c.length;d++)r.push({sub:c[d],by:x[d]})}}}return r};Oe.prototype.getAlternates=function(t,n,e){const r=[],i=this.getLookupTables(n,e,t,3);for(let a=0;a<i.length;a++){const s=i[a].subtables;for(let f=0;f<s.length;f++){const o=s[f],c=this.expandCoverage(o.coverage),d=o.alternateSets;for(let x=0;x<c.length;x++)r.push({sub:c[x],by:d[x]})}}return r};Oe.prototype.getLigatures=function(t,n,e){const r=[],i=this.getLookupTables(n,e,t,4);for(let a=0;a<i.length;a++){const s=i[a].subtables;for(let f=0;f<s.length;f++){const o=s[f],c=this.expandCoverage(o.coverage),d=o.ligatureSets;for(let x=0;x<c.length;x++){const S=c[x],w=d[x];for(let F=0;F<w.length;F++){const m=w[F];r.push({sub:[S].concat(m.components),by:m.ligGlyph})}}}}return r};Oe.prototype.addSingle=function(t,n,e,r){const i=this.getLookupTables(e,r,t,1,!0)[0],a=Fr(i,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});ne.assert(a.coverage.format===1,"Ligature: unable to modify coverage table format "+a.coverage.format);const s=n.sub;let f=this.binSearch(a.coverage.glyphs,s);f<0&&(f=-1-f,a.coverage.glyphs.splice(f,0,s),a.substitute.splice(f,0,0)),a.substitute[f]=n.by};Oe.prototype.addAlternate=function(t,n,e,r){const i=this.getLookupTables(e,r,t,3,!0)[0],a=Fr(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});ne.assert(a.coverage.format===1,"Ligature: unable to modify coverage table format "+a.coverage.format);const s=n.sub;let f=this.binSearch(a.coverage.glyphs,s);f<0&&(f=-1-f,a.coverage.glyphs.splice(f,0,s),a.alternateSets.splice(f,0,0)),a.alternateSets[f]=n.by};Oe.prototype.addLigature=function(t,n,e,r){const i=this.getLookupTables(e,r,t,4,!0)[0];let a=i.subtables[0];a||(a={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},i.subtables[0]=a),ne.assert(a.coverage.format===1,"Ligature: unable to modify coverage table format "+a.coverage.format);const s=n.sub[0],f=n.sub.slice(1),o={ligGlyph:n.by,components:f};let c=this.binSearch(a.coverage.glyphs,s);if(c>=0){const d=a.ligatureSets[c];for(let x=0;x<d.length;x++)if(Oo(d[x].components,f))return;d.push(o)}else c=-1-c,a.coverage.glyphs.splice(c,0,s),a.ligatureSets.splice(c,0,[o])};Oe.prototype.getFeature=function(t,n,e){if(/ss\d\d/.test(t))return this.getSingle(t,n,e);switch(t){case"aalt":case"salt":return this.getSingle(t,n,e).concat(this.getAlternates(t,n,e));case"dlig":case"liga":case"rlig":return this.getLigatures(t,n,e)}};Oe.prototype.add=function(t,n,e,r){if(/ss\d\d/.test(t))return this.addSingle(t,n,e,r);switch(t){case"aalt":case"salt":return typeof n.by=="number"?this.addSingle(t,n,e,r):this.addAlternate(t,n,e,r);case"dlig":case"liga":case"rlig":return this.addLigature(t,n,e,r)}};function Lo(){return typeof window<"u"}function Uo(t){const n=new ArrayBuffer(t.length),e=new Uint8Array(n);for(let r=0;r<t.length;++r)e[r]=t[r];return n}function Do(t){const n=new Buffer(t.byteLength),e=new Uint8Array(t);for(let r=0;r<n.length;++r)n[r]=e[r];return n}function Ke(t,n){if(!t)throw n}let Or,Xe,Lr,Zt;function Ur(t){this.font=t,this._fpgmState=this._prepState=void 0,this._errorState=0}function Ro(t){return t}function Dr(t){return Math.sign(t)*Math.round(Math.abs(t))}function Io(t){return Math.sign(t)*Math.round(Math.abs(t*2))/2}function Bo(t){return Math.sign(t)*(Math.round(Math.abs(t)+.5)-.5)}function No(t){return Math.sign(t)*Math.ceil(Math.abs(t))}function zo(t){return Math.sign(t)*Math.floor(Math.abs(t))}const Rr=function(t){const n=this.srPeriod;let e=this.srPhase;const r=this.srThreshold;let i=1;return t<0&&(t=-t,i=-1),t+=r-e,t=Math.trunc(t/n)*n,t+=e,i>0&&t<0?e:i<0&&t>0?-e:t*i},De={x:1,y:0,axis:"x",distance:function(t,n,e,r){return(e?t.xo:t.x)-(r?n.xo:n.x)},interpolate:function(t,n,e,r){let i,a,s,f,o,c,d;if(!r||r===this){if(i=t.xo-n.xo,a=t.xo-e.xo,o=n.x-n.xo,c=e.x-e.xo,s=Math.abs(i),f=Math.abs(a),d=s+f,d===0){t.x=t.xo+(o+c)/2;return}t.x=t.xo+(o*f+c*s)/d;return}if(i=r.distance(t,n,!0,!0),a=r.distance(t,e,!0,!0),o=r.distance(n,n,!1,!0),c=r.distance(e,e,!1,!0),s=Math.abs(i),f=Math.abs(a),d=s+f,d===0){De.setRelative(t,t,(o+c)/2,r,!0);return}De.setRelative(t,t,(o*f+c*s)/d,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(t,n,e,r,i){if(!r||r===this){t.x=(i?n.xo:n.x)+e;return}const a=i?n.xo:n.x,s=i?n.yo:n.y,f=a+e*r.x,o=s+e*r.y;t.x=f+(t.y-o)/r.normalSlope},slope:0,touch:function(t){t.xTouched=!0},touched:function(t){return t.xTouched},untouch:function(t){t.xTouched=!1}},Ne={x:0,y:1,axis:"y",distance:function(t,n,e,r){return(e?t.yo:t.y)-(r?n.yo:n.y)},interpolate:function(t,n,e,r){let i,a,s,f,o,c,d;if(!r||r===this){if(i=t.yo-n.yo,a=t.yo-e.yo,o=n.y-n.yo,c=e.y-e.yo,s=Math.abs(i),f=Math.abs(a),d=s+f,d===0){t.y=t.yo+(o+c)/2;return}t.y=t.yo+(o*f+c*s)/d;return}if(i=r.distance(t,n,!0,!0),a=r.distance(t,e,!0,!0),o=r.distance(n,n,!1,!0),c=r.distance(e,e,!1,!0),s=Math.abs(i),f=Math.abs(a),d=s+f,d===0){Ne.setRelative(t,t,(o+c)/2,r,!0);return}Ne.setRelative(t,t,(o*f+c*s)/d,r,!0)},normalSlope:0,setRelative:function(t,n,e,r,i){if(!r||r===this){t.y=(i?n.yo:n.y)+e;return}const a=i?n.xo:n.x,s=i?n.yo:n.y,f=a+e*r.x,o=s+e*r.y;t.y=o+r.normalSlope*(t.x-f)},slope:Number.POSITIVE_INFINITY,touch:function(t){t.yTouched=!0},touched:function(t){return t.yTouched},untouch:function(t){t.yTouched=!1}};Object.freeze(De);Object.freeze(Ne);function rt(t,n){this.x=t,this.y=n,this.axis=void 0,this.slope=n/t,this.normalSlope=-t/n,Object.freeze(this)}rt.prototype.distance=function(t,n,e,r){return this.x*De.distance(t,n,e,r)+this.y*Ne.distance(t,n,e,r)};rt.prototype.interpolate=function(t,n,e,r){let i,a,s,f,o,c,d;if(s=r.distance(t,n,!0,!0),f=r.distance(t,e,!0,!0),i=r.distance(n,n,!1,!0),a=r.distance(e,e,!1,!0),o=Math.abs(s),c=Math.abs(f),d=o+c,d===0){this.setRelative(t,t,(i+a)/2,r,!0);return}this.setRelative(t,t,(i*c+a*o)/d,r,!0)};rt.prototype.setRelative=function(t,n,e,r,i){r=r||this;const a=i?n.xo:n.x,s=i?n.yo:n.y,f=a+e*r.x,o=s+e*r.y,c=r.normalSlope,d=this.slope,x=t.x,S=t.y;t.x=(d*x-c*f+o-S)/(d-c),t.y=d*(t.x-x)+S};rt.prototype.touch=function(t){t.xTouched=!0,t.yTouched=!0};function it(t,n){const e=Math.sqrt(t*t+n*n);return t/=e,n/=e,t===1&&n===0?De:t===0&&n===1?Ne:new rt(t,n)}function ze(t,n,e,r){this.x=this.xo=Math.round(t*64)/64,this.y=this.yo=Math.round(n*64)/64,this.lastPointOfContour=e,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}ze.prototype.nextTouched=function(t){let n=this.nextPointOnContour;for(;!t.touched(n)&&n!==this;)n=n.nextPointOnContour;return n};ze.prototype.prevTouched=function(t){let n=this.prevPointOnContour;for(;!t.touched(n)&&n!==this;)n=n.prevPointOnContour;return n};const yt=Object.freeze(new ze(0,0)),Go={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function je(t,n){switch(this.env=t,this.stack=[],this.prog=n,t){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=De,this.round=Dr}}Ur.prototype.exec=function(t,n){if(typeof n!="number")throw new Error("Point size is not a number!");if(this._errorState>2)return;const e=this.font;let r=this._prepState;if(!r||r.ppem!==n){let i=this._fpgmState;if(!i){je.prototype=Go,i=this._fpgmState=new je("fpgm",e.tables.fpgm),i.funcs=[],i.font=e,exports.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{Xe(i)}catch(s){console.log("Hinting error in FPGM:"+s),this._errorState=3;return}}je.prototype=i,r=this._prepState=new je("prep",e.tables.prep),r.ppem=n;const a=e.tables.cvt;if(a){const s=r.cvt=new Array(a.length),f=n/e.unitsPerEm;for(let o=0;o<a.length;o++)s[o]=a[o]*f}else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{Xe(r)}catch(s){this._errorState<2&&console.log("Hinting error in PREP:"+s),this._errorState=2}}if(!(this._errorState>1))try{return Lr(t,r)}catch(i){this._errorState<1&&(console.log("Hinting error:"+i),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}};Lr=function(t,n){const e=n.ppem/n.font.unitsPerEm,r=e;let i=t.components,a,s,f;if(je.prototype=n,!i)f=new je("glyf",t.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),f.step=-1),Zt(t,f,e,r),s=f.gZone;else{const o=n.font;s=[],a=[];for(let c=0;c<i.length;c++){const d=i[c],x=o.glyphs.get(d.glyphIndex);f=new je("glyf",x.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+c+"---"),f.step=-1),Zt(x,f,e,r);const S=Math.round(d.dx*e),w=Math.round(d.dy*r),F=f.gZone,m=f.contours;for(let u=0;u<F.length;u++){const p=F[u];p.xTouched=p.yTouched=!1,p.xo=p.x=p.x+S,p.yo=p.y=p.y+w}const l=s.length;s.push.apply(s,F);for(let u=0;u<m.length;u++)a.push(m[u]+l)}t.instructions&&!f.inhibitGridFit&&(f=new je("glyf",t.instructions),f.gZone=f.z0=f.z1=f.z2=s,f.contours=a,s.push(new ze(0,0),new ze(Math.round(t.advanceWidth*e),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),f.step=-1),Xe(f),s.length-=2)}return s};Zt=function(t,n,e,r){const i=t.points||[],a=i.length,s=n.gZone=n.z0=n.z1=n.z2=[],f=n.contours=[];let o;for(let x=0;x<a;x++)o=i[x],s[x]=new ze(o.x*e,o.y*r,o.lastPointOfContour,o.onCurve);let c,d;for(let x=0;x<a;x++)o=s[x],c||(c=o,f.push(x)),o.lastPointOfContour?(o.nextPointOnContour=c,c.prevPointOnContour=o,c=void 0):(d=s[x+1],o.nextPointOnContour=d,d.prevPointOnContour=o);if(!n.inhibitGridFit&&(s.push(new ze(0,0),new ze(Math.round(t.advanceWidth*e),0)),Xe(n),s.length-=2,exports.DEBUG)){console.log("FINISHED GLYPH",n.stack);for(let x=0;x<a;x++)console.log(x,s[x].x,s[x].y)}};Xe=function(t){let n=t.prog;if(!n)return;const e=n.length;let r;for(t.ip=0;t.ip<e;t.ip++){if(exports.DEBUG&&t.step++,r=Or[n[t.ip]],!r)throw new Error("unknown instruction: 0x"+Number(n[t.ip]).toString(16));r(t)}};function bt(t){const n=t.tZone=new Array(t.gZone.length);for(let e=0;e<n.length;e++)n[e]=new ze(0,0)}function Ir(t,n){const e=t.prog;let r=t.ip,i=1,a;do if(a=e[++r],a===88)i++;else if(a===89)i--;else if(a===64)r+=e[r+1]+1;else if(a===65)r+=2*e[r+1]+1;else if(a>=176&&a<=183)r+=a-176+1;else if(a>=184&&a<=191)r+=(a-184+1)*2;else if(n&&i===1&&a===27)break;while(i>0);t.ip=r}function Fn(t,n){exports.DEBUG&&console.log(n.step,"SVTCA["+t.axis+"]"),n.fv=n.pv=n.dpv=t}function On(t,n){exports.DEBUG&&console.log(n.step,"SPVTCA["+t.axis+"]"),n.pv=n.dpv=t}function Ln(t,n){exports.DEBUG&&console.log(n.step,"SFVTCA["+t.axis+"]"),n.fv=t}function Un(t,n){const e=n.stack,r=e.pop(),i=e.pop(),a=n.z2[r],s=n.z1[i];exports.DEBUG&&console.log("SPVTL["+t+"]",r,i);let f,o;t?(f=a.y-s.y,o=s.x-a.x):(f=s.x-a.x,o=s.y-a.y),n.pv=n.dpv=it(f,o)}function Dn(t,n){const e=n.stack,r=e.pop(),i=e.pop(),a=n.z2[r],s=n.z1[i];exports.DEBUG&&console.log("SFVTL["+t+"]",r,i);let f,o;t?(f=a.y-s.y,o=s.x-a.x):(f=s.x-a.x,o=s.y-a.y),n.fv=it(f,o)}function _o(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"SPVFS[]",e,r),t.pv=t.dpv=it(r,e)}function Ho(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"SPVFS[]",e,r),t.fv=it(r,e)}function jo(t){const n=t.stack,e=t.pv;exports.DEBUG&&console.log(t.step,"GPV[]"),n.push(e.x*16384),n.push(e.y*16384)}function qo(t){const n=t.stack,e=t.fv;exports.DEBUG&&console.log(t.step,"GFV[]"),n.push(e.x*16384),n.push(e.y*16384)}function Wo(t){t.fv=t.pv,exports.DEBUG&&console.log(t.step,"SFVTPV[]")}function Vo(t){const n=t.stack,e=n.pop(),r=n.pop(),i=n.pop(),a=n.pop(),s=n.pop(),f=t.z0,o=t.z1,c=f[e],d=f[r],x=o[i],S=o[a],w=t.z2[s];exports.DEBUG&&console.log("ISECT[], ",e,r,i,a,s);const F=c.x,m=c.y,l=d.x,u=d.y,p=x.x,v=x.y,h=S.x,g=S.y,b=(F-l)*(v-g)-(m-u)*(p-h),y=F*u-m*l,T=p*g-v*h;w.x=(y*(p-h)-T*(F-l))/b,w.y=(y*(v-g)-T*(m-u))/b}function Xo(t){t.rp0=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP0[]",t.rp0)}function Yo(t){t.rp1=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP1[]",t.rp1)}function Zo(t){t.rp2=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP2[]",t.rp2)}function Ko(t){const n=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP0[]",n),t.zp0=n,n){case 0:t.tZone||bt(t),t.z0=t.tZone;break;case 1:t.z0=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function Qo(t){const n=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP1[]",n),t.zp1=n,n){case 0:t.tZone||bt(t),t.z1=t.tZone;break;case 1:t.z1=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function $o(t){const n=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP2[]",n),t.zp2=n,n){case 0:t.tZone||bt(t),t.z2=t.tZone;break;case 1:t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function ko(t){const n=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZPS[]",n),t.zp0=t.zp1=t.zp2=n,n){case 0:t.tZone||bt(t),t.z0=t.z1=t.z2=t.tZone;break;case 1:t.z0=t.z1=t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function Mo(t){t.loop=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SLOOP[]",t.loop)}function Jo(t){exports.DEBUG&&console.log(t.step,"RTG[]"),t.round=Dr}function ea(t){exports.DEBUG&&console.log(t.step,"RTHG[]"),t.round=Bo}function ta(t){const n=t.stack.pop();exports.DEBUG&&console.log(t.step,"SMD[]",n),t.minDis=n/64}function na(t){exports.DEBUG&&console.log(t.step,"ELSE[]"),Ir(t,!1)}function ra(t){const n=t.stack.pop();exports.DEBUG&&console.log(t.step,"JMPR[]",n),t.ip+=n-1}function ia(t){const n=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCVTCI[]",n),t.cvCutIn=n/64}function oa(t){const n=t.stack;exports.DEBUG&&console.log(t.step,"DUP[]"),n.push(n[n.length-1])}function Nt(t){exports.DEBUG&&console.log(t.step,"POP[]"),t.stack.pop()}function aa(t){exports.DEBUG&&console.log(t.step,"CLEAR[]"),t.stack.length=0}function sa(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"SWAP[]"),n.push(e),n.push(r)}function ua(t){const n=t.stack;exports.DEBUG&&console.log(t.step,"DEPTH[]"),n.push(n.length)}function la(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"LOOPCALL[]",e,r);const i=t.ip,a=t.prog;t.prog=t.funcs[e];for(let s=0;s<r;s++)Xe(t),exports.DEBUG&&console.log(++t.step,s+1<r?"next loopcall":"done loopcall",s);t.ip=i,t.prog=a}function fa(t){const n=t.stack.pop();exports.DEBUG&&console.log(t.step,"CALL[]",n);const e=t.ip,r=t.prog;t.prog=t.funcs[n],Xe(t),t.ip=e,t.prog=r,exports.DEBUG&&console.log(++t.step,"returning from",n)}function ca(t){const n=t.stack,e=n.pop();exports.DEBUG&&console.log(t.step,"CINDEX[]",e),n.push(n[n.length-e])}function pa(t){const n=t.stack,e=n.pop();exports.DEBUG&&console.log(t.step,"MINDEX[]",e),n.push(n.splice(n.length-e,1)[0])}function ha(t){if(t.env!=="fpgm")throw new Error("FDEF not allowed here");const n=t.stack,e=t.prog;let r=t.ip;const i=n.pop(),a=r;for(exports.DEBUG&&console.log(t.step,"FDEF[]",i);e[++r]!==45;);t.ip=r,t.funcs[i]=e.slice(a+1,r)}function Rn(t,n){const e=n.stack.pop(),r=n.z0[e],i=n.fv,a=n.pv;exports.DEBUG&&console.log(n.step,"MDAP["+t+"]",e);let s=a.distance(r,yt);t&&(s=n.round(s)),i.setRelative(r,yt,s,a),i.touch(r),n.rp0=n.rp1=e}function In(t,n){const e=n.z2,r=e.length-2;let i,a,s;exports.DEBUG&&console.log(n.step,"IUP["+t.axis+"]");for(let f=0;f<r;f++)i=e[f],!t.touched(i)&&(a=i.prevTouched(t),a!==i&&(s=i.nextTouched(t),a===s&&t.setRelative(i,i,t.distance(a,a,!1,!0),t,!0),t.interpolate(i,a,s,t)))}function Bn(t,n){const e=n.stack,r=t?n.rp1:n.rp2,i=(t?n.z0:n.z1)[r],a=n.fv,s=n.pv;let f=n.loop;const o=n.z2;for(;f--;){const c=e.pop(),d=o[c],x=s.distance(i,i,!1,!0);a.setRelative(d,d,x,s),a.touch(d),exports.DEBUG&&console.log(n.step,(n.loop>1?"loop "+(n.loop-f)+": ":"")+"SHP["+(t?"rp1":"rp2")+"]",c)}n.loop=1}function Nn(t,n){const e=n.stack,r=t?n.rp1:n.rp2,i=(t?n.z0:n.z1)[r],a=n.fv,s=n.pv,f=e.pop(),o=n.z2[n.contours[f]];let c=o;exports.DEBUG&&console.log(n.step,"SHC["+t+"]",f);const d=s.distance(i,i,!1,!0);do c!==i&&a.setRelative(c,c,d,s),c=c.nextPointOnContour;while(c!==o)}function zn(t,n){const e=n.stack,r=t?n.rp1:n.rp2,i=(t?n.z0:n.z1)[r],a=n.fv,s=n.pv,f=e.pop();exports.DEBUG&&console.log(n.step,"SHZ["+t+"]",f);let o;switch(f){case 0:o=n.tZone;break;case 1:o=n.gZone;break;default:throw new Error("Invalid zone")}let c;const d=s.distance(i,i,!1,!0),x=o.length-2;for(let S=0;S<x;S++)c=o[S],c!==i&&a.setRelative(c,c,d,s)}function da(t){const n=t.stack;let e=t.loop;const r=t.fv,i=n.pop()/64,a=t.z2;for(;e--;){const s=n.pop(),f=a[s];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-e)+": ":"")+"SHPIX[]",s,i),r.setRelative(f,f,i),r.touch(f)}t.loop=1}function ga(t){const n=t.stack,e=t.rp1,r=t.rp2;let i=t.loop;const a=t.z0[e],s=t.z1[r],f=t.fv,o=t.dpv,c=t.z2;for(;i--;){const d=n.pop(),x=c[d];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-i)+": ":"")+"IP[]",d,e,"<->",r),f.interpolate(x,a,s,o),f.touch(x)}t.loop=1}function Gn(t,n){const e=n.stack,r=e.pop()/64,i=e.pop(),a=n.z1[i],s=n.z0[n.rp0],f=n.fv,o=n.pv;f.setRelative(a,s,r,o),f.touch(a),exports.DEBUG&&console.log(n.step,"MSIRP["+t+"]",r,i),n.rp1=n.rp0,n.rp2=i,t&&(n.rp0=i)}function va(t){const n=t.stack,e=t.rp0,r=t.z0[e];let i=t.loop;const a=t.fv,s=t.pv,f=t.z1;for(;i--;){const o=n.pop(),c=f[o];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-i)+": ":"")+"ALIGNRP[]",o),a.setRelative(c,r,0,s),a.touch(c)}t.loop=1}function ma(t){exports.DEBUG&&console.log(t.step,"RTDG[]"),t.round=Io}function _n(t,n){const e=n.stack,r=e.pop(),i=e.pop(),a=n.z0[i],s=n.fv,f=n.pv;let o=n.cvt[r];t&&(o=n.round(o)),exports.DEBUG&&console.log(n.step,"MIAP["+t+"]",r,"(",o,")",i),s.setRelative(a,yt,o,f),n.zp0===0&&(a.xo=a.x,a.yo=a.y),s.touch(a),n.rp0=n.rp1=i}function ya(t){const n=t.prog;let e=t.ip;const r=t.stack,i=n[++e];exports.DEBUG&&console.log(t.step,"NPUSHB[]",i);for(let a=0;a<i;a++)r.push(n[++e]);t.ip=e}function xa(t){let n=t.ip;const e=t.prog,r=t.stack,i=e[++n];exports.DEBUG&&console.log(t.step,"NPUSHW[]",i);for(let a=0;a<i;a++){let s=e[++n]<<8|e[++n];s&32768&&(s=-((s^65535)+1)),r.push(s)}t.ip=n}function ba(t){const n=t.stack;let e=t.store;e||(e=t.store=[]);const r=n.pop(),i=n.pop();exports.DEBUG&&console.log(t.step,"WS",r,i),e[i]=r}function Sa(t){const n=t.stack,e=t.store,r=n.pop();exports.DEBUG&&console.log(t.step,"RS",r);const i=e&&e[r]||0;n.push(i)}function Ta(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"WCVTP",e,r),t.cvt[r]=e/64}function wa(t){const n=t.stack,e=n.pop();exports.DEBUG&&console.log(t.step,"RCVT",e),n.push(t.cvt[e]*64)}function Hn(t,n){const e=n.stack,r=e.pop(),i=n.z2[r];exports.DEBUG&&console.log(n.step,"GC["+t+"]",r),e.push(n.dpv.distance(i,yt,t,!1)*64)}function jn(t,n){const e=n.stack,r=e.pop(),i=e.pop(),a=n.z1[r],s=n.z0[i],f=n.dpv.distance(s,a,t,t);exports.DEBUG&&console.log(n.step,"MD["+t+"]",r,i,"->",f),n.stack.push(Math.round(f*64))}function Ca(t){exports.DEBUG&&console.log(t.step,"MPPEM[]"),t.stack.push(t.ppem)}function Ea(t){exports.DEBUG&&console.log(t.step,"FLIPON[]"),t.autoFlip=!0}function Aa(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"LT[]",e,r),n.push(r<e?1:0)}function Pa(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"LTEQ[]",e,r),n.push(r<=e?1:0)}function Fa(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"GT[]",e,r),n.push(r>e?1:0)}function Oa(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"GTEQ[]",e,r),n.push(r>=e?1:0)}function La(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"EQ[]",e,r),n.push(e===r?1:0)}function Ua(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"NEQ[]",e,r),n.push(e!==r?1:0)}function Da(t){const n=t.stack,e=n.pop();exports.DEBUG&&console.log(t.step,"ODD[]",e),n.push(Math.trunc(e)%2?1:0)}function Ra(t){const n=t.stack,e=n.pop();exports.DEBUG&&console.log(t.step,"EVEN[]",e),n.push(Math.trunc(e)%2?0:1)}function Ia(t){let n=t.stack.pop();exports.DEBUG&&console.log(t.step,"IF[]",n),n||(Ir(t,!0),exports.DEBUG&&console.log(t.step,"EIF[]"))}function Ba(t){exports.DEBUG&&console.log(t.step,"EIF[]")}function Na(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"AND[]",e,r),n.push(e&&r?1:0)}function za(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"OR[]",e,r),n.push(e||r?1:0)}function Ga(t){const n=t.stack,e=n.pop();exports.DEBUG&&console.log(t.step,"NOT[]",e),n.push(e?0:1)}function zt(t,n){const e=n.stack,r=e.pop(),i=n.fv,a=n.pv,s=n.ppem,f=n.deltaBase+(t-1)*16,o=n.deltaShift,c=n.z0;exports.DEBUG&&console.log(n.step,"DELTAP["+t+"]",r,e);for(let d=0;d<r;d++){const x=e.pop(),S=e.pop();if(f+((S&240)>>4)!==s)continue;let F=(S&15)-8;F>=0&&F++,exports.DEBUG&&console.log(n.step,"DELTAPFIX",x,"by",F*o);const m=c[x];i.setRelative(m,m,F*o,a)}}function _a(t){const e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SDB[]",e),t.deltaBase=e}function Ha(t){const e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SDS[]",e),t.deltaShift=Math.pow(.5,e)}function ja(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"ADD[]",e,r),n.push(r+e)}function qa(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"SUB[]",e,r),n.push(r-e)}function Wa(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"DIV[]",e,r),n.push(r*64/e)}function Va(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"MUL[]",e,r),n.push(r*e/64)}function Xa(t){const n=t.stack,e=n.pop();exports.DEBUG&&console.log(t.step,"ABS[]",e),n.push(Math.abs(e))}function Ya(t){const n=t.stack;let e=n.pop();exports.DEBUG&&console.log(t.step,"NEG[]",e),n.push(-e)}function Za(t){const n=t.stack,e=n.pop();exports.DEBUG&&console.log(t.step,"FLOOR[]",e),n.push(Math.floor(e/64)*64)}function Ka(t){const n=t.stack,e=n.pop();exports.DEBUG&&console.log(t.step,"CEILING[]",e),n.push(Math.ceil(e/64)*64)}function lt(t,n){const e=n.stack,r=e.pop();exports.DEBUG&&console.log(n.step,"ROUND[]"),e.push(n.round(r/64)*64)}function Qa(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"WCVTF[]",e,r),t.cvt[r]=e*t.ppem/t.font.unitsPerEm}function Gt(t,n){const e=n.stack,r=e.pop(),i=n.ppem,a=n.deltaBase+(t-1)*16,s=n.deltaShift;exports.DEBUG&&console.log(n.step,"DELTAC["+t+"]",r,e);for(let f=0;f<r;f++){const o=e.pop(),c=e.pop();if(a+((c&240)>>4)!==i)continue;let x=(c&15)-8;x>=0&&x++;const S=x*s;exports.DEBUG&&console.log(n.step,"DELTACFIX",o,"by",S),n.cvt[o]+=S}}function $a(t){let n=t.stack.pop();exports.DEBUG&&console.log(t.step,"SROUND[]",n),t.round=Rr;let e;switch(n&192){case 0:e=.5;break;case 64:e=1;break;case 128:e=2;break;default:throw new Error("invalid SROUND value")}switch(t.srPeriod=e,n&48){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*e;break;case 32:t.srPhase=.5*e;break;case 48:t.srPhase=.75*e;break;default:throw new Error("invalid SROUND value")}n&=15,n===0?t.srThreshold=0:t.srThreshold=(n/8-.5)*e}function ka(t){let n=t.stack.pop();exports.DEBUG&&console.log(t.step,"S45ROUND[]",n),t.round=Rr;let e;switch(n&192){case 0:e=Math.sqrt(2)/2;break;case 64:e=Math.sqrt(2);break;case 128:e=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(t.srPeriod=e,n&48){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*e;break;case 32:t.srPhase=.5*e;break;case 48:t.srPhase=.75*e;break;default:throw new Error("invalid S45ROUND value")}n&=15,n===0?t.srThreshold=0:t.srThreshold=(n/8-.5)*e}function Ma(t){exports.DEBUG&&console.log(t.step,"ROFF[]"),t.round=Ro}function Ja(t){exports.DEBUG&&console.log(t.step,"RUTG[]"),t.round=No}function es(t){exports.DEBUG&&console.log(t.step,"RDTG[]"),t.round=zo}function ts(t){const n=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCANCTRL[]",n)}function qn(t,n){const e=n.stack,r=e.pop(),i=e.pop(),a=n.z2[r],s=n.z1[i];exports.DEBUG&&console.log("SDPVTL["+t+"]",r,i);let f,o;t?(f=a.y-s.y,o=s.x-a.x):(f=s.x-a.x,o=s.y-a.y),n.dpv=it(f,o)}function ns(t){const n=t.stack,e=n.pop();let r=0;exports.DEBUG&&console.log(t.step,"GETINFO[]",e),e&1&&(r=35),e&32&&(r|=4096),n.push(r)}function rs(t){const n=t.stack,e=n.pop(),r=n.pop(),i=n.pop();exports.DEBUG&&console.log(t.step,"ROLL[]"),n.push(r),n.push(e),n.push(i)}function is(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"MAX[]",e,r),n.push(Math.max(r,e))}function os(t){const n=t.stack,e=n.pop(),r=n.pop();exports.DEBUG&&console.log(t.step,"MIN[]",e,r),n.push(Math.min(r,e))}function as(t){const n=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCANTYPE[]",n)}function ss(t){const n=t.stack.pop();let e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"INSTCTRL[]",n,e),n){case 1:t.inhibitGridFit=!!e;return;case 2:t.ignoreCvt=!!e;return;default:throw new Error("invalid INSTCTRL[] selector")}}function Ge(t,n){const e=n.stack,r=n.prog;let i=n.ip;exports.DEBUG&&console.log(n.step,"PUSHB["+t+"]");for(let a=0;a<t;a++)e.push(r[++i]);n.ip=i}function _e(t,n){let e=n.ip;const r=n.prog,i=n.stack;exports.DEBUG&&console.log(n.ip,"PUSHW["+t+"]");for(let a=0;a<t;a++){let s=r[++e]<<8|r[++e];s&32768&&(s=-((s^65535)+1)),i.push(s)}n.ip=e}function X(t,n,e,r,i,a){const s=a.stack,f=t&&s.pop(),o=s.pop(),c=a.rp0,d=a.z0[c],x=a.z1[o],S=a.minDis,w=a.fv,F=a.dpv;let m,l,u,p;l=m=F.distance(x,d,!0,!0),u=l>=0?1:-1,l=Math.abs(l),t&&(p=a.cvt[f],r&&Math.abs(l-p)<a.cvCutIn&&(l=p)),e&&l<S&&(l=S),r&&(l=a.round(l)),w.setRelative(x,d,u*l,F),w.touch(x),exports.DEBUG&&console.log(a.step,(t?"MIRP[":"MDRP[")+(n?"M":"m")+(e?">":"_")+(r?"R":"_")+(i===0?"Gr":i===1?"Bl":i===2?"Wh":"")+"]",t?f+"("+a.cvt[f]+","+p+")":"",o,"(d =",m,"->",u*l,")"),a.rp1=a.rp0,a.rp2=o,n&&(a.rp0=o)}Or=[Fn.bind(void 0,Ne),Fn.bind(void 0,De),On.bind(void 0,Ne),On.bind(void 0,De),Ln.bind(void 0,Ne),Ln.bind(void 0,De),Un.bind(void 0,0),Un.bind(void 0,1),Dn.bind(void 0,0),Dn.bind(void 0,1),_o,Ho,jo,qo,Wo,Vo,Xo,Yo,Zo,Ko,Qo,$o,ko,Mo,Jo,ea,ta,na,ra,ia,void 0,void 0,oa,Nt,aa,sa,ua,ca,pa,void 0,void 0,void 0,la,fa,ha,void 0,Rn.bind(void 0,0),Rn.bind(void 0,1),In.bind(void 0,Ne),In.bind(void 0,De),Bn.bind(void 0,0),Bn.bind(void 0,1),Nn.bind(void 0,0),Nn.bind(void 0,1),zn.bind(void 0,0),zn.bind(void 0,1),da,ga,Gn.bind(void 0,0),Gn.bind(void 0,1),va,ma,_n.bind(void 0,0),_n.bind(void 0,1),ya,xa,ba,Sa,Ta,wa,Hn.bind(void 0,0),Hn.bind(void 0,1),void 0,jn.bind(void 0,0),jn.bind(void 0,1),Ca,void 0,Ea,void 0,void 0,Aa,Pa,Fa,Oa,La,Ua,Da,Ra,Ia,Ba,Na,za,Ga,zt.bind(void 0,1),_a,Ha,ja,qa,Wa,Va,Xa,Ya,Za,Ka,lt.bind(void 0,0),lt.bind(void 0,1),lt.bind(void 0,2),lt.bind(void 0,3),void 0,void 0,void 0,void 0,Qa,zt.bind(void 0,2),zt.bind(void 0,3),Gt.bind(void 0,1),Gt.bind(void 0,2),Gt.bind(void 0,3),$a,ka,void 0,void 0,Ma,void 0,Ja,es,Nt,Nt,void 0,void 0,void 0,void 0,void 0,ts,qn.bind(void 0,0),qn.bind(void 0,1),ns,void 0,rs,is,os,as,ss,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Ge.bind(void 0,1),Ge.bind(void 0,2),Ge.bind(void 0,3),Ge.bind(void 0,4),Ge.bind(void 0,5),Ge.bind(void 0,6),Ge.bind(void 0,7),Ge.bind(void 0,8),_e.bind(void 0,1),_e.bind(void 0,2),_e.bind(void 0,3),_e.bind(void 0,4),_e.bind(void 0,5),_e.bind(void 0,6),_e.bind(void 0,7),_e.bind(void 0,8),X.bind(void 0,0,0,0,0,0),X.bind(void 0,0,0,0,0,1),X.bind(void 0,0,0,0,0,2),X.bind(void 0,0,0,0,0,3),X.bind(void 0,0,0,0,1,0),X.bind(void 0,0,0,0,1,1),X.bind(void 0,0,0,0,1,2),X.bind(void 0,0,0,0,1,3),X.bind(void 0,0,0,1,0,0),X.bind(void 0,0,0,1,0,1),X.bind(void 0,0,0,1,0,2),X.bind(void 0,0,0,1,0,3),X.bind(void 0,0,0,1,1,0),X.bind(void 0,0,0,1,1,1),X.bind(void 0,0,0,1,1,2),X.bind(void 0,0,0,1,1,3),X.bind(void 0,0,1,0,0,0),X.bind(void 0,0,1,0,0,1),X.bind(void 0,0,1,0,0,2),X.bind(void 0,0,1,0,0,3),X.bind(void 0,0,1,0,1,0),X.bind(void 0,0,1,0,1,1),X.bind(void 0,0,1,0,1,2),X.bind(void 0,0,1,0,1,3),X.bind(void 0,0,1,1,0,0),X.bind(void 0,0,1,1,0,1),X.bind(void 0,0,1,1,0,2),X.bind(void 0,0,1,1,0,3),X.bind(void 0,0,1,1,1,0),X.bind(void 0,0,1,1,1,1),X.bind(void 0,0,1,1,1,2),X.bind(void 0,0,1,1,1,3),X.bind(void 0,1,0,0,0,0),X.bind(void 0,1,0,0,0,1),X.bind(void 0,1,0,0,0,2),X.bind(void 0,1,0,0,0,3),X.bind(void 0,1,0,0,1,0),X.bind(void 0,1,0,0,1,1),X.bind(void 0,1,0,0,1,2),X.bind(void 0,1,0,0,1,3),X.bind(void 0,1,0,1,0,0),X.bind(void 0,1,0,1,0,1),X.bind(void 0,1,0,1,0,2),X.bind(void 0,1,0,1,0,3),X.bind(void 0,1,0,1,1,0),X.bind(void 0,1,0,1,1,1),X.bind(void 0,1,0,1,1,2),X.bind(void 0,1,0,1,1,3),X.bind(void 0,1,1,0,0,0),X.bind(void 0,1,1,0,0,1),X.bind(void 0,1,1,0,0,2),X.bind(void 0,1,1,0,0,3),X.bind(void 0,1,1,0,1,0),X.bind(void 0,1,1,0,1,1),X.bind(void 0,1,1,0,1,2),X.bind(void 0,1,1,0,1,3),X.bind(void 0,1,1,1,0,0),X.bind(void 0,1,1,1,0,1),X.bind(void 0,1,1,1,0,2),X.bind(void 0,1,1,1,0,3),X.bind(void 0,1,1,1,1,0),X.bind(void 0,1,1,1,1,1),X.bind(void 0,1,1,1,1,2),X.bind(void 0,1,1,1,1,3)];function se(t){t=t||{},t.empty||(Ke(t.familyName,"When creating a new Font object, familyName is required."),Ke(t.styleName,"When creating a new Font object, styleName is required."),Ke(t.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Ke(t.ascender,"When creating a new Font object, ascender is required."),Ke(t.descender,"When creating a new Font object, descender is required."),Ke(t.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:t.familyName||" "},fontSubfamily:{en:t.styleName||" "},fullName:{en:t.fullName||t.familyName+" "+t.styleName},postScriptName:{en:t.postScriptName||t.familyName+t.styleName},designer:{en:t.designer||" "},designerURL:{en:t.designerURL||" "},manufacturer:{en:t.manufacturer||" "},manufacturerURL:{en:t.manufacturerURL||" "},license:{en:t.license||" "},licenseURL:{en:t.licenseURL||" "},version:{en:t.version||"Version 0.1"},description:{en:t.description||" "},copyright:{en:t.copyright||" "},trademark:{en:t.trademark||" "}},this.unitsPerEm=t.unitsPerEm||1e3,this.ascender=t.ascender,this.descender=t.descender,this.createdTimestamp=t.createdTimestamp,this.tables={os2:{usWeightClass:t.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:t.widthClass||this.usWidthClasses.MEDIUM,fsSelection:t.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new Qe.GlyphSet(this,t.glyphs||[]),this.encoding=new tr(this),this.substitution=new Oe(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new Ur(this)}})}se.prototype.hasChar=function(t){return this.encoding.charToGlyphIndex(t)!==null};se.prototype.charToGlyphIndex=function(t){return this.encoding.charToGlyphIndex(t)};se.prototype.charToGlyph=function(t){const n=this.charToGlyphIndex(t);let e=this.glyphs.get(n);return e||(e=this.glyphs.get(0)),e};se.prototype.stringToGlyphs=function(t,n){n=n||this.defaultRenderOptions;const e=[];for(let s=0;s<t.length;s+=1){const f=t[s];e.push(this.charToGlyphIndex(f))}let r=e.length;if(n.features){const s=n.script||this.substitution.getDefaultScriptName();let f=[];n.features.liga&&(f=f.concat(this.substitution.getFeature("liga",s,n.language))),n.features.rlig&&(f=f.concat(this.substitution.getFeature("rlig",s,n.language)));for(let o=0;o<r;o+=1)for(let c=0;c<f.length;c++){const d=f[c],x=d.sub,S=x.length;let w=0;for(;w<S&&x[w]===e[o+w];)w++;w===S&&(e.splice(o,S,d.by),r=r-S+1)}}const i=new Array(r),a=this.glyphs.get(0);for(let s=0;s<r;s+=1)i[s]=this.glyphs.get(e[s])||a;return i};se.prototype.nameToGlyphIndex=function(t){return this.glyphNames.nameToGlyphIndex(t)};se.prototype.nameToGlyph=function(t){const n=this.nameToGlyphIndex(t);let e=this.glyphs.get(n);return e||(e=this.glyphs.get(0)),e};se.prototype.glyphIndexToName=function(t){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(t):""};se.prototype.getKerningValue=function(t,n){t=t.index||t,n=n.index||n;const e=this.getGposKerningValue;return e?e(t,n):this.kerningPairs[t+","+n]||0};se.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}};se.prototype.forEachGlyph=function(t,n,e,r,i,a){n=n!==void 0?n:0,e=e!==void 0?e:0,r=r!==void 0?r:72,i=i||this.defaultRenderOptions;const s=1/this.unitsPerEm*r,f=this.stringToGlyphs(t,i);for(let o=0;o<f.length;o+=1){const c=f[o];if(a.call(this,c,n,e,r,i),c.advanceWidth&&(n+=c.advanceWidth*s),i.kerning&&o<f.length-1){const d=this.getKerningValue(c,f[o+1]);n+=d*s}i.letterSpacing?n+=i.letterSpacing*r:i.tracking&&(n+=i.tracking/1e3*r)}return n};se.prototype.getPath=function(t,n,e,r,i){const a=new he;return this.forEachGlyph(t,n,e,r,i,function(s,f,o,c){const d=s.getPath(f,o,c,i,this);a.extend(d)}),a};se.prototype.getPaths=function(t,n,e,r,i){const a=[];return this.forEachGlyph(t,n,e,r,i,function(s,f,o,c){const d=s.getPath(f,o,c,i,this);a.push(d)}),a};se.prototype.getAdvanceWidth=function(t,n,e){return this.forEachGlyph(t,0,0,n,e,function(){})};se.prototype.draw=function(t,n,e,r,i,a){this.getPath(n,e,r,i,a).draw(t)};se.prototype.drawPoints=function(t,n,e,r,i,a){this.forEachGlyph(n,e,r,i,a,function(s,f,o,c){s.drawPoints(t,f,o,c)})};se.prototype.drawMetrics=function(t,n,e,r,i,a){this.forEachGlyph(n,e,r,i,a,function(s,f,o,c){s.drawMetrics(t,f,o,c)})};se.prototype.getEnglishName=function(t){const n=this.names[t];if(n)return n.en};se.prototype.validate=function(){const t=this;function n(r,i){}function e(r){const i=t.getEnglishName(r);i&&i.trim().length>0}e("fontFamily"),e("weightName"),e("manufacturer"),e("copyright"),e("version"),this.unitsPerEm>0};se.prototype.toTables=function(){return Po.fontToTable(this)};se.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};se.prototype.toArrayBuffer=function(){const n=this.toTables().encode(),e=new ArrayBuffer(n.length),r=new Uint8Array(e);for(let i=0;i<n.length;i++)r[i]=n[i];return e};se.prototype.download=function(t){const n=this.getEnglishName("fontFamily"),e=this.getEnglishName("fontSubfamily");t=t||n.replace(/\s/g,"")+"-"+e+".otf";const r=this.toArrayBuffer();if(Lo())window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,r.byteLength,function(i){i.root.getFile(t,{create:!0},function(a){a.createWriter(function(s){const f=new DataView(r),o=new Blob([f],{type:"font/opentype"});s.write(o),s.addEventListener("writeend",function(){location.href=a.toURL()},!1)})})},function(i){throw new Error(i.name+": "+i.message)});else{const i=require("fs"),a=Do(r);i.writeFileSync(t,a)}};se.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};se.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};se.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};function Br(t,n){const e=JSON.stringify(t);let r=256;for(let i in n){let a=parseInt(i);if(!(!a||a<256)){if(JSON.stringify(n[i])===e)return a;r<=a&&(r=a+1)}}return n[r]=t,r}function us(t,n,e){const r=Br(n.name,e);return[{name:"tag_"+t,type:"TAG",value:n.tag},{name:"minValue_"+t,type:"FIXED",value:n.minValue<<16},{name:"defaultValue_"+t,type:"FIXED",value:n.defaultValue<<16},{name:"maxValue_"+t,type:"FIXED",value:n.maxValue<<16},{name:"flags_"+t,type:"USHORT",value:0},{name:"nameID_"+t,type:"USHORT",value:r}]}function ls(t,n,e){const r={},i=new Y.Parser(t,n);return r.tag=i.parseTag(),r.minValue=i.parseFixed(),r.defaultValue=i.parseFixed(),r.maxValue=i.parseFixed(),i.skip("uShort",1),r.name=e[i.parseUShort()]||{},r}function fs(t,n,e,r){const i=Br(n.name,r),a=[{name:"nameID_"+t,type:"USHORT",value:i},{name:"flags_"+t,type:"USHORT",value:0}];for(let s=0;s<e.length;++s){const f=e[s].tag;a.push({name:"axis_"+t+" "+f,type:"FIXED",value:n.coordinates[f]<<16})}return a}function cs(t,n,e,r){const i={},a=new Y.Parser(t,n);i.name=r[a.parseUShort()]||{},a.skip("uShort",1),i.coordinates={};for(let s=0;s<e.length;++s)i.coordinates[e[s].tag]=a.parseFixed();return i}function ps(t,n){const e=new J.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:t.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:t.instances.length},{name:"instanceSize",type:"USHORT",value:4+t.axes.length*4}]);e.offsetToData=e.sizeOf();for(let r=0;r<t.axes.length;r++)e.fields=e.fields.concat(us(r,t.axes[r],n));for(let r=0;r<t.instances.length;r++)e.fields=e.fields.concat(fs(r,t.instances[r],t.axes,n));return e}function hs(t,n,e){const r=new Y.Parser(t,n),i=r.parseULong();ne.argument(i===65536,"Unsupported fvar table version.");const a=r.parseOffset16();r.skip("uShort",1);const s=r.parseUShort(),f=r.parseUShort(),o=r.parseUShort(),c=r.parseUShort(),d=[];for(let w=0;w<s;w++)d.push(ls(t,n+a+w*f,e));const x=[],S=n+a+s*f;for(let w=0;w<o;w++)x.push(cs(t,S+w*c,d,e));return{axes:d,instances:x}}const ds={make:ps,parse:hs};function Wn(t,n){const e=new Y.Parser(t,n),r=e.parseUShort(),i=[];for(let a=0;a<r;a++)i[e.parseTag()]={offset:e.parseUShort()};return i}function gs(t,n){const e=new Y.Parser(t,n),r=e.parseUShort();let i=e.parseUShort();if(r===1)return e.parseUShortList(i);if(r===2){const a=[];for(;i--;){const s=e.parseUShort(),f=e.parseUShort();let o=e.parseUShort();for(let c=s;c<=f;c++)a[o++]=c}return a}}function Vn(t,n){const e=new Y.Parser(t,n),r=e.parseUShort();if(r===1){const i=e.parseUShort(),a=e.parseUShort(),s=e.parseUShortList(a);return function(f){return s[f-i]||0}}else if(r===2){const i=e.parseUShort(),a=[],s=[],f=[];for(let o=0;o<i;o++)a[o]=e.parseUShort(),s[o]=e.parseUShort(),f[o]=e.parseUShort();return function(o){let c=0,d=a.length-1;for(;c<d;){const x=c+d+1>>1;o<a[x]?d=x-1:c=x}return a[c]<=o&&o<=s[c]&&f[c]||0}}}function vs(t,n){const e=new Y.Parser(t,n),r=e.parseUShort(),i=e.parseUShort(),a=gs(t,n+i),s=e.parseUShort(),f=e.parseUShort();let o;if(s!==4||f!==0)return;const c={};if(r===1){const d=e.parseUShort(),x=[],S=e.parseOffset16List(d);for(let w=0;w<d;w++){const F=S[w];let m=c[F];if(!m){m={},e.relativeOffset=F;let l=e.parseUShort();for(;l--;){const u=e.parseUShort();s&&(o=e.parseShort()),f&&e.parseShort(),m[u]=o}}x[a[w]]=m}return function(w,F){const m=x[w];if(m)return m[F]}}else if(r===2){const d=e.parseUShort(),x=e.parseUShort(),S=e.parseUShort(),w=e.parseUShort(),F=Vn(t,n+d),m=Vn(t,n+x),l=[];for(let p=0;p<S;p++){const v=l[p]=[];for(let h=0;h<w;h++)s&&(o=e.parseShort()),f&&e.parseShort(),v[h]=o}const u={};for(let p=0;p<a.length;p++)u[a[p]]=1;return function(p,v){if(!u[p])return;const h=F(p),g=m(v),b=l[h];if(b)return b[g]}}}function ms(t,n){const e=new Y.Parser(t,n),r=e.parseUShort(),i=e.parseUShort(),a=i&16,s=e.parseUShort(),f=e.parseOffset16List(s),o={lookupType:r,lookupFlag:i,markFilteringSet:a?e.parseUShort():-1};if(r===2){const c=[];for(let d=0;d<s;d++){const x=vs(t,n+f[d]);x&&c.push(x)}o.getKerningValue=function(d,x){for(let S=c.length;S--;){const w=c[S](d,x);if(w!==void 0)return w}return 0}}return o}function ys(t,n,e){const r=new Y.Parser(t,n),i=r.parseFixed();ne.argument(i===1,"Unsupported GPOS table version."),Wn(t,n+r.parseUShort()),Wn(t,n+r.parseUShort());const a=r.parseUShort();r.relativeOffset=a;const s=r.parseUShort(),f=r.parseOffset16List(s),o=n+a;for(let c=0;c<s;c++){const d=ms(t,o+f[c]);d.lookupType===2&&!e.getGposKerningValue&&(e.getGposKerningValue=d.getKerningValue)}}const xs={parse:ys};function bs(t){const n={};t.skip("uShort");const e=t.parseUShort();ne.argument(e===0,"Unsupported kern sub-table version."),t.skip("uShort",2);const r=t.parseUShort();t.skip("uShort",3);for(let i=0;i<r;i+=1){const a=t.parseUShort(),s=t.parseUShort(),f=t.parseShort();n[a+","+s]=f}return n}function Ss(t){const n={};t.skip("uShort"),t.parseULong()>1&&console.warn("Only the first kern subtable is supported."),t.skip("uLong");const i=t.parseUShort()&255;if(t.skip("uShort"),i===0){const a=t.parseUShort();t.skip("uShort",3);for(let s=0;s<a;s+=1){const f=t.parseUShort(),o=t.parseUShort(),c=t.parseShort();n[f+","+o]=c}}return n}function Ts(t,n){const e=new Y.Parser(t,n),r=e.parseUShort();if(r===0)return bs(e);if(r===1)return Ss(e);throw new Error("Unsupported kern table version ("+r+").")}const ws={parse:Ts};function Cs(t,n,e,r){const i=new Y.Parser(t,n),a=r?i.parseUShort:i.parseULong,s=[];for(let f=0;f<e+1;f+=1){let o=a.call(i);r&&(o*=2),s.push(o)}return s}const Es={parse:Cs};function As(t,n){require("fs").readFile(t,function(r,i){if(r)return n(r.message);n(null,Uo(i))})}function Ps(t,n){const e=new XMLHttpRequest;e.open("get",t,!0),e.responseType="arraybuffer",e.onload=function(){return e.status!==200?n("Font could not be loaded: "+e.statusText):n(null,e.response)},e.onerror=function(){n("Font could not be loaded")},e.send()}function Xn(t,n){const e=[];let r=12;for(let i=0;i<n;i+=1){const a=Y.getTag(t,r),s=Y.getULong(t,r+4),f=Y.getULong(t,r+8),o=Y.getULong(t,r+12);e.push({tag:a,checksum:s,offset:f,length:o,compression:!1}),r+=16}return e}function Fs(t,n){const e=[];let r=44;for(let i=0;i<n;i+=1){const a=Y.getTag(t,r),s=Y.getULong(t,r+4),f=Y.getULong(t,r+8),o=Y.getULong(t,r+12);let c;f<o?c="WOFF":c=!1,e.push({tag:a,offset:s,compression:c,compressedLength:f,length:o}),r+=20}return e}function ce(t,n){if(n.compression==="WOFF"){const e=new Uint8Array(t.buffer,n.offset+2,n.compressedLength-2),r=new Uint8Array(n.length);if(ii(e,r),r.byteLength!==n.length)throw new Error("Decompression error: "+n.tag+" decompressed length doesn't match recorded length");return{data:new DataView(r.buffer,0),offset:0}}else return{data:t,offset:n.offset}}function Nr(t){let n,e;const r=new se({empty:!0}),i=new DataView(t,0);let a,s=[];const f=Y.getTag(i,0);if(f==="\0\0\0"||f==="true"||f==="typ1")r.outlinesFormat="truetype",a=Y.getUShort(i,4),s=Xn(i,a);else if(f==="OTTO")r.outlinesFormat="cff",a=Y.getUShort(i,4),s=Xn(i,a);else if(f==="wOFF"){const g=Y.getTag(i,4);if(g==="\0\0\0")r.outlinesFormat="truetype";else if(g==="OTTO")r.outlinesFormat="cff";else throw new Error("Unsupported OpenType flavor "+f);a=Y.getUShort(i,12),s=Fs(i,a)}else throw new Error("Unsupported OpenType signature "+f);let o,c,d,x,S,w,F,m,l,u,p;for(let g=0;g<a;g+=1){const b=s[g];let y;switch(b.tag){case"cmap":y=ce(i,b),r.tables.cmap=er.parse(y.data,y.offset),r.encoding=new nr(r.tables.cmap);break;case"cvt ":y=ce(i,b),p=new Y.Parser(y.data,y.offset),r.tables.cvt=p.parseShortList(b.length/2);break;case"fvar":c=b;break;case"fpgm":y=ce(i,b),p=new Y.Parser(y.data,y.offset),r.tables.fpgm=p.parseByteList(b.length);break;case"head":y=ce(i,b),r.tables.head=dr.parse(y.data,y.offset),r.unitsPerEm=r.tables.head.unitsPerEm,n=r.tables.head.indexToLocFormat;break;case"hhea":y=ce(i,b),r.tables.hhea=gr.parse(y.data,y.offset),r.ascender=r.tables.hhea.ascender,r.descender=r.tables.hhea.descender,r.numberOfHMetrics=r.tables.hhea.numberOfHMetrics;break;case"hmtx":w=b;break;case"ltag":y=ce(i,b),e=mr.parse(y.data,y.offset);break;case"maxp":y=ce(i,b),r.tables.maxp=yr.parse(y.data,y.offset),r.numGlyphs=r.tables.maxp.numGlyphs;break;case"name":l=b;break;case"OS/2":y=ce(i,b),r.tables.os2=Yt.parse(y.data,y.offset);break;case"post":y=ce(i,b),r.tables.post=Cr.parse(y.data,y.offset),r.glyphNames=new Qt(r.tables.post);break;case"prep":y=ce(i,b),p=new Y.Parser(y.data,y.offset),r.tables.prep=p.parseByteList(b.length);break;case"glyf":d=b;break;case"loca":m=b;break;case"CFF ":o=b;break;case"kern":F=b;break;case"GPOS":x=b;break;case"GSUB":S=b;break;case"meta":u=b;break}}const v=ce(i,l);if(r.tables.name=wr.parse(v.data,v.offset,e),r.names=r.tables.name,d&&m){const g=n===0,b=ce(i,m),y=Es.parse(b.data,b.offset,r.numGlyphs,g),T=ce(i,d);r.glyphs=ir.parse(T.data,T.offset,y,r)}else if(o){const g=ce(i,o);hr.parse(g.data,g.offset,r)}else throw new Error("Font doesn't contain TrueType or CFF outlines.");const h=ce(i,w);if(vr.parse(h.data,h.offset,r.numberOfHMetrics,r.numGlyphs,r.glyphs),wi(r),F){const g=ce(i,F);r.kerningPairs=ws.parse(g.data,g.offset)}else r.kerningPairs={};if(x){const g=ce(i,x);xs.parse(g.data,g.offset,r)}if(S){const g=ce(i,S);r.tables.gsub=Er.parse(g.data,g.offset)}if(c){const g=ce(i,c);r.tables.fvar=ds.parse(g.data,g.offset,r.names)}if(u){const g=ce(i,u);r.tables.meta=Ar.parse(g.data,g.offset),r.metas=r.tables.meta}return r}function Os(t,n){(typeof window>"u"?As:Ps)(t,function(i,a){if(i)return n(i);let s;try{s=Nr(a)}catch(f){return n(f,null)}return n(null,s)})}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Us=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,e,r)=>r?r.toUpperCase():e.toLowerCase()),Yn=t=>{const n=Us(t);return n.charAt(0).toUpperCase()+n.slice(1)},zr=(...t)=>t.filter((n,e,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===e).join(" ").trim(),Ds=t=>{for(const n in t)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rs={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=Re.forwardRef(({color:t="currentColor",size:n=24,strokeWidth:e=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...f},o)=>Re.createElement("svg",{ref:o,...Rs,width:n,height:n,stroke:t,strokeWidth:r?Number(e)*24/Number(n):e,className:zr("lucide",i),...!a&&!Ds(f)&&{"aria-hidden":"true"},...f},[...s.map(([c,d])=>Re.createElement(c,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=(t,n)=>{const e=Re.forwardRef(({className:r,...i},a)=>Re.createElement(Is,{ref:a,iconNode:n,className:zr(`lucide-${Ls(Yn(t))}`,`lucide-${t}`,r),...i}));return e.displayName=Yn(t),e};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],zs=Bs("external-link",Ns);function Gs({state:t,setState:n}){const{fontList:e,customFont:r,fontFamily:i,fontVariant:a,text:s,size:f,lineHeight:o,union:c,kerning:d,filled:x,separate:S,bezierAccuracy:w,dxfUnits:F,fill:m,stroke:l,strokeWidth:u,strokeNonScaling:p,fillRule:v}=t,h=e&&i?e.items.find(T=>T.family===i)?.variants||[]:[],g=Re.useMemo(()=>e?e.items.map(T=>q.jsx("option",{value:T.family,children:T.family},T.family)):q.jsx("option",{children:"Loading fonts..."}),[e]),b=async T=>{const D=T.target.files;if(!D||D.length===0)n(C=>({...C,customFont:void 0}));else{const C=await D[0].arrayBuffer(),P=Nr(C);n(U=>({...U,customFont:P}))}},y=()=>{const T=document.getElementById("font-upload");T&&(T.value=""),n(D=>({...D,customFont:void 0}))};return q.jsxs("aside",{children:[q.jsxs("details",{open:!0,children:[q.jsx("summary",{children:"Font Settings"}),q.jsxs("div",{children:[q.jsxs("div",{className:"label-with-link",children:[q.jsx("label",{children:"Google font:"}),q.jsxs("a",{href:"https://fonts.google.com/",target:"_blank",rel:"noopener noreferrer",children:["Browse fonts ",q.jsx(zs,{size:14})]})]}),q.jsx("select",{id:"font-select",value:i,onChange:T=>n(D=>({...D,fontFamily:T.target.value})),disabled:!!r,children:g}),q.jsxs("label",{children:["variant:",q.jsx("select",{id:"font-variant",value:a,onChange:T=>n(D=>({...D,fontVariant:T.target.value})),disabled:!!r,children:h.map(T=>q.jsx("option",{value:T,children:T},T))})]}),q.jsxs("label",{children:["(optional) upload font:",q.jsx("input",{id:"font-upload",type:"file",onChange:b,accept:".ttf,.otf,.woff,.woff2"})]}),r&&q.jsx("button",{onClick:y,children:"Remove"})]})]}),q.jsxs("details",{open:!0,children:[q.jsx("summary",{children:"Text Settings"}),q.jsxs("div",{children:[q.jsxs("label",{children:["text:",q.jsx("textarea",{id:"input-text",rows:3,value:s,onChange:T=>n(D=>({...D,text:T.target.value}))})]}),q.jsxs("label",{children:["size:",q.jsx("input",{type:"number",id:"input-size",value:f,onChange:T=>n(D=>({...D,size:Number(T.target.value)}))})]}),q.jsxs("label",{children:["line height:",q.jsx("span",{title:"when you have multiline text",children:""}),":",q.jsx("input",{type:"number",id:"input-line-height",value:o,onChange:T=>n(D=>({...D,lineHeight:Number(T.target.value)})),step:"0.1",min:"0.1"})]}),q.jsxs("label",{children:["kerning:",q.jsx("input",{type:"checkbox",id:"input-kerning",checked:d,onChange:T=>n(D=>({...D,kerning:T.target.checked}))})]})]})]}),q.jsxs("details",{open:!0,children:[q.jsx("summary",{children:"Stroke"}),q.jsxs("div",{children:[q.jsxs("label",{children:["Stroke color:",q.jsx("input",{type:"color",id:"input-stroke",value:l,onChange:T=>n(D=>({...D,stroke:T.target.value}))}),q.jsx("input",{type:"text",value:l,onChange:T=>n(D=>({...D,stroke:T.target.value})),placeholder:"#000000",style:{marginLeft:"8px",width:"80px"}})]}),q.jsxs("label",{children:["Stroke Width:",q.jsx("input",{type:"text",id:"input-stroke-width",value:u,onChange:T=>n(D=>({...D,strokeWidth:T.target.value}))})]}),q.jsxs("label",{children:["Non-scaling stroke:",q.jsx("input",{type:"checkbox",id:"input-stroke-non-scaling",checked:p,onChange:T=>n(D=>({...D,strokeNonScaling:T.target.checked}))})]})]})]}),q.jsxs("details",{open:!0,children:[q.jsx("summary",{children:"Fill"}),q.jsxs("div",{children:[q.jsxs("label",{children:["fill:",q.jsx("input",{type:"checkbox",id:"input-filled",checked:x,onChange:T=>n(D=>({...D,filled:T.target.checked}))})]}),q.jsxs("label",{children:["Fill color:",q.jsx("input",{type:"color",id:"input-fill",value:m,onChange:T=>n(D=>({...D,fill:T.target.value}))}),q.jsx("input",{type:"text",value:m,onChange:T=>n(D=>({...D,fill:T.target.value})),placeholder:"#000000",style:{marginLeft:"8px",width:"80px"}})]}),q.jsxs("label",{children:["Fill rule:",q.jsxs("select",{id:"input-fill-rule",value:v,onChange:T=>n(D=>({...D,fillRule:T.target.value})),children:[q.jsx("option",{value:"evenodd",children:"evenodd"}),q.jsx("option",{value:"nonzero",children:"nonzero"})]})]})]})]}),q.jsxs("details",{children:[q.jsx("summary",{children:"Options"}),q.jsxs("div",{children:[q.jsxs("label",{children:["union:",q.jsx("input",{type:"checkbox",id:"input-union",checked:c,onChange:T=>n(D=>({...D,union:T.target.checked}))})]}),q.jsxs("label",{children:["separate characters:",q.jsx("input",{type:"checkbox",id:"input-separate",checked:S,onChange:T=>n(D=>({...D,separate:T.target.checked}))})]}),q.jsxs("label",{children:["bezier accuracy",q.jsx("span",{title:"0.5 = accurate to half a pixel \r.001 = accurate to 1/1000th of a pixel \rsmaller numbers take longer to compute \rleave blank for auto",children:""}),":",q.jsx("input",{type:"text",id:"input-bezier-accuracy",placeholder:"auto",value:w,onChange:T=>n(D=>({...D,bezierAccuracy:T.target.value}))})]}),q.jsxs("label",{children:["Dxf Units:",q.jsxs("select",{id:"dxf-units",value:F,onChange:T=>n(D=>({...D,dxfUnits:T.target.value})),children:[q.jsx("option",{value:"",children:"Select units..."}),Object.values(et.unitType).map(T=>q.jsx("option",{value:T,children:T},T))]})]})]})]})]})}function _s({state:t}){const{svgOutput:n,dxfOutput:e,errorMessage:r,text:i}=t,[a,s]=Re.useState("copy to clipboard"),f=()=>{const x=document.getElementById("output-svg");x&&(x.select(),document.execCommand("copy"),s("copied"),setTimeout(()=>{s("copy to clipboard")},2e3))},o=()=>{const x=document.createElement("a");x.href="data:image/svg+xml;base64,"+window.btoa(n),x.download=`${i}.svg`,x.click()},c=()=>{const x=document.createElement("a");x.href="data:application/dxf;base64,"+window.btoa(e),x.download=`${i}.dxf`,x.click()},d=()=>{const x=window.location.href;navigator.clipboard.writeText(x).then(()=>{const S=document.getElementById("create-link");S&&(S.textContent="copied",setTimeout(()=>{S.textContent="Create link"},2e3))})};return q.jsxs("main",{children:[q.jsxs("section",{children:[r&&q.jsx("div",{id:"error-display",style:{color:"red",padding:"10px"},children:r}),q.jsx("div",{id:"svg-render",dangerouslySetInnerHTML:{__html:n},style:{marginBottom:"20px"}})]}),q.jsxs("section",{children:[q.jsx("h2",{children:"SVG Output"}),q.jsxs("div",{className:"textarea-container",children:[q.jsx("textarea",{id:"output-svg",readOnly:!0,value:n,style:{width:"100%",minHeight:"200px",fontFamily:"monospace"}}),q.jsxs("div",{className:"buttons-container",children:[q.jsx("button",{className:"btn",onClick:f,children:a}),q.jsx("button",{className:"btn",onClick:o,children:"Download Svg"}),q.jsx("button",{id:"create-link",className:"btn",onClick:d,children:"Create link"}),q.jsx("button",{className:"btn",onClick:c,children:"Download Dxf"})]})]})]})]})}const Hs="AIzaSyAOES8EmKhuJEnsn9kS1XKBpxxp-TgN8Jc";async function js(){return(await fetch(`https://www.googleapis.com/webfonts/v1/webfonts?key=${Hs}`)).json()}async function qs(t){try{const{fontList:n,fontFamily:e,fontVariant:r,customFont:i,text:a,size:s,lineHeight:f,union:o,filled:c,kerning:d,separate:x,bezierAccuracy:S,dxfUnits:w,fill:F,stroke:m,strokeWidth:l,strokeNonScaling:u,fillRule:p}=t;let v;if(i)v=i;else{const T=n.items.find(C=>C.family===e);if(!T)return{errorMessage:"Font not found"};const D=T.files[r]?.replace("http:","https:");if(!D)return{errorMessage:"Font variant not found"};v=await new Promise((C,P)=>{Os(D,(U,E)=>{U?P(U):C(E)})})}const h=a.split(`
`),g={models:{}};if(h.forEach((T,D)=>{if(T.length===0)return;const C=parseFloat(S)||void 0,P=new et.models.Text(v,T,s,o,!1,C,{kerning:d}),U=-D*s*f;et.model.move(P,[0,U]),g.models[`line_${D}`]=P}),x){let T=0;for(const D in g.models){const C=g.models[D];for(const P in C.models)C.models[P].layer=String(T),T++}}const b=et.exporter.toSVG(g,{fill:c?F:void 0,stroke:m||void 0,strokeWidth:l||void 0,fillRule:p||void 0,scalingStroke:!u}),y=et.exporter.toDXF(g,{units:w,usePOLYLINE:!0});return{svgOutput:b,dxfOutput:y,errorMessage:""}}catch(n){return{errorMessage:n.toString()}}}const Ws={fontList:null,customFont:void 0,fontFamily:"ABeeZee",fontVariant:"regular",text:"Verb",size:100,lineHeight:1.2,union:!1,kerning:!0,filled:!1,separate:!1,bezierAccuracy:"",dxfUnits:"",fill:"#000000",stroke:"#000000",strokeWidth:"0.25mm",strokeNonScaling:!0,fillRule:"evenodd",svgOutput:"",dxfOutput:"",errorMessage:""};function Xs(){const[t,n]=Re.useState(Ws);return Re.useEffect(()=>{js().then(e=>{n(r=>({...r,fontList:e}))})},[]),Re.useEffect(()=>{t.fontList&&t.fontFamily&&t.fontVariant&&qs(t).then(e=>{n(r=>({...r,...e}))})},[t.fontList,t.fontFamily,t.fontVariant,t.customFont,t.text,t.size,t.lineHeight,t.union,t.filled,t.kerning,t.separate,t.bezierAccuracy,t.dxfUnits,t.fill,t.stroke,t.strokeWidth,t.strokeNonScaling,t.fillRule]),q.jsxs(q.Fragment,{children:[q.jsx(Gs,{state:t,setState:n}),q.jsx(_s,{state:t})]})}export{Xs as default};
