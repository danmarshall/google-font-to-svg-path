import{r as reactExports}from"./index.WFquGv8Z.js";function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,o){var s=null;if(o!==void 0&&(s=""+o),i.key!==void 0&&(s=""+i.key),"key"in i){o={};for(var l in i)l!=="key"&&(o[l]=i[l])}else o=i;return i=o.ref,{$$typeof:e,type:r,key:s,ref:i!==void 0?i:null,props:o}}return reactJsxRuntime_production.Fragment=t,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),clone={exports:{}},hasRequiredClone;function requireClone(){return hasRequiredClone||(hasRequiredClone=1,(function(e){var t=(function(){function n(a,c,g,y){typeof c=="object"&&(g=c.depth,y=c.prototype,c.filter,c=c.circular);var T=[],x=[],b=typeof Buffer<"u";typeof c>"u"&&(c=!0),typeof g>"u"&&(g=1/0);function d(u,p){if(u===null)return null;if(p==0)return u;var f,h;if(typeof u!="object")return u;if(n.__isArray(u))f=[];else if(n.__isRegExp(u))f=new RegExp(u.source,l(u)),u.lastIndex&&(f.lastIndex=u.lastIndex);else if(n.__isDate(u))f=new Date(u.getTime());else{if(b&&Buffer.isBuffer(u))return Buffer.allocUnsafe?f=Buffer.allocUnsafe(u.length):f=new Buffer(u.length),u.copy(f),f;typeof y>"u"?(h=Object.getPrototypeOf(u),f=Object.create(h)):(f=Object.create(y),h=y)}if(c){var v=T.indexOf(u);if(v!=-1)return x[v];T.push(u),x.push(f)}for(var m in u){var P;h&&(P=Object.getOwnPropertyDescriptor(h,m)),!(P&&P.set==null)&&(f[m]=d(u[m],p-1))}return f}return d(a,g)}n.clonePrototype=function(c){if(c===null)return null;var g=function(){};return g.prototype=c,new g};function r(a){return Object.prototype.toString.call(a)}n.__objToStr=r;function i(a){return typeof a=="object"&&r(a)==="[object Date]"}n.__isDate=i;function o(a){return typeof a=="object"&&r(a)==="[object Array]"}n.__isArray=o;function s(a){return typeof a=="object"&&r(a)==="[object RegExp]"}n.__isRegExp=s;function l(a){var c="";return a.global&&(c+="g"),a.ignoreCase&&(c+="i"),a.multiline&&(c+="m"),c}return n.__getRegExpFlags=l,n})();e.exports&&(e.exports=t)})(clone)),clone.exports}function sortKD(e,t,n,r,i,o){if(!(i-r<=n)){var s=Math.floor((r+i)/2);select(e,t,s,r,i,o%2),sortKD(e,t,n,r,s-1,o+1),sortKD(e,t,n,s+1,i,o+1)}}function select(e,t,n,r,i,o){for(;i>r;){if(i-r>600){var s=i-r+1,l=n-r+1,a=Math.log(s),c=.5*Math.exp(2*a/3),g=.5*Math.sqrt(a*c*(s-c)/s)*(l-s/2<0?-1:1),y=Math.max(r,Math.floor(n-l*c/s+g)),T=Math.min(i,Math.floor(n+(s-l)*c/s+g));select(e,t,n,y,T,o)}var x=t[2*n+o],b=r,d=i;for(swapItem(e,t,r,n),t[2*i+o]>x&&swapItem(e,t,r,i);b<d;){for(swapItem(e,t,b,d),b++,d--;t[2*b+o]<x;)b++;for(;t[2*d+o]>x;)d--}t[2*r+o]===x?swapItem(e,t,r,d):(d++,swapItem(e,t,d,i)),d<=n&&(r=d+1),n<=d&&(i=d-1)}}function swapItem(e,t,n,r){swap(e,n,r),swap(t,2*n,2*r),swap(t,2*n+1,2*r+1)}function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function range(e,t,n,r,i,o,s){for(var l=[0,e.length-1,0],a=[],c,g;l.length;){var y=l.pop(),T=l.pop(),x=l.pop();if(T-x<=s){for(var b=x;b<=T;b++)c=t[2*b],g=t[2*b+1],c>=n&&c<=i&&g>=r&&g<=o&&a.push(e[b]);continue}var d=Math.floor((x+T)/2);c=t[2*d],g=t[2*d+1],c>=n&&c<=i&&g>=r&&g<=o&&a.push(e[d]);var u=(y+1)%2;(y===0?n<=c:r<=g)&&(l.push(x),l.push(d-1),l.push(u)),(y===0?i>=c:o>=g)&&(l.push(d+1),l.push(T),l.push(u))}return a}function within(e,t,n,r,i,o){for(var s=[0,e.length-1,0],l=[],a=i*i;s.length;){var c=s.pop(),g=s.pop(),y=s.pop();if(g-y<=o){for(var T=y;T<=g;T++)sqDist(t[2*T],t[2*T+1],n,r)<=a&&l.push(e[T]);continue}var x=Math.floor((y+g)/2),b=t[2*x],d=t[2*x+1];sqDist(b,d,n,r)<=a&&l.push(e[x]);var u=(c+1)%2;(c===0?n-i<=b:r-i<=d)&&(s.push(y),s.push(x-1),s.push(u)),(c===0?n+i>=b:r+i>=d)&&(s.push(x+1),s.push(g),s.push(u))}return l}function sqDist(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}function kdbush(e,t,n,r,i){return new KDBush(e,t,n,r,i)}function KDBush(e,t,n,r,i){t=t||defaultGetX,n=n||defaultGetY,i=i||Array,this.nodeSize=r||64,this.points=e,this.ids=new i(e.length),this.coords=new i(e.length*2);for(var o=0;o<e.length;o++)this.ids[o]=o,this.coords[2*o]=t(e[o]),this.coords[2*o+1]=n(e[o]);sortKD(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}KDBush.prototype={range:function(e,t,n,r){return range(this.ids,this.coords,e,t,n,r,this.nodeSize)},within:function(e,t,n){return within(this.ids,this.coords,e,t,n,this.nodeSize)}};function defaultGetX(e){return e[0]}function defaultGetY(e){return e[1]}const src=Object.freeze(Object.defineProperty({__proto__:null,default:kdbush},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(src);var graham_scan_min={exports:{}},hasRequiredGraham_scan_min;function requireGraham_scan_min(){return hasRequiredGraham_scan_min||(hasRequiredGraham_scan_min=1,(function(e){function t(){this.anchorPoint=void 0,this.reverse=!1,this.points=[]}t.prototype={constructor:t,Point:function(n,r){this.x=n,this.y=r},_findPolarAngle:function(n,r){var i,o,s=57.295779513082;if(!n||!r||(i=r.x-n.x,o=r.y-n.y,i==0&&o==0))return 0;var l=Math.atan2(o,i)*s;return this.reverse?0>=l&&(l+=360):l>=0&&(l+=360),l},addPoint:function(n,r){return this.anchorPoint===void 0?void(this.anchorPoint=new this.Point(n,r)):this.anchorPoint.y>r&&this.anchorPoint.x>n||this.anchorPoint.y===r&&this.anchorPoint.x>n||this.anchorPoint.y>r&&this.anchorPoint.x===n?(this.points.push(new this.Point(this.anchorPoint.x,this.anchorPoint.y)),void(this.anchorPoint=new this.Point(n,r))):void this.points.push(new this.Point(n,r))},_sortPoints:function(){var n=this;return this.points.sort(function(r,i){var o=n._findPolarAngle(n.anchorPoint,r),s=n._findPolarAngle(n.anchorPoint,i);return s>o?-1:o>s?1:0})},_checkPoints:function(n,r,i){var o,s=this._findPolarAngle(n,r),l=this._findPolarAngle(n,i);return s>l?(o=s-l,!(o>180)):l>s?(o=l-s,o>180):!0},getHull:function(){var n,r,i=[];if(this.reverse=this.points.every(function(c){return c.x<0&&c.y<0}),n=this._sortPoints(),r=n.length,3>r)return n.unshift(this.anchorPoint),n;for(i.push(n.shift(),n.shift());;){var o,s,l;if(i.push(n.shift()),o=i[i.length-3],s=i[i.length-2],l=i[i.length-1],this._checkPoints(o,s,l)&&i.splice(i.length-2,1),n.length==0){if(r==i.length){var a=this.anchorPoint;return i=i.filter(function(c){return!!c}),i.some(function(c){return c.x==a.x&&c.y==a.y})||i.unshift(this.anchorPoint),i}n=i,r=n.length,i=[],i.push(n.shift(),n.shift())}}}},e.exports=t})(graham_scan_min)),graham_scan_min.exports}var bezier={exports:{}},utils={exports:{}},hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,(function(){var e=Math.abs,t=Math.cos,n=Math.sin,r=Math.acos,i=Math.atan2,o=Math.sqrt,s=Math.pow,l=function(u){return u<0?-s(-u,1/3):s(u,1/3)},a=Math.PI,c=2*a,g=a/2,y=1e-6,T=Number.MAX_SAFE_INTEGER||9007199254740991,x=Number.MIN_SAFE_INTEGER||-9007199254740991,b={x:0,y:0,z:0},d={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(u,p){var f=p(u),h=f.x*f.x+f.y*f.y;return typeof f.z<"u"&&(h+=f.z*f.z),o(h)},compute:function(u,p,f){if(u===0)return p[0];var h=p.length-1;if(u===1)return p[h];var v=p,m=1-u;if(h===0)return p[0];if(h===1)return F={x:m*v[0].x+u*v[1].x,y:m*v[0].y+u*v[1].y},f&&(F.z=m*v[0].z+u*v[1].z),F;if(h<4){var P=m*m,O=u*u,R,C,w,E=0;h===2?(v=[v[0],v[1],v[2],b],R=P,C=m*u*2,w=O):h===3&&(R=P*m,C=P*u*3,w=m*O*3,E=u*O);var F={x:R*v[0].x+C*v[1].x+w*v[2].x+E*v[3].x,y:R*v[0].y+C*v[1].y+w*v[2].y+E*v[3].y};return f&&(F.z=R*v[0].z+C*v[1].z+w*v[2].z+E*v[3].z),F}for(var S=JSON.parse(JSON.stringify(p));S.length>1;){for(var A=0;A<S.length-1;A++)S[A]={x:S[A].x+(S[A+1].x-S[A].x)*u,y:S[A].y+(S[A+1].y-S[A].y)*u},typeof S[A].z<"u"&&(S[A]=S[A].z+(S[A+1].z-S[A].z)*u);S.splice(S.length-1,1)}return S[0]},computeWithRatios:function(u,p,f,h){var v=1-u,m=f,P=p,O,R=m[0],C=m[1],w=m[2],E=m[3];if(R*=v,C*=u,P.length===2)return O=R+C,{x:(R*P[0].x+C*P[1].x)/O,y:(R*P[0].y+C*P[1].y)/O,z:h?(R*P[0].z+C*P[1].z)/O:!1};if(R*=v,C*=2*v,w*=u*u,P.length===3)return O=R+C+w,{x:(R*P[0].x+C*P[1].x+w*P[2].x)/O,y:(R*P[0].y+C*P[1].y+w*P[2].y)/O,z:h?(R*P[0].z+C*P[1].z+w*P[2].z)/O:!1};if(R*=v,C*=1.5*v,w*=3*v,E*=u*u*u,P.length===4)return O=R+C+w+E,{x:(R*P[0].x+C*P[1].x+w*P[2].x+E*P[3].x)/O,y:(R*P[0].y+C*P[1].y+w*P[2].y+E*P[3].y)/O,z:h?(R*P[0].z+C*P[1].z+w*P[2].z+E*P[3].z)/O:!1}},derive:function(u,p){for(var f=[],h=u,v=h.length,m=v-1;v>1;v--,m--){for(var P=[],O=0,R;O<m;O++)R={x:m*(h[O+1].x-h[O].x),y:m*(h[O+1].y-h[O].y)},p&&(R.z=m*(h[O+1].z-h[O].z)),P.push(R);f.push(P),h=P}return f},between:function(u,p,f){return p<=u&&u<=f||d.approximately(u,p)||d.approximately(u,f)},approximately:function(u,p,f){return e(u-p)<=(f||y)},length:function(u){var p=.5,f=0,h=d.Tvalues.length,v,m;for(v=0;v<h;v++)m=p*d.Tvalues[v]+p,f+=d.Cvalues[v]*d.arcfn(m,u);return p*f},map:function(u,p,f,h,v){var m=f-p,P=v-h,O=u-p,R=O/m;return h+P*R},lerp:function(u,p,f){var h={x:p.x+u*(f.x-p.x),y:p.y+u*(f.y-p.y)};return p.z&&f.z&&(h.z=p.z+u*(f.z-p.z)),h},pointToString:function(u){var p=u.x+"/"+u.y;return typeof u.z<"u"&&(p+="/"+u.z),p},pointsToString:function(u){return"["+u.map(d.pointToString).join(", ")+"]"},copy:function(u){return JSON.parse(JSON.stringify(u))},angle:function(u,p,f){var h=p.x-u.x,v=p.y-u.y,m=f.x-u.x,P=f.y-u.y,O=h*P-v*m,R=h*m+v*P;return i(O,R)},round:function(u,p){var f=""+u,h=f.indexOf(".");return parseFloat(f.substring(0,h+1+p))},dist:function(u,p){var f=u.x-p.x,h=u.y-p.y;return o(f*f+h*h)},closest:function(u,p){var f=s(2,63),h,v;return u.forEach(function(m,P){v=d.dist(p,m),v<f&&(f=v,h=P)}),{mdist:f,mpos:h}},abcratio:function(u,p){if(p!==2&&p!==3)return!1;if(typeof u>"u")u=.5;else if(u===0||u===1)return u;var f=s(u,p)+s(1-u,p),h=f-1;return e(h/f)},projectionratio:function(u,p){if(p!==2&&p!==3)return!1;if(typeof u>"u")u=.5;else if(u===0||u===1)return u;var f=s(1-u,p),h=s(u,p)+f;return f/h},lli8:function(u,p,f,h,v,m,P,O){var R=(u*h-p*f)*(v-P)-(u-f)*(v*O-m*P),C=(u*h-p*f)*(m-O)-(p-h)*(v*O-m*P),w=(u-f)*(m-O)-(p-h)*(v-P);return w==0?!1:{x:R/w,y:C/w}},lli4:function(u,p,f,h){var v=u.x,m=u.y,P=p.x,O=p.y,R=f.x,C=f.y,w=h.x,E=h.y;return d.lli8(v,m,P,O,R,C,w,E)},lli:function(u,p){return d.lli4(u,u.c,p,p.c)},makeline:function(u,p){var f=requireBezier(),h=u.x,v=u.y,m=p.x,P=p.y,O=(m-h)/3,R=(P-v)/3;return new f(h,v,h+O,v+R,h+2*O,v+2*R,m,P)},findbbox:function(u){var p=T,f=T,h=x,v=x;return u.forEach(function(m){var P=m.bbox();p>P.x.min&&(p=P.x.min),f>P.y.min&&(f=P.y.min),h<P.x.max&&(h=P.x.max),v<P.y.max&&(v=P.y.max)}),{x:{min:p,mid:(p+h)/2,max:h,size:h-p},y:{min:f,mid:(f+v)/2,max:v,size:v-f}}},shapeintersections:function(u,p,f,h,v){if(!d.bboxoverlap(p,h))return[];var m=[],P=[u.startcap,u.forward,u.back,u.endcap],O=[f.startcap,f.forward,f.back,f.endcap];return P.forEach(function(R){R.virtual||O.forEach(function(C){if(!C.virtual){var w=R.intersects(C,v);w.length>0&&(w.c1=R,w.c2=C,w.s1=u,w.s2=f,m.push(w))}})}),m},makeshape:function(u,p,f){var h=p.points.length,v=u.points.length,m=d.makeline(p.points[h-1],u.points[0]),P=d.makeline(u.points[v-1],p.points[0]),O={startcap:m,forward:u,back:p,endcap:P,bbox:d.findbbox([m,u,p,P])},R=d;return O.intersections=function(C){return R.shapeintersections(O,O.bbox,C,C.bbox,f)},O},getminmax:function(u,p,f){if(!f)return{min:0,max:0};var h=T,v=x,m,P;f.indexOf(0)===-1&&(f=[0].concat(f)),f.indexOf(1)===-1&&f.push(1);for(var O=0,R=f.length;O<R;O++)m=f[O],P=u.get(m),P[p]<h&&(h=P[p]),P[p]>v&&(v=P[p]);return{min:h,mid:(h+v)/2,max:v,size:v-h}},align:function(u,p){var f=p.p1.x,h=p.p1.y,v=-i(p.p2.y-h,p.p2.x-f),m=function(P){return{x:(P.x-f)*t(v)-(P.y-h)*n(v),y:(P.x-f)*n(v)+(P.y-h)*t(v)}};return u.map(m)},roots:function(u,p){p=p||{p1:{x:0,y:0},p2:{x:1,y:0}};var f=u.length-1,L=d.align(u,p),h=function(re){return 0<=re&&re<=1};if(f===2){var F=L[0].y,S=L[1].y,A=L[2].y,E=F-2*S+A;if(E!==0){var v=-o(S*S-F*A),m=-F+S,U=-(v+m)/E,P=-(-v+m)/E;return[U,P].filter(h)}else if(S!==A&&E===0)return[(2*S-A)/(2*S-2*A)].filter(h);return[]}var O=L[0].y,R=L[1].y,C=L[2].y,w=L[3].y,E=-O+3*R-3*C+w,F=3*O-6*R+3*C,S=-3*O+3*R,A=O;if(d.approximately(E,0)){if(d.approximately(F,0))return d.approximately(S,0)?[]:[-A/S].filter(h);var G=o(S*S-4*F*A),D=2*F;return[(G-S)/D,(-S-G)/D].filter(h)}F/=E,S/=E,A/=E;var L=(3*S-F*F)/3,B=L/3,G=(2*F*F*F-9*F*S+27*A)/27,_=G/2,q=_*_+B*B*B,V,U,I,z,N;if(q<0){var j=-L/3,H=j*j*j,X=o(H),k=-G/(2*X),Z=k<-1?-1:k>1?1:k,oe=r(Z),ee=l(X),ae=2*ee;return I=ae*t(oe/3)-F/3,z=ae*t((oe+c)/3)-F/3,N=ae*t((oe+2*c)/3)-F/3,[I,z,N].filter(h)}else{if(q===0)return V=_<0?l(-_):-l(_),I=2*V-F/3,z=-V-F/3,[I,z].filter(h);var te=o(q);return V=l(-_+te),U=l(_+te),[V-U-F/3].filter(h)}},droots:function(u){if(u.length===3){var p=u[0],f=u[1],h=u[2],v=p-2*f+h;if(v!==0){var m=-o(f*f-p*h),P=-p+f,O=-(m+P)/v,R=-(-m+P)/v;return[O,R]}else if(f!==h&&v===0)return[(2*f-h)/(2*(f-h))];return[]}if(u.length===2){var p=u[0],f=u[1];return p!==f?[p/(p-f)]:[]}},curvature:function(u,p,f,h){var v=d.derive(p),m=v[0],P=v[1],O,R,C,w,E=0,F=0,S=d.compute(u,m),A=d.compute(u,P),D=S.x*S.x+S.y*S.y;if(f?(O=o(s(S.y*A.z-A.y*S.z,2)+s(S.z*A.x-A.z*S.x,2)+s(S.x*A.y-A.x*S.y,2)),R=s(D+S.z*S.z,3/2)):(O=S.x*A.y-S.y*A.x,R=s(D,3/2)),O===0||R===0)return{k:0,r:0};if(E=O/R,F=R/O,!h){var L=d.curvature(u-.001,p,f,!0).k,B=d.curvature(u+.001,p,f,!0).k;w=(B-E+(E-L))/2,C=(e(B-E)+e(E-L))/2}return{k:E,r:F,dk:w,adk:C}},inflections:function(u){if(u.length<4)return[];var p=d.align(u,{p1:u[0],p2:u.slice(-1)[0]}),f=p[2].x*p[1].y,h=p[3].x*p[1].y,v=p[1].x*p[2].y,E=p[3].x*p[2].y,m=18*(-3*f+2*h+3*v-E),P=18*(3*f-h-3*v),O=18*(v-f);if(d.approximately(m,0)){if(!d.approximately(P,0)){var R=-O/P;if(0<=R&&R<=1)return[R]}return[]}var C=P*P-4*m*O,w=Math.sqrt(C),E=2*m;return d.approximately(E,0)?[]:[(w-P)/E,-(P+w)/E].filter(function(F){return 0<=F&&F<=1})},bboxoverlap:function(u,p){var f=["x","y"],h=f.length,v,m,P,O,R;for(v=0;v<h;v++)if(m=f[v],P=u[m].mid,O=p[m].mid,R=(u[m].size+p[m].size)/2,e(P-O)>=R)return!1;return!0},expandbox:function(u,p){p.x.min<u.x.min&&(u.x.min=p.x.min),p.y.min<u.y.min&&(u.y.min=p.y.min),p.z&&p.z.min<u.z.min&&(u.z.min=p.z.min),p.x.max>u.x.max&&(u.x.max=p.x.max),p.y.max>u.y.max&&(u.y.max=p.y.max),p.z&&p.z.max>u.z.max&&(u.z.max=p.z.max),u.x.mid=(u.x.min+u.x.max)/2,u.y.mid=(u.y.min+u.y.max)/2,u.z&&(u.z.mid=(u.z.min+u.z.max)/2),u.x.size=u.x.max-u.x.min,u.y.size=u.y.max-u.y.min,u.z&&(u.z.size=u.z.max-u.z.min)},pairiteration:function(u,p,f){var h=u.bbox(),v=p.bbox(),m=1e5,P=f||.5;if(h.x.size+h.y.size<P&&v.x.size+v.y.size<P)return[(m*(u._t1+u._t2)/2|0)/m+"/"+(m*(p._t1+p._t2)/2|0)/m];var O=u.split(.5),R=p.split(.5),C=[{left:O.left,right:R.left},{left:O.left,right:R.right},{left:O.right,right:R.right},{left:O.right,right:R.left}];C=C.filter(function(E){return d.bboxoverlap(E.left.bbox(),E.right.bbox())});var w=[];return C.length===0||(C.forEach(function(E){w=w.concat(d.pairiteration(E.left,E.right,P))}),w=w.filter(function(E,F){return w.indexOf(E)===F})),w},getccenter:function(u,p,f){var h=p.x-u.x,v=p.y-u.y,m=f.x-p.x,P=f.y-p.y,O=h*t(g)-v*n(g),R=h*n(g)+v*t(g),C=m*t(g)-P*n(g),w=m*n(g)+P*t(g),E=(u.x+p.x)/2,F=(u.y+p.y)/2,S=(p.x+f.x)/2,A=(p.y+f.y)/2,D=E+O,L=F+R,B=S+C,G=A+w,_=d.lli8(E,F,D,L,S,A,B,G),q=d.dist(_,u),V=i(u.y-_.y,u.x-_.x),U=i(p.y-_.y,p.x-_.x),I=i(f.y-_.y,f.x-_.x),z;return V<I?((V>U||U>I)&&(V+=c),V>I&&(z=I,I=V,V=z)):I<U&&U<V?(z=I,I=V,V=z):I+=c,_.s=V,_.e=I,_.r=q,_},numberSort:function(u,p){return u-p}};utils.exports=d})()),utils.exports}var polyBezier={exports:{}},hasRequiredPolyBezier;function requirePolyBezier(){return hasRequiredPolyBezier||(hasRequiredPolyBezier=1,(function(){var e=requireUtils(),t=function(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)};t.prototype={valueOf:function(){return this.toString()},toString:function(){return"["+this.curves.map(function(n){return e.pointsToString(n.points)}).join(", ")+"]"},addCurve:function(n){this.curves.push(n),this._3d=this._3d||n._3d},length:function(){return this.curves.map(function(n){return n.length()}).reduce(function(n,r){return n+r})},curve:function(n){return this.curves[n]},bbox:function(){for(var n=this.curves,r=n[0].bbox(),i=1;i<n.length;i++)e.expandbox(r,n[i].bbox());return r},offset:function(n){var r=[];return this.curves.forEach(function(i){r=r.concat(i.offset(n))}),new t(r)}},polyBezier.exports=t})()),polyBezier.exports}var normaliseSvg,hasRequiredNormaliseSvg;function requireNormaliseSvg(){if(hasRequiredNormaliseSvg)return normaliseSvg;hasRequiredNormaliseSvg=1;function e(t){t=t.replace(/,/g," ").replace(/-/g," - ").replace(/-\s+/g,"-").replace(/([a-zA-Z])/g," $1 ");var n=t.replace(/([a-zA-Z])\s?/g,"|$1").split("|"),r=n.length,i,o,s,l,a=[],c,g,y=0,T=0,x=0,b=0,d=0,u=0,p=0,f=0,h="";for(i=1;i<r;i++)if(o=n[i],s=o.substring(0,1),l=s.toLowerCase(),a=o.replace(s,"").trim().split(" "),a=a.filter(function(v){return v!==""}).map(parseFloat),c=a.length,l==="m"){if(h+="M ",s==="m"?(x+=a[0],b+=a[1]):(x=a[0],b=a[1]),y=x,T=b,h+=x+" "+b+" ",c>2)for(g=0;g<c;g+=2)s==="m"?(x+=a[g],b+=a[g+1]):(x=a[g],b=a[g+1]),h+=["L",x,b,""].join(" ")}else if(l==="l")for(g=0;g<c;g+=2)s==="l"?(x+=a[g],b+=a[g+1]):(x=a[g],b=a[g+1]),h+=["L",x,b,""].join(" ");else if(l==="h")for(g=0;g<c;g++)s==="h"?x+=a[g]:x=a[g],h+=["L",x,b,""].join(" ");else if(l==="v")for(g=0;g<c;g++)s==="v"?b+=a[g]:b=a[g],h+=["L",x,b,""].join(" ");else if(l==="q")for(g=0;g<c;g+=4)s==="q"?(d=x+a[g],u=b+a[g+1],x+=a[g+2],b+=a[g+3]):(d=a[g],u=a[g+1],x=a[g+2],b=a[g+3]),h+=["Q",d,u,x,b,""].join(" ");else if(l==="t")for(g=0;g<c;g+=2)d=x+(x-d),u=b+(b-u),s==="t"?(x+=a[g],b+=a[g+1]):(x=a[g],b=a[g+1]),h+=["Q",d,u,x,b,""].join(" ");else if(l==="c")for(g=0;g<c;g+=6)s==="c"?(d=x+a[g],u=b+a[g+1],p=x+a[g+2],f=b+a[g+3],x+=a[g+4],b+=a[g+5]):(d=a[g],u=a[g+1],p=a[g+2],f=a[g+3],x=a[g+4],b=a[g+5]),h+=["C",d,u,p,f,x,b,""].join(" ");else if(l==="s")for(g=0;g<c;g+=4)d=x+(x-p),u=b+(b-f),s==="s"?(p=x+a[g],f=b+a[g+1],x+=a[g+2],b+=a[g+3]):(p=a[g],f=a[g+1],x=a[g+2],b=a[g+3]),h+=["C",d,u,p,f,x,b,""].join(" ");else l==="z"&&(h+="Z ",x=y,b=T);return h.trim()}return normaliseSvg=e,normaliseSvg}var svgToBeziers,hasRequiredSvgToBeziers;function requireSvgToBeziers(){if(hasRequiredSvgToBeziers)return svgToBeziers;hasRequiredSvgToBeziers=1;var e=requireNormaliseSvg(),t={x:!1,y:!1};function n(i,o,s){if(o!=="Z"){if(o==="M"){t={x:s[0],y:s[1]};return}var l=[!1,t.x,t.y].concat(s),a=i.bind.apply(i,l),c=new a,g=s.slice(-2);return t={x:g[0],y:g[1]},c}}function r(i,o){for(var s=e(o).split(" "),l,a=new RegExp("[MLCQZ]",""),c,g,y=[],T={C:6,Q:4,L:2,M:2};s.length;)l=s.splice(0,1)[0],a.test(l)&&(g=s.splice(0,T[l]).map(parseFloat),c=n(i,l,g),c&&y.push(c));return new i.PolyBezier(y)}return svgToBeziers=r,svgToBeziers}var hasRequiredBezier;function requireBezier(){return hasRequiredBezier||(hasRequiredBezier=1,(function(){var e=Math.abs,t=Math.min,n=Math.max,r=Math.cos,i=Math.sin,o=Math.acos,s=Math.sqrt,l=Math.PI,a={x:0,y:0,z:0},c=requireUtils(),g=requirePolyBezier(),y=function(d){var u=d&&d.forEach?d:[].slice.call(arguments),p=!1;if(typeof u[0]=="object"){p=u.length;var f=[];u.forEach(function(E){["x","y","z"].forEach(function(F){typeof E[F]<"u"&&f.push(E[F])})}),u=f}var h=!1,v=u.length;if(p){if(p>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");h=!0}}else if(v!==6&&v!==8&&v!==9&&v!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");var m=!h&&(v===9||v===12)||d&&d[0]&&typeof d[0].z<"u";this._3d=m;for(var P=[],O=0,R=m?3:2;O<v;O+=R){var C={x:u[O],y:u[O+1]};m&&(C.z=u[O+2]),P.push(C)}this.order=P.length-1,this.points=P;var w=["x","y"];m&&w.push("z"),this.dims=w,this.dimlen=w.length,(function(E){for(var F=E.order,S=E.points,A=c.align(S,{p1:S[0],p2:S[F]}),D=0;D<A.length;D++)if(e(A[D].y)>1e-4){E._linear=!1;return}E._linear=!0})(this),this._t1=0,this._t2=1,this.update()},T=requireSvgToBeziers();y.SVGtoBeziers=function(d){return T(y,d)};function x(d,u,p,f,h){typeof h>"u"&&(h=.5);var v=c.projectionratio(h,d),m=1-v,P={x:v*u.x+m*f.x,y:v*u.y+m*f.y},O=c.abcratio(h,d),R={x:p.x+(p.x-P.x)/O,y:p.y+(p.y-P.y)/O};return{A:R,B:p,C:P}}y.quadraticFromPoints=function(d,u,p,f){if(typeof f>"u"&&(f=.5),f===0)return new y(u,u,p);if(f===1)return new y(d,u,u);var h=x(2,d,u,p,f);return new y(d,h.A,p)},y.cubicFromPoints=function(d,u,p,f,h){typeof f>"u"&&(f=.5);var v=x(3,d,u,p,f);typeof h>"u"&&(h=c.dist(u,v.C));var m=h*(1-f)/f,P=c.dist(d,p),O=(p.x-d.x)/P,R=(p.y-d.y)/P,C=h*O,w=h*R,E=m*O,F=m*R,S={x:u.x-C,y:u.y-w},A={x:u.x+E,y:u.y+F},D=v.A,L={x:D.x+(S.x-D.x)/(1-f),y:D.y+(S.y-D.y)/(1-f)},B={x:D.x+(A.x-D.x)/f,y:D.y+(A.y-D.y)/f},G={x:d.x+(L.x-d.x)/f,y:d.y+(L.y-d.y)/f},_={x:p.x+(B.x-p.x)/(1-f),y:p.y+(B.y-p.y)/(1-f)};return new y(d,G,_,p)};var b=function(){return c};y.getUtils=b,y.PolyBezier=g,y.prototype={getUtils:b,valueOf:function(){return this.toString()},toString:function(){return c.pointsToString(this.points)},toSVG:function(d){if(this._3d)return!1;for(var u=this.points,p=u[0].x,f=u[0].y,h=["M",p,f,this.order===2?"Q":"C"],v=1,m=u.length;v<m;v++)h.push(u[v].x),h.push(u[v].y);return h.join(" ")},setRatios:function(d){if(d.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=d,this._lut=[]},verify:function(){var d=this.coordDigest();d!==this._print&&(this._print=d,this.update())},coordDigest:function(){return this.points.map(function(d,u){return""+u+d.x+d.y+(d.z?d.z:0)}).join("")},update:function(d){this._lut=[],this.dpoints=c.derive(this.points,this._3d),this.computedirection()},computedirection:function(){var d=this.points,u=c.angle(d[0],d[this.order],d[1]);this.clockwise=u>0},length:function(){return c.length(this.derivative.bind(this))},_lut:[],getLUT:function(d){if(this.verify(),d=d||100,this._lut.length===d)return this._lut;this._lut=[],d--;for(var u=0;u<=d;u++)this._lut.push(this.compute(u/d));return this._lut},on:function(d,u){u=u||5;for(var p=this.getLUT(),f=[],h,v=0,m=0;m<p.length;m++)h=p[m],c.dist(h,d)<u&&(f.push(h),v+=m/p.length);return f.length?v/=f.length:!1},project:function(d){var u=this.getLUT(),p=u.length-1,f=c.closest(u,d),h=f.mdist,v=f.mpos,m,P,O,R,C=(v-1)/p,w=(v+1)/p,E=.1/p;for(h+=1,P=C,m=P;P<w+E;P+=E)O=this.compute(P),R=c.dist(d,O),R<h&&(h=R,m=P);return O=this.compute(m),O.t=m,O.d=h,O},get:function(d){return this.compute(d)},point:function(d){return this.points[d]},compute:function(d){return this.ratios?c.computeWithRatios(d,this.points,this.ratios,this._3d):c.compute(d,this.points,this._3d,this.ratios)},raise:function(){for(var d=this.points,u=[d[0]],p,f=d.length,h,v,p=1;p<f;p++)h=d[p],v=d[p-1],u[p]={x:(f-p)/f*h.x+p/f*v.x,y:(f-p)/f*h.y+p/f*v.y};return u[f]=d[f-1],new y(u)},derivative:function(d){var u=1-d,p,f,h=0,v=this.dpoints[0];this.order===2&&(v=[v[0],v[1],a],p=u,f=d),this.order===3&&(p=u*u,f=u*d*2,h=d*d);var m={x:p*v[0].x+f*v[1].x+h*v[2].x,y:p*v[0].y+f*v[1].y+h*v[2].y};return this._3d&&(m.z=p*v[0].z+f*v[1].z+h*v[2].z),m},curvature:function(d){return c.curvature(d,this.points,this._3d)},inflections:function(){return c.inflections(this.points)},normal:function(d){return this._3d?this.__normal3(d):this.__normal2(d)},__normal2:function(d){var u=this.derivative(d),p=s(u.x*u.x+u.y*u.y);return{x:-u.y/p,y:u.x/p}},__normal3:function(d){var u=this.derivative(d),p=this.derivative(d+.01),f=s(u.x*u.x+u.y*u.y+u.z*u.z),h=s(p.x*p.x+p.y*p.y+p.z*p.z);u.x/=f,u.y/=f,u.z/=f,p.x/=h,p.y/=h,p.z/=h;var v={x:p.y*u.z-p.z*u.y,y:p.z*u.x-p.x*u.z,z:p.x*u.y-p.y*u.x},m=s(v.x*v.x+v.y*v.y+v.z*v.z);v.x/=m,v.y/=m,v.z/=m;var P=[v.x*v.x,v.x*v.y-v.z,v.x*v.z+v.y,v.x*v.y+v.z,v.y*v.y,v.y*v.z-v.x,v.x*v.z-v.y,v.y*v.z+v.x,v.z*v.z],O={x:P[0]*u.x+P[1]*u.y+P[2]*u.z,y:P[3]*u.x+P[4]*u.y+P[5]*u.z,z:P[6]*u.x+P[7]*u.y+P[8]*u.z};return O},hull:function(d){var u=this.points,p=[],f,h=[],v=0,m=0,P=0;for(h[v++]=u[0],h[v++]=u[1],h[v++]=u[2],this.order===3&&(h[v++]=u[3]);u.length>1;){for(p=[],m=0,P=u.length-1;m<P;m++)f=c.lerp(d,u[m],u[m+1]),h[v++]=f,p.push(f);u=p}return h},split:function(d,u){if(d===0&&u)return this.split(u).left;if(u===1)return this.split(d).right;var p=this.hull(d),f={left:this.order===2?new y([p[0],p[3],p[5]]):new y([p[0],p[4],p[7],p[9]]),right:this.order===2?new y([p[5],p[4],p[2]]):new y([p[9],p[8],p[6],p[3]]),span:p};if(f.left._t1=c.map(0,0,1,this._t1,this._t2),f.left._t2=c.map(d,0,1,this._t1,this._t2),f.right._t1=c.map(d,0,1,this._t1,this._t2),f.right._t2=c.map(1,0,1,this._t1,this._t2),!u)return f;u=c.map(u,d,1,0,1);var h=f.right.split(u);return h.left},extrema:function(){var d=this.dims,u={},p=[],f,h;return d.forEach(function(v){h=function(m){return m[v]},f=this.dpoints[0].map(h),u[v]=c.droots(f),this.order===3&&(f=this.dpoints[1].map(h),u[v]=u[v].concat(c.droots(f))),u[v]=u[v].filter(function(m){return m>=0&&m<=1}),p=p.concat(u[v].sort(c.numberSort))}.bind(this)),p=p.sort(c.numberSort).filter(function(v,m){return p.indexOf(v)===m}),u.values=p,u},bbox:function(){var d=this.extrema(),u={};return this.dims.forEach(function(p){u[p]=c.getminmax(this,p,d[p])}.bind(this)),u},overlaps:function(d){var u=this.bbox(),p=d.bbox();return c.bboxoverlap(u,p)},offset:function(d,u){if(typeof u<"u"){var p=this.get(d),f=this.normal(d),h={c:p,n:f,x:p.x+f.x*u,y:p.y+f.y*u};return this._3d&&(h.z=p.z+f.z*u),h}if(this._linear){var v=this.normal(0),m=this.points.map(function(O){var R={x:O.x+d*v.x,y:O.y+d*v.y};return O.z&&f.z&&(R.z=O.z+d*v.z),R});return[new y(m)]}var P=this.reduce();return P.map(function(O){return O._linear?O.offset(d)[0]:O.scale(d)})},simple:function(){if(this.order===3){var d=c.angle(this.points[0],this.points[3],this.points[1]),u=c.angle(this.points[0],this.points[3],this.points[2]);if(d>0&&u<0||d<0&&u>0)return!1}var p=this.normal(0),f=this.normal(1),h=p.x*f.x+p.y*f.y;this._3d&&(h+=p.z*f.z);var v=e(o(h));return v<l/3},reduce:function(){var d,u=0,p=0,f=.01,h,v=[],m=[],P=this.extrema().values;for(P.indexOf(0)===-1&&(P=[0].concat(P)),P.indexOf(1)===-1&&P.push(1),u=P[0],d=1;d<P.length;d++)p=P[d],h=this.split(u,p),h._t1=u,h._t2=p,v.push(h),u=p;return v.forEach(function(O){for(u=0,p=0;p<=1;)for(p=u+f;p<=1+f;p+=f)if(h=O.split(u,p),!h.simple()){if(p-=f,e(u-p)<f)return[];h=O.split(u,p),h._t1=c.map(u,0,1,O._t1,O._t2),h._t2=c.map(p,0,1,O._t1,O._t2),m.push(h),u=p;break}u<1&&(h=O.split(u,1),h._t1=c.map(u,0,1,O._t1,O._t2),h._t2=O._t2,m.push(h))}),m},scale:function(d){var u=this.order,p=!1;if(typeof d=="function"&&(p=d),p&&u===2)return this.raise().scale(p);var f=this.clockwise,h=p?p(0):d,v=p?p(1):d,m=[this.offset(0,10),this.offset(1,10)],P=c.lli4(m[0],m[0].c,m[1],m[1].c);if(!P)throw new Error("cannot scale this curve. Try reducing it first.");var O=this.points,R=[];return[0,1].forEach(function(C){var w=R[C*u]=c.copy(O[C*u]);w.x+=(C?v:h)*m[C].n.x,w.y+=(C?v:h)*m[C].n.y}.bind(this)),p?([0,1].forEach(function(C){if(!(this.order===2&&C)){var w=O[C+1],E={x:w.x-P.x,y:w.y-P.y},F=p?p((C+1)/u):d;p&&!f&&(F=-F);var S=s(E.x*E.x+E.y*E.y);E.x/=S,E.y/=S,R[C+1]={x:w.x+F*E.x,y:w.y+F*E.y}}}.bind(this)),new y(R)):([0,1].forEach(function(C){if(!(this.order===2&&C)){var w=R[C*u],E=this.derivative(C),F={x:w.x+E.x,y:w.y+E.y};R[C+1]=c.lli4(w,F,P,O[C+1])}}.bind(this)),new y(R))},outline:function(d,u,p,f){u=typeof u>"u"?d:u;var h=this.reduce(),v=h.length,m=[],P=[],O,R=0,C=this.length(),w=typeof p<"u"&&typeof f<"u";function E(q,V,U,I,z){return function(N){var j=I/U,H=(I+z)/U,X=V-q;return c.map(N,0,1,q+j*X,q+H*X)}}h.forEach(function(q){_=q.length(),w?(m.push(q.scale(E(d,p,C,R,_))),P.push(q.scale(E(-u,-f,C,R,_)))):(m.push(q.scale(d)),P.push(q.scale(-u))),R+=_}),P=P.map(function(q){return O=q.points,O[3]?q.points=[O[3],O[2],O[1],O[0]]:q.points=[O[2],O[1],O[0]],q}).reverse();var F=m[0].points[0],S=m[v-1].points[m[v-1].points.length-1],A=P[v-1].points[P[v-1].points.length-1],D=P[0].points[0],L=c.makeline(A,F),B=c.makeline(S,D),G=[L].concat(m).concat([B]).concat(P),_=G.length;return new g(G)},outlineshapes:function(d,u,p){u=u||d;for(var f=this.outline(d,u).curves,h=[],v=1,m=f.length;v<m/2;v++){var P=c.makeshape(f[v],f[m-v],p);P.startcap.virtual=v>1,P.endcap.virtual=v<m/2-1,h.push(P)}return h},intersects:function(d,u){return d?d.p1&&d.p2?this.lineIntersects(d):(d instanceof y&&(d=d.reduce()),this.curveintersects(this.reduce(),d,u)):this.selfintersects(u)},lineIntersects:function(d){var u=t(d.p1.x,d.p2.x),p=t(d.p1.y,d.p2.y),f=n(d.p1.x,d.p2.x),h=n(d.p1.y,d.p2.y),v=this;return c.roots(this.points,d).filter(function(m){var P=v.get(m);return c.between(P.x,u,f)&&c.between(P.y,p,h)})},selfintersects:function(d){var u=this.reduce(),p,f=u.length-2,h=[],v,m,P;for(p=0;p<f;p++)m=u.slice(p,p+1),P=u.slice(p+2),v=this.curveintersects(m,P,d),h=h.concat(v);return h},curveintersects:function(d,u,p){var f=[];d.forEach(function(v){u.forEach(function(m){v.overlaps(m)&&f.push({left:v,right:m})})});var h=[];return f.forEach(function(v){var m=c.pairiteration(v.left,v.right,p);m.length>0&&(h=h.concat(m))}),h},arcs:function(d){d=d||.5;var u=[];return this._iterate(d,u)},_error:function(d,u,p,f){var h=(f-p)/4,v=this.get(p+h),m=this.get(f-h),P=c.dist(d,u),O=c.dist(d,v),R=c.dist(d,m);return e(O-P)+e(R-P)},_iterate:function(d,u){var p=0,f=1,h;do{h=0,f=1;var v=this.get(p),m,P,O,R,C=!1,w=!1,E,F=f,S=1;do{w=C,R=O,F=(p+f)/2,m=this.get(F),P=this.get(f),O=c.getccenter(v,m,P),O.interval={start:p,end:f};var A=this._error(O,v,p,f);if(C=A<=d,E=w&&!C,E||(S=f),C){if(f>=1){if(O.interval.end=S=1,R=O,f>1){var D={x:O.x+O.r*r(O.e),y:O.y+O.r*i(O.e)};O.e+=c.angle({x:O.x,y:O.y},D,this.get(1))}break}f=f+(f-p)/2}else f=F}while(!E&&h++<100);if(h>=100)break;R=R||O,u.push(R),p=S}while(f<1);return u}},bezier.exports=y})()),bezier.exports}var bezierJs,hasRequiredBezierJs;function requireBezierJs(){return hasRequiredBezierJs||(hasRequiredBezierJs=1,bezierJs=requireBezier()),bezierJs}var dist,hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1;var MakerJs;(function(MakerJs){MakerJs.version="debug",MakerJs.environmentTypes={BrowserUI:"browser",NodeJs:"node",WebWorker:"worker",Unknown:"unknown"};var EPSILON=Number.EPSILON||Math.pow(2,-52);function tryEval(name){try{var value=eval(name);return value}catch(e){}}function detectEnvironment(){return tryEval("WorkerGlobalScope")&&tryEval("self")?MakerJs.environmentTypes.WebWorker:tryEval("window")&&tryEval("document")?MakerJs.environmentTypes.BrowserUI:tryEval("global")&&tryEval("process")?MakerJs.environmentTypes.NodeJs:MakerJs.environmentTypes.Unknown}MakerJs.environment=detectEnvironment(),MakerJs.unitType={Centimeter:"cm",Foot:"foot",Inch:"inch",Meter:"m",Millimeter:"mm"};function split(e,t){var n=e.indexOf(t);return n<0?[e]:n>0?[e.substr(0,n),e.substr(n+1)]:["",e]}function splitDecimal(e){var t=e.toString();return t.indexOf("e")>0&&(t=e.toFixed(20).match(/.*[^(0+$)]/)[0]),split(t,".")}MakerJs.splitDecimal=splitDecimal;function round(e,t){if(t===void 0&&(t=1e-7),e%1===0)return e;var n=1/t;return Math.round((e+EPSILON)*n)/n}MakerJs.round=round;function createRouteKey(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i;n%2===0?i=(n>0?".":"")+r:i=JSON.stringify([r]),t.push(i)}return t.join("")}MakerJs.createRouteKey=createRouteKey;function travel(e,t){if(!e||!t)return null;var n;Array.isArray(t)?n=t:n=JSON.parse(t);for(var r=n.slice(),i=e,o=e.origin||[0,0];r.length;){var s=r.shift();if(i=i[s],!i)return null;i.origin&&r.length&&(o=MakerJs.point.add(o,i.origin))}return{result:i,offset:o}}MakerJs.travel=travel;var clone=requireClone();function cloneObject(e){return clone(e)}MakerJs.cloneObject=cloneObject;function extendObject(e,t){if(e&&t)for(var n in t)typeof t[n]<"u"&&(e[n]=t[n]);return e}MakerJs.extendObject=extendObject;function isFunction(e){return typeof e=="function"}MakerJs.isFunction=isFunction;function isNumber(e){return typeof e=="number"}MakerJs.isNumber=isNumber;function isObject(e){return typeof e=="object"}MakerJs.isObject=isObject;function isPoint(e){return e&&Array.isArray(e)&&e.length==2&&isNumber(e[0])&&isNumber(e[1])}MakerJs.isPoint=isPoint;function isPath(e){return e&&e.type&&isPoint(e.origin)}MakerJs.isPath=isPath;function isPathLine(e){return isPath(e)&&e.type==MakerJs.pathType.Line&&isPoint(e.end)}MakerJs.isPathLine=isPathLine;function isPathCircle(e){return isPath(e)&&e.type==MakerJs.pathType.Circle&&isNumber(e.radius)}MakerJs.isPathCircle=isPathCircle;function isPathArc(e){return isPath(e)&&e.type==MakerJs.pathType.Arc&&isNumber(e.radius)&&isNumber(e.startAngle)&&isNumber(e.endAngle)}MakerJs.isPathArc=isPathArc;function isPathArcInBezierCurve(e){return isPathArc(e)&&isObject(e.bezierData)&&isNumber(e.bezierData.startT)&&isNumber(e.bezierData.endT)}MakerJs.isPathArcInBezierCurve=isPathArcInBezierCurve,MakerJs.pathType={Line:"line",Circle:"circle",Arc:"arc",BezierSeed:"bezier-seed"};function isModel(e){return e&&(e.paths||e.models)}MakerJs.isModel=isModel;function isChain(e){var t=e;return t&&t.links&&Array.isArray(t.links)&&isNumber(t.pathLength)}MakerJs.isChain=isChain;var Cascade=(function(){function e(t,n){this._module=t,this.$initial=n;for(var r in this._module)this._shadow(r);this.$result=n}return e.prototype._shadow=function(t){var n=this;this[t]=function(){return n._apply(n._module[t],arguments)}},e.prototype._apply=function(t,n){var r=[].slice.call(n);return r.unshift(this.$result),this.$result=t.apply(void 0,r),this},e.prototype.$reset=function(){return this.$result=this.$initial,this},e})();function $(e){if(isModel(e))return new Cascade(MakerJs.model,e);if(isPath(e))return new Cascade(MakerJs.path,e);if(isPoint(e))return new Cascade(MakerJs.point,e)}MakerJs.$=$})(MakerJs||(MakerJs={})),dist=MakerJs;var MakerJs;(function(e){(function(t){function n(f){return e.splitDecimal(f)[1]}function r(f,h){return h?+(e.splitDecimal(f)[0]+"."+h):f}function i(f,h){return f<0&&h<0||f>0&&h>0?r(h,n(f)):h}function o(f){var h=Math.floor(f/360);if(h===0)return f;var v=f-360*h;return i(f,v)}t.noRevolutions=o;function s(f){return o(f)*Math.PI/180}t.toRadians=s;function l(f){return f*180/Math.PI}t.toDegrees=l;function a(f){if(f.endAngle<f.startAngle){var h=Math.ceil((f.startAngle-f.endAngle)/360),v=h*360+f.endAngle;return i(f.endAngle,v)}return f.endAngle}t.ofArcEnd=a;function c(f,h){return h===void 0&&(h=.5),f.startAngle+g(f)*h}t.ofArcMiddle=c;function g(f){var h=t.ofArcEnd(f),v=h-f.startAngle;return e.round(v)>360?o(v):v}t.ofArcSpan=g;function y(f){return o(l(x(f.origin,f.end)))}t.ofLineInDegrees=y;function T(f,h){return l(x(f,h))}t.ofPointInDegrees=T;function x(f,h){var v=e.point.subtract(h,f),m=v[0],P=v[1];return Math.atan2(-P,-m)+Math.PI}t.ofPointInRadians=x;function b(f,h,v){return v&&(f=360-f),h&&(f=(f<180?180:540)-f),f}t.mirror=b;var d={};d[e.pathType.Arc]=function(f,h,v){var m=h!=v,P=m?f.endAngle-90:f.startAngle+90,O=e.point.fromArc(f)[m?1:0],R=e.point.rotate(e.point.add(O,[f.radius,0]),P,O);return new e.paths.Line(h?[R,O]:[O,R])},d[e.pathType.Line]=function(f,h,v){return v?new e.paths.Line(f.end,f.origin):f};function u(f,h){if(f){var v=f.walkedPath.pathContext,m=d[v.type];if(m)return m(v,h,f.reversed)}}function p(f,h){if(arguments.length<2)return null;var v=[f,h].map(function(P,O){return u(P,O===0)}),m=o(y(v[1])-y(v[0]));return m>180&&(m-=360),m}t.ofChainLinkJoint=p})(e.angle||(e.angle={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(C,w,E){var F=i(C);if(!w)return F;for(var S=2;S--;)E?F[S]-=w[S]:F[S]+=w[S];return F}t.add=n;function r(C,w){function E(F){return(C[F]+w[F])/2}return[E(0),E(1)]}t.average=r;function i(C){return C?[C[0],C[1]]:t.zero()}t.clone=i;function o(C,w){for(var E={index:0,distance:-1},F=0;F<w.length;F++){var S=e.measure.pointDistance(C,w[F]);(E.distance==-1||S<E.distance)&&(E.distance=S,E.index=F)}return w[E.index]}t.closest=o;var s={};s[Math.PI/2]=!0,s[3*Math.PI/2]=!0;var l={};l[Math.PI]=!0,l[2*Math.PI]=!0;function a(C,w){return[C in s?0:e.round(w*Math.cos(C)),C in l?0:e.round(w*Math.sin(C))]}t.fromPolar=a;function c(C,w){return n(w.origin,a(e.angle.toRadians(C),w.radius))}t.fromAngleOnCircle=c;function g(C){return[c(C.startAngle,C),c(C.endAngle,C)]}t.fromArc=g;var y={};y[e.pathType.Arc]=function(C){return t.fromArc(C)},y[e.pathType.Line]=function(C){return[C.origin,C.end]},y[e.pathType.BezierSeed]=y[e.pathType.Line];function T(C,w){var E=null,F=y[C.type];return F&&(E=F(C),w&&(E=E.map(function(S){return n(S,w)}))),E}t.fromPathEnds=T;function x(C,w){var E=C.origin[0],F=w.slope*E+w.yIntercept;return[E,F]}function b(C,w,E){E===void 0&&(E={});var F=e.measure.lineSlope(C),S=e.measure.lineSlope(w);if(e.measure.isSlopeParallel(F,S))return e.measure.isSlopeEqual(F,S)&&(E.out_AreOverlapped=e.measure.isLineOverlapping(C,w,E.excludeTangents)),null;var A;if(!F.hasSlope)A=x(C,S);else if(!S.hasSlope)A=x(w,F);else{var D=(S.yIntercept-F.yIntercept)/(F.slope-S.slope),L=F.slope*D+F.yIntercept;A=[D,L]}return A}t.fromSlopeIntersection=b;function d(C,w){return t.add(C.origin,t.fromPolar(e.angle.toRadians(w),C.radius))}var u={};u[e.pathType.Arc]=function(C,w){var E=e.angle.ofArcMiddle(C,w);return d(C,E)},u[e.pathType.Circle]=function(C,w){return d(C,360*w)},u[e.pathType.Line]=function(C,w){function E(F,S){return F+(S-F)*w}return[E(C.origin[0],C.end[0]),E(C.origin[1],C.end[1])]},u[e.pathType.BezierSeed]=function(C,w){return e.models.BezierCurve.computePoint(C,w)};function p(C,w){w===void 0&&(w=.5);var E=null,F=u[C.type];return F&&(E=F(C,w)),E}t.middle=p;function f(C,w,E){var F=i(C);return w&&(F[0]=-F[0]),E&&(F[1]=-F[1]),F}t.mirror=f;function h(C,w){return[e.round(C[0],w),e.round(C[1],w)]}t.rounded=h;function v(C,w,E){E===void 0&&(E=[0,0]);var F=e.angle.ofPointInRadians(E,C),S=e.measure.pointDistance(E,C),A=a(F+e.angle.toRadians(w),S);return n(E,A)}t.rotate=v;function m(C,w){for(var E=i(C),F=2;F--;)E[F]*=w;return E}t.scale=m;function P(C,w,E){return[C[0]*w,C[1]*E]}t.distort=P;function O(C,w){return n(C,w,!0)}t.subtract=O;function R(){return[0,0]}t.zero=R})(e.point||(e.point={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(S,A,D,L){return L===void 0&&(L=!1),e.model.addPath(A,S,D,L),S}t.addTo=n;function r(S,A){S&&A&&typeof S.layer<"u"&&(A.layer=S.layer),S&&A&&"bezierData"in S&&(A.bezierData=S.bezierData)}var i={};i[e.pathType.Circle]=function(S,A,D){A.radius=S.radius},i[e.pathType.Arc]=function(S,A,D){i[e.pathType.Circle](S,A,D),A.startAngle=S.startAngle,A.endAngle=S.endAngle},i[e.pathType.Line]=function(S,A,D){A.end=e.point.add(S.end,D)},i[e.pathType.BezierSeed]=function(S,A,D){i[e.pathType.Line](S,A,D),A.controls=S.controls.map(function(L){return e.point.add(L,D)})};function o(S,A){var D={type:S.type,origin:e.point.add(S.origin,A)},L=i[S.type];return L&&L(S,D,A),r(S,D),D}t.clone=o;function s(S,A){var D=i[S.type];return D&&(A.origin=e.point.clone(S.origin),D(S,A)),r(S,A),S}t.copyProps=s;var l={};l[e.pathType.Line]=function(S,A,D,L){return new e.paths.Line(A,e.point.mirror(S.end,D,L))},l[e.pathType.Circle]=function(S,A,D,L){return new e.paths.Circle(A,S.radius)},l[e.pathType.Arc]=function(S,A,D,L){var B=e.angle.mirror(S.startAngle,D,L),G=e.angle.mirror(e.angle.ofArcEnd(S),D,L),_=D!=L;return new e.paths.Arc(A,S.radius,_?G:B,_?B:G)},l[e.pathType.BezierSeed]=function(S,A,D,L){var B=l[e.pathType.Line](S,A,D,L);return B.type=e.pathType.BezierSeed,B.controls=S.controls.map(function(G){return e.point.mirror(G,D,L)}),B};function a(S,A){return S.layer=A,S}t.layer=a;function c(S,A,D){var L=null;if(S){var B=e.point.mirror(S.origin,A,D),G=l[S.type];G&&(L=G(S,B,A,D))}return r(S,L),L}t.mirror=c;var g={};g[e.pathType.Line]=function(S,A){var D=e.point.subtract(S.end,S.origin);S.end=e.point.add(A,D)};function y(S,A){if(S){var D=g[S.type];D&&D(S,A),S.origin=A}return S}t.move=y;var T={};T[e.pathType.Line]=function(S,A,D){S.end=e.point.add(S.end,A,D)},T[e.pathType.BezierSeed]=function(S,A,D){T[e.pathType.Line](S,A,D),S.controls=S.controls.map(function(L){return e.point.add(L,A,D)})};function x(S,A,D){if(S&&A){S.origin=e.point.add(S.origin,A,D);var L=T[S.type];L&&L(S,A,D)}return S}t.moveRelative=x;function b(S,A,D){var L=!1;function B(G,_){A[_]&&x(G,A[_],L)}S.map(B),D(),L=!0,S.map(B)}t.moveTemporary=b;var d={};d[e.pathType.Line]=function(S,A,D){S.end=e.point.rotate(S.end,A,D)},d[e.pathType.Arc]=function(S,A,D){S.startAngle=e.angle.noRevolutions(S.startAngle+A),S.endAngle=e.angle.noRevolutions(S.endAngle+A)},d[e.pathType.BezierSeed]=function(S,A,D){d[e.pathType.Line](S,A,D),S.controls=S.controls.map(function(L){return e.point.rotate(L,A,D)})};function u(S,A,D){if(D===void 0&&(D=[0,0]),!S||!A)return S;S.origin=e.point.rotate(S.origin,A,D);var L=d[S.type];return L&&L(S,A,D),S}t.rotate=u;var p={};p[e.pathType.Line]=function(S,A){S.end=e.point.scale(S.end,A)},p[e.pathType.BezierSeed]=function(S,A){p[e.pathType.Line](S,A),S.controls=S.controls.map(function(D){return e.point.scale(D,A)})},p[e.pathType.Circle]=function(S,A){S.radius*=A},p[e.pathType.Arc]=p[e.pathType.Circle];function f(S,A){if(!S||A===1||!A)return S;S.origin=e.point.scale(S.origin,A);var D=p[S.type];return D&&D(S,A),S}t.scale=f;var h={};h[e.pathType.Arc]=function(S,A,D){return new e.models.EllipticArc(S,A,D)},h[e.pathType.Circle]=function(S,A,D){var L=new e.models.Ellipse(S.radius*A,S.radius*D);return L.origin=e.point.distort(S.origin,A,D),L},h[e.pathType.Line]=function(S,A,D){return new e.paths.Line([S.origin,S.end].map(function(L){return e.point.distort(L,A,D)}))},h[e.pathType.BezierSeed]=function(S,A,D){var L=e.point.distort;return{type:e.pathType.BezierSeed,origin:L(S.origin,A,D),controls:S.controls.map(function(B){return L(B,A,D)}),end:L(S.end,A,D)}};function v(S,A,D){if(!S||!A||!D)return null;var L=h[S.type];if(L){var B=L(S,A,D);return typeof S.layer<"u"&&(B.layer=S.layer),B}return null}t.distort=v;function m(S,A,D,L){var B=e.point.fromSlopeIntersection(S,A);if(B){let q=function(V,U){var I;U?I=V.origin:I=V.end,I[0]=B[0],I[1]=B[1]};var G=[S,A],_=[D,L];arguments.length===2&&G.forEach(function(V,U){_[U]=e.point.closest(B,[V.origin,V.end])===V.origin}),G.forEach(function(V,U){q(V,_[U])})}return B}t.converge=m;var P={};P[e.pathType.Arc]=function(S,A,D,L){var B=e.angle.ofArcSpan(S),G=(A+D)*B/A-B;L?S.startAngle-=G:S.endAngle+=G},P[e.pathType.Circle]=function(S,A,D,L){S.radius*=(A+D)/A},P[e.pathType.Line]=function(S,A,D,L){var B=e.point.scale(e.point.subtract(S.end,S.origin),D/A);L?S.origin=e.point.subtract(S.origin,B):S.end=e.point.add(S.end,B)};function O(S,A,D){if(D===void 0&&(D=!1),!S||!A)return null;var L=P[S.type];if(L){var B=e.measure.pathLength(S);return!B||-A>=B?null:(L(S,B,A,D),S)}return null}t.alterLength=O;function R(S,A){if(A==1)return[e.point.middle(S)];var D=[],L=A;S.type!=e.pathType.Circle&&L--;for(var B=0;B<A;B++)D.push(e.point.middle(S,B/L));return D}t.toPoints=R;var C={};C[e.pathType.Line]=function(S){return 2},C[e.pathType.Circle]=function(S,A){var D=e.measure.pathLength(S);return D?(A=A||D,Math.max(8,Math.ceil(D/(A||D)))):0},C[e.pathType.Arc]=function(S,A){var D=e.measure.pathLength(S);if(!D)return 0;var L=Math.ceil(e.angle.ofArcSpan(S)/45)+1;return Math.max(L,Math.ceil(D/(A||D)))};function w(S,A){if(S.type==e.pathType.BezierSeed){var D=new e.models.BezierCurve(S),L;return e.model.findChains(D,function(_,q,V){if(_.length==1){var U=_[0];switch(U.links[0].walkedPath.pathId){case"arc_0":case"line_0":break;default:e.chain.reverse(U)}L=e.chain.toKeyPoints(U)}else q.length===1&&(L=w(q[0].pathContext))}),L}else{var B=C[S.type];if(B){var G=B(S,A);if(G)return R(S,G)}}return[]}t.toKeyPoints=w;function E(S){var A=e.measure.pathExtents(S),D=e.point.average(A.high,A.low),L=e.point.subtract(S.origin||[0,0],D);return y(S,L),S}t.center=E;function F(S){var A=e.measure.pathExtents(S),D=e.point.subtract(S.origin||[0,0],A.low);return y(S,D),S}t.zero=F})(e.path||(e.path={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n={};n[e.pathType.Arc]=function(i,o){var s=e.angle.ofPointInDegrees(i.origin,o);if(e.measure.isAngleEqual(s,i.startAngle)||e.measure.isAngleEqual(s,i.endAngle))return null;function l(){for(var y=e.angle.noRevolutions(i.startAngle),T=y+e.angle.ofArcEnd(i)-i.startAngle,x=[0,1,-1],b=0;b<x.length;b++){var d=360*x[b];if(e.measure.isBetween(s+d,y,T,!0))return i.startAngle+s+d-y}return null}var a=l();if(a==null)return null;var c=i.endAngle;i.endAngle=a;var g=e.cloneObject(i);return g.startAngle=a,g.endAngle=c,g},n[e.pathType.Circle]=function(i,o){i.type=e.pathType.Arc;var s=i,l=e.angle.ofPointInDegrees(i.origin,o);return s.startAngle=l,s.endAngle=l+360,null},n[e.pathType.Line]=function(i,o){if(!e.measure.isBetweenPoints(o,i,!0))return null;var s=i.end;i.end=o;var l=e.cloneObject(i);return l.origin=o,l.end=s,l};function r(i,o){if(i&&o){var s=n[i.type];if(s){var l=s(i,o);return l&&"layer"in i&&(l.layer=i.layer),l}}return null}t.breakAtPoint=r})(e.path||(e.path={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function l(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var g,y;function T(C){var w=e.angle.ofPointInDegrees(C,a[R?1:0]),E=e.angle.ofPointInDegrees(C,a[R?0:1]);return E<w&&(E+=360),{origin:C,startAngle:w,endAngle:E,size:E-w}}switch(a.length){case 5:var x=a[0],b=a[1];this.radius=a[2];var d=a[3],R=a[4],u,p=e.measure.pointDistance(x,b)/2;if(e.round(this.radius-p)<=0)this.radius=p,u=T(e.point.average(x,b));else{for(var f=(y=(g=e.path.intersection(new r(x,this.radius),new r(b,this.radius)))===null||g===void 0?void 0:g.intersectionPoints)!==null&&y!==void 0?y:[x,b],h=[],v=f.length;v--;)u=T(f[v]),h.length==0||u.size>h[0].size?h.push(u):h.unshift(u);var m=d?1:0;u=h[m]}this.origin=u.origin,this.startAngle=u.startAngle,this.endAngle=u.endAngle;break;case 4:this.origin=a[0],this.radius=a[1],this.startAngle=a[2],this.endAngle=a[3];break;case 3:if(e.isPoint(a[2])){r.apply(this,a);for(var P=[],O=0;O<3;O++)P.push(e.angle.ofPointInDegrees(this.origin,a[O]));this.startAngle=P[0],this.endAngle=P[2],e.measure.isBetweenArcAngles(P[1],this,!1)||(this.startAngle=P[2],this.endAngle=P[0]);break}case 2:var R=a[2];r.call(this,a[0],a[1]),this.startAngle=e.angle.ofPointInDegrees(this.origin,a[R?1:0]),this.endAngle=e.angle.ofPointInDegrees(this.origin,a[R?0:1]);break}this.type=e.pathType.Arc}return l})();t.Arc=n;var r=(function(){function l(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];switch(this.type=e.pathType.Circle,a.length){case 1:this.origin=[0,0],this.radius=a[0];break;case 2:e.isNumber(a[1])?(this.origin=a[0],this.radius=a[1]):(this.origin=e.point.average(a[0],a[1]),this.radius=e.measure.pointDistance(this.origin,a[0]));break;default:for(var g=[new i(a[0],a[1]),new i(a[1],a[2])],y=[],T=2;T--;){var x=e.point.middle(g[T]);y.push(e.path.rotate(g[T],90,x))}var b=e.point.fromSlopeIntersection(y[0],y[1]);if(b)this.origin=b,this.radius=e.measure.pointDistance(this.origin,a[0]);else throw"invalid parameters - attempted to construct a circle from 3 points on a line: "+JSON.stringify(a);break}}return l})();t.Circle=r;var i=(function(){function l(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];switch(this.type=e.pathType.Line,a.length){case 1:var g=a[0];this.origin=g[0],this.end=g[1];break;case 2:this.origin=a[0],this.end=a[1];break}}return l})();t.Line=i;var o=(function(){function l(a){var c=e.point.fromArc(a);this.type=e.pathType.Line,this.origin=c[0],this.end=c[1]}return l})();t.Chord=o;var s=(function(){function l(a,c,g){this.type=e.pathType.Line,this.origin=e.point.clone(a.origin),this.end=e.point.clone(a.end);var y=e.angle.ofLineInDegrees(this);function T(d){var u=e.point.add(a.origin,e.point.fromPolar(e.angle.toRadians(y+d),c));return{origin:u,nearness:e.measure.pointDistance(u,g)}}var x=[T(-90),T(90)],b=x[0].nearness<x[1].nearness?x[0].origin:x[1].origin;e.path.move(this,b)}return l})();t.Parallel=s})(e.paths||(e.paths={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(E,F,S,A){return S||(S=e.point.zero()),A||(A=e.point.clone(S)),E.caption={text:F,anchor:new e.paths.Line(S,A)},E}t.addCaption=n;function r(E,F,S,A){A===void 0&&(A=!1);var D=A?S:y(E,S);return E.paths=E.paths||{},E.paths[D]=F,E}t.addPath=r;function i(E,F,S,A){A===void 0&&(A=!1);var D=A?S:g(E,S);return E.models=E.models||{},E.models[D]=F,E}t.addModel=i;function o(E,F,S,A){return A===void 0&&(A=!1),i(F,E,S,A),E}t.addTo=o;function s(E){return e.cloneObject(E)}t.clone=s;function l(E){var F=0;if(E.models)for(var S in E.models)F++;return F}t.countChildModels=l;function a(E){var F=[];function S(A,D,L){A.caption&&F.push({text:A.caption.text,anchor:e.path.clone(A.caption.anchor,e.point.add(A.origin,D)),layer:A.caption.anchor.layer||L})}return S(E,E.origin,E.layer),t.walk(E,{afterChildWalk:function(A){return S(A.childModel,A.offset,A.layer)}}),F}t.getAllCaptionsOffset=a;function c(E,F){if(!E)return F;for(var S=0,A=F;A in E;)S++,A=[F,S].join("_");return A}function g(E,F){return c(E.models,F)}t.getSimilarModelId=g;function y(E,F){return c(E.paths,F)}t.getSimilarPathId=y;function T(E,F){return E.layer=F,E}t.layer=T;function x(E,F){function S(A,D){if(A){var L=e.point.add(A.origin,D);if(A.type===e.models.BezierCurve.typeName&&e.path.moveRelative(A.seed,L),A.paths)for(var B in A.paths)e.path.moveRelative(A.paths[B],L);if(A.models)for(var B in A.models)S(A.models[B],L);A.caption&&e.path.moveRelative(A.caption.anchor,L),A.origin=e.point.zero()}}return S(E,F?e.point.subtract([0,0],F):[0,0]),F&&(E.origin=F),E}t.originate=x;function b(E,F,S){F===void 0&&(F=!0),S===void 0&&(S=!0);var A=e.measure.modelExtents(E),D=E.origin||[0,0];return F&&(D[0]-=A.center[0]),S&&(D[1]-=A.center[1]),E.origin=D,E}t.center=b;function d(E,F,S){var A={};if(!E)return null;if(E.origin&&(A.origin=e.point.mirror(E.origin,F,S)),E.type&&(A.type=E.type),"layer"in E&&(A.layer=E.layer),E.units&&(A.units=E.units),E.type===e.models.BezierCurve.typeName&&(A.type=e.models.BezierCurve.typeName,A.seed=e.path.mirror(E.seed,F,S)),E.paths){A.paths={};for(var D in E.paths){var L=E.paths[D];if(L){var B=e.path.mirror(L,F,S);B&&(A.paths[D]=B)}}}if(E.models){A.models={};for(var D in E.models){var G=E.models[D];if(G){var _=d(G,F,S);_&&(A.models[D]=_)}}}return E.caption&&(A.caption=e.cloneObject(E.caption),A.caption.anchor=e.path.mirror(E.caption.anchor,F,S)),A}t.mirror=d;function u(E,F){return E.origin=e.point.clone(F),E}t.move=u;function p(E,F){return E&&(E.origin=e.point.add(E.origin||e.point.zero(),F)),E}t.moveRelative=p;function f(E,F){var S=[];C(E,{onPath:function(L){S.push(L)}});for(var A=0;A<S.length;A++){var D=S[A];delete D.modelContext.paths[D.pathId],D.modelContext.paths[F+D.pathId]=D.pathContext}return E}t.prefixPathIds=f;function h(E,F,S){if(S===void 0&&(S=[0,0]),!E||!F)return E;var A=e.point.subtract(S,E.origin);if(E.type===e.models.BezierCurve.typeName&&e.path.rotate(E.seed,F,A),E.paths)for(var D in E.paths)e.path.rotate(E.paths[D],F,A);if(E.models)for(var D in E.models)h(E.models[D],F,A);return E.caption&&e.path.rotate(E.caption.anchor,F,A),E}t.rotate=h;function v(E,F,S){if(S===void 0&&(S=!1),S&&E.origin&&(E.origin=e.point.scale(E.origin,F)),E.type===e.models.BezierCurve.typeName&&e.path.scale(E.seed,F),E.paths)for(var A in E.paths)e.path.scale(E.paths[A],F);if(E.models)for(var A in E.models)v(E.models[A],F,!0);return E.caption&&e.path.scale(E.caption.anchor,F),E}t.scale=v;function m(E,F,S,A,D,L,B){var G=e.path.distort(F,D,L);if(A=A||F.layer,A&&(G.layer=A),e.isPath(G))if(G.type===e.pathType.BezierSeed){var _=new e.models.BezierCurve(G,B);i(E,_,S)}else r(E,G,S);else i(E,G,S)}function P(E,F,S,A,D){A===void 0&&(A=!1);var L={};if(E.layer&&(L.layer=E.layer),A&&E.origin&&(L.origin=e.point.distort(E.origin,F,S)),E.type===e.models.BezierCurve.typeName){var B=E,G=e.models.BezierCurve.getBezierSeeds(B,{byLayers:!0,pointMatchingDistance:D}),_=function(j){var H=G[j];H.forEach(function(X,k){m(L,X,k.toString(),j,F,S,D)})};for(var q in G)_(q)}else if(E.paths)for(var V in E.paths){var U=E.paths[V];m(L,U,V,null,F,S,D)}if(E.models)for(var I in E.models){var z=E.models[I],N=P(z,F,S,!0,D);i(L,N,I)}return E.caption&&(L.caption=e.cloneObject(E.caption),L.caption.anchor=e.path.distort(E.caption.anchor,F,S)),L}t.distort=P;function O(E,F){if(E.units&&e.units.isValidUnit(E.units)&&e.units.isValidUnit(F)){var S=e.units.conversionScale(E.units,F);S!=1&&(v(E,S),E.units=F)}return E}t.convertUnits=O;function R(E,F){if(E.paths)for(var S in E.paths)E.paths[S]&&F(E,S,E.paths[S]);if(E.models)for(var A in E.models)E.models[A]&&R(E.models[A],F)}t.walkPaths=R;function C(E,F){if(!E)return;function S(A,D,L,B,G){var _=e.point.add(A.origin,L);if(D=D??"",A.paths)for(var q in A.paths){var V=A.paths[q];if(V){var U={modelContext:A,layer:V.layer!=null?V.layer:D,offset:_,pathContext:V,pathId:q,route:B.concat(["paths",q]),routeKey:G+(G?".":"")+"paths"+JSON.stringify([q])};F.onPath&&F.onPath(U)}}if(A.models)for(var I in A.models){var z=A.models[I];if(z){var N={parentModel:A,layer:z.layer!=null?z.layer:D,offset:_,route:B.concat(["models",I]),routeKey:G+(G?".":"")+"models"+JSON.stringify([I]),childId:I,childModel:z};F.beforeChildWalk&&!F.beforeChildWalk(N)||(S(N.childModel,N.layer,_,N.route,N.routeKey),F.afterChildWalk&&F.afterChildWalk(N))}}}return S(E,E.layer,[0,0],[],""),E}t.walk=C;function w(E,F,S){F===void 0&&(F=!0),S===void 0&&(S=!0);var A=e.measure.modelExtents(E),D=E.origin||[0,0];return F&&(D[0]-=A.low[0]),S&&(D[1]-=A.low[1]),E.origin=D,E}t.zero=w})(e.model||(e.model={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(b,d){var u=e.cloneObject(b);if(!u)return null;var p=e.path.breakAtPoint(u,d);if(p){for(var f=[u,p],h=2;h--;)if(e.round(e.measure.pathLength(f[h]),1e-4)==0)return null;return f}else if(b.type==e.pathType.Circle)return[u];return null}function r(b,d,u){var p=[];return b.forEach(function(f){e.measure.isPointOnPath(f,d,1e-5,null,u)&&p.push(f)}),p}function i(b,d,u){var p=u.pathContext,f=b.segments;if(e.measure.isPathEqual(f[0].absolutePath,p,1e-4,null,u.offset)){f[0].overlapped=!0,f[0].duplicate=!0,d.push(f[0]);return}for(var h={},v={path1Offset:b.offset,path2Offset:u.offset},m=e.path.intersection(b.pathContext,p,v),P=m?m.intersectionPoints:null,O=e.point.fromPathEnds(p,u.offset)||[],R=0;R<f.length;R++){var C=P?O.concat(P):O,w=r(C,f[R].absolutePath,h);if(v.out_AreOverlapped&&(f[R].overlapped=!0,d.push(f[R])),w.length>0){for(var E=null,F=0;!E&&F<w.length;)E=n(f[R].absolutePath,w[F]),F++;if(E){if(b.broken=!0,f[R].absolutePath=E[0],E[1]){var S={absolutePath:E[1],pathId:f[0].pathId,overlapped:f[R].overlapped,uniqueForeignIntersectionPoints:[]};f[R].overlapped&&d.push(S),f.push(S)}R--}}}}function o(b,d,u,p,f){var h={farPoint:p,measureAtlas:f},v=e.point.add(e.point.middle(b),u);return e.measure.isPointInsideModel(v,d,h)}t.isPathInsideModel=o;function s(b,d){var u=new e.measure.Atlas(b);u.measureModels();var p;return d?(p=new e.measure.Atlas(d),p.measureModels()):(d=b,p=u),l(b,d||b,!1,u,p),b}t.breakPathsAtIntersections=s;function l(b,d,u,p,f,h){var v=[],m=[],P={onPath:function(O){var R={absolutePath:e.path.clone(O.pathContext,O.offset),pathId:O.pathId,overlapped:!1,uniqueForeignIntersectionPoints:[]},C=O;C.broken=!1,C.segments=[R];var w={onPath:function(A){O.pathContext!==A.pathContext&&e.measure.isMeasurementOverlapping(p.pathMap[O.routeKey],f.pathMap[A.routeKey])&&i(C,m,A)},beforeChildWalk:function(A){var D=f.modelMap[A.routeKey];return D&&e.measure.isMeasurementOverlapping(p.pathMap[O.routeKey],D)}};if(t.walk(d,w),u)for(var E=0;E<C.segments.length;E++){var F=e.point.middle(C.segments[E].absolutePath),S={measureAtlas:f,farPoint:h};C.segments[E].isInside=e.measure.isPointInsideModel(F,d,S),C.segments[E].uniqueForeignIntersectionPoints=S.out_intersectionPoints}v.push(C)}};return t.walk(b,P),{crossedPaths:v,overlappedSegments:m}}function a(b,d,u){function p(v,m){e.measure.isPathEqual(v.absolutePath,m.absolutePath,u)&&(v.duplicate=m.duplicate=!0)}function f(v){for(var m=0;m<d.length;m++)p(d[m],v)}for(var h=0;h<b.length;h++)f(b[h])}function c(b,d,u,p,f,h){function v(R,C,w){var E=t.getSimilarPathId(R,C),F=E==C?b.routeKey:e.createRouteKey(b.route.slice(0,-1).concat([E]));if(w.addedPath=e.cloneObject(b.pathContext),w.addedPath.type=w.absolutePath.type,e.path.copyProps(w.absolutePath,w.addedPath),e.path.moveRelative(w.addedPath,b.offset,!0),R.paths[E]=w.addedPath,b.broken){var S=e.measure.pathExtents(w.absolutePath);f.pathMap[F]=S,f.modelsMeasured=!1}else f.pathMap[F]=P}function m(R,C,w){w.isInside&&d||!w.isInside&&u?v(R,C,w):(f.modelsMeasured=!1,h(w.absolutePath,b.routeKey,"segment is "+(w.isInside?"inside":"outside")+" intersectionPoints="+JSON.stringify(w.uniqueForeignIntersectionPoints)))}var P=f.pathMap[b.routeKey];delete b.modelContext.paths[b.pathId],delete f.pathMap[b.routeKey];for(var O=0;O<b.segments.length;O++)b.segments[O].duplicate?p?v(b.modelContext,b.pathId,b.segments[O]):h(b.segments[O].absolutePath,b.routeKey,"segment is duplicate"):m(b.modelContext,b.pathId,b.segments[O])}function g(b,d,u,p,f,h,v){u===void 0&&(u=!1),p===void 0&&(p=!0),f===void 0&&(f=!1),h===void 0&&(h=!0);var m={trimDeadEnds:!0,pointMatchingDistance:.005,out_deleted:[{paths:{}},{paths:{}}]};if(e.extendObject(m,v),m.measureA=m.measureA||new e.measure.Atlas(b),m.measureB=m.measureB||new e.measure.Atlas(d),m.measureA.measureModels(),m.measureB.measureModels(),!m.farPoint){var P=e.measure.increase(e.measure.increase({high:[null,null],low:[null,null]},m.measureA.modelMap[""]),m.measureB.modelMap[""]);m.farPoint=e.point.add(P.high,[1,1])}var O=l(b,d,!0,m.measureA,m.measureB,m.farPoint),R=l(d,b,!0,m.measureB,m.measureA,m.farPoint);a(O.overlappedSegments,R.overlappedSegments,m.pointMatchingDistance);function C(S,A,D,L){t.addPath(m.out_deleted[S],A,"deleted");var B=A;B.reason=L,B.routeKey=D}for(var w=0;w<O.crossedPaths.length;w++)c(O.crossedPaths[w],u,p,!0,m.measureA,function(S,A,D){return C(0,S,A,D)});for(var w=0;w<R.crossedPaths.length;w++)c(R.crossedPaths[w],f,h,!1,m.measureB,function(A,D,L){return C(1,A,D,L)});var E={models:{a:b,b:d}};if(m.trimDeadEnds){var F;!u&&!f&&(F=function(S){for(var A=0;A<O.overlappedSegments.length;A++)if(O.overlappedSegments[A].duplicate&&S.pathContext===O.overlappedSegments[A].addedPath)return!1;return!0}),t.removeDeadEnds(E,null,F,function(S,A){var D=S.route[1]==="a"?0:1;C(D,S.pathContext,S.routeKey,A)})}return e.extendObject(v,m),E}t.combine=g;function y(b,d){return g(b,d,!0,!1,!0,!1)}t.combineIntersection=y;function T(b,d){return g(b,d,!1,!0,!0,!1)}t.combineSubtraction=T;function x(b,d){return g(b,d,!1,!0,!1,!0)}t.combineUnion=x})(e.model||(e.model={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){var t=(function(){function o(s){this.comparer=s,this.collections=[]}return o.prototype.addItemToCollection=function(s,l){var a=this.findCollection(s);if(a)a.push(l);else{var c={key:s,items:[l]};this.collections.push(c)}},o.prototype.findCollection=function(s,l){for(var a=0;a<this.collections.length;a++){var c=this.collections[a];if(this.comparer(s,c.key))return l&&l(a),c.items}return null},o.prototype.removeCollection=function(s){var l=this;return!!this.findCollection(s,function(a){l.collections.splice(a,1)})},o.prototype.removeItemFromCollection=function(s,l){var a=this.findCollection(s);if(a){for(var c=0;c<a.length;c++)if(a[c]===l)return a.splice(c,1),!0;return!1}},o.prototype.getCollectionsOfMultiple=function(s){for(var l=0;l<this.collections.length;l++){var a=this.collections[l];a.items.length>1&&s(a.key,a.items)}},o})();e.Collector=t;var n=require$$1,r=n.default||n,i=(function(){function o(){this.reset()}return o.prototype.reset=function(){this.insertedCount=0,this.graph={},this.index={},this.merged={},this.values=[]},o.prototype.insertValue=function(s){return this.values.push(s),this.values.length-1},o.prototype.insertValueIdAtPoint=function(s,l){var a=l[0],c=l[1];this.graph[a]||(this.graph[a]={});var g=this.graph[a],y=c in g,T,x;return y?(x=g[c],x in this.merged&&(x=this.merged[x]),T=this.index[x],T.valueIds.push(s)):(g[c]=x=this.insertedCount++,T={pointId:x,point:l,valueIds:[s]},this.index[x]=T),{existed:y,pointId:x}},o.prototype.mergePoints=function(s){var l=this,a=[],c=[];for(var g in this.index){var y=this.index[g],T=y.point;y.kdId=a.length,a.push(T),c.push(y)}this.kdbush=r(a);var x=function(d){if(d in b.merged)return"continue";var u=b.index[d],p=b.kdbush.within(u.point[0],u.point[1],s);p.forEach(function(f){f!==u.kdId&&l.mergeIndexElements(u,c[f])})},b=this;for(var g in this.index)x(g)},o.prototype.mergeNearestSinglePoints=function(s){var l=this,a=[];for(var c in this.index){var g=this.index[c];g.valueIds.length===1&&a.push(g)}this.kdbush=r(a.map(function(y){return y.point})),a.forEach(function(y){if(!(y.pointId in l.merged)){var T=l.kdbush.within(y.point[0],y.point[1],s),x=[];T.forEach(function(u){var p=a[u];p.pointId!==y.pointId&&x.push({el:p,distance:e.measure.pointDistance(p.point,y.point)})}),x.sort(function(u,p){return u.distance-p.distance});for(var b=0;b<x.length;b++){var d=x[b].el;if(!(d.pointId in l.merged)){d.merged&&d.merged.length>0?l.mergeIndexElements(d,y):l.mergeIndexElements(y,d);return}}}})},o.prototype.mergeIndexElements=function(s,l){return s.merged=s.merged||[],s.merged.push(l.pointId),this.merged[l.pointId]=s.pointId,s.valueIds.push.apply(s.valueIds,l.valueIds),delete this.index[l.pointId],s.pointId},o.prototype.forEachPoint=function(s){for(var l=this,a=0;a<this.insertedCount;a++){var c=this.index[a];if(c){var g=c.valueIds.length;g>0&&s(c.point,c.valueIds.map(function(y){return l.values[y]}),a,c)}}},o.prototype.getIdOfPoint=function(s){var l=this.graph[s[0]];if(l){var a=l[s[1]];if(a>=0)return a in this.merged?this.merged[a]:a}},o.prototype.getElementAtPoint=function(s){var l=this.getIdOfPoint(s);if(l>=0)return this.index[l]},o})();e.PointGraph=i})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(i,o,s){var l=0;do{var a=i[l];do for(var c=!1,g=l+1;g<i.length;g++){var y=i[g];if(c=o(a.pathContext,y.pathContext,!1),c){s(a.pathContext,y.pathContext),delete y.modelContext.paths[y.pathId],i.splice(g,1);break}}while(c);l++}while(l<i.length)}function r(i,o){function s(x,b){if(Math.abs(x.radius-b.radius)<=y.scalarMatchingDistance){var d=e.measure.pointDistance(x.origin,b.origin);return d<=y.pointMatchingDistance}return!1}var l=new e.Collector(s),a=new e.Collector(s),c=new e.Collector(e.measure.isSlopeEqual),g={};g[e.pathType.Arc]=function(x){l.addItemToCollection(x.pathContext,x)},g[e.pathType.Circle]=function(x){a.addItemToCollection(x.pathContext,x)},g[e.pathType.Line]=function(x){var b=e.measure.lineSlope(x.pathContext);c.addItemToCollection(b,x)};var y={scalarMatchingDistance:.001,pointMatchingDistance:.005};e.extendObject(y,o);var T={onPath:function(x){var b=g[x.pathContext.type];b&&b(x)}};return t.walk(i,T),l.getCollectionsOfMultiple(function(x,b){n(b,e.measure.isArcOverlapping,function(d,u){var p=e.measure.isBetweenArcAngles(d.endAngle,u,!1),f=e.measure.isBetweenArcAngles(u.endAngle,d,!1);if(p&&f){d.endAngle=d.startAngle+360;return}var h=p?[d,u]:[u,d];d.startAngle=e.angle.noRevolutions(h[0].startAngle),d.endAngle=h[1].endAngle})}),a.getCollectionsOfMultiple(function(x,b){for(var d=1;d<b.length;d++){var u=b[d];delete u.modelContext.paths[u.pathId]}}),c.getCollectionsOfMultiple(function(x,b){n(b,e.measure.isLineOverlapping,function(d,u){var p={paths:{lineA:d,lineB:u}},f=e.measure.modelExtents(p);x.hasSlope?x.slope<0?(d.origin=[f.low[0],f.high[1]],d.end=[f.high[0],f.low[1]]):x.slope>0?(d.origin=f.low,d.end=f.high):(d.origin[0]=f.low[0],d.end[0]=f.high[0]):(d.origin[1]=f.low[1],d.end[1]=f.high[1])})}),i}t.simplify=r})(e.model||(e.model={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n={};n[e.pathType.Arc]=function(o,s,l){return new e.models.OvalArc(o.startAngle,o.endAngle,o.radius,s,!1,l)},n[e.pathType.Circle]=function(o,s,l){return new e.models.Ring(o.radius+s,o.radius-s)},n[e.pathType.Line]=function(o,s,l){return new e.models.Slot(o.origin,o.end,s,l)};function r(o,s,l){if(!o)return null;var a=null,c=n[o.type];return c&&(a=c(o,s,l),a.origin=o.origin),a}t.expand=r;function i(o,s,l,a){var c=e.angle.ofArcSpan(o),g=1;c>=270?g=4:c>180?g=3:(c>150||s)&&(g=2);for(var y=e.angle.toRadians(c/g),T=e.models.Polygon.circumscribedRadius(o.radius,y),x=e.point.fromArc(o),b=[e.point.subtract(x[0],o.origin)],d=e.angle.toRadians(o.startAngle)+y/2,u=0;u<g;u++)b.push(e.point.fromPolar(d,T)),d+=y;b.push(e.point.subtract(x[1],o.origin));var p=new e.models.ConnectTheDots(a,b);return p.origin=o.origin,typeof l=="string"&&l.length&&e.model.prefixPathIds(p,l),p}t.straighten=i})(e.path||(e.path={}))})(MakerJs||(MakerJs={})),(function(e){(function(t){function n(s,l,a,c){if(a===void 0&&(a=0),c===void 0&&(c={}),l<=0)return null;var g={models:{expansions:{models:{}},caps:{models:{}}}},y=!0,T=c.farPoint,x={onPath:function(p){if(!(c.pointMatchingDistance&&e.measure.pathLength(p.pathContext)<c.pointMatchingDistance)){var f=e.path.expand(p.pathContext,l,!0);if(f){t.moveRelative(f,p.offset);var h=t.getSimilarModelId(g.models.expansions,p.pathId);if(t.prefixPathIds(f,p.pathId+"_"),t.originate(f),y||(t.combine(g,f,!1,!0,!1,!0,c),c.measureA.modelsMeasured=!1,T=c.farPoint,delete c.farPoint,delete c.measureB),g.models.expansions.models[h]=f,f.models){var v=f.models.Caps;v&&(delete f.models.Caps,g.models.caps.models[h]=v)}y=!1}}}};if(t.walk(s,x),a){var b=g.models.caps,d={models:{}};g.models.straightcaps=d,t.simplify(b);for(var u in b.models)d.models[u]={models:{}},t.walk(b.models[u],{onPath:function(p){var f=p.pathContext,h=e.path.straighten(f,a==2,p.pathId+"_",!0);t.combine(g,h,!1,!0,!1,!0,c),c.measureA.modelsMeasured=!1,T=c.farPoint,delete c.farPoint,delete c.measureB,d.models[u].models[p.pathId]=h,delete p.modelContext.paths[p.pathId]}});delete g.models.caps}return c.farPoint=T,g}t.expandPaths=n;function r(s){var l=[];return t.findChains(s,function(a,c,g){l=a.filter(function(y){return y.endless})}),l}function i(s){var l=r(s);if(l.length==0)return null;var a={models:{}};return l.forEach(function(c,g){a.models[g]=e.chain.toNewModel(c)}),a}function o(s,l,a,c,g){a===void 0&&(a=0),c===void 0&&(c=!1),g===void 0&&(g={});var y=n(s,l,a,g);if(!y)return null;var T=i(s);if(T){var x=0,b={models:{}},d=r(y);return d.forEach(function(u){var p=u.links[0].walkedPath,f=e.measure.isPointInsideModel(e.point.middle(p.pathContext),T,p.offset);(c&&f||!c&&!f)&&(b.models[x++]=e.chain.toNewModel(u))}),b}else return y}t.outline=o})(e.model||(e.model={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=e.unitType.Millimeter;function r(){s(e.unitType.Centimeter,10),s(e.unitType.Meter,1e3),s(e.unitType.Inch,25.4),s(e.unitType.Foot,25.4*12)}var i;function o(c,g,y){function T(x){return i[x]||(i[x]={}),i[x]}T(c)[g]=y,T(g)[c]=1/y}function s(c,g){o(c,n,g)}function l(c,g){return c==g?1:(i||(i={},r()),i[c][g]||o(c,g,i[c][n]*i[n][g]),i[c]&&i[c][g])}t.conversionScale=l;function a(c){for(var g in e.unitType)if(e.unitType[g]==c)return!0;return!1}t.isValidUnit=a})(e.units||(e.units={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(x,b,d){d===void 0&&(d=1e-4);var u=e.angle.noRevolutions(x),p=e.angle.noRevolutions(b),f=e.angle.noRevolutions(e.round(p-u,d));return f==0}t.isAngleEqual=n;var r={};r[e.pathType.Line]=function(x,b,d){return o(x.origin,b.origin,d)&&o(x.end,b.end,d)||o(x.origin,b.end,d)&&o(x.end,b.origin,d)},r[e.pathType.Circle]=function(x,b,d){return o(x.origin,b.origin,d)&&x.radius==b.radius},r[e.pathType.Arc]=function(x,b,d){return r[e.pathType.Circle](x,b,d)&&n(x.startAngle,b.startAngle)&&n(x.endAngle,b.endAngle)};function i(x,b,d,u,p){var f=!1;if(x.type==b.type){var h=r[x.type];if(h){let v=function(){f=h(x,b,d)};u||p?e.path.moveTemporary([x,b],[u,p],v):v()}}return f}t.isPathEqual=i;function o(x,b,d){if(d){if(!x||!b)return!1;var u=t.pointDistance(x,b);return u<=d}else return e.round(x[0]-b[0])==0&&e.round(x[1]-b[1])==0}t.isPointEqual=o;function s(x,b,d){for(var u=0;u<b.length;u++)if(o(b[u],x,d))return!1;return!0}t.isPointDistinct=s;function l(x,b,d){return d===void 0&&(d=0),b.hasSlope?Math.abs(x[1]-(b.slope*x[0]+b.yIntercept))<=d:Math.abs(x[0]-b.line.origin[0])<=d}t.isPointOnSlope=l;function a(x,b,d){d===void 0&&(d=0);var u=Math.abs(t.pointDistance(x,b.origin)-b.radius);return u<=d}t.isPointOnCircle=a;var c={};c[e.pathType.Circle]=function(x,b,d){return a(x,b,d)},c[e.pathType.Arc]=function(x,b,d){if(c[e.pathType.Circle](x,b,d)){var u=e.angle.ofPointInDegrees(b.origin,x);return t.isBetweenArcAngles(u,b,!1)}return!1},c[e.pathType.Line]=function(x,b,d,u){var p=u&&u.cachedLineSlope||t.lineSlope(b);return u&&!u.cachedLineSlope&&(u.cachedLineSlope=p),l(x,p,d)&&t.isBetweenPoints(x,b,!1)};function g(x,b,d,u,p){d===void 0&&(d=0);var f=c[b.type];if(f){var h=u?e.path.clone(b,u):b;return f(x,h,d,p)}return!1}t.isPointOnPath=g;function y(x,b){if(!T(x,b))return!1;if(!x.hasSlope&&!b.hasSlope)return e.round(x.line.origin[0]-b.line.origin[0])==0;var d=[x,b],u=d.map(function(v){return e.angle.toDegrees(Math.atan(v.slope))}),p=d.map(function(v){return e.path.clone(v.line)}),f=p[0].origin;p.forEach(function(v,m){return e.path.rotate(v,-u[m],f)});var h=p.map(function(v){return(v.origin[1]+v.end[1])/2});return e.round(h[0]-h[1],1e-5)==0}t.isSlopeEqual=y;function T(x,b){return!!(!x.hasSlope&&!b.hasSlope||x.hasSlope&&b.hasSlope&&e.round(x.slope-b.slope,1e-5)==0)}t.isSlopeParallel=T})(e.measure||(e.measure={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(U,I,z){function N(j,H,X){if(H)for(var k=2;k--;)H[k]!=null&&(j[k]==null?j[k]=H[k]:j[k]=X(j[k],H[k]))}return I&&(N(U.low,I.low,Math.min),N(U.high,I.high,Math.max)),z&&w(U),U}t.increase=n;function r(U,I){if(p(U.origin,I)<=U.radius)return!0;var z=new e.paths.Line(e.point.middle(U),I),N={},j=e.path.intersection(z,new e.paths.Chord(U),N);return!!(j||N.out_AreOverlapped)}t.isArcConcaveTowardsPoint=r;function i(U,I,z){return o(U,I,z)}t.isArcOverlapping=i;function o(U,I,z){function N(j,H){function X(k){return l(k,j,z)}return X(H.startAngle)||X(H.endAngle)}return N(U,I)||N(I,U)||U.startAngle==I.startAngle&&U.endAngle==I.endAngle}t.isArcSpanOverlapping=o;function s(U,I,z,N){return N?Math.min(I,z)<U&&U<Math.max(I,z):Math.min(I,z)<=U&&U<=Math.max(I,z)}t.isBetween=s;function l(U,I,z){var N=e.angle.noRevolutions(I.startAngle),j=e.angle.ofArcSpan(I),H=N+j;return U=e.angle.noRevolutions(U),s(U,N,H,z)||s(U,N+360,H+360,z)||s(U,N-360,H-360,z)}t.isBetweenArcAngles=l;function a(U,I,z){for(var N=!1,j=2;j--;){if(e.round(I.origin[j]-I.end[j],1e-6)==0){if(N)return!1;N=!0;continue}var H=e.round(I.origin[j]),X=e.round(I.end[j]);if(!s(e.round(U[j]),H,X,z))return!1}return!0}t.isBetweenPoints=a;function c(U,I){for(var z=u(U),N=0;N<U.controls.length;N++)if(!t.isPointOnSlope(U.controls[N],z)&&(!I||a(U.controls[N],U,!1)))return!1;return!0}t.isBezierSeedLinear=c;var g=requireGraham_scan_min();function y(U){return U.join(",")}function T(U,I){if(!U.endless||U.links.length===1)return null;var z=e.chain.toKeyPoints(U);return x(z,I)}t.isChainClockwise=T;function x(U,I){var z=new g,N=[];function j(Z){z.addPoint(Z[0],Z[1]),N.push(y(Z))}U.forEach(j);var H=z.getHull(),X=H.slice(0,3).map(function(Z){return y([Z.x,Z.y])}),k=[];switch(N.forEach(function(Z){~X.indexOf(Z)&&k.push(Z)}),k.indexOf(X[1])){case 0:k.unshift(k.pop());break;case 2:k.push(k.shift());break}return I&&(I.hullPoints=H.map(function(Z){return[Z.x,Z.y]}),I.keyPoints=U),X[0]!=k[0]}t.isPointArrayClockwise=x;function b(U,I,z){function N(j,H,X){function k(Z){return a(Z,H,z)}return k(X.origin)||k(X.end)}return N(0,U,I)||N(1,I,U)}t.isLineOverlapping=b;function d(U,I){for(var z=2;z--;)if(!(e.round(U.low[z]-I.high[z])<=0&&e.round(U.high[z]-I.low[z])>=0))return!1;return!0}t.isMeasurementOverlapping=d;function u(U){var I=U.end[0]-U.origin[0];if(e.round(I,1e-6)==0)return{line:U,hasSlope:!1};var z=U.end[1]-U.origin[1],N=z/I,j=U.origin[1]-N*U.origin[0];return{line:U,hasSlope:!0,slope:N,yIntercept:j}}t.lineSlope=u;function p(U,I){var z=I[0]-U[0],N=I[1]-U[1];return Math.sqrt(z*z+N*N)}t.pointDistance=p;function f(U,I,z){return[z(U[0],I[0]),z(U[1],I[1])]}var h={};h[e.pathType.Line]=function(U){return{low:f(U.origin,U.end,Math.min),high:f(U.origin,U.end,Math.max)}},h[e.pathType.Circle]=function(U){var I=U.radius;return{low:e.point.add(U.origin,[-I,-I]),high:e.point.add(U.origin,[I,I])}},h[e.pathType.Arc]=function(U){var I=U.radius,z=e.point.fromArc(U);function N(j,H,X){for(var k=f(z[0],z[1],X),Z=2;Z--;)l(j[Z],U,!1)&&(k[Z]=H+U.origin[Z]);return k}return{low:N([180,270],-I,Math.min),high:N([360,90],I,Math.max)}};function v(U,I){if(U){var z=h[U.type];if(z){var N=z(U);return I&&(N.high=e.point.add(N.high,I),N.low=e.point.add(N.low,I)),N}}return{low:null,high:null}}t.pathExtents=v;var m={};m[e.pathType.Line]=function(U){return p(U.origin,U.end)},m[e.pathType.Circle]=function(U){return 2*Math.PI*U.radius},m[e.pathType.Arc]=function(U){var I=m[e.pathType.Circle](U),z=e.angle.ofArcSpan(U)/360;return I*=z,I},m[e.pathType.BezierSeed]=function(U){return e.models.BezierCurve.computeLength(U)};function P(U){if(U){var I=m[U.type];if(I)return I(U)}return 0}t.pathLength=P;function O(U){var I=0;return e.model.walk(U,{onPath:function(z){I+=P(z.pathContext)}}),I}t.modelPathLength=O;function R(U){return{high:e.point.clone(U.high),low:e.point.clone(U.low)}}function C(U,I){function z(H,X){if(X){var k=H.slice(0,-2),Z=e.createRouteKey(k);Z in I.modelMap?n(I.modelMap[Z],X):I.modelMap[Z]=R(X)}}I||(I=new E(U));var N={onPath:function(H){H.routeKey in I.pathMap||(I.pathMap[H.routeKey]=v(H.pathContext,H.offset)),z(H.route,I.pathMap[H.routeKey])},afterChildWalk:function(H){z(H.route,I.modelMap[H.routeKey])}};e.model.walk(U,N),I.modelsMeasured=!0;var j=I.modelMap[""];return j?w(j):null}t.modelExtents=C;function w(U){var I=U;return I.center=e.point.average(I.high,I.low),I.width=I.high[0]-I.low[0],I.height=I.high[1]-I.low[1],I}t.augment=w;var E=(function(){function U(I){this.modelContext=I,this.modelsMeasured=!1,this.modelMap={},this.pathMap={}}return U.prototype.measureModels=function(){this.modelsMeasured||C(this.modelContext,this)},U})();t.Atlas=E;function F(U,I){return I>=U?I-U:I<0?I+U:I}function S(U,I){return U.slope*I+U.yIntercept}function A(U,I){var z=u(U);return[I,S(z,I)]}function D(U){for(var I=1;I<3;I++)if(!t.isPointEqual(U[0].center,U[I].center,1e-6)||e.round(U[0].width-U[I].width)!==0)return!1;return!0}function L(U,I,z,N){e.model.rotate(I,z);var j=C(I),H={index:U,rotation:N,center:e.point.rotate(j.center,N),width:j.height,height:j.width,bottom:new e.paths.Line(j.low,[j.high[0],j.low[1]]),middle:new e.paths.Line([j.low[0],j.center[1]],[j.high[0],j.center[1]]),top:new e.paths.Line(j.high,[j.low[0],j.high[1]])};return[H.top,H.middle,H.bottom].forEach(function(X){return e.path.rotate(X,N)}),H}function B(U,I){var z=U[1].origin,N=z[0],j=U[3].origin[0],H=U[0].origin[0],X=N-H;if(H-j>2*X)return null;var k=(N-j)/3;if(X<k)return null;var Z=Math.min(k,X),oe=e.solvers.equilateralSide(Z),ee=[e.point.fromSlopeIntersection(U[1],U[2]),e.point.fromSlopeIntersection(U[4],U[5])],ae=ee.map(function(Q){return Math.abs(Q[1]-z[1])}),te=ae[0]>ae[1]?0:1,re=ae[te];if(re>oe){var le=e.solvers.equilateralAltitude(re),de=N-2*le;if(H>de+le||j<de-le)return null;var ie=j-de+le,ce=2*le-I[te+1].width,Y=Math.min(ie,ce)/2;return{origin:A(I[2-te].middle,de+Y),radius:re,type:"peak "+te}}else return{origin:[N-2*Z,z[1]],radius:oe,type:"side"}}function G(U){var I=e.cloneObject(U);e.model.originate(I);var z=C(I),N=[],j={paths:{}};e.model.center(I);function H(ie,ce,Y){return{radius:ie,paths:new e.models.Polygon(6,ie,30).paths,origin:e.point.add(ce,z.center),notes:Y}}for(var X=[[90,-90],[-60,-30],[-60,30]];X.length;){var k=X.shift(),Z=L(N.length,I,k[0],k[1]),oe=e.solvers.equilateralSide(Z.width/2);if(oe>=Z.height)return H(oe,Z.center,"solved by bound "+N.length);N.push(Z)}if(D(N))return H(e.solvers.equilateralSide(N[0].width/2),N[0].center,"solved as circular");var ee=N.map(function(ie){return ie.top}).concat(N.map(function(ie){return ie.bottom}));ee.forEach(function(ie,ce){j.paths[ce]=ie,e.path.converge(ee[F(6,ce+2)],ie,!0)}),N.forEach(function(ie,ce){j.paths["m"+ce]=ie.middle});for(var ae=N.slice(),te,re=0;re<6;re++){re>0&&(ee.push(ee.shift()),ae.push(ae.shift()),e.model.rotate(j,-60));var le=B(ee,ae);le&&(!te||le.radius<te.radius)&&(te=le,te.index=re)}var de=e.point.rotate(te.origin,te.index*60);return H(te.radius,de,"solved by "+te.index+" as "+te.type)}t.boundingHexagon=G;function _(U,I){var z=0;return I.forEach(function(N){t.isPointDistinct(N,U,1e-8)&&(U.push(N),z++)}),z}function q(U,I,z){if(I)return I;var N=C(U).high;return N?e.point.add(N,[1,1]):[7654321,1234567]}function V(U,I,z){z===void 0&&(z={}),z.farPoint||(z.farPoint=q(I,z.farPoint,z.measureAtlas)),z.out_intersectionPoints=[];var N,j=new e.paths.Line(U,z.farPoint),H=v(j),X={onPath:function(k){if(!(z.measureAtlas&&!d(H,z.measureAtlas.pathMap[k.routeKey]))){var Z={path2Offset:k.offset},oe=e.path.intersection(j,k.pathContext,Z);if(oe){var ee=_(z.out_intersectionPoints,oe.intersectionPoints);ee%2==1&&(N=!N)}}},beforeChildWalk:function(k){if(!z.measureAtlas)return!0;var Z=z.measureAtlas.modelMap[k.routeKey];return Z&&d(H,Z)}};return e.model.walk(I,X),!!N}t.isPointInsideModel=V})(e.measure||(e.measure={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(i,o){o===void 0&&(o={});function s(l,a){if(e.isNumber(a)){var c=e.round(a,o.accuracy);return c}if(e.isPoint(a)){var g=e.point.rounded(a,o.accuracy);return g}return a}return JSON.stringify(i,o.accuracy&&s,o.indentation)}t.toJson=n;function r(i){if(e.isModel(i))return i.units}t.tryGetModelUnits=r,t.colors={black:0,red:1,yellow:2,lime:3,aqua:4,blue:5,fuchsia:6,white:7,gray:9,maroon:14,orange:30,olive:58,green:94,teal:134,navy:174,purple:214,silver:254}})(e.exporter||(e.exporter={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(r){for(var i=[],o=/-?(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s;(s=o.exec(r))!==null;)s.index===o.lastIndex&&o.lastIndex++,s[0]!==""&&i.push(parseFloat(s[0]));return i}t.parseNumericList=n})(e.importer||(e.importer={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(o,s){s===void 0&&(s={});var l={fontSize:9},a=[],c={entities:[],header:{},tables:{}};if(e.extendObject(l,s),e.isModel(o)){var g=o;g.exporterOptions&&e.extendObject(l,g.exporterOptions.toDXF)}function y(F){if(l.layerOptions&&l.layerOptions[F])return l.layerOptions[F];if(F in t.colors)return{color:t.colors[F]}}function T(F){return l.layerOptions&&l.layerOptions[F]&&l.layerOptions[F].lineType?l.layerOptions[F].lineType:"CONTINUOUS"}function x(F,S){var A=F&&F.layer||S||"0";return a.indexOf(A)<0&&a.push(A),A}var b={};b[e.pathType.Line]=function(F,S,A){var D=x(F,A),L={type:"LINE",layer:D,vertices:[{x:e.round(F.origin[0]+S[0],l.accuracy),y:e.round(F.origin[1]+S[1],l.accuracy)},{x:e.round(F.end[0]+S[0],l.accuracy),y:e.round(F.end[1]+S[1],l.accuracy)}]};return L.lineType=T(D),L},b[e.pathType.Circle]=function(F,S,A){var D=x(F,A),L={type:"CIRCLE",layer:D,center:{x:e.round(F.origin[0]+S[0],l.accuracy),y:e.round(F.origin[1]+S[1],l.accuracy)},radius:e.round(F.radius,l.accuracy)};return L.lineType=T(D),L},b[e.pathType.Arc]=function(F,S,A){var D=x(F,A),L={type:"ARC",layer:D,center:{x:e.round(F.origin[0]+S[0],l.accuracy),y:e.round(F.origin[1]+S[1],l.accuracy)},radius:e.round(F.radius,l.accuracy),startAngle:e.round(F.startAngle,l.accuracy),endAngle:e.round(F.endAngle,l.accuracy)};return L.lineType=T(D),L};function d(F,S,A){var D={type:"VERTEX",layer:x(null,S),x:e.round(F[0],l.accuracy),y:e.round(F[1],l.accuracy),bulge:A};return D}function u(F){var S={type:"POLYLINE",layer:x(null,F.layer),shape:F.chain.endless,vertices:[]};if(S.lineType=T(S.layer),F.chain.links.forEach(function(L,B){var G;if(L.walkedPath.pathContext.type===e.pathType.Arc){var _=L.walkedPath.pathContext;G=e.round(Math.tan(e.angle.toRadians(e.angle.ofArcSpan(_))/4),l.accuracy),L.reversed&&(G*=-1)}var q=L.endPoints[L.reversed?1:0];S.vertices.push(d(q,F.layer,G))}),!F.chain.endless){var A=F.chain.links[F.chain.links.length-1],D=A.endPoints[A.reversed?0:1];S.vertices.push(d(D,F.layer))}return S}function p(F){var S=x(null,F.layer),A=y(S),D=e.point.middle(F.anchor),L={type:"TEXT",startPoint:d(D,null),endPoint:d(D,null),layer:S,textHeight:A&&A.fontSize||l.fontSize,text:F.text,halign:4,valign:0,rotation:e.angle.ofPointInDegrees(F.anchor.origin,F.anchor.end)};return L}function f(F,S){var A={name:F,color:S};return A.lineType=T(F),A}function h(){var F={lineTypes:{CONTINUOUS:{name:"CONTINUOUS",description:"______",patternLength:0,elements:[]},DASHED:{name:"DASHED",description:"_ _ _ ",elements:[5,-2.5],patternLength:7.5},DOTTED:{name:"DOTTED",description:". . . ",elements:[.5,-1],patternLength:1.5}}},S="lineType";c.tables[S]=F}function v(){var F={layers:{}};a.forEach(function(A){var D=y(A);D&&(F.layers[A]=f(A,D.color))});var S="layer";c.tables[S]=F}function m(){if(l.units){var F=i[l.units];c.header.$INSUNITS=F}}function P(F,S,A){var D=c.entities;D.push.apply(D,S.map(u)),F.forEach(function(L){var B=b[L.pathContext.type];if(B){var G=B(L.pathContext,L.offset,L.layer);D.push(G)}}),D.push.apply(D,A.map(p))}if(!l.units){var O=t.tryGetModelUnits(o);O&&(l.units=O)}e.extendObject(s,l);var R=[],C=[];if(l.usePOLYLINE){var w=function(F,S,A){F.forEach(function(D){if(D.endless&&D.links.length===1&&D.links[0].walkedPath.pathContext.type===e.pathType.Circle){C.push(D.links[0].walkedPath);return}var L={chain:D,layer:A};R.push(L)}),C.push.apply(C,S)};e.model.findChains(g,w,{byLayers:!0,pointMatchingDistance:l.pointMatchingDistance})}else{var E={onPath:function(F){C.push(F)}};e.model.walk(g,E)}return P(C,R,e.model.getAllCaptionsOffset(g)),m(),h(),v(),r(c)}t.toDXF=n;function r(o){var s=[];function l(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];s.push.apply(s,h)}function a(h){var v=h.lineType;v&&l("6",v)}var c={};c.LINE=function(h){l("0","LINE","8",h.layer),a(h),l("10",h.vertices[0].x,"20",h.vertices[0].y,"11",h.vertices[1].x,"21",h.vertices[1].y)},c.CIRCLE=function(h){l("0","CIRCLE","8",h.layer),a(h),l("10",h.center.x,"20",h.center.y,"40",h.radius)},c.ARC=function(h){l("0","ARC","8",h.layer),a(h),l("10",h.center.x,"20",h.center.y,"40",h.radius,"50",h.startAngle,"51",h.endAngle)},c.VERTEX=function(h){l("0","VERTEX","8",h.layer,"10",h.x,"20",h.y),h.bulge!==void 0&&l("42",h.bulge)},c.POLYLINE=function(h){l("0","POLYLINE","8",h.layer),a(h),l("66",1,"70",h.shape?1:0),h.vertices.forEach(function(v){return c.VERTEX(v)}),l("0","SEQEND")},c.TEXT=function(h){l("0","TEXT","10",h.startPoint.x,"20",h.startPoint.y,"11",h.endPoint.x,"21",h.endPoint.y,"40",h.textHeight,"1",h.text,"50",h.rotation,"8",h.layer,"72",h.halign,"73",h.valign)};function g(h){l("0","SECTION"),h(),l("0","ENDSEC")}function y(h){l("0","TABLE"),h(),l("0","ENDTAB")}function T(){l("2","TABLES"),y(d),y(u)}function x(h){var v=h.lineType||"CONTINUOUS";l("0","LAYER","2",h.name,"70","0","62",h.color,"6",v)}function b(h){var v=h.elements||[];l("0","LTYPE","72","65","70","0","2",h.name,"3",h.description,"73",v.length,"40",h.patternLength),v.forEach(function(m){return l("49",m)})}function d(){var h="lineType",v=o.tables[h];l("2","LTYPE");for(var m in v.lineTypes){var P=v.lineTypes[m];b(P)}}function u(){var h="layer",v=o.tables[h];l("2","LAYER");for(var m in v.layers){var P=v.layers[m];x(P)}}function p(){l("2","HEADER");for(var h in o.header){var v=o.header[h];l("9",h,"70",v)}}function f(h){l("2","ENTITIES"),h.forEach(function(v){var m=c[v.type];m&&m(v)})}return g(p),g(T),g(function(){return f(o.entities)}),l("0","EOF"),s.join(`
`)}var i={};i[""]=0,i[e.unitType.Inch]=1,i[e.unitType.Foot]=2,i[e.unitType.Millimeter]=4,i[e.unitType.Centimeter]=5,i[e.unitType.Meter]=6})(e.exporter||(e.exporter={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=Math.sqrt(3)/2;function r(a){return a*n}t.equilateralAltitude=r;function i(a){return a/n}t.equilateralSide=i;function o(a,c,g){return e.angle.toDegrees(Math.acos((c*c+g*g-a*a)/(2*c*g)))}t.solveTriangleSSS=o;function s(a,c,g){var y=180-a-g;return c*Math.sin(e.angle.toRadians(a))/Math.sin(e.angle.toRadians(y))}t.solveTriangleASA=s;function l(a,c,g){g===void 0&&(g=!1);var y=new e.paths.Line(a.origin,c.origin),T=e.measure.pointDistance(a.origin,c.origin);if(a.radius>=T+c.radius||c.radius>=T+a.radius||g&&a.radius+c.radius>=T)return null;var x;if(!g&&e.round(a.radius-c.radius)==0)x=[90,270];else{var b=T/2,d=new e.paths.Circle([b,0],b),u=new e.paths.Circle(a.radius>c.radius?[0,0]:[T,0],g?a.radius+c.radius:Math.abs(a.radius-c.radius)),p=e.path.intersection(u,d);if(!p||!p.path1Angles)return null;x=p.path1Angles}var f=e.angle.ofLineInDegrees(y);return x.map(function(h){return e.angle.noRevolutions(h+f)})}t.circleTangentAngles=l})(e.solvers||(e.solvers={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n={};n[e.pathType.Arc]={},n[e.pathType.Circle]={},n[e.pathType.Line]={},n[e.pathType.Arc][e.pathType.Arc]=function(y,T,x,b){var d=null;return r([y,T],x,b,function(){var u=g(y,T,x);if(u){var p=a(u[0],y,x),f=a(u[1],T,x);if(p&&f)if(p.length===1||f.length===1)for(var h=0;h<p.length;h++)for(var v=0;v<f.length;v++){var m=e.point.fromAngleOnCircle(p[h],y),P=e.point.fromAngleOnCircle(f[v],T);if(e.measure.isPointEqual(m,P,1e-4)){d={intersectionPoints:[m],path1Angles:[p[h]],path2Angles:[f[v]]};return}}else d={intersectionPoints:l(p,y),path1Angles:p,path2Angles:f}}else x.out_AreOverlapped&&(x.out_AreOverlapped=e.measure.isArcOverlapping(y,T,x.excludeTangents))}),d},n[e.pathType.Arc][e.pathType.Circle]=function(y,T,x,b){var d=null;return r([y,T],x,b,function(){var u=g(y,T,x);if(u){var p=a(u[0],y,x);if(p){var f;if(p.length==2)f=u[1];else{var h=s(u[0],p[0]);f=[u[1][h]]}d={intersectionPoints:l(p,y),path1Angles:p,path2Angles:f}}}}),d},n[e.pathType.Arc][e.pathType.Line]=function(y,T,x,b){var d=null;return r([y,T],x,b,function(){var u=c(T,y,x);if(u){var p=a(u,y,x);p&&(d={intersectionPoints:l(p,y),path1Angles:p})}}),d},n[e.pathType.Circle][e.pathType.Arc]=function(y,T,x){var b=n[e.pathType.Arc][e.pathType.Circle](T,y,x,!0);return b?i(b):null},n[e.pathType.Circle][e.pathType.Circle]=function(y,T,x,b){var d=null;return r([y,T],x,b,function(){var u=g(y,T,x);u&&(d={intersectionPoints:l(u[0],y),path1Angles:u[0],path2Angles:u[1]})}),d},n[e.pathType.Circle][e.pathType.Line]=function(y,T,x,b){var d=null;return r([y,T],x,b,function(){var u=c(T,y,x);u&&(d={intersectionPoints:l(u,y),path1Angles:u})}),d},n[e.pathType.Line][e.pathType.Arc]=function(y,T,x){var b=n[e.pathType.Arc][e.pathType.Line](T,y,x,!0);return b?i(b):null},n[e.pathType.Line][e.pathType.Circle]=function(y,T,x){var b=n[e.pathType.Circle][e.pathType.Line](T,y,x,!0);return b?i(b):null},n[e.pathType.Line][e.pathType.Line]=function(y,T,x,b){var d=null;return r([y,T],x,b,function(){var u=e.point.fromSlopeIntersection(y,T,x);u&&e.measure.isBetweenPoints(u,y,x.excludeTangents)&&e.measure.isBetweenPoints(u,T,x.excludeTangents)&&(d={intersectionPoints:[u]})}),d};function r(y,T,x,b){var d=x?[T.path2Offset,T.path1Offset]:[T.path1Offset,T.path2Offset];t.moveTemporary(y,d,b)}function i(y){var T=y.path1Angles;return y.path2Angles?y.path1Angles=y.path2Angles:delete y.path1Angles,T&&(y.path2Angles=T),y}function o(y,T,x){if(x===void 0&&(x={}),y&&T){var b=n[y.type][T.type];if(b)return b(y,T,x)}return null}t.intersection=o;function s(y,T){for(var x=2;x--;)if(y[x]===T)return x}function l(y,T){for(var x=[],b=0;b<y.length;b++)x.push(e.point.fromAngleOnCircle(y[b],T));return x}function a(y,T,x){if(!y)return null;for(var b=[],d=0;d<y.length;d++)e.measure.isBetweenArcAngles(y[d],T,x.excludeTangents)&&b.push(y[d]);return b.length==0?null:b}function c(y,T,x){var b=e.round(T.radius);if(T.radius<=0)return null;var d=new e.paths.Line(e.point.subtract(y.origin,T.origin),e.point.subtract(y.end,T.origin)),u=e.angle.ofLineInDegrees(y),p=u>=180?u-360:u;t.rotate(d,-p,e.point.zero());function f(C){var w=C+p;return e.round(e.angle.noRevolutions(w))}var h=e.round(d.origin[1]),v=Math.abs(h);if(v>b)return null;var m=[];if(v==b){if(x.excludeTangents)return null;m.push(f(h>0?90:270))}else{let C=function(w,E){e.measure.isBetween(e.round(w),e.round(d.origin[0]),e.round(d.end[0]),x.excludeTangents)&&m.push(f(E))};var P=Math.asin(h/b),O=e.angle.toDegrees(P),R=Math.cos(P)*b;C(-R,180-O),C(R,O)}return m.length>0?m:null}function g(y,T,x){if(y.radius<=0||T.radius<=0)return null;if(y.radius==T.radius&&e.measure.isPointEqual(y.origin,T.origin,1e-4))return x.out_AreOverlapped=!0,null;e.point.subtract(e.point.zero(),y.origin);var b=new e.paths.Circle(e.point.zero(),y.radius),d=new e.paths.Circle(e.point.subtract(T.origin,y.origin),T.radius),u=e.angle.ofPointInDegrees(e.point.zero(),d.origin);t.rotate(d,-u,e.point.zero());function p(P){var O=P+u;return e.angle.noRevolutions(O)}var f=d.origin[0];if(e.round(d.radius-f-b.radius)==0)return x.excludeTangents?null:[[p(180)],[p(180)]];if(e.round(d.radius+f-b.radius)==0)return x.excludeTangents?null:[[p(0)],[p(0)]];if(e.round(f-d.radius-b.radius)==0)return x.excludeTangents?null:[[p(0)],[p(180)]];if(e.round(f-d.radius)>b.radius||e.round(f+d.radius)<b.radius||e.round(f-d.radius)<-b.radius)return null;function h(P){return[p(P),p(e.angle.mirror(P,!1,!0))]}var v=e.solvers.solveTriangleSSS(d.radius,b.radius,f),m=e.solvers.solveTriangleSSS(b.radius,f,d.radius);return[h(v),h(180-m)]}})(e.path||(e.path={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n={};n[e.pathType.Arc]=function(u){return["startAngle","endAngle"]},n[e.pathType.Line]=function(u){return["origin","end"]};function r(u){var p=e.point.fromPathEnds(u);if(p){let v=function(m){return{point:p[m],propertyName:f[m]}};var f=null,h=n[u.type];if(h)return f=h(u),[v(0),v(1)]}return null}function i(u,p,f){var h=r(u),v=r(p),m=null;function P(R,C,w){return{path:R,isStart:w==0,propertyName:C[w].propertyName,point:C[w].point,oppositePoint:C[1-w].point}}function O(R,C){return e.measure.isPointEqual(h[R].point,v[C].point,1e-4)?(m=[P(u,h,R),P(p,v,C)],!0):!1}return O(0,0)||O(0,1)||O(1,0)||O(1,1),m}function o(u,p,f,h){for(var v=new e.paths.Circle(p,u),m=0;m<2;m++){var P=t.intersection(v,f[m].path);if(!P)return!1;if(f[m].shardPoint=P.intersectionPoints[0],e.measure.isPointEqual(f[m].point,P.intersectionPoints[0],1e-4))if(P.intersectionPoints.length>1)f[m].shardPoint=P.intersectionPoints[1];else return!1}return!0}function s(u,p){var f=t.clone(u),h=t.breakAtPoint(f,p);return[f,h]}var l={};l[e.pathType.Arc]=function(u,p,f,h,v){var m=u.radius,P=s(u,h)[v?0:1];return P?(e.measure.isArcConcaveTowardsPoint(P,f)?m-=p:m+=p,e.round(m)<=0?null:new e.paths.Arc(u.origin,m,u.startAngle,u.endAngle)):null},l[e.pathType.Line]=function(u,p,f,h,v){return new e.paths.Parallel(u,p,f)};function a(u,p,f){var h=null,v=l[u.path.type];return v&&(h=v(u.path,p,f,u.shardPoint,u.isStart)),h}var c={};c[e.pathType.Arc]=function(u,p,f,h){var v=new e.paths.Line(u.origin,h),m=e.angle.ofLineInDegrees(v),P=m;return e.measure.isArcConcaveTowardsPoint(u,h)||(P+=180),{filletAngle:e.angle.noRevolutions(P),clipPath:function(){u[p]=m}}},c[e.pathType.Line]=function(u,p,f,h){var v=new e.paths.Line([0,0],[0,1]),m=e.angle.ofLineInDegrees(u);t.rotate(v,m,[0,0]),t.moveRelative(v,h);var P=e.point.fromSlopeIntersection(u,v);return P?{filletAngle:e.angle.ofPointInDegrees(h,P),clipPath:function(){u[p]=P}}:null};function g(u,p,f){var h=null,v=c[u.path.type];return v&&(h=v(u.path,u.propertyName,p,f)),T(u,h)||(h=null),h}function y(u,p){var f={filletAngle:e.angle.ofPointInDegrees(p,u.shardPoint),clipPath:function(){u.path[u.propertyName]=u.shardPoint}};return T(u,f)||(f=null),f}function T(u,p){var f=!1;if(p){var h=u.path[u.propertyName];p.clipPath(),e.measure.pathLength(u.path)>0&&(f=!0),u.path[u.propertyName]=h}return f}function x(u){for(var p=0,f=[],h=0;h<u.length;h++){var v=e.measure.pathLength(u[h]);f.push(v),p+=v}return f[0]/p}function b(u,p,f,h){if(e.isPathLine(u)&&e.isPathLine(p)&&f&&f>0){var v={pointMatchingDistance:.005};e.extendObject(v,h);var m=i(u,p);if(m){var P=x([u,p]),O=new e.paths.Line(m[0].oppositePoint,m[1].oppositePoint),R=e.point.middle(O,P),C=e.angle.ofPointInDegrees(m[0].point,R),w=e.point.add(m[0].point,e.point.fromPolar(e.angle.toRadians(C),f));if(!o(f,w,m))return null;for(var E=[],F=0;F<2;F++){var S=y(m[F],w);if(!S)return null;E.push(S)}var A=new e.paths.Arc(w,f,E[0].filletAngle,E[1].filletAngle);return e.round(e.angle.noRevolutions(e.angle.ofArcMiddle(A)))==e.round(C)&&(A.startAngle=E[1].filletAngle,A.endAngle=E[0].filletAngle),E[0].clipPath(),E[1].clipPath(),A}}return null}t.dogbone=b;function d(u,p,f,h){if(u&&p&&f&&f>0){var v={pointMatchingDistance:.005};e.extendObject(v,h);var m=i(u,p);if(m){if(!o(f,m[0].point,m))return null;for(var P=[],O=0;O<2;O++){var R=m[1-O].shardPoint;if(!R)return null;var C=a(m[O],f,R);P.push(C)}var w=t.intersection(P[0],P[1]);if(w){var E;w.intersectionPoints.length==1?E=w.intersectionPoints[0]:E=e.point.closest(m[0].point,w.intersectionPoints);for(var F=[],O=0;O<2;O++){var S=g(m[O],f,E);if(!S)return null;F.push(S)}if(e.round(F[0].filletAngle-F[1].filletAngle)==0)return null;var A=new e.paths.Arc(E,f,F[0].filletAngle,F[1].filletAngle),D=e.angle.ofArcSpan(A);return D==180?null:(D>180&&(A.startAngle=F[1].filletAngle,A.endAngle=F[0].filletAngle),F[0].clipPath(),F[1].clipPath(),A)}}}return null}t.fillet=d})(e.path||(e.path={}))})(MakerJs||(MakerJs={})),(function(e){(function(t){function n(o,s){return i(!1,o,s)}t.dogbone=n;function r(o,s){return i(!0,o,s)}t.fillet=r;function i(o,s,l){var a={paths:{}},c=0,g=s.links;function y(x,b){var d=g[x].walkedPath,u=g[b].walkedPath;d.modelContext===u.modelContext&&d.modelContext.type==e.models.BezierCurve.typeName||e.path.moveTemporary([d.pathContext,u.pathContext],[d.offset,u.offset],function(){var p;if(e.isObject(l)){var f=e.angle.ofChainLinkJoint(g[x],g[b]);if(e.round(f)===0)return;p=f>0?l.left:l.right}else p=l;if(!(!p||p<0)){var h;o?h=e.path.fillet(d.pathContext,u.pathContext,p):h=e.path.dogbone(d.pathContext,u.pathContext,p),h&&(a.paths["fillet"+c]=h,c++)}})}for(var T=1;T<g.length;T++)y(T-1,T);return s.endless&&y(T-1,0),c?a:null}})(e.chain||(e.chain={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(i,o){function s(){return i.apply(this,o)}return s.prototype=i.prototype,new s}t.construct=n;function r(i){var o=[],s=i.metaParameters;if(s)for(var l=0;l<s.length;l++){var a=s[l].value;Array.isArray(a)&&(a=a[0]),o.push(a)}return o}t.getParameterValues=r})(e.kit||(e.kit={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(g,y){return g[0].walkedPath.pathContext===y?g[1]:g[0]}function r(g,y,T){function x(b,d,u){for(;b;){d.links.push(b),d.pathLength+=b.pathLength;var p=b.reversed?0:1,f=b.endPoints[p],h=g.getElementAtPoint(f);if(!h||h.valueIds.length===0)break;var v=h.valueIds.map(function(P){return g.values[P]}),m=n(v,b.walkedPath.pathContext);if(h.valueIds.splice(0,2),!m)break;if(m.walkedPath.pathContext===u.walkedPath.pathContext){d.links.length>1&&(d.endless=!0);break}b=m}}g.forEachPoint(function(b,d,u,p){if(p.valueIds.length>0){var f={links:[],pathLength:0};if(x(d[0],f,d[0]),f.endless)y(f,!1);else{f.links.reverse();var h=f.links[0];f.links.map(function(m){m.reversed=!m.reversed}),f.pathLength-=f.links[f.links.length-1].pathLength;var v=f.links.pop();x(v,f,h),f.links.length>1?y(f,!0):T(f.links[0].walkedPath)}}})}function i(g){var y=null;return s(g,function(T,x,b){y=T[0]},{byLayers:!1}),y}t.findSingleChain=i;function o(g,y){var T=y===g.reversed?1:0;return g.endPoints[T]}function s(g){for(var y=[],T=1;T<arguments.length;T++)y[T-1]=arguments[T];var x,b;switch(y.length){case 1:typeof y[0]=="function"?b=y[0]:x=y[0];break;case 2:b=y[0],x=y[1];break}var d={pointMatchingDistance:.005};e.extendObject(d,x);var u={},p={},f={},h={onPath:function(w){var E=d.byLayers?w.layer:"";u[E]||(u[E]=new e.PointGraph);var F=u[E],S=e.measure.pathLength(w.pathContext);if(w.pathContext.type===e.pathType.Circle||w.pathContext.type===e.pathType.Arc&&e.round(e.angle.ofArcSpan(w.pathContext)-360)===0||w.pathContext.type===e.pathType.BezierSeed&&e.measure.isPointEqual(w.pathContext.origin,w.pathContext.end,d.pointMatchingDistance)){var A={links:[{walkedPath:w,reversed:null,endPoints:null,pathLength:S}],endless:!0,pathLength:S};p[E]||(p[E]=[]),p[E].push(A)}else{if(S<d.pointMatchingDistance/5){f[E]||(f[E]=[]),f[E].push(w);return}for(var D=e.point.fromPathEnds(w.pathContext,w.offset),L=0;L<2;L++){var B={walkedPath:w,endPoints:D,reversed:L!=0,pathLength:S},G=F.insertValue(B);F.insertValueIdAtPoint(G,D[L])}}}};d.shallow&&(h.beforeChildWalk=function(){return!1});var v;d.unifyBeziers&&(v=a(g),c(v,!0,d.pointMatchingDistance)),t.walk(g,h);var m=function(w){var E=u[w];E.mergeNearestSinglePoints(d.pointMatchingDistance),P=[],p[w]||(p[w]=[]),r(E,function(F,S){S?F.endless=e.measure.isPointEqual(o(F.links[0],!0),o(F.links[F.links.length-1],!1),d.pointMatchingDistance):F.endless=!!F.endless,p[w].push(F)},function(F){P.push(F)}),p[w].sort(function(F,S){return S.pathLength-F.pathLength}),d.contain&&(O=e.isObject(d.contain)?d.contain:{alternateDirection:!1},R=l(p[w],O),p[w]=R),b&&b(p[w],P,w,f[w])},P,O,R;for(var C in u)m(C);return v&&c(v,!1,d.pointMatchingDistance),d.byLayers?p:p[""]}t.findChains=s;function l(g,y){var T=g.map(function(d){return e.chain.toNewModel(d)}),x=[];g.forEach(function(d,u){if(d.endless){var p=d.links[0].walkedPath,f=e.path.clone(p.pathContext,p.offset);g.forEach(function(h,v){d!==h&&h.endless&&e.measure.isPointInsideModel(e.point.middle(f),T[v])&&(x[u]=h)})}});var b=[];if(g.forEach(function(d,u){var p=x[u];p?(p.contains||(p.contains=[]),p.contains.push(d)):b.push(d)}),y.alternateDirection){let d=function(u,p){u.forEach(function(f,h){var v=e.measure.isChainClockwise(f);v!==null&&(!v&&p||v&&!p)&&e.chain.reverse(f),f.contains&&d(f.contains,!p)})};d(b,!0)}return b}function a(g){var y=[];function T(d){d.childModel.type===e.models.BezierCurve.typeName&&y.push(d)}var x={beforeChildWalk:function(d){return T(d),!0}},b={childId:"",childModel:g,layer:g.layer,offset:g.origin,parentModel:null,route:[],routeKey:""};return T(b),t.walk(g,x),y}function c(g,y,T){var x="tempPaths",b="tempLayer";g.forEach(function(d){var u=d.childModel;if(y){d.layer!=null&&d.layer!==""&&(u[b]=u.layer,u.layer=d.layer);var p=e.models.BezierCurve.getBezierSeeds(u,{byLayers:!0,pointMatchingDistance:T});for(var f in p){var h=p[f];if(h.length>0){u[x]=u.paths;var v={};h.forEach(function(m,P){m.layer=f,v["seed_"+P]=m}),u.paths=v}}}else x in u&&(u.paths=u[x],delete u[x]),b in u&&(u[b]==null?delete u.layer:u.layer=u[b],delete u[b])})}})(e.model||(e.model={}))})(MakerJs||(MakerJs={})),(function(e){(function(t){function n(c,g){if(g===void 0&&(g=1),!!c.endless){for(var y=Math.abs(g),T=0;T<y;T++)g<0?c.links.push(c.links.shift()):c.links.unshift(c.links.pop());return c}}t.cycle=n;function r(c){return c.links.reverse(),c.links.forEach(function(g){return g.reversed=!g.reversed}),c}t.reverse=r;function i(c,g){if(c.endless){for(var y=-1,T=0;T<c.links.length;T++)if(c.links[T].walkedPath.routeKey==g){y=T;break}return y>0&&n(c,y),c}}t.startAt=i;function o(c,g){g===void 0&&(g=!1);for(var y={paths:{}},T=0;T<c.links.length;T++){var x=c.links[T].walkedPath;if(x.pathContext.type===e.pathType.BezierSeed){g&&delete x.modelContext.paths[x.pathId],y.models||(y.models={});var b=e.model.getSimilarModelId(y,x.pathId);y.models[b]=e.model.moveRelative(new e.models.BezierCurve(x.pathContext),x.offset)}else{var d;g?(d=x.pathContext,delete x.modelContext.paths[x.pathId]):d=e.path.clone(x.pathContext);var u=e.model.getSimilarPathId(y,x.pathId);y.paths[u]=e.path.moveRelative(d,x.offset)}}return y}t.toNewModel=o;function s(c,g){!c||g.length<2||e.measure.isPointEqual(g[0],g[g.length-1],1e-5)&&g.pop()}function l(c,g,y){var T=[],x=0,b=0,d;Array.isArray(g)&&(d=g);for(var u=0;u<c.links.length;u++){for(var p=c.links[u],f=p.walkedPath,h=p.pathLength;e.round(h-b)>0;){var v=b/h;if(p.reversed&&(v=1-v),T.push(e.point.add(e.point.middle(f.pathContext,v),f.offset)),y&&T.length>=y)return T;var m;if(d){if(m=d[x],x++,x>d.length)return T}else m=g;b+=m}b-=h}return s(c.endless,T),T}t.toPoints=l;function a(c,g){for(var y=[],T=0;T<c.links.length;T++){var x=c.links[T],b=x.walkedPath,d=e.path.toKeyPoints(b.pathContext,g);if(d.length>0){x.reversed&&d.reverse(),T>0&&d.shift();var u=d.map(function(p){return e.point.add(p,b.offset)});y.push.apply(y,u)}}return s(c.endless,y),y}t.toKeyPoints=a})(e.chain||(e.chain={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function i(o,s){this.modelContext=o,this.options=s,this.pointMap=new e.PointGraph,this.list=[],this.removed=[],this.ordinals={},this.load()}return i.prototype.load=function(){var o=this,s={onPath:function(l){var a=e.point.fromPathEnds(l.pathContext,l.offset);if(a){var c=l;c.endPoints=a;for(var g=o.pointMap.insertValue(c),y=2;y--;)o.pointMap.insertValueIdAtPoint(g,a[y])}}};t.walk(this.modelContext,s),this.options.pointMatchingDistance&&this.pointMap.mergePoints(this.options.pointMatchingDistance)},i.prototype.findDeadEnds=function(){var o=this,s=0;this.pointMap.forEachPoint(function(c,g,y,T){o.ordinals[y]=s++,o.list.push(T)}),s=0;for(var l=function(){var c=a.list[s];c.valueIds.length===1?a.removePath(c,c.valueIds[0],s):a.options.keep&&c.valueIds.length%2&&c.valueIds.forEach(function(g){var y=o.pointMap.values[g];o.options.keep(y)||o.removePath(c,g,s)}),s++},a=this;s<this.list.length;)l();return this.removed},i.prototype.removePath=function(o,s,l){var a=this.pointMap.values[s],c=this.getOtherPointId(a.endPoints,o.pointId),g=this.pointMap.index[c];this.removed.push(a),this.removeValue(o,s),this.removeValue(g,s),g.valueIds.length>0&&this.appendQueue(g,l)},i.prototype.removeValue=function(o,s){var l=o.valueIds.indexOf(s);l>=0&&o.valueIds.splice(l,1)},i.prototype.appendQueue=function(o,s){var l=this.ordinals[o.pointId];l<s&&(this.list[l]=null,this.list.push(o),this.ordinals[o.pointId]=this.list.length)},i.prototype.getOtherPointId=function(o,s){for(var l=0;l<o.length;l++){var a=this.pointMap.getIdOfPoint(o[l]);if(s!==a)return a}},i})();function r(i,o,s,l){var a={pointMatchingDistance:o||.005,keep:s},c=new n(i,a),g=c.findDeadEnds();return g.length<c.pointMap.values.length&&g.forEach(function(y){l(y,"dead end"),delete y.modelContext.paths[y.pathId]}),i}t.removeDeadEnds=r})(e.model||(e.model={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o){this.name=i,this.attrs=o,this.innerText=""}return r.escapeString=function(i){var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};for(var s in o)i=i.split(s).join(o[s]);return i},r.prototype.getOpeningTag=function(i){var o="";function s(a,c){c==null||typeof c>"u"||((Array.isArray(c)||typeof c=="object")&&(c=JSON.stringify(c)),typeof c=="string"&&(c=r.escapeString(c)),o+=" "+a+'="'+c+'"')}for(var l in this.attrs)s(l,this.attrs[l]);return"<"+this.name+o+(i?"/":"")+">"},r.prototype.getInnerText=function(){return this.innerTextEscaped?this.innerText:r.escapeString(this.innerText)},r.prototype.getClosingTag=function(){return"</"+this.name+">"},r.prototype.toString=function(){var i=!this.innerText;return i&&!this.closingTags?this.getOpeningTag(!0):this.getOpeningTag(!1)+this.getInnerText()+this.getClosingTag()},r})();t.XmlTag=n})(e.exporter||(e.exporter={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(T,x,b){return T+"("+x+")"}function r(T,x){if(x){var b=new e.paths.Circle([0,0],T.radius),d=e.measure.pathLength(b);if(d)return Math.ceil(d/x)}}function i(T,x,b){var d="",u="",p=!0,f=!1,h=!1,v={};v[e.pathType.Circle]=function(E,F){var S={center:e.point.rounded(e.point.add(E.origin,F.walkedPath.offset),b),radius:e.round(E.radius,b),resolution:r(E,x)};d=n("CAG.circle",JSON.stringify(S)),f=!0},v[e.pathType.Line]=function(E,F){var S=F.endPoints.map(function(A){return e.point.rounded(A,b)});F.reversed&&S.reverse(),d=n("new CSG.Path2D",JSON.stringify(S))},v[e.pathType.Arc]=function(E,F){var S=e.angle.ofArcEnd(E);F.reversed&&(h=!0);var A={center:e.point.rounded(e.point.add(E.origin,F.walkedPath.offset),b),radius:e.round(E.radius,b),startangle:e.round(E.startAngle,b),endangle:e.round(S,b),resolution:r(E,x)};d=n("new CSG.Path2D.arc",JSON.stringify(A))};var m={};m[e.pathType.Line]=function(E,F){var S=h!=F.reversed,A=e.point.rounded(F.endPoints[S?0:1],b);P(n(".appendPoint",JSON.stringify(A)))},m[e.pathType.Arc]=function(E,F){var S=h!=F.reversed,A=e.angle.ofArcEnd(E),D={radius:e.round(E.radius,b),clockwise:S,large:Math.abs(A-E.startAngle)>180,resolution:r(E,x)},L=e.point.rounded(F.endPoints[S?0:1],b);P(n(".appendArc",JSON.stringify(L)+","+JSON.stringify(D)))};function P(E){h?u=E+u:u+=E}for(var O=0;O<T.links.length;O++){var R=T.links[O],C=R.walkedPath.pathContext,w=p?v[C.type]:m[C.type];if(w&&w(C,R),f)return d;p=!1}return d+u+".close().innerToCAG()"}function o(T,x,b){return function(u){T&&T({progress:x+u.progress*b/100})}}function s(T,x,b){function d(f,h){var v=e.chain.toKeyPoints(f,h);return v.push(v[0]),T.fromPoints(v)}function u(f,h){return f.union(h)}function p(f,h){return f.subtract(h)}return l(d,u,p,x,b)}t.toJscadCAG=s;function l(T,x,b,d,u){u===void 0&&(u={});var p={},f={total:0,complete:0};function h(F,S,A){var D=A.shift();return A.forEach(function(L){return D=x(D,L)}),f.complete++,u.statusCallback&&u.statusCallback({progress:F+S*f.complete/f.total}),D}function v(F,S){var A=[];return S.forEach(function(D){D.endless&&(D.contains&&m(F,D.contains),f.total++,A.unshift(T(D,u.maxArcFacet)))}),A}function m(F,S){S.forEach(function(A){if(A.endless){var D={cag:T(A,u.maxArcFacet),subtracts:[]};if(A.contains){var L=v(F,A.contains);L.length>0&&D.subtracts.push(L)}f.total++,F in p||(p[F]=[]),p[F].unshift(D)}})}var P={pointMatchingDistance:u.pointMatchingDistance,byLayers:u.byLayers,contain:!0};u.statusCallback&&u.statusCallback({progress:25});var O=e.model.findChains(d,P);if(Array.isArray(O))m("",O);else for(var R in O)m(R,O[R]);u.statusCallback&&u.statusCallback({progress:50});var C=0;for(var R in p)C+=p[R].length;if(C===0)throw u.statusCallback&&u.statusCallback({progress:100}),"No closed geometries found.";var w={};for(var R in p){var E=p[R].map(function(S){var A=S.cag;return S.subtracts.forEach(function(D){var L=h(50,50,D);A=b(A,L)}),A});w[R]=h(50,50,E)}return u.statusCallback&&u.statusCallback({progress:100}),P.byLayers?w:w[""]}function a(T,x,b){function d(f){return s(T,x,f)}function u(f,h,v){var m=f.extrude({offset:[0,0,h]});return v&&(m=m.translate([0,0,v])),m}function p(f,h){return f.union(h)}return c(d,u,p,x,b)}t.toJscadCSG=a;function c(T,x,b,d,u){u===void 0&&(u={});var p=u.statusCallback;function f(w,E){return e.isNumber(w)?w:E}d.exporterOptions&&e.extendObject(u,d.exporterOptions.toJscadCSG),u.byLayers=u.byLayers||u.layerOptions&&!0,u.statusCallback=o(p,0,50);var h=T(u),v=[];if(u.byLayers)for(var m in h){var P=u.layerOptions[m],O=x(h[m],P.extrude||u.extrude,f(P.z,u.z));v.push(O)}else{var O=x(h,u.extrude,u.z);v.push(O)}u.statusCallback=o(p,50,100);var R={total:v.length-1,complete:0},C=v.shift();return v.forEach(function(w,E){C=b(C,w),R.complete++,u.statusCallback({progress:R.complete/R.total})}),C}function g(T,x){x===void 0&&(x={});function b(O,R){return h(i(O,R,x.accuracy))}function d(O,R){return O+".union(".concat(R,")")}function u(O,R){return O+".subtract(".concat(R,")")}function p(O){return l(b,d,u,T,x)}function f(O,R,C){var w=O+".extrude({ offset: [0, 0, ".concat(R,"] })");return C&&(w=w+".translate([0, 0, ".concat(C,"])")),w}function h(O){return"".concat(m).concat(v).concat(O).concat(m)}var v=new Array((x.indent||0)+1).join(" "),m=x.indent?`
`:"",P=c(p,f,d,T,x).trim();return"function ".concat(x.functionName||"main","(){").concat(h("return ".concat(P,";")),"}").concat(m)}t.toJscadScript=g;function y(T,x,b,d){var u=d.statusCallback;d.statusCallback=o(u,0,50);var p=a(T,b,d);return x.serialize(p,{binary:!1,statusCallback:o(u,50,50)})}t.toJscadSTL=y})(e.exporter||(e.exporter={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(r,i,o){if(i){var s={fontName:"Courier",fontSize:9,origin:[0,0],stroke:"#000"};e.extendObject(s,o);var l=1,a=s.units||i.units;a?l=e.units.conversionScale(a,e.unitType.Inch):l=1/100,l*=72;var c=e.model.scale(e.cloneObject(i),l),g=e.measure.modelExtents(c),y=-g.low[0],T=[y,g.high[1]];T=e.point.add(T,s.origin),e.model.findChains(c,function(x,b,d){function u(p){var f=t.pathToSVGPathData(p.pathContext,p.offset,T);r.path(f).stroke(s.stroke)}x.map(function(p){if(p.links.length>1){var f=t.chainToSVGPathData(p,T);r.path(f).stroke(s.stroke)}else{var h=p.links[0].walkedPath;if(h.pathContext.type===e.pathType.Circle){var v;e.path.moveTemporary([h.pathContext],[h.offset],function(){v=e.path.mirror(h.pathContext,!1,!0)}),e.path.moveRelative(v,T),r.circle(v.origin[0],v.origin[1],h.pathContext.radius).stroke(s.stroke)}else u(h)}}),b.map(u)},{byLayers:!1}),r.font(s.fontName).fontSize(s.fontSize),e.model.getAllCaptionsOffset(c).forEach(function(x){var b=e.angle.ofLineInDegrees(x.anchor),d=e.path.mirror(x.anchor,!1,!0);e.path.moveRelative(d,T);var u=x.text,p=[r.widthOfString(u)/2,r.heightOfString(u)/2],f=e.point.middle(d),h=e.point.subtract(f,p);r.rotate(-b,{origin:f}),r.text(u,h[0],h[1]),r.rotate(b,{origin:f})})}}t.toPDF=n})(e.exporter||(e.exporter={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n={};n[e.pathType.Arc]=function(d,u,p,f,h){f.push("A"),b(f,d.radius,u,h,e.angle.ofArcSpan(d)>180,p?d.startAngle>d.endAngle:d.startAngle<d.endAngle)},n[e.pathType.Line]=function(d,u,p,f,h){f.push("L",e.round(u[0],h),e.round(u[1],h))},n[e.pathType.BezierSeed]=function(d,u,p,f,h){x(f,d,h,p)};function r(d){return e.point.mirror(d,!1,!0)}function i(d){var u=e.angle.ofArcSpan(d);d.startAngle=e.angle.noRevolutions(d.startAngle),d.endAngle=d.startAngle+u}function o(d,u,p){function f(E){return e.point.add(E,u)}for(var h=d.links[0],v=f(r(h.endPoints[h.reversed?1:0])),m=["M",e.round(v[0],p),e.round(v[1],p)],P=0;P<d.links.length;P++){var O=d.links[P],R=O.walkedPath.pathContext,C=n[R.type];if(C){var w;e.path.moveTemporary([R],[O.walkedPath.offset],function(){w=e.path.mirror(R,!1,!0)}),e.path.moveRelative(w,u),C(w,f(r(O.endPoints[O.reversed?0:1])),O.reversed,m,p)}}return d.endless&&m.push("Z"),m.join(" ")}t.chainToSVGPathData=o;function s(d,u,p){return["M",e.round(d[0],p),e.round(d[1],p)].concat(u)}var l={};l[e.pathType.Line]=function(d,u){return s(d.origin,e.point.rounded(d.end,u),u)},l[e.pathType.Circle]=function(d,u,p){return s(d.origin,T(d.radius,u,p),u)},l[e.pathType.Arc]=function(d,u){i(d);var p=e.point.fromArc(d);if(e.measure.isPointEqual(p[0],p[1]))return l[e.pathType.Circle](d,u);var f=["A"];return b(f,d.radius,p[1],u,e.angle.ofArcSpan(d)>180,d.startAngle>d.endAngle),s(p[0],f,u)},l[e.pathType.BezierSeed]=function(d,u){var p=[];return x(p,d,u),s(d.origin,p,u)};function a(d,u,p,f,h){var v=l[d.type];if(v){var m;e.path.moveTemporary([d],[u],function(){m=e.path.mirror(d,!1,!0)}),e.path.moveRelative(m,p);var P=v(m,f,h);return P.join(" ")}return""}t.pathToSVGPathData=a;function c(d,u,p,f){var h={};return p.unifyBeziers=!0,e.model.findChains(d,function(v,m,P){function O(C,w){var E=a(C.pathContext,C.offset,u,f,w);h[P].push(E)}h[P]=[];function R(C,w){C.forEach(function(E){if(E.links.length>1){var F=o(E,u,f);h[P].push(F)}else O(E.links[0].walkedPath,w);E.contains&&R(E.contains,!w)})}R(v,!0),m.forEach(function(C){return O(C)})},p),h}function g(d){for(var u=[],p=1;p<arguments.length;p++)u[p-1]=arguments[p];var f={fillRule:"evenodd"};typeof u[0]=="boolean"?(f.byLayers=u[0],f.origin=u[1],f.accuracy=u[2]):e.isObject(u[0])&&e.extendObject(f,u[0]);var h={byLayers:f.byLayers,contain:!1};f.fillRule==="nonzero"&&(h.contain={alternateDirection:!0});var v=e.measure.modelExtents(d);f.origin||(f.origin=[-v.low[0],v.high[1]]);var m=c(d,f.origin,h,f.accuracy),P={};for(var O in m)P[O]=m[O].join(" ");return h.byLayers?P:P[""]}t.toSVGPathData=g;function y(d,u){function p(Y,Q,ne){ne===void 0&&(ne=!1),!ne&&typeof Q=="string"&&Q.length>0?(Q in F||(F[Q]=[]),F[Q].push(Y)):E.push(Y)}function f(Y){var Q=[];function ne(fe,ve){ve!==void 0&&Q.push(fe+":"+ve)}return ne("stroke",Y.stroke),ne("stroke-width",Y.strokeWidth),ne("fill",Y.fill),Q.join(";")}function h(Y,Q){Q&&e.extendObject(Y,{stroke:Q.stroke,"stroke-width":Q.strokeWidth,fill:Q.fill,style:Q.cssStyle||f(Q),class:Q.className})}function v(Y){if(R.layerOptions&&R.layerOptions[Y])return R.layerOptions[Y];if(Y in t.colors)return{stroke:Y}}function m(Y,Q,ne,fe,ve){fe===void 0&&(fe=null),ve===void 0&&(ve=!1),Y!=="text"&&h(Q,v(ne)),R.scalingStroke||(Q["vector-effect"]="non-scaling-stroke");var me=new t.XmlTag(Y,Q);me.closingTags=R.closingTags,fe&&(me.innerText=fe),p(me.toString(),ne,ve)}function P(Y){var Q=r(Y);return e.point.scale(Q,R.scale)}function O(Y,Q){var ne=e.path.mirror(Y,!1,!0);return e.path.moveRelative(e.path.scale(ne,R.scale),Q)}var R={accuracy:.001,annotate:!1,origin:null,scale:1,stroke:"#000",strokeLineCap:"round",strokeWidth:"0.25mm",fill:"none",fillRule:"evenodd",fontSize:"9pt",useSvgPathOnly:!0,viewBox:!0};e.extendObject(R,u);var C,w=e.isModel(d);w&&(C=d,C.exporterOptions&&e.extendObject(R,C.exporterOptions.toSVG));var E=[],F={};if(w)C=d;else if(Array.isArray(d)){var S={};d.forEach(function(Y,Q){S[Q]=Y}),C={paths:S}}else e.isPath(d)&&(C={paths:{modelToMeasure:d}});var A=e.measure.modelExtents(C),D=e.model.getAllCaptionsOffset(C);if(D.forEach(function(Y){e.measure.increase(A,e.measure.pathExtents(Y.anchor),!0)}),!R.units){var L=t.tryGetModelUnits(d);L&&(R.units=L)}var B=t.svgUnit[R.units];if(B&&R.viewBox&&(R.scale*=B.scaleConversion),A&&!R.origin){var G=-A.low[0]*R.scale;R.origin=[G,A.high[1]*R.scale]}e.extendObject(u,R);var _={};if(A&&R.viewBox){var q=e.round(A.width*R.scale,R.accuracy),V=e.round(A.height*R.scale,R.accuracy),U=[0,0,q,V],I=B?B.svgUnitType:"";_={width:q+I,height:V+I,viewBox:U.join(" ")}}_.xmlns="http://www.w3.org/2000/svg";var z=new t.XmlTag("svg",e.extendObject(_,R.svgAttrs));p(z.getOpeningTag(!1));var N={id:"svgGroup","stroke-linecap":R.strokeLineCap,"fill-rule":R.fillRule,"font-size":R.fontSize};h(N,R);var j=new t.XmlTag("g",N);if(p(j.getOpeningTag(!1)),R.useSvgPathOnly){var H={byLayers:!0};R.fillRule==="nonzero"&&(H.contain={alternateDirection:!0});var X=c(C,R.origin,H,R.accuracy);for(var k in X){var Z=X[k].join(" "),oe={d:Z};k.length>0&&(oe.id=k),m("path",oe,k,null,!0)}}else{let Y=function(K,W,J){m("text",{id:K+"_text",x:e.round(W[0],R.accuracy),y:e.round(W[1],R.accuracy)},J,K)},Q=function(K,W,J,he,se,ue,pe,M,ge){m("path",{id:K,"data-route":ue,d:["M",e.round(W,R.accuracy),e.round(J,R.accuracy)].concat(he).join(" ")},se),M&&Y(K,pe,se)},ne=function(K,W,J,he,se,ue,pe){var M=T(J,R.accuracy);Q(K,W[0],W[1],M,he,se,W,ue)},fe=function(K,W,J,he,se){var ue="flow";ee[e.pathType.Circle]("",new e.paths.Circle(J,K.size/2),W,ue,null,!1,null);var pe=[-1*K.size,K.size/2],M=[pe,e.point.mirror(pe,!1,!0)].map(function(ge){return new e.paths.Line(e.point.add(e.point.rotate(ge,se),he),he)});M.forEach(function(ge){return ee[e.pathType.Line]("",ge,W,ue,null,!1,null)})},ve=function(K,W){ae.attrs={id:K},p(ae.getOpeningTag(!1),W.layer)},me=function(K){p(ae.getClosingTag(),K.layer)};var ee={};ee[e.pathType.Line]=function(K,W,J,he,se,ue,pe){var M=W.origin,ge=W.end;m("line",{id:K,class:he,"data-route":se,x1:e.round(M[0],R.accuracy),y1:e.round(M[1],R.accuracy),x2:e.round(ge[0],R.accuracy),y2:e.round(ge[1],R.accuracy)},J),ue&&Y(K,e.point.middle(W),J),pe&&fe(pe,J,W.origin,W.end,e.angle.ofLineInDegrees(W))},ee[e.pathType.Circle]=function(K,W,J,he,se,ue,pe){var M=W.origin;m("circle",{id:K,class:he,"data-route":se,r:W.radius,cx:e.round(M[0],R.accuracy),cy:e.round(M[1],R.accuracy)},J),ue&&Y(K,M,J)},ee[e.pathType.Arc]=function(K,W,J,he,se,ue,pe){i(W);var M=e.point.fromArc(W);if(e.measure.isPointEqual(M[0],M[1]))ne(K,W.origin,W.radius,J,se,ue);else{var ge=["A"];b(ge,W.radius,M[1],R.accuracy,e.angle.ofArcSpan(W)>180,W.startAngle>W.endAngle),Q(K,M[0][0],M[0][1],ge,J,se,e.point.middle(W),ue),pe&&fe(pe,J,M[1],M[0],e.angle.noRevolutions(W.startAngle-90))}},ee[e.pathType.BezierSeed]=function(K,W,J,he,se,ue,pe){var M=[];x(M,W,R.accuracy),Q(K,W.origin[0],W.origin[1],M,J,se,e.point.middle(W),ue)};var ae=new t.XmlTag("g"),te={beforeChildWalk:function(K){return ve(K.childId,K.childModel),!0},onPath:function(K){var W=ee[K.pathContext.type];if(W){var J=e.point.add(P(K.offset),R.origin);W(K.pathId,O(K.pathContext,J),K.layer,null,K.route,R.annotate,R.flow)}},afterChildWalk:function(K){me(K.childModel)}};ve("0",C),e.model.walk(C,te);for(var re in F){var le=new t.XmlTag("g",{id:re});h(le.attrs,v(re));for(var de=0;de<F[re].length;de++)le.innerText+=F[re][de];le.innerTextEscaped=!0,p(le.toString())}me(C)}var ie=D.map(function(Y){var Q=O(Y.anchor,R.origin),ne=e.point.rounded(e.point.middle(Q),R.accuracy),fe=new t.XmlTag("text",{"alignment-baseline":"middle","text-anchor":"middle",transform:"rotate(".concat(e.angle.ofLineInDegrees(Q),",").concat(ne[0],",").concat(ne[1],")"),x:ne[0],y:ne[1]});return h(fe.attrs,v(Y.layer)),fe.innerText=Y.text,fe.toString()});if(ie.length){var ce=new t.XmlTag("g",{id:"captions"});h(ce.attrs,v(ce.attrs.id)),ce.innerText=ie.join(""),ce.innerTextEscaped=!0,p(ce.toString())}return p(j.getClosingTag()),p(z.getClosingTag()),E.join("")}t.toSVG=y;function T(d,u,p){var f=e.round(d,u),h=["m",-f,0];function v(m){h.push("a"),b(h,f,[2*f*m,0],u,!1,!p)}return v(1),v(-1),h.push("z"),h}function x(d,u,p,f){if(u.controls.length===1)d.push("Q",e.round(u.controls[0][0],p),e.round(u.controls[0][1],p));else{var h=f?[u.controls[1],u.controls[0]]:u.controls;d.push("C",e.round(h[0][0],p),e.round(h[0][1],p),e.round(h[1][0],p),e.round(h[1][1],p))}var v=f?u.origin:u.end;d.push(e.round(v[0],p),e.round(v[1],p))}function b(d,u,p,f,h,v){var m=e.round(u,f),P=p;d.push(m,m),d.push(0),d.push(h?1:0),d.push(v?0:1),d.push(e.round(P[0],f),e.round(P[1],f))}t.svgUnit={},t.svgUnit[e.unitType.Inch]={svgUnitType:"in",scaleConversion:1},t.svgUnit[e.unitType.Millimeter]={svgUnitType:"mm",scaleConversion:1},t.svgUnit[e.unitType.Centimeter]={svgUnitType:"cm",scaleConversion:1},t.svgUnit[e.unitType.Foot]={svgUnitType:"in",scaleConversion:12},t.svgUnit[e.unitType.Meter]={svgUnitType:"cm",scaleConversion:100}})(e.exporter||(e.exporter={}))})(MakerJs||(MakerJs={})),(function(e){(function(t){function n(r,i){i===void 0&&(i={});var o={};function s(m){o.paths||(o.paths={}),o.paths["p_"+ ++x]=m}function l(m){o.models||(o.models={}),o.models["p_"+ ++x]=m}function a(m,P,O){P===void 0&&(P=0),O===void 0&&(O=m.from),P<0&&(P=P+m.data.length);var R=e.point.mirror([m.data[0+P],m.data[1+P]],!1,!0);return m.absolute?R:e.point.add(R,O)}function c(m,P){return e.measure.isPointEqual(m.from,P)||s(new e.paths.Line(m.from,P)),P}var g={};g.M=function(m){if(y=a(m),m.data.length>2){m.from=y;for(var P=2;P<m.data.length;P=P+2)m.from=c(m,a(m,P));return m.from}else return y},g.Z=function(m){return c(m,y)},g.H=function(m){var P=e.point.clone(m.from);return m.absolute?P[0]=m.data[0]:P[0]+=m.data[0],c(m,P)},g.V=function(m){var P=e.point.clone(m.from);return m.absolute?P[1]=-m.data[0]:P[1]-=m.data[0],c(m,P)},g.L=function(m){for(var P,O=0;O<m.data.length;O=O+2)P=a(m,O),m.from=c(m,P);return m.from},g.A=function(m){for(var P,O,R,C,w,E,F,S,A,D,L,B=0;B<m.data.length;B=B+7)P=m.data[0+B],O=m.data[1+B],R=m.data[2+B],C=m.data[3+B]===1,w=m.data[4+B]===1,E=a(m,5+B),F=P!==O,S=new e.paths.Line(m.from,e.point.rotate(E,R,m.from)),F&&(S=e.path.distort(S,1,P/O)),A=new e.paths.Arc(S.origin,S.end,P,C,w),F?(P<A.radius&&(D=A.radius/P,P*=D,O*=D),L=new e.models.EllipticArc(A,1,O/P,i.bezierAccuracy),e.model.rotate(L,-R,m.from),l(L)):(e.path.rotate(A,-R,m.from),s(A)),m.from=E;return E},g.C=function(m){for(var P,O,R=m.from,C,w=0;w<m.data.length;w=w+6)m.from=R,P=a(m,0+w,R),O=a(m,2+w,R),C=a(m,4+w,R),l(new e.models.BezierCurve(R,P,O,C,i.bezierAccuracy)),R=C;return C},g.S=function(m){var P,O,R,C=m.from,w;m.prev.command==="C"||m.prev.command==="S"?O=a(m.prev,-4):O=m.from;for(var E=0;E<m.data.length;E=E+4)m.from=C,P=e.point.rotate(O,180,C),R=a(m,0+E),w=a(m,2+E),l(new e.models.BezierCurve(C,P,R,w,i.bezierAccuracy)),C=w,O=R;return w},g.Q=function(m){for(var P,O=m.from,R,C=0;C<m.data.length;C=C+4)m.from=O,P=a(m,0+C),R=a(m,2+C),l(new e.models.BezierCurve(O,P,R,i.bezierAccuracy)),O=R;return R},g.T=function(m){var P,O,R;m.prev.command==="Q"?(O=a(m.prev,-4),P=e.point.rotate(O,180,m.from)):m.prev.command==="T"?(m.prev.absolute=!0,P=a(m.prev,-2)):P=m.from;for(var C=0;C<m.data.length;C=C+2)R=a(m,0+C),l(new e.models.BezierCurve(m.from,P,R,i.bezierAccuracy)),m.from=R,P=e.point.rotate(P,180,m.from);var w=e.point.mirror(P,!1,!0);return m.data.push.apply(m.data,w),R};for(var y=[0,0],T=[0,0],x=0,b,d=/([achlmqstvz])([0-9e\.,\+-\s]*)/ig,u;(u=d.exec(r))!==null;){u.index===d.lastIndex&&d.lastIndex++;var p=u[1],f=u[2],h={command:p.toUpperCase(),data:[],from:T,prev:b};p===h.command&&(h.absolute=!0),h.data=t.parseNumericList(f);var v=g[h.command];v&&(T=v(h)),b=h}return o}t.fromSVGPathData=n})(e.importer||(e.importer={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(p,f){var h=new e.measure.Atlas(p),v=e.measure.modelExtents(p,h),m=v.high[1],P=[],O={},R={beforeChildWalk:function(A){var D=A.childModel,L=h.modelMap[A.routeKey];if(L){var B=e.measure.augment(L);e.model.originate(D,[B.center[0],m*f]);var G=D.origin[0]-v.low[0];O[A.childId]=G;var _=G/v.width;return P.push({childId:A.childId,xRatio:_}),!1}}};e.model.walk(p,R),P.sort(function(A,D){return A.xRatio-D.xRatio});var C=P[0],w=P[P.length-1];if(P.length>1){var E=C.xRatio,F=w.xRatio,S=F-E;P.forEach(function(A){return A.xRatio=(A.xRatio-E)/S})}return{cpa:P,firstX:O[C.childId],lastX:v.width-O[w.childId]}}function r(p,f,h){f.forEach(function(v){var m=p.models[v.childId];m.origin=v.origin,h&&e.model.rotate(m,v.angle,v.origin)})}var i={};i[e.pathType.Arc]=function(p,f,h){var v=e.angle.ofArcSpan(p);h.forEach(function(m){return m.angle=f?p.endAngle-m.xRatio*v-90:p.startAngle+m.xRatio*v+90})},i[e.pathType.Line]=function(p,f,h){var v=e.angle.ofLineInDegrees(p);h.forEach(function(m){return m.angle=v})};function o(p,f,h,v,m,P){h===void 0&&(h=0),v===void 0&&(v=!1),m===void 0&&(m=!1),P===void 0&&(P=!0);var O=n(p,h),R=O.cpa,C=f;if(m&&R.length>1){var w=e.measure.pathLength(f);O.firstX+O.lastX<w&&(C=e.path.clone(f),e.path.alterLength(C,-O.firstX,!0),e.path.alterLength(C,-O.lastX))}R.forEach(function(F){return F.origin=e.point.middle(C,v?1-F.xRatio:F.xRatio)});var E=i[C.type];return E&&E(C,v,R),r(p,R,P),p}t.childrenOnPath=o;function s(p,f){var h=new e.paths.Arc([0,0],0,0,0);return p.map(function(v,m){var P;return m===0?P=e.angle.ofPointInDegrees(v,p[m+1])+90:m===p.length-1?P=e.angle.ofPointInDegrees(p[m-1],v)+90:(h.origin=v,h.startAngle=e.angle.ofPointInDegrees(v,p[m+1]),h.endAngle=e.angle.ofPointInDegrees(v,p[m-1]),P=e.angle.ofArcMiddle(h)),P+f})}function l(p,f,h,v,m,P){h===void 0&&(h=0),v===void 0&&(v=!1),m===void 0&&(m=!1),P===void 0&&(P=!0);var O=n(p,h),R=O.cpa,C=f.pathLength,w;if(R.length>1){m&&(C-=O.firstX+O.lastX);var E=R.map(function(D){return(v?1-D.xRatio:D.xRatio)*C}),F;if(v&&E.reverse(),F=E.map(function(D,L){return Math.abs(D-(L==0?0:E[L-1]))}),m?F[0]+=v?O.lastX:O.firstX:F.shift(),w=e.chain.toPoints(f,F),w.length<R.length){var S=f.links[f.links.length-1];w.push(S.endPoints[S.reversed?0:1])}m&&w.shift()}else w=e.chain.toPoints(f,.5*C),w.length=2,w.push(f.links[f.links.length-1].endPoints[f.links[f.links.length-1].reversed?0:1]);v&&w.reverse();var A=s(w,-90);return R.length>1?R.forEach(function(D,L){D.angle=A[L],D.origin=w[L]}):(R[0].angle=A[1],R[0].origin=w[1]),r(p,R,P),p}t.childrenOnChain=l;function a(p,f,h,v){var m={},P,O;e.isModel(p)?(P=m.models={},O=e.model.rotate):(P=m.paths={},O=e.path.rotate);for(var R=0;R<f;R++)P[R]=O(e.cloneObject(p),R*h,v);return m}t.cloneToRadial=a;function c(p,f,h,v){var m={},P,O,R;e.isModel(f)?(O=e.measure.modelExtents,P=m.models={},R=e.model.move):(O=e.measure.pathExtents,P=m.paths={},R=e.path.move);for(var C=O(f),w=C.high[p]-C.low[p],E=0;E<h;E++){var F=[0,0];F[p]=E*(w+v),P[E]=R(e.cloneObject(f),F)}return m}function g(p,f,h){return h===void 0&&(h=0),c(1,p,f,h)}t.cloneToColumn=g;function y(p,f,h){return h===void 0&&(h=0),c(0,p,f,h)}t.cloneToRow=y;function T(p,f,h,v){var m=x(v);return g(y(p,f,m[0]),h,m[1])}t.cloneToGrid=T;function x(p){return Array.isArray(p)?p:[p,p]}function b(p,f,h,v){var m;e.isModel(p)?m=p:m={paths:{0:p}};for(var P=v(m),O={models:{}},R=0;R<h;R++){var C=R%2;O.models[R]=e.model.move(y(p,f+C,P.xMargin),[C*P.x,R*P.y])}return O}function d(p,f,h,v){var m=x(v);function P(O){var R=e.measure.modelExtents(O),C=m[0]||0,w=m[1]||0;return{x:(R.width+C)/-2,y:R.height+w,xMargin:C}}return b(p,f,h,P)}t.cloneToBrick=d;function u(p,f,h,v){v===void 0&&(v=0);function m(P){var O=e.measure.boundingHexagon(P),R=2*e.solvers.equilateralAltitude(O.radius),C=R+v;return{x:C/-2,y:e.solvers.equilateralAltitude(C),xMargin:v}}return b(p,f,h,m)}t.cloneToHoneycomb=u})(e.layout||(e.layout={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=!1;function r(){if(!n)try{var f=Bezier.prototype;n=!0}catch{throw"Bezier library not found. If you are using Node, try running 'npm install' or if you are in the browser, download http://pomax.github.io/bezierjs/bezier.js to your website and add a script tag."}}var i;function o(f){var h=[f.origin];h.push.apply(h,f.controls),h.push(f.end);var v=h.map(function(m){var P={x:m[0],y:m[1]};return P});return i?Bezier.apply(i,v):(r(),i=new Bezier(v)),i}function s(f,h){var v=f.points.map(c),m=new u(v);return m}function l(f){var h=[];return h.push.apply(h,f.origin),h.push.apply(h,f.controls[0]),f.controls.length>1&&h.push.apply(h,f.controls[1]),h.push.apply(h,f.end),r(),new Bezier(h)}function a(f){var h=f.extrema().values.map(function(v){return e.round(v)}).filter(function(v,m,P){return P.indexOf(v)===m}).sort();return h.length===0?[0,1]:(h[0]!==0&&h.unshift(0),h[h.length-1]!==1&&h.push(1),h)}function c(f){return[f.x,f.y]}var g=(function(){function f(h,v,m){this.t=v,this.point=e.point.add(c(h.get(v)),m)}return f})();function y(f,h,v,m,P){var O=v-h;function R(C){var w=h+O*C,E=c(f.get(w)),F=e.point.middle(m,P?1-C:C);return e.measure.pointDistance(F,E)}return R(.25)+R(.75)}function T(f,h,v,m){for(var P,O,R=new g(f,h),C=new g(f,v),w=C,E=R,F=0,S=w,A;F<100;){var D=c(f.get((R.t+S.t)/2));try{P=new e.paths.Arc(R.point,D,S.point)}catch{if(O)return O;break}A===void 0&&(A=e.measure.isPointEqual(R.point,e.point.fromAngleOnCircle(P.endAngle,P)));var L=y(f,h,S.t,P,A);if(L<=m?(P.bezierData={startT:h,endT:S.t},E=S,O=P):w=S,E.t===w.t||O&&O!==P&&e.angle.ofArcSpan(P)-e.angle.ofArcSpan(O)<.5)return O;F++,S=new g(f,(E.t+w.t)/2)}var B=new e.paths.Line(R.point,S.point);return B.bezierData={startT:h,endT:S.t},B}function x(f,h,v,m,P,O){for(var R=0,C;m<P;){C=T(h,m,P,v),m=C.bezierData.endT;var w=e.measure.pathLength(C);w<1e-4||(f.paths[C.type+"_"+(O+R)]=C,R++)}return R}function b(f,h,v,m,P){var O=o(f.seed),R=[h.bezierData.startT,h.bezierData.endT].map(function(F){return new g(O,F,m)}),C=v.slice(),w=C.map(function(F){return e.measure.pointDistance(F,R[0].point)});w[0]>w[1]&&C.reverse();for(var E=2;E--;)if(!e.measure.isPointEqual(C[E],R[E].point,P))return null;return h.bezierData}function d(f,h,v,m,P){var O=[h.links[0],h.links[h.links.length-1]];O[0].walkedPath.pathContext.bezierData.startT>O[1].walkedPath.pathContext.bezierData.startT&&(e.chain.reverse(h),O.reverse());var R=O.map(function(w){return b(f,w.walkedPath.pathContext,w.endPoints,w.walkedPath.offset,P)}),C={startT:R[0]?R[0].startT:null,endT:R[1]?R[1].endT:null};return C.startT!==null&&C.endT!==null?C:h.links.length>2?(C.startT===null&&(m(h.links[0].walkedPath.pathContext,v,!0),C.startT=h.links[1].walkedPath.pathContext.bezierData.startT),C.endT===null&&(m(h.links[h.links.length-1].walkedPath.pathContext,v,!0),C.endT=h.links[h.links.length-2].walkedPath.pathContext.bezierData.endT),C):null}var u=(function(){function f(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];switch(this.type=e.pathType.BezierSeed,h.length){case 1:var m=h[0];this.origin=m[0],m.length===3?(this.controls=[m[1]],this.end=m[2]):m.length===4?(this.controls=[m[1],m[2]],this.end=m[3]):this.end=m[1];break;case 3:Array.isArray(h[1])?this.controls=h[1]:this.controls=[h[1]],this.end=h[2];break;case 4:this.controls=[h[1],h[2]],this.end=h[3];break}}return f})(),p=(function(){function f(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];this.type=f.typeName;var m=Array.isArray(h[0]);switch(h.length){case 2:if(m)this.accuracy=h[1];else{this.seed=h[0],this.accuracy=h[1];break}case 1:if(m){var P=h[0];this.seed=new u(P)}else this.seed=h[0];break;default:switch(h.length){case 4:if(e.isPoint(h[3])){this.seed=new u(h);break}else this.accuracy=h[3];case 3:m&&(this.seed=new u(h.slice(0,3)));break;case 5:this.accuracy=h[4],this.seed=new u(h.slice(0,4));break}break}if(this.paths={},e.measure.isBezierSeedLinear(this.seed)){var O=new e.paths.Line(e.point.clone(this.seed.origin),e.point.clone(this.seed.end));O.bezierData={startT:0,endT:1},this.paths={0:O};return}var R=l(this.seed),C=a(R);if(this.paths={},!this.accuracy){var w=R.length();this.accuracy=w/100}for(var E=0,F=1;F<C.length;F++){var S=C[F]-C[F-1];E+=x(this,R,this.accuracy*S,C[F-1],C[F],E)}}return f.getBezierSeeds=function(h,v){v===void 0&&(v={}),v.shallow=!0,v.unifyBeziers=!1;var m={},P=function(O,R,C){C===void 0&&(C=!1),m[R]||(m[R]=[]),m[R].push(C?e.path.clone(O):O)};return e.model.findChains(h,function(O,R,C){O.forEach(function(w){var E=d(h,w,C,P,v.pointMatchingDistance);if(E){var F=o(h.seed),S=F.split(E.startT,E.endT);P(s(S),C)}else w.links.forEach(function(A){return P(A.walkedPath.pathContext,C,!0)})}),R.forEach(function(w){if(w.pathContext.type===e.pathType.Line)return P(w.pathContext,C,!0);var E=b(h,w.pathContext,e.point.fromPathEnds(w.pathContext),w.offset,v.pointMatchingDistance);if(E){var F=o(h.seed),S=F.split(E.startT,E.endT);P(s(S),C)}else P(w.pathContext,C,!0)})},v),v.byLayers?m:m[""]},f.computeLength=function(h){var v=l(h);return v.length()},f.computePoint=function(h,v){var m=o(h),P=m.compute(v);return c(P)},f.typeName="BezierCurve",f})();t.BezierCurve=p,p.metaParameters=[{title:"points",type:"select",value:[[[100,0],[-80,-60],[100,220],[100,60]],[[0,0],[100,0],[100,100]],[[0,0],[20,0],[80,100],[100,100]]]}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=45;function r(a){return 4*(Math.tan(a/4)/3)}function i(a){var c=e.angle.ofArcSpan(a),g=r(e.angle.toRadians(c)),y=[a.radius,a.radius*g],T=e.point.rotate(e.point.mirror(y,!1,!0),c,[0,0]);return[y,T].map(function(x){return e.point.add(a.origin,e.point.rotate(x,a.startAngle,[0,0]))})}function o(a){var c=e.angle.ofArcSpan(a);if(c<=90){var g=e.point.fromPathEnds(a),y=i(a);return{type:e.pathType.BezierSeed,origin:g[0],controls:y,end:g[1]}}return null}var s=(function(){function a(){for(var c=[],g=0;g<arguments.length;g++)c[g]=arguments[g];var y=this;this.models={};var T=360/n,x,b=e.isPoint(c[0]),d=function(u){switch(u){case 2:b&&(y.origin=c[0]);break;case 3:y.origin=c[0];break;case 4:y.origin=[c[0],c[1]];break}for(var p=360/T,f=new e.paths.Arc([0,0],1,0,p),h=0;h<T;h++){var v=o(f);switch(u){case 1:v=e.path.scale(v,c[0]);break;case 2:b?v=e.path.scale(v,c[1]):v=e.path.distort(v,c[0],c[1]);break;case 3:v=e.path.distort(v,c[1],c[2]);break;case 4:v=e.path.distort(v,c[2],c[3]);break}y.models["Curve_"+(1+h)]=new t.BezierCurve(v,x),f.startAngle+=p,f.endAngle+=p}};switch(c.length){case 2:d(2);break;case 3:b?d(3):(x=c[2],d(2));break;case 4:b?(x=c[3],d(3)):d(4);break;case 5:x=c[4],d(4);break}}return a})();t.Ellipse=s,s.metaParameters=[{title:"radiusX",type:"range",min:1,max:50,value:50},{title:"radiusY",type:"range",min:1,max:50,value:25}];var l=(function(){function a(){for(var c=[],g=0;g<arguments.length;g++)c[g]=arguments[g];this.models={};var y,T,x,b;e.isPathArc(c[0])?(y=c[0],x=c[1],b=c[2],T=c[3]):(y=new e.paths.Arc([0,0],1,c[0],c[1]),x=c[2],b=c[3],T=c[4]);for(var d=e.angle.ofArcSpan(y),u=Math.ceil(d/n),p=d/u,f=e.path.clone(y),h=0;h<u;h++){f.startAngle=y.startAngle+h*p,f.endAngle=f.startAngle+p;var v=o(f);v=e.path.distort(v,x,b),this.models["Curve_"+(1+h)]=new t.BezierCurve(v,T)}}return a})();t.EllipticArc=l,l.metaParameters=[{title:"startAngle",type:"range",min:0,max:90,value:0},{title:"endAngle",type:"range",min:90,max:360,value:180},{title:"radiusX",type:"range",min:1,max:50,value:50},{title:"radiusY",type:"range",min:1,max:50,value:25}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(i){var o;if(Array.isArray(i)){if(e.isPoint(i[0]))return i;o=i}else o=e.importer.parseNumericList(i);for(var s=[],l=0;l<o.length;l+=2)s.push([o[l],o[l+1]]);return s}var r=(function(){function i(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var l=this;this.paths={};var a,c;switch(o.length){case 1:a=!0,c=n(o[0]);break;case 2:a=o[0],c=n(o[1]);break}for(var g=function(T,x,b){b===void 0&&(b=!1),!(b&&e.measure.pointDistance(c[T],c[x])==0)&&(l.paths["ShapeLine"+y]=new e.paths.Line(c[T],c[x]))},y=1;y<c.length;y++)g(y-1,y);a&&c.length>2&&g(c.length-1,0,!0)}return i})();t.ConnectTheDots=r,r.metaParameters=[{title:"closed",type:"bool",value:!0},{title:"points",type:"select",value:[[[0,0],[40,40],[60,20],[100,100],[60,60],[40,80]],[[0,0],[100,0],[50,87]],[-10,0,10,0,0,20],"-10 0 10 0 0 20"]}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l){this.paths={},this.paths=new t.ConnectTheDots(!0,r.getPoints(i,o,s,l)).paths}return r.circumscribedRadius=function(i,o){return i/Math.cos(o/2)},r.getPoints=function(i,o,s,l){s===void 0&&(s=0),l===void 0&&(l=!1);var a=[],c=e.angle.toRadians(s),g=2*Math.PI/i;l&&(o=r.circumscribedRadius(o,g));for(var y=0;y<i;y++)a.push(e.point.fromPolar(g*y+c,o));return a},r})();t.Polygon=n,n.metaParameters=[{title:"number of sides",type:"range",min:3,max:24,value:6},{title:"radius",type:"range",min:1,max:100,value:50},{title:"offset angle",type:"range",min:0,max:180,value:0},{title:"radius on flats (vs radius on vertexes)",type:"bool",value:!1}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s){this.paths={};for(var l=0;l<o.length;l++){var a=s?s[l]:l.toString();this.paths[a]=new e.paths.Circle(o[l],i)}}return r})();t.Holes=n,n.metaParameters=[{title:"holeRadius",type:"range",min:.1,max:10,step:.1,value:1},{title:"points",type:"select",value:[[[0,0],[10,10],[20,20],[30,30],[40,40],[50,50],[60,60],[70,70],[80,80]],[[0,0],[0,25],[0,50],[0,75],[0,100],[25,50],[50,50],[75,50],[100,100],[100,75],[100,50],[100,25],[100,0]]]}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l){l===void 0&&(l=0),this.paths={};var a=t.Polygon.getPoints(s,i,l),c=a.map(function(g,y){return"bolt "+y});this.paths=new t.Holes(o,a,c).paths}return r})();t.BoltCircle=n,n.metaParameters=[{title:"bolt circle radius",type:"range",min:1,max:100,value:50},{title:"hole radius",type:"range",min:1,max:50,value:5},{title:"bolt count",type:"range",min:3,max:24,value:12},{title:"offset angle",type:"range",min:0,max:180,value:0}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s){this.paths={};var l=[[0,0],[i,0],[i,o],[0,o]],a=["BottomLeft_bolt","BottomRight_bolt","TopRight_bolt","TopLeft_bolt"];this.paths=new t.Holes(s,l,a).paths}return r})();t.BoltRectangle=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:100},{title:"height",type:"range",min:1,max:100,value:50},{title:"hole radius",type:"range",min:1,max:50,value:5}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l,a){l===void 0&&(l=0),a===void 0&&(a=!1),this.paths={};var c=Math.min(o,i)/2,g;switch(l){case-1:case 1:g=c/2;break;case 0:default:g=c*Math.SQRT2/2;break}s=Math.min(s,g);var y,T,x,b,d;switch(l){case-1:y=0,T=s,x=0,b=s*2,d=[180,0,0,180];break;case 1:y=s,T=0,x=s*2,b=0,d=[270,270,90,90];break;case 0:default:y=T=s/Math.SQRT2,x=b=y*2,d=[225,315,45,135];break}a?(this.paths.Left=new e.paths.Line([0,0],[0,o-b]),this.paths.Right=new e.paths.Line([i,0],[i,o-b])):(this.paths.Left=new e.paths.Line([0,b],[0,o-b]),this.paths.Right=new e.paths.Line([i,b],[i,o-b]),this.paths.Bottom=new e.paths.Line([x,0],[i-x,0]),this.paths.BottomLeft=new e.paths.Arc([y,T],s,d[0]-90,d[0]+90),this.paths.BottomRight=new e.paths.Arc([i-y,T],s,d[1]-90,d[1]+90)),this.paths.TopRight=new e.paths.Arc([i-y,o-T],s,d[2]-90,d[2]+90),this.paths.TopLeft=new e.paths.Arc([y,o-T],s,d[3]-90,d[3]+90),this.paths.Top=new e.paths.Line([x,o],[i-x,o])}return r})();t.Dogbone=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100},{title:"radius",type:"range",min:0,max:50,value:5},{title:"style",type:"select",value:[0,1,-1]},{title:"bottomless",type:"bool",value:!1}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l){this.paths={};var a=i/2;s<0&&(s=0),s===void 0&&(s=a),s=Math.min(s,a),s=Math.min(s,o);var c=Math.max(a-s,0),g=Math.max(o-s,0);l||(this.paths.Bottom=new e.paths.Line([-a,0],[a,0])),g&&(this.paths.Left=new e.paths.Line([-a,0],[-a,g]),this.paths.Right=new e.paths.Line([a,0],[a,g])),s>0&&(this.paths.TopLeft=new e.paths.Arc([-c,g],s,90,180),this.paths.TopRight=new e.paths.Arc([c,g],s,0,90)),c&&(this.paths.Top=new e.paths.Line([-c,o],[c,o]))}return r})();t.Dome=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100},{title:"radius",type:"range",min:0,max:50,value:25},{title:"bottomless",type:"bool",value:!1}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];this.paths={};var s,l,a=0;switch(i.length){case 3:s=i[0],l=i[1],a=i[2];break;case 2:a=i[1];case 1:var c=e.measure.modelExtents(i[0]);this.origin=e.point.subtract(c.low,[a,a]),s=c.high[0]-c.low[0]+2*a,l=c.high[1]-c.low[1]+2*a;break}var g=Math.min(l,s)/2;a=Math.min(a,g);var y=s-a,T=l-a;a>0&&(this.paths.BottomLeft=new e.paths.Arc([a,a],a,180,270),this.paths.BottomRight=new e.paths.Arc([y,a],a,270,0),this.paths.TopRight=new e.paths.Arc([y,T],a,0,90),this.paths.TopLeft=new e.paths.Arc([a,T],a,90,180)),y-a>0&&(this.paths.Bottom=new e.paths.Line([a,0],[y,0]),this.paths.Top=new e.paths.Line([y,l],[a,l])),T-a>0&&(this.paths.Right=new e.paths.Line([s,a],[s,T]),this.paths.Left=new e.paths.Line([0,T],[0,a]))}return r})();t.RoundRectangle=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100},{title:"radius",type:"range",min:0,max:50,value:11}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o){this.paths={},this.paths=new t.RoundRectangle(i,o,Math.min(o/2,i/2)).paths}return r})();t.Oval=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l,a,c){a===void 0&&(a=!1),c===void 0&&(c=!1);var g=this;this.paths={};var y;if(c&&(y={models:{}},this.models={Caps:y}),!(l<=0||s<=0)&&(i=e.angle.noRevolutions(i),o=e.angle.noRevolutions(o),e.round(i-o)!=0)){o<i&&(o+=360);var T=function(f,h,v,m){var P;return c?(P={paths:{}},y.models[f]=P):P=g,P.paths[f]=new e.paths.Arc(e.point.fromPolar(e.angle.toRadians(h),s),l,h+v,h+m)},x=function(f,h){return g.paths[f]=new e.paths.Arc([0,0],s+h,i,o)};x("Outer",l);var b=s-l>0;b&&x("Inner",-l);var d=[];d.push(T("StartCap",i,180,0)),d.push(T("EndCap",o,0,180));var u=e.measure.pointDistance(d[0].origin,d[1].origin);if(u/2<l){var p=e.path.intersection(d[0],d[1]);p&&((!b||!a)&&(d[0].startAngle=p.path1Angles[0],d[1].endAngle=p.path2Angles[0]),!a&&b&&p.intersectionPoints.length==2&&(T("StartCap2",i,180,0).endAngle=p.path1Angles[1],T("EndCap2",o,0,180).startAngle=p.path2Angles[1]+360))}}}return r})();t.OvalArc=n,n.metaParameters=[{title:"start angle",type:"range",min:-360,max:360,step:1,value:180},{title:"end angle",type:"range",min:-360,max:360,step:1,value:0},{title:"sweep",type:"range",min:0,max:100,step:1,value:50},{title:"radius",type:"range",min:0,max:100,step:1,value:15},{title:"self intersect",type:"bool",value:!1}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];this.paths={};var s,l;if(i.length===2&&!e.isObject(i[0]))s=i[0],l=i[1];else{var a=0,c;e.isModel(i[0])?(c=e.measure.modelExtents(i[0]),i.length===2&&(a=i[1])):c=i[0],this.origin=e.point.subtract(c.low,[a,a]),s=c.high[0]-c.low[0]+2*a,l=c.high[1]-c.low[1]+2*a}this.paths=new t.ConnectTheDots(!0,[[0,0],[s,0],[s,l],[0,l]]).paths}return r})();t.Rectangle=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o){this.paths={};var s={Ring_outer:i,Ring_inner:o};for(var l in s){var a=s[l];a===void 0||a<=0||(this.paths[l]=new e.paths.Circle(e.point.zero(),a))}}return r})();t.Ring=n,n.metaParameters=[{title:"outer radius",type:"range",min:0,max:100,step:1,value:50},{title:"inner radius",type:"range",min:0,max:100,step:1,value:20}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s){this.paths={};var l=new e.paths.Arc([0,0],i,0,360),a=new e.paths.Arc([o,0],s,0,360),c=e.solvers.circleTangentAngles(l,a);c?(c=c.sort(function(g,y){return g-y}),l.startAngle=c[0],l.endAngle=c[1],a.startAngle=c[1],a.endAngle=c[0],this.paths.Left=l,this.paths.Right=a,this.paths.Top=new e.paths.Line(e.point.fromAngleOnCircle(c[0],l),e.point.fromAngleOnCircle(c[0],a)),this.paths.Bottom=new e.paths.Line(e.point.fromAngleOnCircle(c[1],l),e.point.fromAngleOnCircle(c[1],a))):this.paths.Belt=new e.paths.Circle(Math.max(i,s))}return r})();t.Belt=n,n.metaParameters=[{title:"left radius",type:"range",min:0,max:100,value:30},{title:"distance between centers",type:"range",min:0,max:100,value:50},{title:"right radius",type:"range",min:0,max:100,value:15}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o){this.paths={};function s(b,d){return b+(d*d-b*b)/(2*b)}var l=o/2,a=i/2,c,g,y,T;i>o?(c=s(l,a),g=270,y=360-e.angle.toDegrees(Math.acos(a/c)),T=[0,c]):(c=s(a,l),g=180-e.angle.toDegrees(Math.asin(l/c)),y=180,T=[c,0]);var x=new e.paths.Arc(T,c,g,y);this.paths.curve_start=x,this.paths.curve_end=e.path.moveRelative(e.path.mirror(x,!0,!0),[i,o])}return r})();t.SCurve=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l){l===void 0&&(l=!1);var a=this;this.paths={};var c;l&&(c={models:{}},this.models={Caps:c});var g=function(x,b){var d;l?(d={paths:{}},c.models[x]=d):d=a,d.paths[x]=b},y=e.angle.ofPointInDegrees(i,o),T=e.measure.pointDistance(i,o);this.paths.Top=new e.paths.Line([0,s],[T,s]),this.paths.Bottom=new e.paths.Line([0,-s],[T,-s]),g("StartCap",new e.paths.Arc([0,0],s,90,270)),g("EndCap",new e.paths.Arc([T,0],s,270,90)),e.model.rotate(this,y,[0,0]),this.origin=i}return r})();t.Slot=n,n.metaParameters=[{title:"origin",type:"select",value:[[0,0],[10,0],[10,10]]},{title:"end",type:"select",value:[[80,0],[0,30],[10,30]]},{title:"radius",type:"range",min:1,max:50,value:10}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i){this.paths={},this.paths=new t.Rectangle(i,i).paths}return r})();t.Square=n,n.metaParameters=[{title:"side",type:"range",min:1,max:100,value:100}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l){l===void 0&&(l=2),this.paths={},s||(s=o*r.InnerRadiusRatio(i,l));for(var a=t.Polygon.getPoints(i,o),c=t.Polygon.getPoints(i,s,180/i),g=[],y=0;y<i;y++)g.push(a[y]),g.push(c[y]);var T=new t.ConnectTheDots(!0,g);this.paths=T.paths,delete T.paths}return r.InnerRadiusRatio=function(i,o){return i>0&&o>1&&o<i/2?Math.cos(Math.PI*o/i)/Math.cos(Math.PI*(o-1)/i):0},r})();t.Star=n,n.metaParameters=[{title:"number of sides",type:"range",min:3,max:24,value:8},{title:"outer radius",type:"range",min:1,max:100,value:50},{title:"inner radius",type:"range",min:0,max:100,value:15},{title:"skip points (when inner radius is zero)",type:"range",min:0,max:12,value:2}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l,a,c,g){l===void 0&&(l=!1),a===void 0&&(a=!1);var y=this;this.models={};var T=0,x,b,d=function(u,p,f,h,v){var m=r.glyphToModel(u,h,c);if(m.origin=[p,0],a&&(m.paths||m.models)){var P=e.measure.modelExtents(m);if(P){var O=P.high[0]-P.low[0];e.model.originate(m,[P.low[0]+O/2,0])}}if(l&&T>0){var R={},C;x?C={models:{deleted:x,char:b}}:C=b,e.model.combine(C,m,!1,!0,!1,!0,R),x=R.out_deleted[1]}y.models[T]=m,T++,b=m};i.forEachGlyph(o,0,0,s,g,d)}return r.glyphToModel=function(i,o,s){var l={},a,c,g=0;function y(b){l.paths||(l.paths={}),l.paths["p_"+ ++g]=b}function T(b){l.models||(l.models={}),l.models["p_"+ ++g]=b}var x=i.getPath(0,0,o);return x.commands.map(function(b,d){var u=[[b.x,b.y],[b.x1,b.y1],[b.x2,b.y2]].map(function(p){if(p[0]!==void 0)return e.point.mirror(p,!1,!0)});switch(b.type){case"M":a=u[0];break;case"Z":u[0]=a;case"L":e.measure.isPointEqual(c,u[0])||y(new e.paths.Line(c,u[0]));break;case"C":T(new t.BezierCurve(c,u[1],u[2],u[0],s));break;case"Q":T(new t.BezierCurve(c,u[1],u[0],s));break}c=u[0]}),l},r})();t.Text=n,n.metaParameters=[{title:"font",type:"font",value:"*"},{title:"text",type:"text",value:"Hello"},{title:"font size",type:"range",min:10,max:200,value:72},{title:"combine",type:"bool",value:!1},{title:"center character origin",type:"bool",value:!1}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={})),MakerJs.version="0.18.2";var Bezier=requireBezierJs();return dist}var distExports=requireDist();const makerjs=getDefaultExportFromCjs(distExports);var tinyInflate,hasRequiredTinyInflate;function requireTinyInflate(){if(hasRequiredTinyInflate)return tinyInflate;hasRequiredTinyInflate=1;var e=0,t=-3;function n(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function r(R,C){this.source=R,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=C,this.destLen=0,this.ltree=new n,this.dtree=new n}var i=new n,o=new n,s=new Uint8Array(30),l=new Uint16Array(30),a=new Uint8Array(30),c=new Uint16Array(30),g=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),y=new n,T=new Uint8Array(320);function x(R,C,w,E){var F,S;for(F=0;F<w;++F)R[F]=0;for(F=0;F<30-w;++F)R[F+w]=F/w|0;for(S=E,F=0;F<30;++F)C[F]=S,S+=1<<R[F]}function b(R,C){var w;for(w=0;w<7;++w)R.table[w]=0;for(R.table[7]=24,R.table[8]=152,R.table[9]=112,w=0;w<24;++w)R.trans[w]=256+w;for(w=0;w<144;++w)R.trans[24+w]=w;for(w=0;w<8;++w)R.trans[168+w]=280+w;for(w=0;w<112;++w)R.trans[176+w]=144+w;for(w=0;w<5;++w)C.table[w]=0;for(C.table[5]=32,w=0;w<32;++w)C.trans[w]=w}var d=new Uint16Array(16);function u(R,C,w,E){var F,S;for(F=0;F<16;++F)R.table[F]=0;for(F=0;F<E;++F)R.table[C[w+F]]++;for(R.table[0]=0,S=0,F=0;F<16;++F)d[F]=S,S+=R.table[F];for(F=0;F<E;++F)C[w+F]&&(R.trans[d[C[w+F]]++]=F)}function p(R){R.bitcount--||(R.tag=R.source[R.sourceIndex++],R.bitcount=7);var C=R.tag&1;return R.tag>>>=1,C}function f(R,C,w){if(!C)return w;for(;R.bitcount<24;)R.tag|=R.source[R.sourceIndex++]<<R.bitcount,R.bitcount+=8;var E=R.tag&65535>>>16-C;return R.tag>>>=C,R.bitcount-=C,E+w}function h(R,C){for(;R.bitcount<24;)R.tag|=R.source[R.sourceIndex++]<<R.bitcount,R.bitcount+=8;var w=0,E=0,F=0,S=R.tag;do E=2*E+(S&1),S>>>=1,++F,w+=C.table[F],E-=C.table[F];while(E>=0);return R.tag=S,R.bitcount-=F,C.trans[w+E]}function v(R,C,w){var E,F,S,A,D,L;for(E=f(R,5,257),F=f(R,5,1),S=f(R,4,4),A=0;A<19;++A)T[A]=0;for(A=0;A<S;++A){var B=f(R,3,0);T[g[A]]=B}for(u(y,T,0,19),D=0;D<E+F;){var G=h(R,y);switch(G){case 16:var _=T[D-1];for(L=f(R,2,3);L;--L)T[D++]=_;break;case 17:for(L=f(R,3,3);L;--L)T[D++]=0;break;case 18:for(L=f(R,7,11);L;--L)T[D++]=0;break;default:T[D++]=G;break}}u(C,T,0,E),u(w,T,E,F)}function m(R,C,w){for(;;){var E=h(R,C);if(E===256)return e;if(E<256)R.dest[R.destLen++]=E;else{var F,S,A,D;for(E-=257,F=f(R,s[E],l[E]),S=h(R,w),A=R.destLen-f(R,a[S],c[S]),D=A;D<A+F;++D)R.dest[R.destLen++]=R.dest[D]}}}function P(R){for(var C,w,E;R.bitcount>8;)R.sourceIndex--,R.bitcount-=8;if(C=R.source[R.sourceIndex+1],C=256*C+R.source[R.sourceIndex],w=R.source[R.sourceIndex+3],w=256*w+R.source[R.sourceIndex+2],C!==(~w&65535))return t;for(R.sourceIndex+=4,E=C;E;--E)R.dest[R.destLen++]=R.source[R.sourceIndex++];return R.bitcount=0,e}function O(R,C){var w=new r(R,C),E,F,S;do{switch(E=p(w),F=f(w,2,0),F){case 0:S=P(w);break;case 1:S=m(w,i,o);break;case 2:v(w,w.ltree,w.dtree),S=m(w,w.ltree,w.dtree);break;default:S=t}if(S!==e)throw new Error("Data error")}while(!E);return w.destLen<w.dest.length?typeof w.dest.slice=="function"?w.dest.slice(0,w.destLen):w.dest.subarray(0,w.destLen):w.dest}return b(i,o),x(s,l,4,3),x(a,c,2,1),s[28]=0,l[28]=258,tinyInflate=O,tinyInflate}var tinyInflateExports=requireTinyInflate();const inflate=getDefaultExportFromCjs(tinyInflateExports);function derive(e,t,n,r,i){return Math.pow(1-i,3)*e+3*Math.pow(1-i,2)*i*t+3*(1-i)*Math.pow(i,2)*n+Math.pow(i,3)*r}function BoundingBox(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}BoundingBox.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};BoundingBox.prototype.addPoint=function(e,t){typeof e=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),typeof t=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))};BoundingBox.prototype.addX=function(e){this.addPoint(e,null)};BoundingBox.prototype.addY=function(e){this.addPoint(null,e)};BoundingBox.prototype.addBezier=function(e,t,n,r,i,o,s,l){const a=[e,t],c=[n,r],g=[i,o],y=[s,l];this.addPoint(e,t),this.addPoint(s,l);for(let T=0;T<=1;T++){const x=6*a[T]-12*c[T]+6*g[T],b=-3*a[T]+9*c[T]-9*g[T]+3*y[T],d=3*c[T]-3*a[T];if(b===0){if(x===0)continue;const h=-d/x;0<h&&h<1&&(T===0&&this.addX(derive(a[T],c[T],g[T],y[T],h)),T===1&&this.addY(derive(a[T],c[T],g[T],y[T],h)));continue}const u=Math.pow(x,2)-4*d*b;if(u<0)continue;const p=(-x+Math.sqrt(u))/(2*b);0<p&&p<1&&(T===0&&this.addX(derive(a[T],c[T],g[T],y[T],p)),T===1&&this.addY(derive(a[T],c[T],g[T],y[T],p)));const f=(-x-Math.sqrt(u))/(2*b);0<f&&f<1&&(T===0&&this.addX(derive(a[T],c[T],g[T],y[T],f)),T===1&&this.addY(derive(a[T],c[T],g[T],y[T],f)))}};BoundingBox.prototype.addQuad=function(e,t,n,r,i,o){const s=e+.6666666666666666*(n-e),l=t+2/3*(r-t),a=s+1/3*(i-e),c=l+1/3*(o-t);this.addBezier(e,t,s,l,a,c,i,o)};function Path(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}Path.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})};Path.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})};Path.prototype.curveTo=Path.prototype.bezierCurveTo=function(e,t,n,r,i,o){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:r,x:i,y:o})};Path.prototype.quadTo=Path.prototype.quadraticCurveTo=function(e,t,n,r){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:r})};Path.prototype.close=Path.prototype.closePath=function(){this.commands.push({type:"Z"})};Path.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof BoundingBox){const t=e;this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),this.close();return}Array.prototype.push.apply(this.commands,e)};Path.prototype.getBoundingBox=function(){const e=new BoundingBox;let t=0,n=0,r=0,i=0;for(let o=0;o<this.commands.length;o++){const s=this.commands[o];switch(s.type){case"M":e.addPoint(s.x,s.y),t=r=s.x,n=i=s.y;break;case"L":e.addPoint(s.x,s.y),r=s.x,i=s.y;break;case"Q":e.addQuad(r,i,s.x1,s.y1,s.x,s.y),r=s.x,i=s.y;break;case"C":e.addBezier(r,i,s.x1,s.y1,s.x2,s.y2,s.x,s.y),r=s.x,i=s.y;break;case"Z":r=t,i=n;break;default:throw new Error("Unexpected path command "+s.type)}}return e.isEmpty()&&e.addPoint(0,0),e};Path.prototype.draw=function(e){e.beginPath();for(let t=0;t<this.commands.length;t+=1){const n=this.commands[t];n.type==="M"?e.moveTo(n.x,n.y):n.type==="L"?e.lineTo(n.x,n.y):n.type==="C"?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):n.type==="Q"?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):n.type==="Z"&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())};Path.prototype.toPathData=function(e){e=e!==void 0?e:2;function t(i){return Math.round(i)===i?""+Math.round(i):i.toFixed(e)}function n(){let i="";for(let o=0;o<arguments.length;o+=1){const s=arguments[o];s>=0&&o>0&&(i+=" "),i+=t(s)}return i}let r="";for(let i=0;i<this.commands.length;i+=1){const o=this.commands[i];o.type==="M"?r+="M"+n(o.x,o.y):o.type==="L"?r+="L"+n(o.x,o.y):o.type==="C"?r+="C"+n(o.x1,o.y1,o.x2,o.y2,o.x,o.y):o.type==="Q"?r+="Q"+n(o.x1,o.y1,o.x,o.y):o.type==="Z"&&(r+="Z")}return r};Path.prototype.toSVG=function(e){let t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&this.fill!=="black"&&(this.fill===null?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>",t};Path.prototype.toDOMElement=function(e){const t=this.toPathData(e),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",t),n};function fail(e){throw new Error(e)}function argument(e,t){e||fail(t)}const check={fail,argument,assert:argument},LIMIT16=32768,LIMIT32=2147483648,decode={},encode={},sizeOf={};function constant(e){return function(){return e}}encode.BYTE=function(e){return check.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]};sizeOf.BYTE=constant(1);encode.CHAR=function(e){return[e.charCodeAt(0)]};sizeOf.CHAR=constant(1);encode.CHARARRAY=function(e){const t=[];for(let n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t};sizeOf.CHARARRAY=function(e){return e.length};encode.USHORT=function(e){return[e>>8&255,e&255]};sizeOf.USHORT=constant(2);encode.SHORT=function(e){return e>=LIMIT16&&(e=-(2*LIMIT16-e)),[e>>8&255,e&255]};sizeOf.SHORT=constant(2);encode.UINT24=function(e){return[e>>16&255,e>>8&255,e&255]};sizeOf.UINT24=constant(3);encode.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,e&255]};sizeOf.ULONG=constant(4);encode.LONG=function(e){return e>=LIMIT32&&(e=-(2*LIMIT32-e)),[e>>24&255,e>>16&255,e>>8&255,e&255]};sizeOf.LONG=constant(4);encode.FIXED=encode.ULONG;sizeOf.FIXED=sizeOf.ULONG;encode.FWORD=encode.SHORT;sizeOf.FWORD=sizeOf.SHORT;encode.UFWORD=encode.USHORT;sizeOf.UFWORD=sizeOf.USHORT;encode.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,e&255]};sizeOf.LONGDATETIME=constant(8);encode.TAG=function(e){return check.argument(e.length===4,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]};sizeOf.TAG=constant(4);encode.Card8=encode.BYTE;sizeOf.Card8=sizeOf.BYTE;encode.Card16=encode.USHORT;sizeOf.Card16=sizeOf.USHORT;encode.OffSize=encode.BYTE;sizeOf.OffSize=sizeOf.BYTE;encode.SID=encode.USHORT;sizeOf.SID=sizeOf.USHORT;encode.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?(e=e-108,[(e>>8)+247,e&255]):e>=-1131&&e<=-108?(e=-e-108,[(e>>8)+251,e&255]):e>=-32768&&e<=32767?encode.NUMBER16(e):encode.NUMBER32(e)};sizeOf.NUMBER=function(e){return encode.NUMBER(e).length};encode.NUMBER16=function(e){return[28,e>>8&255,e&255]};sizeOf.NUMBER16=constant(3);encode.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,e&255]};sizeOf.NUMBER32=constant(5);encode.REAL=function(e){let t=e.toString();const n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(n){const o=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));t=(Math.round(e*o)/o).toString()}let r="";for(let o=0,s=t.length;o<s;o+=1){const l=t[o];l==="e"?r+=t[++o]==="-"?"c":"b":l==="."?r+="a":l==="-"?r+="e":r+=l}r+=r.length&1?"f":"ff";const i=[30];for(let o=0,s=r.length;o<s;o+=2)i.push(parseInt(r.substr(o,2),16));return i};sizeOf.REAL=function(e){return encode.REAL(e).length};encode.NAME=encode.CHARARRAY;sizeOf.NAME=sizeOf.CHARARRAY;encode.STRING=encode.CHARARRAY;sizeOf.STRING=sizeOf.CHARARRAY;decode.UTF8=function(e,t,n){const r=[],i=n;for(let o=0;o<i;o++,t+=1)r[o]=e.getUint8(t);return String.fromCharCode.apply(null,r)};decode.UTF16=function(e,t,n){const r=[],i=n/2;for(let o=0;o<i;o++,t+=2)r[o]=e.getUint16(t);return String.fromCharCode.apply(null,r)};encode.UTF16=function(e){const t=[];for(let n=0;n<e.length;n+=1){const r=e.charCodeAt(n);t[t.length]=r>>8&255,t[t.length]=r&255}return t};sizeOf.UTF16=function(e){return e.length*2};const eightBitMacEncodings={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};decode.MACSTRING=function(e,t,n,r){const i=eightBitMacEncodings[r];if(i===void 0)return;let o="";for(let s=0;s<n;s++){const l=e.getUint8(t+s);l<=127?o+=String.fromCharCode(l):o+=i[l&127]}return o};const macEncodingTableCache=typeof WeakMap=="function"&&new WeakMap;let macEncodingCacheKeys;const getMacEncodingTable=function(e){if(!macEncodingCacheKeys){macEncodingCacheKeys={};for(let i in eightBitMacEncodings)macEncodingCacheKeys[i]=new String(i)}const t=macEncodingCacheKeys[e];if(t===void 0)return;if(macEncodingTableCache){const i=macEncodingTableCache.get(t);if(i!==void 0)return i}const n=eightBitMacEncodings[e];if(n===void 0)return;const r={};for(let i=0;i<n.length;i++)r[n.charCodeAt(i)]=i+128;return macEncodingTableCache&&macEncodingTableCache.set(t,r),r};encode.MACSTRING=function(e,t){const n=getMacEncodingTable(t);if(n===void 0)return;const r=[];for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);if(o>=128&&(o=n[o],o===void 0))return;r[i]=o}return r};sizeOf.MACSTRING=function(e,t){const n=encode.MACSTRING(e,t);return n!==void 0?n.length:0};function isByteEncodable(e){return e>=-128&&e<=127}function encodeVarDeltaRunAsZeroes(e,t,n){let r=0;const i=e.length;for(;t<i&&r<64&&e[t]===0;)++t,++r;return n.push(128|r-1),t}function encodeVarDeltaRunAsBytes(e,t,n){let r=0;const i=e.length;let o=t;for(;o<i&&r<64;){const s=e[o];if(!isByteEncodable(s)||s===0&&o+1<i&&e[o+1]===0)break;++o,++r}n.push(r-1);for(let s=t;s<o;++s)n.push(e[s]+256&255);return o}function encodeVarDeltaRunAsWords(e,t,n){let r=0;const i=e.length;let o=t;for(;o<i&&r<64;){const s=e[o];if(s===0||isByteEncodable(s)&&o+1<i&&isByteEncodable(e[o+1]))break;++o,++r}n.push(64|r-1);for(let s=t;s<o;++s){const l=e[s];n.push(l+65536>>8&255,l+256&255)}return o}encode.VARDELTAS=function(e){let t=0;const n=[];for(;t<e.length;){const r=e[t];r===0?t=encodeVarDeltaRunAsZeroes(e,t,n):r>=-128&&r<=127?t=encodeVarDeltaRunAsBytes(e,t,n):t=encodeVarDeltaRunAsWords(e,t,n)}return n};encode.INDEX=function(e){let t=1;const n=[t],r=[];for(let l=0;l<e.length;l+=1){const a=encode.OBJECT(e[l]);Array.prototype.push.apply(r,a),t+=a.length,n.push(t)}if(r.length===0)return[0,0];const i=[],o=1+Math.floor(Math.log(t)/Math.log(2))/8|0,s=[void 0,encode.BYTE,encode.USHORT,encode.UINT24,encode.ULONG][o];for(let l=0;l<n.length;l+=1){const a=s(n[l]);Array.prototype.push.apply(i,a)}return Array.prototype.concat(encode.Card16(e.length),encode.OffSize(o),i,r)};sizeOf.INDEX=function(e){return encode.INDEX(e).length};encode.DICT=function(e){let t=[];const n=Object.keys(e),r=n.length;for(let i=0;i<r;i+=1){const o=parseInt(n[i],0),s=e[o];t=t.concat(encode.OPERAND(s.value,s.type)),t=t.concat(encode.OPERATOR(o))}return t};sizeOf.DICT=function(e){return encode.DICT(e).length};encode.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]};encode.OPERAND=function(e,t){let n=[];if(Array.isArray(t))for(let r=0;r<t.length;r+=1)check.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(encode.OPERAND(e[r],t[r]));else if(t==="SID")n=n.concat(encode.NUMBER(e));else if(t==="offset")n=n.concat(encode.NUMBER32(e));else if(t==="number")n=n.concat(encode.NUMBER(e));else if(t==="real")n=n.concat(encode.REAL(e));else throw new Error("Unknown operand type "+t);return n};encode.OP=encode.BYTE;sizeOf.OP=sizeOf.BYTE;const wmm=typeof WeakMap=="function"&&new WeakMap;encode.CHARSTRING=function(e){if(wmm){const r=wmm.get(e);if(r!==void 0)return r}let t=[];const n=e.length;for(let r=0;r<n;r+=1){const i=e[r];t=t.concat(encode[i.type](i.value))}return wmm&&wmm.set(e,t),t};sizeOf.CHARSTRING=function(e){return encode.CHARSTRING(e).length};encode.OBJECT=function(e){const t=encode[e.type];return check.argument(t!==void 0,"No encoding function for type "+e.type),t(e.value)};sizeOf.OBJECT=function(e){const t=sizeOf[e.type];return check.argument(t!==void 0,"No sizeOf function for type "+e.type),t(e.value)};encode.TABLE=function(e){let t=[];const n=e.fields.length,r=[],i=[];for(let o=0;o<n;o+=1){const s=e.fields[o],l=encode[s.type];check.argument(l!==void 0,"No encoding function for field type "+s.type+" ("+s.name+")");let a=e[s.name];a===void 0&&(a=s.value);const c=l(a);s.type==="TABLE"?(i.push(t.length),t=t.concat([0,0]),r.push(c)):t=t.concat(c)}for(let o=0;o<r.length;o+=1){const s=i[o],l=t.length;check.argument(l<65536,"Table "+e.tableName+" too big."),t[s]=l>>8,t[s+1]=l&255,t=t.concat(r[o])}return t};sizeOf.TABLE=function(e){let t=0;const n=e.fields.length;for(let r=0;r<n;r+=1){const i=e.fields[r],o=sizeOf[i.type];check.argument(o!==void 0,"No sizeOf function for field type "+i.type+" ("+i.name+")");let s=e[i.name];s===void 0&&(s=i.value),t+=o(s),i.type==="TABLE"&&(t+=2)}return t};encode.RECORD=encode.TABLE;sizeOf.RECORD=sizeOf.TABLE;encode.LITERAL=function(e){return e};sizeOf.LITERAL=function(e){return e.length};function Table(e,t,n){for(let r=0;r<t.length;r+=1){const i=t[r];this[i.name]=i.value}if(this.tableName=e,this.fields=t,n){const r=Object.keys(n);for(let i=0;i<r.length;i+=1){const o=r[i],s=n[o];this[o]!==void 0&&(this[o]=s)}}}Table.prototype.encode=function(){return encode.TABLE(this)};Table.prototype.sizeOf=function(){return sizeOf.TABLE(this)};function ushortList(e,t,n){n===void 0&&(n=t.length);const r=new Array(t.length+1);r[0]={name:e+"Count",type:"USHORT",value:n};for(let i=0;i<t.length;i++)r[i+1]={name:e+i,type:"USHORT",value:t[i]};return r}function tableList(e,t,n){const r=t.length,i=new Array(r+1);i[0]={name:e+"Count",type:"USHORT",value:r};for(let o=0;o<r;o++)i[o+1]={name:e+o,type:"TABLE",value:n(t[o],o)};return i}function recordList(e,t,n){const r=t.length;let i=[];i[0]={name:e+"Count",type:"USHORT",value:r};for(let o=0;o<r;o++)i=i.concat(n(t[o],o));return i}function Coverage(e){e.format===1?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ushortList("glyph",e.glyphs))):check.assert(!1,"Can't create coverage table format 2 yet.")}Coverage.prototype=Object.create(Table.prototype);Coverage.prototype.constructor=Coverage;function ScriptList(e){Table.call(this,"scriptListTable",recordList("scriptRecord",e,function(t,n){const r=t.script;let i=r.defaultLangSys;return check.assert(!!i,"Unable to write GSUB: script "+t.tag+" has no default language system."),[{name:"scriptTag"+n,type:"TAG",value:t.tag},{name:"script"+n,type:"TABLE",value:new Table("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Table("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(ushortList("featureIndex",i.featureIndexes)))}].concat(recordList("langSys",r.langSysRecords,function(o,s){const l=o.langSys;return[{name:"langSysTag"+s,type:"TAG",value:o.tag},{name:"langSys"+s,type:"TABLE",value:new Table("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:l.reqFeatureIndex}].concat(ushortList("featureIndex",l.featureIndexes)))}]})))}]}))}ScriptList.prototype=Object.create(Table.prototype);ScriptList.prototype.constructor=ScriptList;function FeatureList(e){Table.call(this,"featureListTable",recordList("featureRecord",e,function(t,n){const r=t.feature;return[{name:"featureTag"+n,type:"TAG",value:t.tag},{name:"feature"+n,type:"TABLE",value:new Table("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(ushortList("lookupListIndex",r.lookupListIndexes)))}]}))}FeatureList.prototype=Object.create(Table.prototype);FeatureList.prototype.constructor=FeatureList;function LookupList(e,t){Table.call(this,"lookupListTable",tableList("lookup",e,function(n){let r=t[n.lookupType];return check.assert(!!r,"Unable to write GSUB lookup type "+n.lookupType+" tables."),new Table("lookupTable",[{name:"lookupType",type:"USHORT",value:n.lookupType},{name:"lookupFlag",type:"USHORT",value:n.lookupFlag}].concat(tableList("subtable",n.subtables,r)))}))}LookupList.prototype=Object.create(Table.prototype);LookupList.prototype.constructor=LookupList;const table={Table,Record:Table,Coverage,ScriptList,FeatureList,LookupList,ushortList,tableList,recordList};function getByte(e,t){return e.getUint8(t)}function getUShort(e,t){return e.getUint16(t,!1)}function getShort(e,t){return e.getInt16(t,!1)}function getULong(e,t){return e.getUint32(t,!1)}function getFixed(e,t){const n=e.getInt16(t,!1),r=e.getUint16(t+2,!1);return n+r/65535}function getTag(e,t){let n="";for(let r=t;r<t+4;r+=1)n+=String.fromCharCode(e.getInt8(r));return n}function getOffset(e,t,n){let r=0;for(let i=0;i<n;i+=1)r<<=8,r+=e.getUint8(t+i);return r}function getBytes(e,t,n){const r=[];for(let i=t;i<n;i+=1)r.push(e.getUint8(i));return r}function bytesToString(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t}const typeOffsets={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Parser(e,t){this.data=e,this.offset=t,this.relativeOffset=0}Parser.prototype.parseByte=function(){const e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e};Parser.prototype.parseChar=function(){const e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e};Parser.prototype.parseCard8=Parser.prototype.parseByte;Parser.prototype.parseUShort=function(){const e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e};Parser.prototype.parseCard16=Parser.prototype.parseUShort;Parser.prototype.parseSID=Parser.prototype.parseUShort;Parser.prototype.parseOffset16=Parser.prototype.parseUShort;Parser.prototype.parseShort=function(){const e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e};Parser.prototype.parseF2Dot14=function(){const e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e};Parser.prototype.parseULong=function(){const e=getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e};Parser.prototype.parseFixed=function(){const e=getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e};Parser.prototype.parseString=function(e){const t=this.data,n=this.offset+this.relativeOffset;let r="";this.relativeOffset+=e;for(let i=0;i<e;i++)r+=String.fromCharCode(t.getUint8(n+i));return r};Parser.prototype.parseTag=function(){return this.parseString(4)};Parser.prototype.parseLongDateTime=function(){let e=getULong(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e};Parser.prototype.parseVersion=function(){const e=getUShort(this.data,this.offset+this.relativeOffset),t=getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,e+t/4096/10};Parser.prototype.skip=function(e,t){t===void 0&&(t=1),this.relativeOffset+=typeOffsets[e]*t};Parser.prototype.parseOffset16List=Parser.prototype.parseUShortList=function(e){e===void 0&&(e=this.parseUShort());const t=new Array(e),n=this.data;let r=this.offset+this.relativeOffset;for(let i=0;i<e;i++)t[i]=n.getUint16(r),r+=2;return this.relativeOffset+=e*2,t};Parser.prototype.parseShortList=function(e){const t=new Array(e),n=this.data;let r=this.offset+this.relativeOffset;for(let i=0;i<e;i++)t[i]=n.getInt16(r),r+=2;return this.relativeOffset+=e*2,t};Parser.prototype.parseByteList=function(e){const t=new Array(e),n=this.data;let r=this.offset+this.relativeOffset;for(let i=0;i<e;i++)t[i]=n.getUint8(r++);return this.relativeOffset+=e,t};Parser.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());const n=new Array(e);for(let r=0;r<e;r++)n[r]=t.call(this);return n};Parser.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());const n=new Array(e),r=Object.keys(t);for(let i=0;i<e;i++){const o={};for(let s=0;s<r.length;s++){const l=r[s],a=t[l];o[l]=a.call(this)}n[i]=o}return n};Parser.prototype.parseStruct=function(e){if(typeof e=="function")return e.call(this);{const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const i=t[r],o=e[i];n[i]=o.call(this)}return n}};Parser.prototype.parsePointer=function(e){const t=this.parseOffset16();if(t>0)return new Parser(this.data,this.offset+t).parseStruct(e)};Parser.prototype.parseListOfLists=function(e){const t=this.parseOffset16List(),n=t.length,r=this.relativeOffset,i=new Array(n);for(let o=0;o<n;o++){const s=t[o];if(s===0){i[o]=void 0;continue}if(this.relativeOffset=s,e){const l=this.parseOffset16List(),a=new Array(l.length);for(let c=0;c<l.length;c++)this.relativeOffset=s+l[c],a[c]=e.call(this);i[o]=a}else i[o]=this.parseUShortList()}return this.relativeOffset=r,i};Parser.prototype.parseCoverage=function(){const e=this.offset+this.relativeOffset,t=this.parseUShort(),n=this.parseUShort();if(t===1)return{format:1,glyphs:this.parseUShortList(n)};if(t===2){const r=new Array(n);for(let i=0;i<n;i++)r[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")};Parser.prototype.parseClassDef=function(){const e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(t===2)return{format:2,ranges:this.parseRecordList({start:Parser.uShort,end:Parser.uShort,classId:Parser.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")};Parser.list=function(e,t){return function(){return this.parseList(e,t)}};Parser.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}};Parser.pointer=function(e){return function(){return this.parsePointer(e)}};Parser.tag=Parser.prototype.parseTag;Parser.byte=Parser.prototype.parseByte;Parser.uShort=Parser.offset16=Parser.prototype.parseUShort;Parser.uShortList=Parser.prototype.parseUShortList;Parser.struct=Parser.prototype.parseStruct;Parser.coverage=Parser.prototype.parseCoverage;Parser.classDef=Parser.prototype.parseClassDef;const langSysTable={reserved:Parser.uShort,reqFeatureIndex:Parser.uShort,featureIndexes:Parser.uShortList};Parser.prototype.parseScriptList=function(){return this.parsePointer(Parser.recordList({tag:Parser.tag,script:Parser.pointer({defaultLangSys:Parser.pointer(langSysTable),langSysRecords:Parser.recordList({tag:Parser.tag,langSys:Parser.pointer(langSysTable)})})}))};Parser.prototype.parseFeatureList=function(){return this.parsePointer(Parser.recordList({tag:Parser.tag,feature:Parser.pointer({featureParams:Parser.offset16,lookupListIndexes:Parser.uShortList})}))};Parser.prototype.parseLookupList=function(e){return this.parsePointer(Parser.list(Parser.pointer(function(){const t=this.parseUShort();check.argument(1<=t&&t<=8,"GSUB lookup type "+t+" unknown.");const n=this.parseUShort(),r=n&16;return{lookupType:t,lookupFlag:n,subtables:this.parseList(Parser.pointer(e[t])),markFilteringSet:r?this.parseUShort():void 0}})))};const parse={getByte,getCard8:getByte,getUShort,getCard16:getUShort,getShort,getULong,getFixed,getTag,getOffset,getBytes,bytesToString,Parser};function parseCmapTableFormat12(e,t){t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong();let n;e.groupCount=n=t.parseULong(),e.glyphIndexMap={};for(let r=0;r<n;r+=1){const i=t.parseULong(),o=t.parseULong();let s=t.parseULong();for(let l=i;l<=o;l+=1)e.glyphIndexMap[l]=s,s++}}function parseCmapTableFormat4(e,t,n,r,i){e.length=t.parseUShort(),e.language=t.parseUShort();let o;e.segCount=o=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};const s=new parse.Parser(n,r+i+14),l=new parse.Parser(n,r+i+16+o*2),a=new parse.Parser(n,r+i+16+o*4),c=new parse.Parser(n,r+i+16+o*6);let g=r+i+16+o*8;for(let y=0;y<o-1;y+=1){let T;const x=s.parseUShort(),b=l.parseUShort(),d=a.parseShort(),u=c.parseUShort();for(let p=b;p<=x;p+=1)u!==0?(g=c.offset+c.relativeOffset-2,g+=u,g+=(p-b)*2,T=parse.getUShort(n,g),T!==0&&(T=T+d&65535)):T=p+d&65535,e.glyphIndexMap[p]=T}}function parseCmapTable(e,t){const n={};n.version=parse.getUShort(e,t),check.argument(n.version===0,"cmap table version should be 0."),n.numTables=parse.getUShort(e,t+2);let r=-1;for(let o=n.numTables-1;o>=0;o-=1){const s=parse.getUShort(e,t+4+o*8),l=parse.getUShort(e,t+4+o*8+2);if(s===3&&(l===0||l===1||l===10)){r=parse.getULong(e,t+4+o*8+4);break}}if(r===-1)throw new Error("No valid cmap sub-tables found.");const i=new parse.Parser(e,t+r);if(n.format=i.parseUShort(),n.format===12)parseCmapTableFormat12(n,i);else if(n.format===4)parseCmapTableFormat4(n,i,e,t,r);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");return n}function addSegment(e,t,n){e.segments.push({end:t,start:t,delta:-(t-n),offset:0})}function addTerminatorSegment(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function makeCmapTable(e){const t=new table.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.segments=[];for(let a=0;a<e.length;a+=1){const c=e.get(a);for(let g=0;g<c.unicodes.length;g+=1)addSegment(t,c.unicodes[g],a);t.segments=t.segments.sort(function(g,y){return g.start-y.start})}addTerminatorSegment(t);let n;n=t.segments.length,t.segCountX2=n*2,t.searchRange=Math.pow(2,Math.floor(Math.log(n)/Math.log(2)))*2,t.entrySelector=Math.log(t.searchRange/2)/Math.log(2),t.rangeShift=t.segCountX2-t.searchRange;let r=[],i=[],o=[],s=[],l=[];for(let a=0;a<n;a+=1){const c=t.segments[a];r=r.concat({name:"end_"+a,type:"USHORT",value:c.end}),i=i.concat({name:"start_"+a,type:"USHORT",value:c.start}),o=o.concat({name:"idDelta_"+a,type:"SHORT",value:c.delta}),s=s.concat({name:"idRangeOffset_"+a,type:"USHORT",value:c.offset}),c.glyphId!==void 0&&(l=l.concat({name:"glyph_"+a,type:"USHORT",value:c.glyphId}))}return t.fields=t.fields.concat(r),t.fields.push({name:"reservedPad",type:"USHORT",value:0}),t.fields=t.fields.concat(i),t.fields=t.fields.concat(o),t.fields=t.fields.concat(s),t.fields=t.fields.concat(l),t.length=14+r.length*2+2+i.length*2+o.length*2+s.length*2+l.length*2,t}const cmap={parse:parseCmapTable,make:makeCmapTable},cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],standardNames=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function DefaultEncoding(e){this.font=e}DefaultEncoding.prototype.charToGlyphIndex=function(e){const t=e.charCodeAt(0),n=this.font.glyphs;if(n)for(let r=0;r<n.length;r+=1){const i=n.get(r);for(let o=0;o<i.unicodes.length;o+=1)if(i.unicodes[o]===t)return r}return null};function CmapEncoding(e){this.cmap=e}CmapEncoding.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.charCodeAt(0)]||0};function CffEncoding(e,t){this.encoding=e,this.charset=t}CffEncoding.prototype.charToGlyphIndex=function(e){const t=e.charCodeAt(0),n=this.encoding[t];return this.charset.indexOf(n)};function GlyphNames(e){switch(e.version){case 1:this.names=standardNames.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(let t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<standardNames.length?this.names[t]=standardNames[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-standardNames.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(let t=0;t<e.numberOfGlyphs;t++)this.names[t]=standardNames[t+e.glyphNameIndex[t]];break;case 3:this.names=[];break;default:this.names=[];break}}GlyphNames.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)};GlyphNames.prototype.glyphIndexToName=function(e){return this.names[e]};function addGlyphNames(e){let t;const n=e.tables.cmap.glyphIndexMap,r=Object.keys(n);for(let i=0;i<r.length;i+=1){const o=r[i],s=n[o];t=e.glyphs.get(s),t.addUnicode(parseInt(o))}for(let i=0;i<e.glyphs.length;i+=1)t=e.glyphs.get(i),e.cffEncoding?e.isCIDFont?t.name="gid"+i:t.name=e.cffEncoding.charset[i]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(i))}function line(e,t,n,r,i){e.beginPath(),e.moveTo(t,n),e.lineTo(r,i),e.stroke()}const draw={line};function parseGlyphCoordinate(e,t,n,r,i){let o;return(t&r)>0?(o=e.parseByte(),(t&i)===0&&(o=-o),o=n+o):(t&i)>0?o=n:o=n+e.parseShort(),o}function parseGlyph(e,t,n){const r=new parse.Parser(t,n);e.numberOfContours=r.parseShort(),e._xMin=r.parseShort(),e._yMin=r.parseShort(),e._xMax=r.parseShort(),e._yMax=r.parseShort();let i,o;if(e.numberOfContours>0){const s=e.endPointIndices=[];for(let a=0;a<e.numberOfContours;a+=1)s.push(r.parseUShort());e.instructionLength=r.parseUShort(),e.instructions=[];for(let a=0;a<e.instructionLength;a+=1)e.instructions.push(r.parseByte());const l=s[s.length-1]+1;i=[];for(let a=0;a<l;a+=1)if(o=r.parseByte(),i.push(o),(o&8)>0){const c=r.parseByte();for(let g=0;g<c;g+=1)i.push(o),a+=1}if(check.argument(i.length===l,"Bad flags."),s.length>0){const a=[];let c;if(l>0){for(let T=0;T<l;T+=1)o=i[T],c={},c.onCurve=!!(o&1),c.lastPointOfContour=s.indexOf(T)>=0,a.push(c);let g=0;for(let T=0;T<l;T+=1)o=i[T],c=a[T],c.x=parseGlyphCoordinate(r,o,g,2,16),g=c.x;let y=0;for(let T=0;T<l;T+=1)o=i[T],c=a[T],c.y=parseGlyphCoordinate(r,o,y,4,32),y=c.y}e.points=a}else e.points=[]}else if(e.numberOfContours===0)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];let s=!0;for(;s;){i=r.parseUShort();const l={glyphIndex:r.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(i&1)>0?(i&2)>0?(l.dx=r.parseShort(),l.dy=r.parseShort()):l.matchedPoints=[r.parseUShort(),r.parseUShort()]:(i&2)>0?(l.dx=r.parseChar(),l.dy=r.parseChar()):l.matchedPoints=[r.parseByte(),r.parseByte()],(i&8)>0?l.xScale=l.yScale=r.parseF2Dot14():(i&64)>0?(l.xScale=r.parseF2Dot14(),l.yScale=r.parseF2Dot14()):(i&128)>0&&(l.xScale=r.parseF2Dot14(),l.scale01=r.parseF2Dot14(),l.scale10=r.parseF2Dot14(),l.yScale=r.parseF2Dot14()),e.components.push(l),s=!!(i&32)}if(i&256){e.instructionLength=r.parseUShort(),e.instructions=[];for(let l=0;l<e.instructionLength;l+=1)e.instructions.push(r.parseByte())}}}function transformPoints(e,t){const n=[];for(let r=0;r<e.length;r+=1){const i=e[r],o={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};n.push(o)}return n}function getContours(e){const t=[];let n=[];for(let r=0;r<e.length;r+=1){const i=e[r];n.push(i),i.lastPointOfContour&&(t.push(n),n=[])}return check.argument(n.length===0,"There are still points left in the current contour."),t}function getPath(e){const t=new Path;if(!e)return t;const n=getContours(e);for(let r=0;r<n.length;++r){const i=n[r];let o=null,s=i[i.length-1],l=i[0];if(s.onCurve)t.moveTo(s.x,s.y);else if(l.onCurve)t.moveTo(l.x,l.y);else{const a={x:(s.x+l.x)*.5,y:(s.y+l.y)*.5};t.moveTo(a.x,a.y)}for(let a=0;a<i.length;++a)if(o=s,s=l,l=i[(a+1)%i.length],s.onCurve)t.lineTo(s.x,s.y);else{let c=o,g=l;o.onCurve||(c={x:(s.x+o.x)*.5,y:(s.y+o.y)*.5},t.lineTo(c.x,c.y)),l.onCurve||(g={x:(s.x+l.x)*.5,y:(s.y+l.y)*.5}),t.lineTo(c.x,c.y),t.quadraticCurveTo(s.x,s.y,g.x,g.y)}t.closePath()}return t}function buildPath(e,t){if(t.isComposite)for(let n=0;n<t.components.length;n+=1){const r=t.components[n],i=e.get(r.glyphIndex);if(i.getPath(),i.points){let o;if(r.matchedPoints===void 0)o=transformPoints(i.points,r);else{if(r.matchedPoints[0]>t.points.length-1||r.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+t.name);const s=t.points[r.matchedPoints[0]];let l=i.points[r.matchedPoints[1]];const a={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};l=transformPoints([l],a)[0],a.dx=s.x-l.x,a.dy=s.y-l.y,o=transformPoints(i.points,a)}t.points=t.points.concat(o)}}return getPath(t.points)}function parseGlyfTable(e,t,n,r){const i=new glyphset.GlyphSet(r);for(let o=0;o<n.length-1;o+=1){const s=n[o],l=n[o+1];s!==l?i.push(o,glyphset.ttfGlyphLoader(r,o,parseGlyph,e,t+s,buildPath)):i.push(o,glyphset.glyphLoader(r,o))}return i}const glyf={getPath,parse:parseGlyfTable};function getPathDefinition(e,t){let n=t||{commands:[]};return{configurable:!0,get:function(){return typeof n=="function"&&(n=n()),n},set:function(r){n=r}}}function Glyph(e){this.bindConstructorValues(e)}Glyph.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||e.unicode!==void 0?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",getPathDefinition(this,e.path))};Glyph.prototype.addUnicode=function(e){this.unicodes.length===0&&(this.unicode=e),this.unicodes.push(e)};Glyph.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};Glyph.prototype.getPath=function(e,t,n,r,i){e=e!==void 0?e:0,t=t!==void 0?t:0,n=n!==void 0?n:72;let o,s;r||(r={});let l=r.xScale,a=r.yScale;if(r.hinting&&i&&i.hinting&&(s=this.path&&i.hinting.exec(this,n)),s)o=glyf.getPath(s).commands,e=Math.round(e),t=Math.round(t),l=a=1;else{o=this.path.commands;const g=1/this.path.unitsPerEm*n;l===void 0&&(l=g),a===void 0&&(a=g)}const c=new Path;for(let g=0;g<o.length;g+=1){const y=o[g];y.type==="M"?c.moveTo(e+y.x*l,t+-y.y*a):y.type==="L"?c.lineTo(e+y.x*l,t+-y.y*a):y.type==="Q"?c.quadraticCurveTo(e+y.x1*l,t+-y.y1*a,e+y.x*l,t+-y.y*a):y.type==="C"?c.curveTo(e+y.x1*l,t+-y.y1*a,e+y.x2*l,t+-y.y2*a,e+y.x*l,t+-y.y*a):y.type==="Z"&&c.closePath()}return c};Glyph.prototype.getContours=function(){if(this.points===void 0)return[];const e=[];let t=[];for(let n=0;n<this.points.length;n+=1){const r=this.points[n];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return check.argument(t.length===0,"There are still points left in the current contour."),e};Glyph.prototype.getMetrics=function(){const e=this.path.commands,t=[],n=[];for(let i=0;i<e.length;i+=1){const o=e[i];o.type!=="Z"&&(t.push(o.x),n.push(o.y)),(o.type==="Q"||o.type==="C")&&(t.push(o.x1),n.push(o.y1)),o.type==="C"&&(t.push(o.x2),n.push(o.y2))}const r={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(r.xMin)||(r.xMin=0),isFinite(r.xMax)||(r.xMax=this.advanceWidth),isFinite(r.yMin)||(r.yMin=0),isFinite(r.yMax)||(r.yMax=0),r.rightSideBearing=this.advanceWidth-r.leftSideBearing-(r.xMax-r.xMin),r};Glyph.prototype.draw=function(e,t,n,r,i){this.getPath(t,n,r,i).draw(e)};Glyph.prototype.drawPoints=function(e,t,n,r){function i(c,g,y,T){const x=Math.PI*2;e.beginPath();for(let b=0;b<c.length;b+=1)e.moveTo(g+c[b].x*T,y+c[b].y*T),e.arc(g+c[b].x*T,y+c[b].y*T,2,0,x,!1);e.closePath(),e.fill()}t=t!==void 0?t:0,n=n!==void 0?n:0,r=r!==void 0?r:24;const o=1/this.path.unitsPerEm*r,s=[],l=[],a=this.path;for(let c=0;c<a.commands.length;c+=1){const g=a.commands[c];g.x!==void 0&&s.push({x:g.x,y:-g.y}),g.x1!==void 0&&l.push({x:g.x1,y:-g.y1}),g.x2!==void 0&&l.push({x:g.x2,y:-g.y2})}e.fillStyle="blue",i(s,t,n,o),e.fillStyle="red",i(l,t,n,o)};Glyph.prototype.drawMetrics=function(e,t,n,r){let i;t=t!==void 0?t:0,n=n!==void 0?n:0,r=r!==void 0?r:24,i=1/this.path.unitsPerEm*r,e.lineWidth=1,e.strokeStyle="black",draw.line(e,t,-1e4,t,1e4),draw.line(e,-1e4,n,1e4,n);const o=this.xMin||0;let s=this.yMin||0;const l=this.xMax||0;let a=this.yMax||0;const c=this.advanceWidth||0;e.strokeStyle="blue",draw.line(e,t+o*i,-1e4,t+o*i,1e4),draw.line(e,t+l*i,-1e4,t+l*i,1e4),draw.line(e,-1e4,n+-s*i,1e4,n+-s*i),draw.line(e,-1e4,n+-a*i,1e4,n+-a*i),e.strokeStyle="green",draw.line(e,t+c*i,-1e4,t+c*i,1e4)};function defineDependentProperty(e,t,n){Object.defineProperty(e,t,{get:function(){return e.path,e[n]},set:function(r){e[n]=r},enumerable:!0,configurable:!0})}function GlyphSet(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(let n=0;n<t.length;n++)this.glyphs[n]=t[n];this.length=t&&t.length||0}GlyphSet.prototype.get=function(e){return typeof this.glyphs[e]=="function"&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]};GlyphSet.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};function glyphLoader(e,t){return new Glyph({index:t,font:e})}function ttfGlyphLoader(e,t,n,r,i,o){return function(){const s=new Glyph({index:t,font:e});return s.path=function(){n(s,r,i);const l=o(e.glyphs,s);return l.unitsPerEm=e.unitsPerEm,l},defineDependentProperty(s,"xMin","_xMin"),defineDependentProperty(s,"xMax","_xMax"),defineDependentProperty(s,"yMin","_yMin"),defineDependentProperty(s,"yMax","_yMax"),s}}function cffGlyphLoader(e,t,n,r){return function(){const i=new Glyph({index:t,font:e});return i.path=function(){const o=n(e,i,r);return o.unitsPerEm=e.unitsPerEm,o},i}}const glyphset={GlyphSet,glyphLoader,ttfGlyphLoader,cffGlyphLoader};function equals(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(!equals(e[n],t[n]))return!1;return!0}else return!1}function calcCFFSubroutineBias(e){let t;return e.length<1240?t=107:e.length<33900?t=1131:t=32768,t}function parseCFFIndex(e,t,n){const r=[],i=[],o=parse.getCard16(e,t);let s,l;if(o!==0){const a=parse.getByte(e,t+2);s=t+(o+1)*a+2;let c=t+3;for(let g=0;g<o+1;g+=1)r.push(parse.getOffset(e,c,a)),c+=a;l=s+r[o]}else l=t+2;for(let a=0;a<r.length-1;a+=1){let c=parse.getBytes(e,s+r[a],s+r[a+1]);n&&(c=n(c)),i.push(c)}return{objects:i,startOffset:t,endOffset:l}}function parseFloatOperand(e){let t="";const r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(;;){const i=e.parseByte(),o=i>>4,s=i&15;if(o===15||(t+=r[o],s===15))break;t+=r[s]}return parseFloat(t)}function parseOperand(e,t){let n,r,i,o;if(t===28)return n=e.parseByte(),r=e.parseByte(),n<<8|r;if(t===29)return n=e.parseByte(),r=e.parseByte(),i=e.parseByte(),o=e.parseByte(),n<<24|r<<16|i<<8|o;if(t===30)return parseFloatOperand(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return n=e.parseByte(),(t-247)*256+n+108;if(t>=251&&t<=254)return n=e.parseByte(),-(t-251)*256-n-108;throw new Error("Invalid b0 "+t)}function entriesToObject(e){const t={};for(let n=0;n<e.length;n+=1){const r=e[n][0],i=e[n][1];let o;if(i.length===1?o=i[0]:o=i,t.hasOwnProperty(r)&&!isNaN(t[r]))throw new Error("Object "+t+" already has key "+r);t[r]=o}return t}function parseCFFDict(e,t,n){t=t!==void 0?t:0;const r=new parse.Parser(e,t),i=[];let o=[];for(n=n!==void 0?n:e.length;r.relativeOffset<n;){let s=r.parseByte();s<=21?(s===12&&(s=1200+r.parseByte()),i.push([s,o]),o=[]):o.push(parseOperand(r,s))}return entriesToObject(i)}function getCFFString(e,t){return t<=390?t=cffStandardStrings[t]:t=e[t-391],t}function interpretDict(e,t,n){const r={};let i;for(let o=0;o<t.length;o+=1){const s=t[o];if(Array.isArray(s.type)){const l=[];l.length=s.type.length;for(let a=0;a<s.type.length;a++)i=e[s.op]!==void 0?e[s.op][a]:void 0,i===void 0&&(i=s.value!==void 0&&s.value[a]!==void 0?s.value[a]:null),s.type[a]==="SID"&&(i=getCFFString(n,i)),l[a]=i;r[s.name]=l}else i=e[s.op],i===void 0&&(i=s.value!==void 0?s.value:null),s.type==="SID"&&(i=getCFFString(n,i)),r[s.name]=i}return r}function parseCFFHeader(e,t){const n={};return n.formatMajor=parse.getCard8(e,t),n.formatMinor=parse.getCard8(e,t+1),n.size=parse.getCard8(e,t+2),n.offsetSize=parse.getCard8(e,t+3),n.startOffset=t,n.endOffset=t+4,n}const TOP_DICT_META=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],PRIVATE_DICT_META=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function parseCFFTopDict(e,t){const n=parseCFFDict(e,0,e.byteLength);return interpretDict(n,TOP_DICT_META,t)}function parseCFFPrivateDict(e,t,n,r){const i=parseCFFDict(e,t,n);return interpretDict(i,PRIVATE_DICT_META,r)}function gatherCFFTopDicts(e,t,n,r){const i=[];for(let o=0;o<n.length;o+=1){const s=new DataView(new Uint8Array(n[o]).buffer),l=parseCFFTopDict(s,r);l._subrs=[],l._subrsBias=0;const a=l.private[0],c=l.private[1];if(a!==0&&c!==0){const g=parseCFFPrivateDict(e,c+t,a,r);if(l._defaultWidthX=g.defaultWidthX,l._nominalWidthX=g.nominalWidthX,g.subrs!==0){const y=c+g.subrs,T=parseCFFIndex(e,y+t);l._subrs=T.objects,l._subrsBias=calcCFFSubroutineBias(l._subrs)}l._privateDict=g}i.push(l)}return i}function parseCFFCharset(e,t,n,r){let i,o;const s=new parse.Parser(e,t);n-=1;const l=[".notdef"],a=s.parseCard8();if(a===0)for(let c=0;c<n;c+=1)i=s.parseSID(),l.push(getCFFString(r,i));else if(a===1)for(;l.length<=n;){i=s.parseSID(),o=s.parseCard8();for(let c=0;c<=o;c+=1)l.push(getCFFString(r,i)),i+=1}else if(a===2)for(;l.length<=n;){i=s.parseSID(),o=s.parseCard16();for(let c=0;c<=o;c+=1)l.push(getCFFString(r,i)),i+=1}else throw new Error("Unknown charset format "+a);return l}function parseCFFEncoding(e,t,n){let r;const i={},o=new parse.Parser(e,t),s=o.parseCard8();if(s===0){const l=o.parseCard8();for(let a=0;a<l;a+=1)r=o.parseCard8(),i[r]=a}else if(s===1){const l=o.parseCard8();r=1;for(let a=0;a<l;a+=1){const c=o.parseCard8(),g=o.parseCard8();for(let y=c;y<=c+g;y+=1)i[y]=r,r+=1}}else throw new Error("Unknown encoding format "+s);return new CffEncoding(i,n)}function parseCFFCharstring(e,t,n){let r,i,o,s;const l=new Path,a=[];let c=0,g=!1,y=!1,T=0,x=0,b,d,u,p;if(e.isCIDFont){const P=e.tables.cff.topDict._fdSelect[t.index],O=e.tables.cff.topDict._fdArray[P];b=O._subrs,d=O._subrsBias,u=O._defaultWidthX,p=O._nominalWidthX}else b=e.tables.cff.topDict._subrs,d=e.tables.cff.topDict._subrsBias,u=e.tables.cff.topDict._defaultWidthX,p=e.tables.cff.topDict._nominalWidthX;let f=u;function h(P,O){y&&l.closePath(),l.moveTo(P,O),y=!0}function v(){let P;P=a.length%2!==0,P&&!g&&(f=a.shift()+p),c+=a.length>>1,a.length=0,g=!0}function m(P){let O,R,C,w,E,F,S,A,D,L,B,G,_=0;for(;_<P.length;){let q=P[_];switch(_+=1,q){case 1:v();break;case 3:v();break;case 4:a.length>1&&!g&&(f=a.shift()+p,g=!0),x+=a.pop(),h(T,x);break;case 5:for(;a.length>0;)T+=a.shift(),x+=a.shift(),l.lineTo(T,x);break;case 6:for(;a.length>0&&(T+=a.shift(),l.lineTo(T,x),a.length!==0);)x+=a.shift(),l.lineTo(T,x);break;case 7:for(;a.length>0&&(x+=a.shift(),l.lineTo(T,x),a.length!==0);)T+=a.shift(),l.lineTo(T,x);break;case 8:for(;a.length>0;)r=T+a.shift(),i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),T=o+a.shift(),x=s+a.shift(),l.curveTo(r,i,o,s,T,x);break;case 10:E=a.pop()+d,F=b[E],F&&m(F);break;case 11:return;case 12:switch(q=P[_],_+=1,q){case 35:r=T+a.shift(),i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),S=o+a.shift(),A=s+a.shift(),D=S+a.shift(),L=A+a.shift(),B=D+a.shift(),G=L+a.shift(),T=B+a.shift(),x=G+a.shift(),a.shift(),l.curveTo(r,i,o,s,S,A),l.curveTo(D,L,B,G,T,x);break;case 34:r=T+a.shift(),i=x,o=r+a.shift(),s=i+a.shift(),S=o+a.shift(),A=s,D=S+a.shift(),L=s,B=D+a.shift(),G=x,T=B+a.shift(),l.curveTo(r,i,o,s,S,A),l.curveTo(D,L,B,G,T,x);break;case 36:r=T+a.shift(),i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),S=o+a.shift(),A=s,D=S+a.shift(),L=s,B=D+a.shift(),G=L+a.shift(),T=B+a.shift(),l.curveTo(r,i,o,s,S,A),l.curveTo(D,L,B,G,T,x);break;case 37:r=T+a.shift(),i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),S=o+a.shift(),A=s+a.shift(),D=S+a.shift(),L=A+a.shift(),B=D+a.shift(),G=L+a.shift(),Math.abs(B-T)>Math.abs(G-x)?T=B+a.shift():x=G+a.shift(),l.curveTo(r,i,o,s,S,A),l.curveTo(D,L,B,G,T,x);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+q),a.length=0}break;case 14:a.length>0&&!g&&(f=a.shift()+p,g=!0),y&&(l.closePath(),y=!1);break;case 18:v();break;case 19:case 20:v(),_+=c+7>>3;break;case 21:a.length>2&&!g&&(f=a.shift()+p,g=!0),x+=a.pop(),T+=a.pop(),h(T,x);break;case 22:a.length>1&&!g&&(f=a.shift()+p,g=!0),T+=a.pop(),h(T,x);break;case 23:v();break;case 24:for(;a.length>2;)r=T+a.shift(),i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),T=o+a.shift(),x=s+a.shift(),l.curveTo(r,i,o,s,T,x);T+=a.shift(),x+=a.shift(),l.lineTo(T,x);break;case 25:for(;a.length>6;)T+=a.shift(),x+=a.shift(),l.lineTo(T,x);r=T+a.shift(),i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),T=o+a.shift(),x=s+a.shift(),l.curveTo(r,i,o,s,T,x);break;case 26:for(a.length%2&&(T+=a.shift());a.length>0;)r=T,i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),T=o,x=s+a.shift(),l.curveTo(r,i,o,s,T,x);break;case 27:for(a.length%2&&(x+=a.shift());a.length>0;)r=T+a.shift(),i=x,o=r+a.shift(),s=i+a.shift(),T=o+a.shift(),x=s,l.curveTo(r,i,o,s,T,x);break;case 28:O=P[_],R=P[_+1],a.push((O<<24|R<<16)>>16),_+=2;break;case 29:E=a.pop()+e.gsubrsBias,F=e.gsubrs[E],F&&m(F);break;case 30:for(;a.length>0&&(r=T,i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),T=o+a.shift(),x=s+(a.length===1?a.shift():0),l.curveTo(r,i,o,s,T,x),a.length!==0);)r=T+a.shift(),i=x,o=r+a.shift(),s=i+a.shift(),x=s+a.shift(),T=o+(a.length===1?a.shift():0),l.curveTo(r,i,o,s,T,x);break;case 31:for(;a.length>0&&(r=T+a.shift(),i=x,o=r+a.shift(),s=i+a.shift(),x=s+a.shift(),T=o+(a.length===1?a.shift():0),l.curveTo(r,i,o,s,T,x),a.length!==0);)r=T,i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),T=o+a.shift(),x=s+(a.length===1?a.shift():0),l.curveTo(r,i,o,s,T,x);break;default:q<32?console.log("Glyph "+t.index+": unknown operator "+q):q<247?a.push(q-139):q<251?(O=P[_],_+=1,a.push((q-247)*256+O+108)):q<255?(O=P[_],_+=1,a.push(-(q-251)*256-O-108)):(O=P[_],R=P[_+1],C=P[_+2],w=P[_+3],_+=4,a.push((O<<24|R<<16|C<<8|w)/65536))}}}return m(n),t.advanceWidth=f,l}function parseCFFFDSelect(e,t,n,r){const i=[];let o;const s=new parse.Parser(e,t),l=s.parseCard8();if(l===0)for(let a=0;a<n;a++){if(o=s.parseCard8(),o>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+r+")");i.push(o)}else if(l===3){const a=s.parseCard16();let c=s.parseCard16();if(c!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+c);let g;for(let y=0;y<a;y++){if(o=s.parseCard8(),g=s.parseCard16(),o>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+r+")");if(g>n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+g);for(;c<g;c++)i.push(o);c=g}if(g!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+g)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+l);return i}function parseCFFTable(e,t,n){n.tables.cff={};const r=parseCFFHeader(e,t),i=parseCFFIndex(e,r.endOffset,parse.bytesToString),o=parseCFFIndex(e,i.endOffset),s=parseCFFIndex(e,o.endOffset,parse.bytesToString),l=parseCFFIndex(e,s.endOffset);n.gsubrs=l.objects,n.gsubrsBias=calcCFFSubroutineBias(n.gsubrs);const a=gatherCFFTopDicts(e,t,o.objects,s.objects);if(a.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+a.length);const c=a[0];if(n.tables.cff.topDict=c,c._privateDict&&(n.defaultWidthX=c._privateDict.defaultWidthX,n.nominalWidthX=c._privateDict.nominalWidthX),c.ros[0]!==void 0&&c.ros[1]!==void 0&&(n.isCIDFont=!0),n.isCIDFont){let b=c.fdArray,d=c.fdSelect;if(b===0||d===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");b+=t;const u=parseCFFIndex(e,b),p=gatherCFFTopDicts(e,t,u.objects,s.objects);c._fdArray=p,d+=t,c._fdSelect=parseCFFFDSelect(e,d,n.numGlyphs,p.length)}const g=t+c.private[1],y=parseCFFPrivateDict(e,g,c.private[0],s.objects);if(n.defaultWidthX=y.defaultWidthX,n.nominalWidthX=y.nominalWidthX,y.subrs!==0){const b=g+y.subrs,d=parseCFFIndex(e,b);n.subrs=d.objects,n.subrsBias=calcCFFSubroutineBias(n.subrs)}else n.subrs=[],n.subrsBias=0;const T=parseCFFIndex(e,t+c.charStrings);n.nGlyphs=T.objects.length;const x=parseCFFCharset(e,t+c.charset,n.nGlyphs,s.objects);c.encoding===0?n.cffEncoding=new CffEncoding(cffStandardEncoding,x):c.encoding===1?n.cffEncoding=new CffEncoding(cffExpertEncoding,x):n.cffEncoding=parseCFFEncoding(e,t+c.encoding,x),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new glyphset.GlyphSet(n);for(let b=0;b<n.nGlyphs;b+=1){const d=T.objects[b];n.glyphs.push(b,glyphset.cffGlyphLoader(n,b,parseCFFCharstring,d))}}function encodeString(e,t){let n,r=cffStandardStrings.indexOf(e);return r>=0&&(n=r),r=t.indexOf(e),r>=0?n=r+cffStandardStrings.length:(n=cffStandardStrings.length+t.length,t.push(e)),n}function makeHeader(){return new table.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function makeNameIndex(e){const t=new table.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(let n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}function makeDict(e,t,n){const r={};for(let i=0;i<e.length;i+=1){const o=e[i];let s=t[o.name];s!==void 0&&!equals(s,o.value)&&(o.type==="SID"&&(s=encodeString(s,n)),r[o.op]={name:o.name,type:o.type,value:s})}return r}function makeTopDict(e,t){const n=new table.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=makeDict(TOP_DICT_META,e,t),n}function makeTopDictIndex(e){const t=new table.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function makeStringIndex(e){const t=new table.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(let n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}function makeGlobalSubrIndex(){return new table.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function makeCharsets(e,t){const n=new table.Record("Charsets",[{name:"format",type:"Card8",value:0}]);for(let r=0;r<e.length;r+=1){const i=e[r],o=encodeString(i,t);n.fields.push({name:"glyph_"+r,type:"SID",value:o})}return n}function glyphToOps(e){const t=[],n=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});let r=0,i=0;for(let o=0;o<n.commands.length;o+=1){let s,l,a=n.commands[o];if(a.type==="Q"){const c=.3333333333333333,g=2/3;a={type:"C",x:a.x,y:a.y,x1:c*r+g*a.x1,y1:c*i+g*a.y1,x2:c*a.x+g*a.x1,y2:c*a.y+g*a.y1}}if(a.type==="M")s=Math.round(a.x-r),l=Math.round(a.y-i),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:l}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(a.x),i=Math.round(a.y);else if(a.type==="L")s=Math.round(a.x-r),l=Math.round(a.y-i),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:l}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(a.x),i=Math.round(a.y);else if(a.type==="C"){const c=Math.round(a.x1-r),g=Math.round(a.y1-i),y=Math.round(a.x2-a.x1),T=Math.round(a.y2-a.y1);s=Math.round(a.x-a.x2),l=Math.round(a.y-a.y2),t.push({name:"dx1",type:"NUMBER",value:c}),t.push({name:"dy1",type:"NUMBER",value:g}),t.push({name:"dx2",type:"NUMBER",value:y}),t.push({name:"dy2",type:"NUMBER",value:T}),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:l}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(a.x),i=Math.round(a.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}function makeCharStringsIndex(e){const t=new table.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(let n=0;n<e.length;n+=1){const r=e.get(n),i=glyphToOps(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:i})}return t}function makePrivateDict(e,t){const n=new table.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=makeDict(PRIVATE_DICT_META,e,t),n}function makeCFFTable(e,t){const n=new table.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),r=1/t.unitsPerEm,i={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o={},s=[];let l;for(let y=1;y<e.length;y+=1)l=e.get(y),s.push(l.name);const a=[];n.header=makeHeader(),n.nameIndex=makeNameIndex([t.postScriptName]);let c=makeTopDict(i,a);n.topDictIndex=makeTopDictIndex(c),n.globalSubrIndex=makeGlobalSubrIndex(),n.charsets=makeCharsets(s,a),n.charStringsIndex=makeCharStringsIndex(e),n.privateDict=makePrivateDict(o,a),n.stringIndex=makeStringIndex(a);const g=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return i.charset=g,i.encoding=0,i.charStrings=i.charset+n.charsets.sizeOf(),i.private[1]=i.charStrings+n.charStringsIndex.sizeOf(),c=makeTopDict(i,a),n.topDictIndex=makeTopDictIndex(c),n}const cff={parse:parseCFFTable,make:makeCFFTable};function parseHeadTable(e,t){const n={},r=new parse.Parser(e,t);return n.version=r.parseVersion(),n.fontRevision=Math.round(r.parseFixed()*1e3)/1e3,n.checkSumAdjustment=r.parseULong(),n.magicNumber=r.parseULong(),check.argument(n.magicNumber===1594834165,"Font header has wrong magic number."),n.flags=r.parseUShort(),n.unitsPerEm=r.parseUShort(),n.created=r.parseLongDateTime(),n.modified=r.parseLongDateTime(),n.xMin=r.parseShort(),n.yMin=r.parseShort(),n.xMax=r.parseShort(),n.yMax=r.parseShort(),n.macStyle=r.parseUShort(),n.lowestRecPPEM=r.parseUShort(),n.fontDirectionHint=r.parseShort(),n.indexToLocFormat=r.parseShort(),n.glyphDataFormat=r.parseShort(),n}function makeHeadTable(e){const t=Math.round(new Date().getTime()/1e3)+2082844800;let n=t;return e.createdTimestamp&&(n=e.createdTimestamp+2082844800),new table.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}const head={parse:parseHeadTable,make:makeHeadTable};function parseHheaTable(e,t){const n={},r=new parse.Parser(e,t);return n.version=r.parseVersion(),n.ascender=r.parseShort(),n.descender=r.parseShort(),n.lineGap=r.parseShort(),n.advanceWidthMax=r.parseUShort(),n.minLeftSideBearing=r.parseShort(),n.minRightSideBearing=r.parseShort(),n.xMaxExtent=r.parseShort(),n.caretSlopeRise=r.parseShort(),n.caretSlopeRun=r.parseShort(),n.caretOffset=r.parseShort(),r.relativeOffset+=8,n.metricDataFormat=r.parseShort(),n.numberOfHMetrics=r.parseUShort(),n}function makeHheaTable(e){return new table.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}const hhea={parse:parseHheaTable,make:makeHheaTable};function parseHmtxTable(e,t,n,r,i){let o,s;const l=new parse.Parser(e,t);for(let a=0;a<r;a+=1){a<n&&(o=l.parseUShort(),s=l.parseShort());const c=i.get(a);c.advanceWidth=o,c.leftSideBearing=s}}function makeHmtxTable(e){const t=new table.Table("hmtx",[]);for(let n=0;n<e.length;n+=1){const r=e.get(n),i=r.advanceWidth||0,o=r.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:i}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:o})}return t}const hmtx={parse:parseHmtxTable,make:makeHmtxTable};function makeLtagTable(e){const t=new table.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]);let n="";const r=12+e.length*4;for(let i=0;i<e.length;++i){let o=n.indexOf(e[i]);o<0&&(o=n.length,n+=e[i]),t.fields.push({name:"offset "+i,type:"USHORT",value:r+o}),t.fields.push({name:"length "+i,type:"USHORT",value:e[i].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t}function parseLtagTable(e,t){const n=new parse.Parser(e,t),r=n.parseULong();check.argument(r===1,"Unsupported ltag table version."),n.skip("uLong",1);const i=n.parseULong(),o=[];for(let s=0;s<i;s++){let l="";const a=t+n.parseUShort(),c=n.parseUShort();for(let g=a;g<a+c;++g)l+=String.fromCharCode(e.getInt8(g));o.push(l)}return o}const ltag={make:makeLtagTable,parse:parseLtagTable};function parseMaxpTable(e,t){const n={},r=new parse.Parser(e,t);return n.version=r.parseVersion(),n.numGlyphs=r.parseUShort(),n.version===1&&(n.maxPoints=r.parseUShort(),n.maxContours=r.parseUShort(),n.maxCompositePoints=r.parseUShort(),n.maxCompositeContours=r.parseUShort(),n.maxZones=r.parseUShort(),n.maxTwilightPoints=r.parseUShort(),n.maxStorage=r.parseUShort(),n.maxFunctionDefs=r.parseUShort(),n.maxInstructionDefs=r.parseUShort(),n.maxStackElements=r.parseUShort(),n.maxSizeOfInstructions=r.parseUShort(),n.maxComponentElements=r.parseUShort(),n.maxComponentDepth=r.parseUShort()),n}function makeMaxpTable(e){return new table.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}const maxp={parse:parseMaxpTable,make:makeMaxpTable},nameTableNames=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],macLanguages={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},macLanguageToScript={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},windowsLanguages={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function getLanguageCode(e,t,n){switch(e){case 0:if(t===65535)return"und";if(n)return n[t];break;case 1:return macLanguages[t];case 3:return windowsLanguages[t]}}const utf16="utf-16",macScriptEncodings={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},macLanguageEncodings={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function getEncoding(e,t,n){switch(e){case 0:return utf16;case 1:return macLanguageEncodings[n]||macScriptEncodings[t];case 3:if(t===1||t===10)return utf16;break}}function parseNameTable(e,t,n){const r={},i=new parse.Parser(e,t),o=i.parseUShort(),s=i.parseUShort(),l=i.offset+i.parseUShort();for(let a=0;a<s;a++){const c=i.parseUShort(),g=i.parseUShort(),y=i.parseUShort(),T=i.parseUShort(),x=nameTableNames[T]||T,b=i.parseUShort(),d=i.parseUShort(),u=getLanguageCode(c,y,n),p=getEncoding(c,g,y);if(p!==void 0&&u!==void 0){let f;if(p===utf16?f=decode.UTF16(e,l+d,b):f=decode.MACSTRING(e,l+d,b,p),f){let h=r[x];h===void 0&&(h=r[x]={}),h[u]=f}}}return o===1&&i.parseUShort(),r}function reverseDict(e){const t={};for(let n in e)t[e[n]]=parseInt(n);return t}function makeNameRecord(e,t,n,r,i,o){return new table.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:o}])}function findSubArray(e,t){const n=e.length,r=t.length-n+1;e:for(let i=0;i<r;i++)for(;i<r;i++){for(let o=0;o<n;o++)if(t[i+o]!==e[o])continue e;return i}return-1}function addStringToPool(e,t){let n=findSubArray(e,t);if(n<0){n=t.length;let r=0;const i=e.length;for(;r<i;++r)t.push(e[r])}return n}function makeNameTable(e,t){let n;const r=[],i={},o=reverseDict(nameTableNames);for(let y in e){let T=o[y];if(T===void 0&&(T=y),n=parseInt(T),isNaN(n))throw new Error('Name table entry "'+y+'" does not exist, see nameTableNames for complete list.');i[n]=e[y],r.push(n)}const s=reverseDict(macLanguages),l=reverseDict(windowsLanguages),a=[],c=[];for(let y=0;y<r.length;y++){n=r[y];const T=i[n];for(let x in T){const b=T[x];let d=1,u=s[x],p=macLanguageToScript[u];const f=getEncoding(d,p,u);let h=encode.MACSTRING(b,f);h===void 0&&(d=0,u=t.indexOf(x),u<0&&(u=t.length,t.push(x)),p=4,h=encode.UTF16(b));const v=addStringToPool(h,c);a.push(makeNameRecord(d,p,u,n,h.length,v));const m=l[x];if(m!==void 0){const P=encode.UTF16(b),O=addStringToPool(P,c);a.push(makeNameRecord(3,1,m,n,P.length,O))}}}a.sort(function(y,T){return y.platformID-T.platformID||y.encodingID-T.encodingID||y.languageID-T.languageID||y.nameID-T.nameID});const g=new table.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:a.length},{name:"stringOffset",type:"USHORT",value:6+a.length*12}]);for(let y=0;y<a.length;y++)g.fields.push({name:"record_"+y,type:"RECORD",value:a[y]});return g.fields.push({name:"strings",type:"LITERAL",value:c}),g}const _name={parse:parseNameTable,make:makeNameTable},unicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function getUnicodeRange(e){for(let t=0;t<unicodeRanges.length;t+=1){const n=unicodeRanges[t];if(e>=n.begin&&e<n.end)return t}return-1}function parseOS2Table(e,t){const n={},r=new parse.Parser(e,t);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(let i=0;i<10;i++)n.panose[i]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),n.version>=1&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),n.version>=2&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n}function makeOS2Table(e){return new table.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}const os2={parse:parseOS2Table,make:makeOS2Table,unicodeRanges,getUnicodeRange};function parsePostTable(e,t){const n={},r=new parse.Parser(e,t);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=standardNames.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(let i=0;i<n.numberOfGlyphs;i++)n.glyphNameIndex[i]=r.parseUShort();n.names=[];for(let i=0;i<n.numberOfGlyphs;i++)if(n.glyphNameIndex[i]>=standardNames.length){const o=r.parseChar();n.names.push(r.parseString(o))}break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(let i=0;i<n.numberOfGlyphs;i++)n.offset[i]=r.parseChar();break}return n}function makePostTable(){return new table.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}const post={parse:parsePostTable,make:makePostTable},subtableParsers=new Array(9);subtableParsers[1]=function e(){const t=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:1,coverage:this.parsePointer(Parser.coverage),deltaGlyphId:this.parseUShort()};if(n===2)return{substFormat:2,coverage:this.parsePointer(Parser.coverage),substitute:this.parseOffset16List()};check.assert(!1,"0x"+t.toString(16)+": lookup type 1 format must be 1 or 2.")};subtableParsers[2]=function e(){const t=this.parseUShort();return check.argument(t===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(Parser.coverage),sequences:this.parseListOfLists()}};subtableParsers[3]=function e(){const t=this.parseUShort();return check.argument(t===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(Parser.coverage),alternateSets:this.parseListOfLists()}};subtableParsers[4]=function e(){const t=this.parseUShort();return check.argument(t===1,"GSUB ligature table identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(Parser.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};const lookupRecordDesc={sequenceIndex:Parser.uShort,lookupListIndex:Parser.uShort};subtableParsers[5]=function e(){const t=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:n,coverage:this.parsePointer(Parser.coverage),ruleSets:this.parseListOfLists(function(){const r=this.parseUShort(),i=this.parseUShort();return{input:this.parseUShortList(r-1),lookupRecords:this.parseRecordList(i,lookupRecordDesc)}})};if(n===2)return{substFormat:n,coverage:this.parsePointer(Parser.coverage),classDef:this.parsePointer(Parser.classDef),classSets:this.parseListOfLists(function(){const r=this.parseUShort(),i=this.parseUShort();return{classes:this.parseUShortList(r-1),lookupRecords:this.parseRecordList(i,lookupRecordDesc)}})};if(n===3){const r=this.parseUShort(),i=this.parseUShort();return{substFormat:n,coverages:this.parseList(r,Parser.pointer(Parser.coverage)),lookupRecords:this.parseRecordList(i,lookupRecordDesc)}}check.assert(!1,"0x"+t.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};subtableParsers[6]=function e(){const t=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:1,coverage:this.parsePointer(Parser.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})};if(n===2)return{substFormat:2,coverage:this.parsePointer(Parser.coverage),backtrackClassDef:this.parsePointer(Parser.classDef),inputClassDef:this.parsePointer(Parser.classDef),lookaheadClassDef:this.parsePointer(Parser.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})};if(n===3)return{substFormat:3,backtrackCoverage:this.parseList(Parser.pointer(Parser.coverage)),inputCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookaheadCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookupRecords:this.parseRecordList(lookupRecordDesc)};check.assert(!1,"0x"+t.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};subtableParsers[7]=function e(){const t=this.parseUShort();check.argument(t===1,"GSUB Extension Substitution subtable identifier-format must be 1");const n=this.parseUShort(),r=new Parser(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:n,extension:subtableParsers[n].call(r)}};subtableParsers[8]=function e(){const t=this.parseUShort();return check.argument(t===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(Parser.coverage),backtrackCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookaheadCoverage:this.parseList(Parser.pointer(Parser.coverage)),substitutes:this.parseUShortList()}};function parseGsubTable(e,t){t=t||0;const n=new Parser(e,t),r=n.parseVersion();return check.argument(r===1,"Unsupported GSUB table version."),{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(subtableParsers)}}const subtableMakers=new Array(9);subtableMakers[1]=function e(t){return t.substFormat===1?new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(t.coverage)},{name:"deltaGlyphID",type:"USHORT",value:t.deltaGlyphId}]):new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new table.Coverage(t.coverage)}].concat(table.ushortList("substitute",t.substitute)))};subtableMakers[3]=function e(t){return check.assert(t.substFormat===1,"Lookup type 3 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(t.coverage)}].concat(table.tableList("altSet",t.alternateSets,function(n){return new table.Table("alternateSetTable",table.ushortList("alternate",n))})))};subtableMakers[4]=function e(t){return check.assert(t.substFormat===1,"Lookup type 4 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(t.coverage)}].concat(table.tableList("ligSet",t.ligatureSets,function(n){return new table.Table("ligatureSetTable",table.tableList("ligature",n,function(r){return new table.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:r.ligGlyph}].concat(table.ushortList("component",r.components,r.components.length+1)))}))})))};function makeGsubTable(e){return new table.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new table.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new table.LookupList(e.lookups,subtableMakers)}])}const gsub={parse:parseGsubTable,make:makeGsubTable};function parseMetaTable(e,t){const n=new parse.Parser(e,t),r=n.parseULong();check.argument(r===1,"Unsupported META table version."),n.parseULong(),n.parseULong();const i=n.parseULong(),o={};for(let s=0;s<i;s++){const l=n.parseTag(),a=n.parseULong(),c=n.parseULong(),g=decode.UTF8(e,t+a,c);o[l]=g}return o}function makeMetaTable(e){const t=Object.keys(e).length;let n="";const r=16+t*12,i=new table.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:t}]);for(let o in e){const s=n.length;n+=e[o],i.fields.push({name:"tag "+o,type:"TAG",value:o}),i.fields.push({name:"offset "+o,type:"ULONG",value:r+s}),i.fields.push({name:"length "+o,type:"ULONG",value:e[o].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),i}const meta={parse:parseMetaTable,make:makeMetaTable};function log2(e){return Math.log(e)/Math.log(2)|0}function computeCheckSum(e){for(;e.length%4!==0;)e.push(0);let t=0;for(let n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%=Math.pow(2,32),t}function makeTableRecord(e,t,n,r){return new table.Record("Table Record",[{name:"tag",type:"TAG",value:e!==void 0?e:""},{name:"checkSum",type:"ULONG",value:t!==void 0?t:0},{name:"offset",type:"ULONG",value:n!==void 0?n:0},{name:"length",type:"ULONG",value:r!==void 0?r:0}])}function makeSfntTable(e){const t=new table.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;const n=Math.pow(2,log2(t.numTables));t.searchRange=16*n,t.entrySelector=log2(n),t.rangeShift=t.numTables*16-t.searchRange;const r=[],i=[];let o=t.sizeOf()+makeTableRecord().sizeOf()*t.numTables;for(;o%4!==0;)o+=1,i.push({name:"padding",type:"BYTE",value:0});for(let s=0;s<e.length;s+=1){const l=e[s];check.argument(l.tableName.length===4,"Table name"+l.tableName+" is invalid.");const a=l.sizeOf(),c=makeTableRecord(l.tableName,computeCheckSum(l.encode()),o,a);for(r.push({name:c.tag+" Table Record",type:"RECORD",value:c}),i.push({name:l.tableName+" table",type:"RECORD",value:l}),o+=a,check.argument(!isNaN(o),"Something went wrong calculating the offset.");o%4!==0;)o+=1,i.push({name:"padding",type:"BYTE",value:0})}return r.sort(function(s,l){return s.value.tag>l.value.tag?1:-1}),t.fields=t.fields.concat(r),t.fields=t.fields.concat(i),t}function metricsForChar(e,t,n){for(let r=0;r<t.length;r+=1){const i=e.charToGlyphIndex(t[r]);if(i>0)return e.glyphs.get(i).getMetrics()}return n}function average(e){let t=0;for(let n=0;n<e.length;n+=1)t+=e[n];return t/e.length}function fontToSfntTable(e){const t=[],n=[],r=[],i=[],o=[],s=[],l=[];let a,c=0,g=0,y=0,T=0,x=0;for(let U=0;U<e.glyphs.length;U+=1){const I=e.glyphs.get(U),z=I.unicode|0;if(isNaN(I.advanceWidth))throw new Error("Glyph "+I.name+" ("+U+"): advanceWidth is not a number.");(a>z||a===void 0)&&z>0&&(a=z),c<z&&(c=z);const N=os2.getUnicodeRange(z);if(N<32)g|=1<<N;else if(N<64)y|=1<<N-32;else if(N<96)T|=1<<N-64;else if(N<123)x|=1<<N-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(I.name===".notdef")continue;const j=I.getMetrics();t.push(j.xMin),n.push(j.yMin),r.push(j.xMax),i.push(j.yMax),s.push(j.leftSideBearing),l.push(j.rightSideBearing),o.push(I.advanceWidth)}const b={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:average(o),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,l)};b.ascender=e.ascender,b.descender=e.descender;const d=head.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:b.xMin,yMin:b.yMin,xMax:b.xMax,yMax:b.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),u=hhea.make({ascender:b.ascender,descender:b.descender,advanceWidthMax:b.advanceWidthMax,minLeftSideBearing:b.minLeftSideBearing,minRightSideBearing:b.minRightSideBearing,xMaxExtent:b.maxLeftSideBearing+(b.xMax-b.xMin),numberOfHMetrics:e.glyphs.length}),p=maxp.make(e.glyphs.length),f=os2.make({xAvgCharWidth:Math.round(b.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:a,usLastCharIndex:c,ulUnicodeRange1:g,ulUnicodeRange2:y,ulUnicodeRange3:T,ulUnicodeRange4:x,fsSelection:e.tables.os2.fsSelection,sTypoAscender:b.ascender,sTypoDescender:b.descender,sTypoLineGap:0,usWinAscent:b.yMax,usWinDescent:Math.abs(b.yMin),ulCodePageRange1:1,sxHeight:metricsForChar(e,"xyvw",{yMax:Math.round(b.ascender/2)}).yMax,sCapHeight:metricsForChar(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",b).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),h=hmtx.make(e.glyphs),v=cmap.make(e.glyphs),m=e.getEnglishName("fontFamily"),P=e.getEnglishName("fontSubfamily"),O=m+" "+P;let R=e.getEnglishName("postScriptName");R||(R=m.replace(/\s/g,"")+"-"+P);const C={};for(let U in e.names)C[U]=e.names[U];C.uniqueID||(C.uniqueID={en:e.getEnglishName("manufacturer")+":"+O}),C.postScriptName||(C.postScriptName={en:R}),C.preferredFamily||(C.preferredFamily=e.names.fontFamily),C.preferredSubfamily||(C.preferredSubfamily=e.names.fontSubfamily);const w=[],E=_name.make(C,w),F=w.length>0?ltag.make(w):void 0,S=post.make(),A=cff.make(e.glyphs,{version:e.getEnglishName("version"),fullName:O,familyName:m,weightName:P,postScriptName:R,unitsPerEm:e.unitsPerEm,fontBBox:[0,b.yMin,b.ascender,b.advanceWidthMax]}),D=e.metas&&Object.keys(e.metas).length>0?meta.make(e.metas):void 0,L=[d,u,p,f,E,v,S,A,h];F&&L.push(F),e.tables.gsub&&L.push(gsub.make(e.tables.gsub)),D&&L.push(D);const B=makeSfntTable(L),G=B.encode(),_=computeCheckSum(G),q=B.fields;let V=!1;for(let U=0;U<q.length;U+=1)if(q[U].name==="head table"){q[U].value.checkSumAdjustment=2981146554-_,V=!0;break}if(!V)throw new Error("Could not find head table with checkSum to adjust.");return B}const sfnt={make:makeSfntTable,fontToTable:fontToSfntTable,computeCheckSum};function searchTag(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=n+r>>>1,o=e[i].tag;if(o===t)return i;o<t?n=i+1:r=i-1}return-n-1}function binSearch(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=n+r>>>1,o=e[i];if(o===t)return i;o<t?n=i+1:r=i-1}return-n-1}function Layout(e,t){this.font=e,this.tableName=t}Layout.prototype={searchTag,binSearch,getTable:function(e){let t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){let e=this.getTable();return e?e.scripts.map(function(t){return t.tag}):[]},getDefaultScriptName:function(){let e=this.getTable();if(!e)return;let t=!1;for(let n=0;n<e.scripts.length;n++){const r=e.scripts[n].tag;if(r==="DFLT")return r;r==="latn"&&(t=!0)}if(t)return"latn"},getScriptTable:function(e,t){const n=this.getTable(t);if(n){e=e||"DFLT";const r=n.scripts,i=searchTag(n.scripts,e);if(i>=0)return r[i].script;if(t){const o={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-i,0,o),o.script}}},getLangSysTable:function(e,t,n){const r=this.getScriptTable(e,n);if(r){if(!t||t==="dflt"||t==="DFLT")return r.defaultLangSys;const i=searchTag(r.langSysRecords,t);if(i>=0)return r.langSysRecords[i].langSys;if(n){const o={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-i,0,o),o.langSys}}},getFeatureTable:function(e,t,n,r){const i=this.getLangSysTable(e,t,r);if(i){let o;const s=i.featureIndexes,l=this.font.tables[this.tableName].features;for(let a=0;a<s.length;a++)if(o=l[s[a]],o.tag===n)return o.feature;if(r){const a=l.length;return check.assert(a===0||n>=l[a-1].tag,"Features must be added in alphabetical order."),o={tag:n,feature:{params:0,lookupListIndexes:[]}},l.push(o),s.push(a),o.feature}}},getLookupTables:function(e,t,n,r,i){const o=this.getFeatureTable(e,t,n,i),s=[];if(o){let l;const a=o.lookupListIndexes,c=this.font.tables[this.tableName].lookups;for(let g=0;g<a.length;g++)l=c[a[g]],l.lookupType===r&&s.push(l);if(s.length===0&&i){l={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};const g=c.length;return c.push(l),a.push(g),[l]}}return s},expandCoverage:function(e){if(e.format===1)return e.glyphs;{const t=[],n=e.ranges;for(let r=0;r<n.length;r++){const i=n[r],o=i.start,s=i.end;for(let l=o;l<=s;l++)t.push(l)}return t}}};function Substitution(e){Layout.call(this,e,"gsub")}function arraysEqual(e,t){const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function getSubstFormat(e,t,n){const r=e.subtables;for(let i=0;i<r.length;i++){const o=r[i];if(o.substFormat===t)return o}if(n)return r.push(n),n}Substitution.prototype=Layout.prototype;Substitution.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};Substitution.prototype.getSingle=function(e,t,n){const r=[],i=this.getLookupTables(t,n,e,1);for(let o=0;o<i.length;o++){const s=i[o].subtables;for(let l=0;l<s.length;l++){const a=s[l],c=this.expandCoverage(a.coverage);let g;if(a.substFormat===1){const y=a.deltaGlyphId;for(g=0;g<c.length;g++){const T=c[g];r.push({sub:T,by:T+y})}}else{const y=a.substitute;for(g=0;g<c.length;g++)r.push({sub:c[g],by:y[g]})}}}return r};Substitution.prototype.getAlternates=function(e,t,n){const r=[],i=this.getLookupTables(t,n,e,3);for(let o=0;o<i.length;o++){const s=i[o].subtables;for(let l=0;l<s.length;l++){const a=s[l],c=this.expandCoverage(a.coverage),g=a.alternateSets;for(let y=0;y<c.length;y++)r.push({sub:c[y],by:g[y]})}}return r};Substitution.prototype.getLigatures=function(e,t,n){const r=[],i=this.getLookupTables(t,n,e,4);for(let o=0;o<i.length;o++){const s=i[o].subtables;for(let l=0;l<s.length;l++){const a=s[l],c=this.expandCoverage(a.coverage),g=a.ligatureSets;for(let y=0;y<c.length;y++){const T=c[y],x=g[y];for(let b=0;b<x.length;b++){const d=x[b];r.push({sub:[T].concat(d.components),by:d.ligGlyph})}}}}return r};Substitution.prototype.addSingle=function(e,t,n,r){const i=this.getLookupTables(n,r,e,1,!0)[0],o=getSubstFormat(i,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});check.assert(o.coverage.format===1,"Ligature: unable to modify coverage table format "+o.coverage.format);const s=t.sub;let l=this.binSearch(o.coverage.glyphs,s);l<0&&(l=-1-l,o.coverage.glyphs.splice(l,0,s),o.substitute.splice(l,0,0)),o.substitute[l]=t.by};Substitution.prototype.addAlternate=function(e,t,n,r){const i=this.getLookupTables(n,r,e,3,!0)[0],o=getSubstFormat(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});check.assert(o.coverage.format===1,"Ligature: unable to modify coverage table format "+o.coverage.format);const s=t.sub;let l=this.binSearch(o.coverage.glyphs,s);l<0&&(l=-1-l,o.coverage.glyphs.splice(l,0,s),o.alternateSets.splice(l,0,0)),o.alternateSets[l]=t.by};Substitution.prototype.addLigature=function(e,t,n,r){const i=this.getLookupTables(n,r,e,4,!0)[0];let o=i.subtables[0];o||(o={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},i.subtables[0]=o),check.assert(o.coverage.format===1,"Ligature: unable to modify coverage table format "+o.coverage.format);const s=t.sub[0],l=t.sub.slice(1),a={ligGlyph:t.by,components:l};let c=this.binSearch(o.coverage.glyphs,s);if(c>=0){const g=o.ligatureSets[c];for(let y=0;y<g.length;y++)if(arraysEqual(g[y].components,l))return;g.push(a)}else c=-1-c,o.coverage.glyphs.splice(c,0,s),o.ligatureSets.splice(c,0,[a])};Substitution.prototype.getFeature=function(e,t,n){if(/ss\d\d/.test(e))return this.getSingle(e,t,n);switch(e){case"aalt":case"salt":return this.getSingle(e,t,n).concat(this.getAlternates(e,t,n));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,n)}};Substitution.prototype.add=function(e,t,n,r){if(/ss\d\d/.test(e))return this.addSingle(e,t,n,r);switch(e){case"aalt":case"salt":return typeof t.by=="number"?this.addSingle(e,t,n,r):this.addAlternate(e,t,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,n,r)}};function isBrowser(){return typeof window<"u"}function nodeBufferToArrayBuffer(e){const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;++r)n[r]=e[r];return t}function arrayBufferToNodeBuffer(e){const t=new Buffer(e.byteLength),n=new Uint8Array(e);for(let r=0;r<t.length;++r)t[r]=n[r];return t}function checkArgument(e,t){if(!e)throw t}let instructionTable,exec,execGlyph,execComponent;function Hinting(e){this.font=e,this._fpgmState=this._prepState=void 0,this._errorState=0}function roundOff(e){return e}function roundToGrid(e){return Math.sign(e)*Math.round(Math.abs(e))}function roundToDoubleGrid(e){return Math.sign(e)*Math.round(Math.abs(e*2))/2}function roundToHalfGrid(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function roundUpToGrid(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function roundDownToGrid(e){return Math.sign(e)*Math.floor(Math.abs(e))}const roundSuper=function(e){const t=this.srPeriod;let n=this.srPhase;const r=this.srThreshold;let i=1;return e<0&&(e=-e,i=-1),e+=r-n,e=Math.trunc(e/t)*t,e+=n,i>0&&e<0?n:i<0&&e>0?-n:e*i},xUnitVector={x:1,y:0,axis:"x",distance:function(e,t,n,r){return(n?e.xo:e.x)-(r?t.xo:t.x)},interpolate:function(e,t,n,r){let i,o,s,l,a,c,g;if(!r||r===this){if(i=e.xo-t.xo,o=e.xo-n.xo,a=t.x-t.xo,c=n.x-n.xo,s=Math.abs(i),l=Math.abs(o),g=s+l,g===0){e.x=e.xo+(a+c)/2;return}e.x=e.xo+(a*l+c*s)/g;return}if(i=r.distance(e,t,!0,!0),o=r.distance(e,n,!0,!0),a=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),s=Math.abs(i),l=Math.abs(o),g=s+l,g===0){xUnitVector.setRelative(e,e,(a+c)/2,r,!0);return}xUnitVector.setRelative(e,e,(a*l+c*s)/g,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,n,r,i){if(!r||r===this){e.x=(i?t.xo:t.x)+n;return}const o=i?t.xo:t.x,s=i?t.yo:t.y,l=o+n*r.x,a=s+n*r.y;e.x=l+(e.y-a)/r.normalSlope},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},yUnitVector={x:0,y:1,axis:"y",distance:function(e,t,n,r){return(n?e.yo:e.y)-(r?t.yo:t.y)},interpolate:function(e,t,n,r){let i,o,s,l,a,c,g;if(!r||r===this){if(i=e.yo-t.yo,o=e.yo-n.yo,a=t.y-t.yo,c=n.y-n.yo,s=Math.abs(i),l=Math.abs(o),g=s+l,g===0){e.y=e.yo+(a+c)/2;return}e.y=e.yo+(a*l+c*s)/g;return}if(i=r.distance(e,t,!0,!0),o=r.distance(e,n,!0,!0),a=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),s=Math.abs(i),l=Math.abs(o),g=s+l,g===0){yUnitVector.setRelative(e,e,(a+c)/2,r,!0);return}yUnitVector.setRelative(e,e,(a*l+c*s)/g,r,!0)},normalSlope:0,setRelative:function(e,t,n,r,i){if(!r||r===this){e.y=(i?t.yo:t.y)+n;return}const o=i?t.xo:t.x,s=i?t.yo:t.y,l=o+n*r.x,a=s+n*r.y;e.y=a+r.normalSlope*(e.x-l)},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};Object.freeze(xUnitVector);Object.freeze(yUnitVector);function UnitVector(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}UnitVector.prototype.distance=function(e,t,n,r){return this.x*xUnitVector.distance(e,t,n,r)+this.y*yUnitVector.distance(e,t,n,r)};UnitVector.prototype.interpolate=function(e,t,n,r){let i,o,s,l,a,c,g;if(s=r.distance(e,t,!0,!0),l=r.distance(e,n,!0,!0),i=r.distance(t,t,!1,!0),o=r.distance(n,n,!1,!0),a=Math.abs(s),c=Math.abs(l),g=a+c,g===0){this.setRelative(e,e,(i+o)/2,r,!0);return}this.setRelative(e,e,(i*c+o*a)/g,r,!0)};UnitVector.prototype.setRelative=function(e,t,n,r,i){r=r||this;const o=i?t.xo:t.x,s=i?t.yo:t.y,l=o+n*r.x,a=s+n*r.y,c=r.normalSlope,g=this.slope,y=e.x,T=e.y;e.x=(g*y-c*l+a-T)/(g-c),e.y=g*(e.x-y)+T};UnitVector.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0};function getUnitVector(e,t){const n=Math.sqrt(e*e+t*t);return e/=n,t/=n,e===1&&t===0?xUnitVector:e===0&&t===1?yUnitVector:new UnitVector(e,t)}function HPoint(e,t,n,r){this.x=this.xo=Math.round(e*64)/64,this.y=this.yo=Math.round(t*64)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}HPoint.prototype.nextTouched=function(e){let t=this.nextPointOnContour;for(;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t};HPoint.prototype.prevTouched=function(e){let t=this.prevPointOnContour;for(;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};const HPZero=Object.freeze(new HPoint(0,0)),defaultState$1={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function State(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=xUnitVector,this.round=roundToGrid}}Hinting.prototype.exec=function(e,t){if(typeof t!="number")throw new Error("Point size is not a number!");if(this._errorState>2)return;const n=this.font;let r=this._prepState;if(!r||r.ppem!==t){let i=this._fpgmState;if(!i){State.prototype=defaultState$1,i=this._fpgmState=new State("fpgm",n.tables.fpgm),i.funcs=[],i.font=n,exports.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{exec(i)}catch(s){console.log("Hinting error in FPGM:"+s),this._errorState=3;return}}State.prototype=i,r=this._prepState=new State("prep",n.tables.prep),r.ppem=t;const o=n.tables.cvt;if(o){const s=r.cvt=new Array(o.length),l=t/n.unitsPerEm;for(let a=0;a<o.length;a++)s[a]=o[a]*l}else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{exec(r)}catch(s){this._errorState<2&&console.log("Hinting error in PREP:"+s),this._errorState=2}}if(!(this._errorState>1))try{return execGlyph(e,r)}catch(i){this._errorState<1&&(console.log("Hinting error:"+i),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}};execGlyph=function(e,t){const n=t.ppem/t.font.unitsPerEm,r=n;let i=e.components,o,s,l;if(State.prototype=t,!i)l=new State("glyf",e.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),l.step=-1),execComponent(e,l,n,r),s=l.gZone;else{const a=t.font;s=[],o=[];for(let c=0;c<i.length;c++){const g=i[c],y=a.glyphs.get(g.glyphIndex);l=new State("glyf",y.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+c+"---"),l.step=-1),execComponent(y,l,n,r);const T=Math.round(g.dx*n),x=Math.round(g.dy*r),b=l.gZone,d=l.contours;for(let p=0;p<b.length;p++){const f=b[p];f.xTouched=f.yTouched=!1,f.xo=f.x=f.x+T,f.yo=f.y=f.y+x}const u=s.length;s.push.apply(s,b);for(let p=0;p<d.length;p++)o.push(d[p]+u)}e.instructions&&!l.inhibitGridFit&&(l=new State("glyf",e.instructions),l.gZone=l.z0=l.z1=l.z2=s,l.contours=o,s.push(new HPoint(0,0),new HPoint(Math.round(e.advanceWidth*n),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),l.step=-1),exec(l),s.length-=2)}return s};execComponent=function(e,t,n,r){const i=e.points||[],o=i.length,s=t.gZone=t.z0=t.z1=t.z2=[],l=t.contours=[];let a;for(let y=0;y<o;y++)a=i[y],s[y]=new HPoint(a.x*n,a.y*r,a.lastPointOfContour,a.onCurve);let c,g;for(let y=0;y<o;y++)a=s[y],c||(c=a,l.push(y)),a.lastPointOfContour?(a.nextPointOnContour=c,c.prevPointOnContour=a,c=void 0):(g=s[y+1],a.nextPointOnContour=g,g.prevPointOnContour=a);if(!t.inhibitGridFit&&(s.push(new HPoint(0,0),new HPoint(Math.round(e.advanceWidth*n),0)),exec(t),s.length-=2,exports.DEBUG)){console.log("FINISHED GLYPH",t.stack);for(let y=0;y<o;y++)console.log(y,s[y].x,s[y].y)}};exec=function(e){let t=e.prog;if(!t)return;const n=t.length;let r;for(e.ip=0;e.ip<n;e.ip++){if(exports.DEBUG&&e.step++,r=instructionTable[t[e.ip]],!r)throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));r(e)}};function initTZone(e){const t=e.tZone=new Array(e.gZone.length);for(let n=0;n<t.length;n++)t[n]=new HPoint(0,0)}function skip(e,t){const n=e.prog;let r=e.ip,i=1,o;do if(o=n[++r],o===88)i++;else if(o===89)i--;else if(o===64)r+=n[r+1]+1;else if(o===65)r+=2*n[r+1]+1;else if(o>=176&&o<=183)r+=o-176+1;else if(o>=184&&o<=191)r+=(o-184+1)*2;else if(t&&i===1&&o===27)break;while(i>0);e.ip=r}function SVTCA(e,t){exports.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function SPVTCA(e,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function SFVTCA(e,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function SPVTL(e,t){const n=t.stack,r=n.pop(),i=n.pop(),o=t.z2[r],s=t.z1[i];exports.DEBUG&&console.log("SPVTL["+e+"]",r,i);let l,a;e?(l=o.y-s.y,a=s.x-o.x):(l=s.x-o.x,a=s.y-o.y),t.pv=t.dpv=getUnitVector(l,a)}function SFVTL(e,t){const n=t.stack,r=n.pop(),i=n.pop(),o=t.z2[r],s=t.z1[i];exports.DEBUG&&console.log("SFVTL["+e+"]",r,i);let l,a;e?(l=o.y-s.y,a=s.x-o.x):(l=s.x-o.x,a=s.y-o.y),t.fv=getUnitVector(l,a)}function SPVFS(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.pv=e.dpv=getUnitVector(r,n)}function SFVFS(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.fv=getUnitVector(r,n)}function GPV(e){const t=e.stack,n=e.pv;exports.DEBUG&&console.log(e.step,"GPV[]"),t.push(n.x*16384),t.push(n.y*16384)}function GFV(e){const t=e.stack,n=e.fv;exports.DEBUG&&console.log(e.step,"GFV[]"),t.push(n.x*16384),t.push(n.y*16384)}function SFVTPV(e){e.fv=e.pv,exports.DEBUG&&console.log(e.step,"SFVTPV[]")}function ISECT(e){const t=e.stack,n=t.pop(),r=t.pop(),i=t.pop(),o=t.pop(),s=t.pop(),l=e.z0,a=e.z1,c=l[n],g=l[r],y=a[i],T=a[o],x=e.z2[s];exports.DEBUG&&console.log("ISECT[], ",n,r,i,o,s);const b=c.x,d=c.y,u=g.x,p=g.y,f=y.x,h=y.y,v=T.x,m=T.y,P=(b-u)*(h-m)-(d-p)*(f-v),O=b*p-d*u,R=f*m-h*v;x.x=(O*(f-v)-R*(b-u))/P,x.y=(O*(h-m)-R*(d-p))/P}function SRP0(e){e.rp0=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)}function SRP1(e){e.rp1=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)}function SRP2(e){e.rp2=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)}function SZP0(e){const t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||initTZone(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZP1(e){const t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||initTZone(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZP2(e){const t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||initTZone(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZPS(e){const t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||initTZone(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SLOOP(e){e.loop=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)}function RTG(e){exports.DEBUG&&console.log(e.step,"RTG[]"),e.round=roundToGrid}function RTHG(e){exports.DEBUG&&console.log(e.step,"RTHG[]"),e.round=roundToHalfGrid}function SMD(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64}function ELSE(e){exports.DEBUG&&console.log(e.step,"ELSE[]"),skip(e,!1)}function JMPR(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1}function SCVTCI(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64}function DUP(e){const t=e.stack;exports.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])}function POP(e){exports.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function CLEAR(e){exports.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0}function SWAP(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SWAP[]"),t.push(n),t.push(r)}function DEPTH(e){const t=e.stack;exports.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)}function LOOPCALL(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LOOPCALL[]",n,r);const i=e.ip,o=e.prog;e.prog=e.funcs[n];for(let s=0;s<r;s++)exec(e),exports.DEBUG&&console.log(++e.step,s+1<r?"next loopcall":"done loopcall",s);e.ip=i,e.prog=o}function CALL(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"CALL[]",t);const n=e.ip,r=e.prog;e.prog=e.funcs[t],exec(e),e.ip=n,e.prog=r,exports.DEBUG&&console.log(++e.step,"returning from",t)}function CINDEX(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"CINDEX[]",n),t.push(t[t.length-n])}function MINDEX(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"MINDEX[]",n),t.push(t.splice(t.length-n,1)[0])}function FDEF(e){if(e.env!=="fpgm")throw new Error("FDEF not allowed here");const t=e.stack,n=e.prog;let r=e.ip;const i=t.pop(),o=r;for(exports.DEBUG&&console.log(e.step,"FDEF[]",i);n[++r]!==45;);e.ip=r,e.funcs[i]=n.slice(o+1,r)}function MDAP(e,t){const n=t.stack.pop(),r=t.z0[n],i=t.fv,o=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+e+"]",n);let s=o.distance(r,HPZero);e&&(s=t.round(s)),i.setRelative(r,HPZero,s,o),i.touch(r),t.rp0=t.rp1=n}function IUP(e,t){const n=t.z2,r=n.length-2;let i,o,s;exports.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(let l=0;l<r;l++)i=n[l],!e.touched(i)&&(o=i.prevTouched(e),o!==i&&(s=i.nextTouched(e),o===s&&e.setRelative(i,i,e.distance(o,o,!1,!0),e,!0),e.interpolate(i,o,s,e)))}function SHP(e,t){const n=t.stack,r=e?t.rp1:t.rp2,i=(e?t.z0:t.z1)[r],o=t.fv,s=t.pv;let l=t.loop;const a=t.z2;for(;l--;){const c=n.pop(),g=a[c],y=s.distance(i,i,!1,!0);o.setRelative(g,g,y,s),o.touch(g),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-l)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",c)}t.loop=1}function SHC(e,t){const n=t.stack,r=e?t.rp1:t.rp2,i=(e?t.z0:t.z1)[r],o=t.fv,s=t.pv,l=n.pop(),a=t.z2[t.contours[l]];let c=a;exports.DEBUG&&console.log(t.step,"SHC["+e+"]",l);const g=s.distance(i,i,!1,!0);do c!==i&&o.setRelative(c,c,g,s),c=c.nextPointOnContour;while(c!==a)}function SHZ(e,t){const n=t.stack,r=e?t.rp1:t.rp2,i=(e?t.z0:t.z1)[r],o=t.fv,s=t.pv,l=n.pop();exports.DEBUG&&console.log(t.step,"SHZ["+e+"]",l);let a;switch(l){case 0:a=t.tZone;break;case 1:a=t.gZone;break;default:throw new Error("Invalid zone")}let c;const g=s.distance(i,i,!1,!0),y=a.length-2;for(let T=0;T<y;T++)c=a[T],c!==i&&o.setRelative(c,c,g,s)}function SHPIX(e){const t=e.stack;let n=e.loop;const r=e.fv,i=t.pop()/64,o=e.z2;for(;n--;){const s=t.pop(),l=o[s];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-n)+": ":"")+"SHPIX[]",s,i),r.setRelative(l,l,i),r.touch(l)}e.loop=1}function IP(e){const t=e.stack,n=e.rp1,r=e.rp2;let i=e.loop;const o=e.z0[n],s=e.z1[r],l=e.fv,a=e.dpv,c=e.z2;for(;i--;){const g=t.pop(),y=c[g];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"IP[]",g,n,"<->",r),l.interpolate(y,o,s,a),l.touch(y)}e.loop=1}function MSIRP(e,t){const n=t.stack,r=n.pop()/64,i=n.pop(),o=t.z1[i],s=t.z0[t.rp0],l=t.fv,a=t.pv;l.setRelative(o,s,r,a),l.touch(o),exports.DEBUG&&console.log(t.step,"MSIRP["+e+"]",r,i),t.rp1=t.rp0,t.rp2=i,e&&(t.rp0=i)}function ALIGNRP(e){const t=e.stack,n=e.rp0,r=e.z0[n];let i=e.loop;const o=e.fv,s=e.pv,l=e.z1;for(;i--;){const a=t.pop(),c=l[a];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"ALIGNRP[]",a),o.setRelative(c,r,0,s),o.touch(c)}e.loop=1}function RTDG(e){exports.DEBUG&&console.log(e.step,"RTDG[]"),e.round=roundToDoubleGrid}function MIAP(e,t){const n=t.stack,r=n.pop(),i=n.pop(),o=t.z0[i],s=t.fv,l=t.pv;let a=t.cvt[r];e&&(a=t.round(a)),exports.DEBUG&&console.log(t.step,"MIAP["+e+"]",r,"(",a,")",i),s.setRelative(o,HPZero,a,l),t.zp0===0&&(o.xo=o.x,o.yo=o.y),s.touch(o),t.rp0=t.rp1=i}function NPUSHB(e){const t=e.prog;let n=e.ip;const r=e.stack,i=t[++n];exports.DEBUG&&console.log(e.step,"NPUSHB[]",i);for(let o=0;o<i;o++)r.push(t[++n]);e.ip=n}function NPUSHW(e){let t=e.ip;const n=e.prog,r=e.stack,i=n[++t];exports.DEBUG&&console.log(e.step,"NPUSHW[]",i);for(let o=0;o<i;o++){let s=n[++t]<<8|n[++t];s&32768&&(s=-((s^65535)+1)),r.push(s)}e.ip=t}function WS(e){const t=e.stack;let n=e.store;n||(n=e.store=[]);const r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"WS",r,i),n[i]=r}function RS(e){const t=e.stack,n=e.store,r=t.pop();exports.DEBUG&&console.log(e.step,"RS",r);const i=n&&n[r]||0;t.push(i)}function WCVTP(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTP",n,r),e.cvt[r]=n/64}function RCVT(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"RCVT",n),t.push(e.cvt[n]*64)}function GC(e,t){const n=t.stack,r=n.pop(),i=t.z2[r];exports.DEBUG&&console.log(t.step,"GC["+e+"]",r),n.push(t.dpv.distance(i,HPZero,e,!1)*64)}function MD(e,t){const n=t.stack,r=n.pop(),i=n.pop(),o=t.z1[r],s=t.z0[i],l=t.dpv.distance(s,o,e,e);exports.DEBUG&&console.log(t.step,"MD["+e+"]",r,i,"->",l),t.stack.push(Math.round(l*64))}function MPPEM(e){exports.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)}function FLIPON(e){exports.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0}function LT(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LT[]",n,r),t.push(r<n?1:0)}function LTEQ(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LTEQ[]",n,r),t.push(r<=n?1:0)}function GT(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GT[]",n,r),t.push(r>n?1:0)}function GTEQ(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GTEQ[]",n,r),t.push(r>=n?1:0)}function EQ(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"EQ[]",n,r),t.push(n===r?1:0)}function NEQ(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"NEQ[]",n,r),t.push(n!==r?1:0)}function ODD(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"ODD[]",n),t.push(Math.trunc(n)%2?1:0)}function EVEN(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"EVEN[]",n),t.push(Math.trunc(n)%2?0:1)}function IF(e){let t=e.stack.pop();exports.DEBUG&&console.log(e.step,"IF[]",t),t||(skip(e,!0),exports.DEBUG&&console.log(e.step,"EIF[]"))}function EIF(e){exports.DEBUG&&console.log(e.step,"EIF[]")}function AND(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"AND[]",n,r),t.push(n&&r?1:0)}function OR(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"OR[]",n,r),t.push(n||r?1:0)}function NOT(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"NOT[]",n),t.push(n?0:1)}function DELTAP123(e,t){const n=t.stack,r=n.pop(),i=t.fv,o=t.pv,s=t.ppem,l=t.deltaBase+(e-1)*16,a=t.deltaShift,c=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+e+"]",r,n);for(let g=0;g<r;g++){const y=n.pop(),T=n.pop();if(l+((T&240)>>4)!==s)continue;let b=(T&15)-8;b>=0&&b++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",y,"by",b*a);const d=c[y];i.setRelative(d,d,b*a,o)}}function SDB(e){const n=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDB[]",n),e.deltaBase=n}function SDS(e){const n=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDS[]",n),e.deltaShift=Math.pow(.5,n)}function ADD(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"ADD[]",n,r),t.push(r+n)}function SUB(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SUB[]",n,r),t.push(r-n)}function DIV(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"DIV[]",n,r),t.push(r*64/n)}function MUL(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MUL[]",n,r),t.push(r*n/64)}function ABS(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"ABS[]",n),t.push(Math.abs(n))}function NEG(e){const t=e.stack;let n=t.pop();exports.DEBUG&&console.log(e.step,"NEG[]",n),t.push(-n)}function FLOOR(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"FLOOR[]",n),t.push(Math.floor(n/64)*64)}function CEILING(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"CEILING[]",n),t.push(Math.ceil(n/64)*64)}function ROUND(e,t){const n=t.stack,r=n.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),n.push(t.round(r/64)*64)}function WCVTF(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTF[]",n,r),e.cvt[r]=n*e.ppem/e.font.unitsPerEm}function DELTAC123(e,t){const n=t.stack,r=n.pop(),i=t.ppem,o=t.deltaBase+(e-1)*16,s=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+e+"]",r,n);for(let l=0;l<r;l++){const a=n.pop(),c=n.pop();if(o+((c&240)>>4)!==i)continue;let y=(c&15)-8;y>=0&&y++;const T=y*s;exports.DEBUG&&console.log(t.step,"DELTACFIX",a,"by",T),t.cvt[a]+=T}}function SROUND(e){let t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SROUND[]",t),e.round=roundSuper;let n;switch(t&192){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=n,t&48){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}t&=15,t===0?e.srThreshold=0:e.srThreshold=(t/8-.5)*n}function S45ROUND(e){let t=e.stack.pop();exports.DEBUG&&console.log(e.step,"S45ROUND[]",t),e.round=roundSuper;let n;switch(t&192){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=n,t&48){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}t&=15,t===0?e.srThreshold=0:e.srThreshold=(t/8-.5)*n}function ROFF(e){exports.DEBUG&&console.log(e.step,"ROFF[]"),e.round=roundOff}function RUTG(e){exports.DEBUG&&console.log(e.step,"RUTG[]"),e.round=roundUpToGrid}function RDTG(e){exports.DEBUG&&console.log(e.step,"RDTG[]"),e.round=roundDownToGrid}function SCANCTRL(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANCTRL[]",t)}function SDPVTL(e,t){const n=t.stack,r=n.pop(),i=n.pop(),o=t.z2[r],s=t.z1[i];exports.DEBUG&&console.log("SDPVTL["+e+"]",r,i);let l,a;e?(l=o.y-s.y,a=s.x-o.x):(l=s.x-o.x,a=s.y-o.y),t.dpv=getUnitVector(l,a)}function GETINFO(e){const t=e.stack,n=t.pop();let r=0;exports.DEBUG&&console.log(e.step,"GETINFO[]",n),n&1&&(r=35),n&32&&(r|=4096),t.push(r)}function ROLL(e){const t=e.stack,n=t.pop(),r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"ROLL[]"),t.push(r),t.push(n),t.push(i)}function MAX(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MAX[]",n,r),t.push(Math.max(r,n))}function MIN(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MIN[]",n,r),t.push(Math.min(r,n))}function SCANTYPE(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANTYPE[]",t)}function INSTCTRL(e){const t=e.stack.pop();let n=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"INSTCTRL[]",t,n),t){case 1:e.inhibitGridFit=!!n;return;case 2:e.ignoreCvt=!!n;return;default:throw new Error("invalid INSTCTRL[] selector")}}function PUSHB(e,t){const n=t.stack,r=t.prog;let i=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(let o=0;o<e;o++)n.push(r[++i]);t.ip=i}function PUSHW(e,t){let n=t.ip;const r=t.prog,i=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(let o=0;o<e;o++){let s=r[++n]<<8|r[++n];s&32768&&(s=-((s^65535)+1)),i.push(s)}t.ip=n}function MDRP_MIRP(e,t,n,r,i,o){const s=o.stack,l=e&&s.pop(),a=s.pop(),c=o.rp0,g=o.z0[c],y=o.z1[a],T=o.minDis,x=o.fv,b=o.dpv;let d,u,p,f;u=d=b.distance(y,g,!0,!0),p=u>=0?1:-1,u=Math.abs(u),e&&(f=o.cvt[l],r&&Math.abs(u-f)<o.cvCutIn&&(u=f)),n&&u<T&&(u=T),r&&(u=o.round(u)),x.setRelative(y,g,p*u,b),x.touch(y),exports.DEBUG&&console.log(o.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(n?">":"_")+(r?"R":"_")+(i===0?"Gr":i===1?"Bl":i===2?"Wh":"")+"]",e?l+"("+o.cvt[l]+","+f+")":"",a,"(d =",d,"->",p*u,")"),o.rp1=o.rp0,o.rp2=a,t&&(o.rp0=a)}instructionTable=[SVTCA.bind(void 0,yUnitVector),SVTCA.bind(void 0,xUnitVector),SPVTCA.bind(void 0,yUnitVector),SPVTCA.bind(void 0,xUnitVector),SFVTCA.bind(void 0,yUnitVector),SFVTCA.bind(void 0,xUnitVector),SPVTL.bind(void 0,0),SPVTL.bind(void 0,1),SFVTL.bind(void 0,0),SFVTL.bind(void 0,1),SPVFS,SFVFS,GPV,GFV,SFVTPV,ISECT,SRP0,SRP1,SRP2,SZP0,SZP1,SZP2,SZPS,SLOOP,RTG,RTHG,SMD,ELSE,JMPR,SCVTCI,void 0,void 0,DUP,POP,CLEAR,SWAP,DEPTH,CINDEX,MINDEX,void 0,void 0,void 0,LOOPCALL,CALL,FDEF,void 0,MDAP.bind(void 0,0),MDAP.bind(void 0,1),IUP.bind(void 0,yUnitVector),IUP.bind(void 0,xUnitVector),SHP.bind(void 0,0),SHP.bind(void 0,1),SHC.bind(void 0,0),SHC.bind(void 0,1),SHZ.bind(void 0,0),SHZ.bind(void 0,1),SHPIX,IP,MSIRP.bind(void 0,0),MSIRP.bind(void 0,1),ALIGNRP,RTDG,MIAP.bind(void 0,0),MIAP.bind(void 0,1),NPUSHB,NPUSHW,WS,RS,WCVTP,RCVT,GC.bind(void 0,0),GC.bind(void 0,1),void 0,MD.bind(void 0,0),MD.bind(void 0,1),MPPEM,void 0,FLIPON,void 0,void 0,LT,LTEQ,GT,GTEQ,EQ,NEQ,ODD,EVEN,IF,EIF,AND,OR,NOT,DELTAP123.bind(void 0,1),SDB,SDS,ADD,SUB,DIV,MUL,ABS,NEG,FLOOR,CEILING,ROUND.bind(void 0,0),ROUND.bind(void 0,1),ROUND.bind(void 0,2),ROUND.bind(void 0,3),void 0,void 0,void 0,void 0,WCVTF,DELTAP123.bind(void 0,2),DELTAP123.bind(void 0,3),DELTAC123.bind(void 0,1),DELTAC123.bind(void 0,2),DELTAC123.bind(void 0,3),SROUND,S45ROUND,void 0,void 0,ROFF,void 0,RUTG,RDTG,POP,POP,void 0,void 0,void 0,void 0,void 0,SCANCTRL,SDPVTL.bind(void 0,0),SDPVTL.bind(void 0,1),GETINFO,void 0,ROLL,MAX,MIN,SCANTYPE,INSTCTRL,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,PUSHB.bind(void 0,1),PUSHB.bind(void 0,2),PUSHB.bind(void 0,3),PUSHB.bind(void 0,4),PUSHB.bind(void 0,5),PUSHB.bind(void 0,6),PUSHB.bind(void 0,7),PUSHB.bind(void 0,8),PUSHW.bind(void 0,1),PUSHW.bind(void 0,2),PUSHW.bind(void 0,3),PUSHW.bind(void 0,4),PUSHW.bind(void 0,5),PUSHW.bind(void 0,6),PUSHW.bind(void 0,7),PUSHW.bind(void 0,8),MDRP_MIRP.bind(void 0,0,0,0,0,0),MDRP_MIRP.bind(void 0,0,0,0,0,1),MDRP_MIRP.bind(void 0,0,0,0,0,2),MDRP_MIRP.bind(void 0,0,0,0,0,3),MDRP_MIRP.bind(void 0,0,0,0,1,0),MDRP_MIRP.bind(void 0,0,0,0,1,1),MDRP_MIRP.bind(void 0,0,0,0,1,2),MDRP_MIRP.bind(void 0,0,0,0,1,3),MDRP_MIRP.bind(void 0,0,0,1,0,0),MDRP_MIRP.bind(void 0,0,0,1,0,1),MDRP_MIRP.bind(void 0,0,0,1,0,2),MDRP_MIRP.bind(void 0,0,0,1,0,3),MDRP_MIRP.bind(void 0,0,0,1,1,0),MDRP_MIRP.bind(void 0,0,0,1,1,1),MDRP_MIRP.bind(void 0,0,0,1,1,2),MDRP_MIRP.bind(void 0,0,0,1,1,3),MDRP_MIRP.bind(void 0,0,1,0,0,0),MDRP_MIRP.bind(void 0,0,1,0,0,1),MDRP_MIRP.bind(void 0,0,1,0,0,2),MDRP_MIRP.bind(void 0,0,1,0,0,3),MDRP_MIRP.bind(void 0,0,1,0,1,0),MDRP_MIRP.bind(void 0,0,1,0,1,1),MDRP_MIRP.bind(void 0,0,1,0,1,2),MDRP_MIRP.bind(void 0,0,1,0,1,3),MDRP_MIRP.bind(void 0,0,1,1,0,0),MDRP_MIRP.bind(void 0,0,1,1,0,1),MDRP_MIRP.bind(void 0,0,1,1,0,2),MDRP_MIRP.bind(void 0,0,1,1,0,3),MDRP_MIRP.bind(void 0,0,1,1,1,0),MDRP_MIRP.bind(void 0,0,1,1,1,1),MDRP_MIRP.bind(void 0,0,1,1,1,2),MDRP_MIRP.bind(void 0,0,1,1,1,3),MDRP_MIRP.bind(void 0,1,0,0,0,0),MDRP_MIRP.bind(void 0,1,0,0,0,1),MDRP_MIRP.bind(void 0,1,0,0,0,2),MDRP_MIRP.bind(void 0,1,0,0,0,3),MDRP_MIRP.bind(void 0,1,0,0,1,0),MDRP_MIRP.bind(void 0,1,0,0,1,1),MDRP_MIRP.bind(void 0,1,0,0,1,2),MDRP_MIRP.bind(void 0,1,0,0,1,3),MDRP_MIRP.bind(void 0,1,0,1,0,0),MDRP_MIRP.bind(void 0,1,0,1,0,1),MDRP_MIRP.bind(void 0,1,0,1,0,2),MDRP_MIRP.bind(void 0,1,0,1,0,3),MDRP_MIRP.bind(void 0,1,0,1,1,0),MDRP_MIRP.bind(void 0,1,0,1,1,1),MDRP_MIRP.bind(void 0,1,0,1,1,2),MDRP_MIRP.bind(void 0,1,0,1,1,3),MDRP_MIRP.bind(void 0,1,1,0,0,0),MDRP_MIRP.bind(void 0,1,1,0,0,1),MDRP_MIRP.bind(void 0,1,1,0,0,2),MDRP_MIRP.bind(void 0,1,1,0,0,3),MDRP_MIRP.bind(void 0,1,1,0,1,0),MDRP_MIRP.bind(void 0,1,1,0,1,1),MDRP_MIRP.bind(void 0,1,1,0,1,2),MDRP_MIRP.bind(void 0,1,1,0,1,3),MDRP_MIRP.bind(void 0,1,1,1,0,0),MDRP_MIRP.bind(void 0,1,1,1,0,1),MDRP_MIRP.bind(void 0,1,1,1,0,2),MDRP_MIRP.bind(void 0,1,1,1,0,3),MDRP_MIRP.bind(void 0,1,1,1,1,0),MDRP_MIRP.bind(void 0,1,1,1,1,1),MDRP_MIRP.bind(void 0,1,1,1,1,2),MDRP_MIRP.bind(void 0,1,1,1,1,3)];function Font(e){e=e||{},e.empty||(checkArgument(e.familyName,"When creating a new Font object, familyName is required."),checkArgument(e.styleName,"When creating a new Font object, styleName is required."),checkArgument(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),checkArgument(e.ascender,"When creating a new Font object, ascender is required."),checkArgument(e.descender,"When creating a new Font object, descender is required."),checkArgument(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||e.familyName+e.styleName},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new glyphset.GlyphSet(this,e.glyphs||[]),this.encoding=new DefaultEncoding(this),this.substitution=new Substitution(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new Hinting(this)}})}Font.prototype.hasChar=function(e){return this.encoding.charToGlyphIndex(e)!==null};Font.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)};Font.prototype.charToGlyph=function(e){const t=this.charToGlyphIndex(e);let n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n};Font.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;const n=[];for(let s=0;s<e.length;s+=1){const l=e[s];n.push(this.charToGlyphIndex(l))}let r=n.length;if(t.features){const s=t.script||this.substitution.getDefaultScriptName();let l=[];t.features.liga&&(l=l.concat(this.substitution.getFeature("liga",s,t.language))),t.features.rlig&&(l=l.concat(this.substitution.getFeature("rlig",s,t.language)));for(let a=0;a<r;a+=1)for(let c=0;c<l.length;c++){const g=l[c],y=g.sub,T=y.length;let x=0;for(;x<T&&y[x]===n[a+x];)x++;x===T&&(n.splice(a,T,g.by),r=r-T+1)}}const i=new Array(r),o=this.glyphs.get(0);for(let s=0;s<r;s+=1)i[s]=this.glyphs.get(n[s])||o;return i};Font.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)};Font.prototype.nameToGlyph=function(e){const t=this.nameToGlyphIndex(e);let n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n};Font.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""};Font.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;const n=this.getGposKerningValue;return n?n(e,t):this.kerningPairs[e+","+t]||0};Font.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}};Font.prototype.forEachGlyph=function(e,t,n,r,i,o){t=t!==void 0?t:0,n=n!==void 0?n:0,r=r!==void 0?r:72,i=i||this.defaultRenderOptions;const s=1/this.unitsPerEm*r,l=this.stringToGlyphs(e,i);for(let a=0;a<l.length;a+=1){const c=l[a];if(o.call(this,c,t,n,r,i),c.advanceWidth&&(t+=c.advanceWidth*s),i.kerning&&a<l.length-1){const g=this.getKerningValue(c,l[a+1]);t+=g*s}i.letterSpacing?t+=i.letterSpacing*r:i.tracking&&(t+=i.tracking/1e3*r)}return t};Font.prototype.getPath=function(e,t,n,r,i){const o=new Path;return this.forEachGlyph(e,t,n,r,i,function(s,l,a,c){const g=s.getPath(l,a,c,i,this);o.extend(g)}),o};Font.prototype.getPaths=function(e,t,n,r,i){const o=[];return this.forEachGlyph(e,t,n,r,i,function(s,l,a,c){const g=s.getPath(l,a,c,i,this);o.push(g)}),o};Font.prototype.getAdvanceWidth=function(e,t,n){return this.forEachGlyph(e,0,0,t,n,function(){})};Font.prototype.draw=function(e,t,n,r,i,o){this.getPath(t,n,r,i,o).draw(e)};Font.prototype.drawPoints=function(e,t,n,r,i,o){this.forEachGlyph(t,n,r,i,o,function(s,l,a,c){s.drawPoints(e,l,a,c)})};Font.prototype.drawMetrics=function(e,t,n,r,i,o){this.forEachGlyph(t,n,r,i,o,function(s,l,a,c){s.drawMetrics(e,l,a,c)})};Font.prototype.getEnglishName=function(e){const t=this.names[e];if(t)return t.en};Font.prototype.validate=function(){const e=this;function t(r,i){}function n(r){const i=e.getEnglishName(r);i&&i.trim().length>0}n("fontFamily"),n("weightName"),n("manufacturer"),n("copyright"),n("version"),this.unitsPerEm>0};Font.prototype.toTables=function(){return sfnt.fontToTable(this)};Font.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};Font.prototype.toArrayBuffer=function(){const t=this.toTables().encode(),n=new ArrayBuffer(t.length),r=new Uint8Array(n);for(let i=0;i<t.length;i++)r[i]=t[i];return n};Font.prototype.download=function(e){const t=this.getEnglishName("fontFamily"),n=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+n+".otf";const r=this.toArrayBuffer();if(isBrowser())window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,r.byteLength,function(i){i.root.getFile(e,{create:!0},function(o){o.createWriter(function(s){const l=new DataView(r),a=new Blob([l],{type:"font/opentype"});s.write(a),s.addEventListener("writeend",function(){location.href=o.toURL()},!1)})})},function(i){throw new Error(i.name+": "+i.message)});else{const i=require("fs"),o=arrayBufferToNodeBuffer(r);i.writeFileSync(e,o)}};Font.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Font.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Font.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};function addName(e,t){const n=JSON.stringify(e);let r=256;for(let i in t){let o=parseInt(i);if(!(!o||o<256)){if(JSON.stringify(t[i])===n)return o;r<=o&&(r=o+1)}}return t[r]=e,r}function makeFvarAxis(e,t,n){const r=addName(t.name,n);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:r}]}function parseFvarAxis(e,t,n){const r={},i=new parse.Parser(e,t);return r.tag=i.parseTag(),r.minValue=i.parseFixed(),r.defaultValue=i.parseFixed(),r.maxValue=i.parseFixed(),i.skip("uShort",1),r.name=n[i.parseUShort()]||{},r}function makeFvarInstance(e,t,n,r){const i=addName(t.name,r),o=[{name:"nameID_"+e,type:"USHORT",value:i},{name:"flags_"+e,type:"USHORT",value:0}];for(let s=0;s<n.length;++s){const l=n[s].tag;o.push({name:"axis_"+e+" "+l,type:"FIXED",value:t.coordinates[l]<<16})}return o}function parseFvarInstance(e,t,n,r){const i={},o=new parse.Parser(e,t);i.name=r[o.parseUShort()]||{},o.skip("uShort",1),i.coordinates={};for(let s=0;s<n.length;++s)i.coordinates[n[s].tag]=o.parseFixed();return i}function makeFvarTable(e,t){const n=new table.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+e.axes.length*4}]);n.offsetToData=n.sizeOf();for(let r=0;r<e.axes.length;r++)n.fields=n.fields.concat(makeFvarAxis(r,e.axes[r],t));for(let r=0;r<e.instances.length;r++)n.fields=n.fields.concat(makeFvarInstance(r,e.instances[r],e.axes,t));return n}function parseFvarTable(e,t,n){const r=new parse.Parser(e,t),i=r.parseULong();check.argument(i===65536,"Unsupported fvar table version.");const o=r.parseOffset16();r.skip("uShort",1);const s=r.parseUShort(),l=r.parseUShort(),a=r.parseUShort(),c=r.parseUShort(),g=[];for(let x=0;x<s;x++)g.push(parseFvarAxis(e,t+o+x*l,n));const y=[],T=t+o+s*l;for(let x=0;x<a;x++)y.push(parseFvarInstance(e,T+x*c,g,n));return{axes:g,instances:y}}const fvar={make:makeFvarTable,parse:parseFvarTable};function parseTaggedListTable(e,t){const n=new parse.Parser(e,t),r=n.parseUShort(),i=[];for(let o=0;o<r;o++)i[n.parseTag()]={offset:n.parseUShort()};return i}function parseCoverageTable(e,t){const n=new parse.Parser(e,t),r=n.parseUShort();let i=n.parseUShort();if(r===1)return n.parseUShortList(i);if(r===2){const o=[];for(;i--;){const s=n.parseUShort(),l=n.parseUShort();let a=n.parseUShort();for(let c=s;c<=l;c++)o[a++]=c}return o}}function parseClassDefTable(e,t){const n=new parse.Parser(e,t),r=n.parseUShort();if(r===1){const i=n.parseUShort(),o=n.parseUShort(),s=n.parseUShortList(o);return function(l){return s[l-i]||0}}else if(r===2){const i=n.parseUShort(),o=[],s=[],l=[];for(let a=0;a<i;a++)o[a]=n.parseUShort(),s[a]=n.parseUShort(),l[a]=n.parseUShort();return function(a){let c=0,g=o.length-1;for(;c<g;){const y=c+g+1>>1;a<o[y]?g=y-1:c=y}return o[c]<=a&&a<=s[c]&&l[c]||0}}}function parsePairPosSubTable(e,t){const n=new parse.Parser(e,t),r=n.parseUShort(),i=n.parseUShort(),o=parseCoverageTable(e,t+i),s=n.parseUShort(),l=n.parseUShort();let a;if(s!==4||l!==0)return;const c={};if(r===1){const g=n.parseUShort(),y=[],T=n.parseOffset16List(g);for(let x=0;x<g;x++){const b=T[x];let d=c[b];if(!d){d={},n.relativeOffset=b;let u=n.parseUShort();for(;u--;){const p=n.parseUShort();s&&(a=n.parseShort()),l&&n.parseShort(),d[p]=a}}y[o[x]]=d}return function(x,b){const d=y[x];if(d)return d[b]}}else if(r===2){const g=n.parseUShort(),y=n.parseUShort(),T=n.parseUShort(),x=n.parseUShort(),b=parseClassDefTable(e,t+g),d=parseClassDefTable(e,t+y),u=[];for(let f=0;f<T;f++){const h=u[f]=[];for(let v=0;v<x;v++)s&&(a=n.parseShort()),l&&n.parseShort(),h[v]=a}const p={};for(let f=0;f<o.length;f++)p[o[f]]=1;return function(f,h){if(!p[f])return;const v=b(f),m=d(h),P=u[v];if(P)return P[m]}}}function parseLookupTable(e,t){const n=new parse.Parser(e,t),r=n.parseUShort(),i=n.parseUShort(),o=i&16,s=n.parseUShort(),l=n.parseOffset16List(s),a={lookupType:r,lookupFlag:i,markFilteringSet:o?n.parseUShort():-1};if(r===2){const c=[];for(let g=0;g<s;g++){const y=parsePairPosSubTable(e,t+l[g]);y&&c.push(y)}a.getKerningValue=function(g,y){for(let T=c.length;T--;){const x=c[T](g,y);if(x!==void 0)return x}return 0}}return a}function parseGposTable(e,t,n){const r=new parse.Parser(e,t),i=r.parseFixed();check.argument(i===1,"Unsupported GPOS table version."),parseTaggedListTable(e,t+r.parseUShort()),parseTaggedListTable(e,t+r.parseUShort());const o=r.parseUShort();r.relativeOffset=o;const s=r.parseUShort(),l=r.parseOffset16List(s),a=t+o;for(let c=0;c<s;c++){const g=parseLookupTable(e,a+l[c]);g.lookupType===2&&!n.getGposKerningValue&&(n.getGposKerningValue=g.getKerningValue)}}const gpos={parse:parseGposTable};function parseWindowsKernTable(e){const t={};e.skip("uShort");const n=e.parseUShort();check.argument(n===0,"Unsupported kern sub-table version."),e.skip("uShort",2);const r=e.parseUShort();e.skip("uShort",3);for(let i=0;i<r;i+=1){const o=e.parseUShort(),s=e.parseUShort(),l=e.parseShort();t[o+","+s]=l}return t}function parseMacKernTable(e){const t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");const i=e.parseUShort()&255;if(e.skip("uShort"),i===0){const o=e.parseUShort();e.skip("uShort",3);for(let s=0;s<o;s+=1){const l=e.parseUShort(),a=e.parseUShort(),c=e.parseShort();t[l+","+a]=c}}return t}function parseKernTable(e,t){const n=new parse.Parser(e,t),r=n.parseUShort();if(r===0)return parseWindowsKernTable(n);if(r===1)return parseMacKernTable(n);throw new Error("Unsupported kern table version ("+r+").")}const kern={parse:parseKernTable};function parseLocaTable(e,t,n,r){const i=new parse.Parser(e,t),o=r?i.parseUShort:i.parseULong,s=[];for(let l=0;l<n+1;l+=1){let a=o.call(i);r&&(a*=2),s.push(a)}return s}const loca={parse:parseLocaTable};function loadFromFile(e,t){require("fs").readFile(e,function(r,i){if(r)return t(r.message);t(null,nodeBufferToArrayBuffer(i))})}function loadFromUrl(e,t){const n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",n.onload=function(){return n.status!==200?t("Font could not be loaded: "+n.statusText):t(null,n.response)},n.onerror=function(){t("Font could not be loaded")},n.send()}function parseOpenTypeTableEntries(e,t){const n=[];let r=12;for(let i=0;i<t;i+=1){const o=parse.getTag(e,r),s=parse.getULong(e,r+4),l=parse.getULong(e,r+8),a=parse.getULong(e,r+12);n.push({tag:o,checksum:s,offset:l,length:a,compression:!1}),r+=16}return n}function parseWOFFTableEntries(e,t){const n=[];let r=44;for(let i=0;i<t;i+=1){const o=parse.getTag(e,r),s=parse.getULong(e,r+4),l=parse.getULong(e,r+8),a=parse.getULong(e,r+12);let c;l<a?c="WOFF":c=!1,n.push({tag:o,offset:s,compression:c,compressedLength:l,length:a}),r+=20}return n}function uncompressTable(e,t){if(t.compression==="WOFF"){const n=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),r=new Uint8Array(t.length);if(inflate(n,r),r.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(r.buffer,0),offset:0}}else return{data:e,offset:t.offset}}function parseBuffer(e){let t,n;const r=new Font({empty:!0}),i=new DataView(e,0);let o,s=[];const l=parse.getTag(i,0);if(l==="\0\0\0"||l==="true"||l==="typ1")r.outlinesFormat="truetype",o=parse.getUShort(i,4),s=parseOpenTypeTableEntries(i,o);else if(l==="OTTO")r.outlinesFormat="cff",o=parse.getUShort(i,4),s=parseOpenTypeTableEntries(i,o);else if(l==="wOFF"){const m=parse.getTag(i,4);if(m==="\0\0\0")r.outlinesFormat="truetype";else if(m==="OTTO")r.outlinesFormat="cff";else throw new Error("Unsupported OpenType flavor "+l);o=parse.getUShort(i,12),s=parseWOFFTableEntries(i,o)}else throw new Error("Unsupported OpenType signature "+l);let a,c,g,y,T,x,b,d,u,p,f;for(let m=0;m<o;m+=1){const P=s[m];let O;switch(P.tag){case"cmap":O=uncompressTable(i,P),r.tables.cmap=cmap.parse(O.data,O.offset),r.encoding=new CmapEncoding(r.tables.cmap);break;case"cvt ":O=uncompressTable(i,P),f=new parse.Parser(O.data,O.offset),r.tables.cvt=f.parseShortList(P.length/2);break;case"fvar":c=P;break;case"fpgm":O=uncompressTable(i,P),f=new parse.Parser(O.data,O.offset),r.tables.fpgm=f.parseByteList(P.length);break;case"head":O=uncompressTable(i,P),r.tables.head=head.parse(O.data,O.offset),r.unitsPerEm=r.tables.head.unitsPerEm,t=r.tables.head.indexToLocFormat;break;case"hhea":O=uncompressTable(i,P),r.tables.hhea=hhea.parse(O.data,O.offset),r.ascender=r.tables.hhea.ascender,r.descender=r.tables.hhea.descender,r.numberOfHMetrics=r.tables.hhea.numberOfHMetrics;break;case"hmtx":x=P;break;case"ltag":O=uncompressTable(i,P),n=ltag.parse(O.data,O.offset);break;case"maxp":O=uncompressTable(i,P),r.tables.maxp=maxp.parse(O.data,O.offset),r.numGlyphs=r.tables.maxp.numGlyphs;break;case"name":u=P;break;case"OS/2":O=uncompressTable(i,P),r.tables.os2=os2.parse(O.data,O.offset);break;case"post":O=uncompressTable(i,P),r.tables.post=post.parse(O.data,O.offset),r.glyphNames=new GlyphNames(r.tables.post);break;case"prep":O=uncompressTable(i,P),f=new parse.Parser(O.data,O.offset),r.tables.prep=f.parseByteList(P.length);break;case"glyf":g=P;break;case"loca":d=P;break;case"CFF ":a=P;break;case"kern":b=P;break;case"GPOS":y=P;break;case"GSUB":T=P;break;case"meta":p=P;break}}const h=uncompressTable(i,u);if(r.tables.name=_name.parse(h.data,h.offset,n),r.names=r.tables.name,g&&d){const m=t===0,P=uncompressTable(i,d),O=loca.parse(P.data,P.offset,r.numGlyphs,m),R=uncompressTable(i,g);r.glyphs=glyf.parse(R.data,R.offset,O,r)}else if(a){const m=uncompressTable(i,a);cff.parse(m.data,m.offset,r)}else throw new Error("Font doesn't contain TrueType or CFF outlines.");const v=uncompressTable(i,x);if(hmtx.parse(v.data,v.offset,r.numberOfHMetrics,r.numGlyphs,r.glyphs),addGlyphNames(r),b){const m=uncompressTable(i,b);r.kerningPairs=kern.parse(m.data,m.offset)}else r.kerningPairs={};if(y){const m=uncompressTable(i,y);gpos.parse(m.data,m.offset,r)}if(T){const m=uncompressTable(i,T);r.tables.gsub=gsub.parse(m.data,m.offset)}if(c){const m=uncompressTable(i,c);r.tables.fvar=fvar.parse(m.data,m.offset,r.names)}if(p){const m=uncompressTable(i,p);r.tables.meta=meta.parse(m.data,m.offset),r.metas=r.tables.meta}return r}function load(e,t){(typeof window>"u"?loadFromFile:loadFromUrl)(e,function(i,o){if(i)return t(i);let s;try{s=parseBuffer(o)}catch(l){return t(l,null)}return t(null,s)})}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),toPascalCase=e=>{const t=toCamelCase(e);return t.charAt(0).toUpperCase()+t.slice(1)},mergeClasses=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),hasA11yProp=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...l},a)=>reactExports.createElement("svg",{ref:a,...defaultAttributes,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:mergeClasses("lucide",i),...!o&&!hasA11yProp(l)&&{"aria-hidden":"true"},...l},[...s.map(([c,g])=>reactExports.createElement(c,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(e,t)=>{const n=reactExports.forwardRef(({className:r,...i},o)=>reactExports.createElement(Icon,{ref:o,iconNode:t,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(e))}`,`lucide-${e}`,r),...i}));return n.displayName=toPascalCase(e),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ExternalLink=createLucideIcon("external-link",__iconNode);function Sidebar({state:e,setState:t}){const{fontList:n,customFont:r,fontFamily:i,fontVariant:o,text:s,size:l,lineHeight:a,letterSpacing:c,union:g,kerning:y,filled:T,separate:x,bezierAccuracy:b,dxfUnits:d,fill:u,stroke:p,strokeWidth:f,strokeNonScaling:h,fillRule:v}=e,m=n&&i?n.items.find(C=>C.family===i)?.variants||[]:[],P=reactExports.useMemo(()=>n?n.items.map(C=>jsxRuntimeExports.jsx("option",{value:C.family,children:C.family},C.family)):jsxRuntimeExports.jsx("option",{children:"Loading fonts..."}),[n]),O=async C=>{const w=C.target.files;if(!w||w.length===0)t(E=>({...E,customFont:void 0}));else{const E=await w[0].arrayBuffer(),F=parseBuffer(E);t(S=>({...S,customFont:F}))}},R=()=>{const C=document.getElementById("font-upload");C&&(C.value=""),t(w=>({...w,customFont:void 0}))};return jsxRuntimeExports.jsxs("aside",{children:[jsxRuntimeExports.jsxs("details",{open:!0,children:[jsxRuntimeExports.jsx("summary",{children:"Font Settings"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"label-with-link",children:[jsxRuntimeExports.jsx("label",{children:"Google font:"}),jsxRuntimeExports.jsxs("a",{href:"https://fonts.google.com/",target:"_blank",rel:"noopener noreferrer",children:["Browse fonts ",jsxRuntimeExports.jsx(ExternalLink,{size:14})]})]}),jsxRuntimeExports.jsx("select",{id:"font-select",value:i,onChange:C=>t(w=>({...w,fontFamily:C.target.value})),disabled:!!r,children:P}),jsxRuntimeExports.jsxs("label",{children:["variant:",jsxRuntimeExports.jsx("select",{id:"font-variant",value:o,onChange:C=>t(w=>({...w,fontVariant:C.target.value})),disabled:!!r,children:m.map(C=>jsxRuntimeExports.jsx("option",{value:C,children:C},C))})]}),jsxRuntimeExports.jsxs("label",{children:["(optional) upload font:",jsxRuntimeExports.jsx("input",{id:"font-upload",type:"file",onChange:O,accept:".ttf,.otf,.woff,.woff2"})]}),r&&jsxRuntimeExports.jsx("button",{onClick:R,children:"Remove"})]})]}),jsxRuntimeExports.jsxs("details",{open:!0,children:[jsxRuntimeExports.jsx("summary",{children:"Text Settings"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{children:["text:",jsxRuntimeExports.jsx("textarea",{id:"input-text",rows:3,value:s,onChange:C=>t(w=>({...w,text:C.target.value}))})]}),jsxRuntimeExports.jsxs("label",{children:["size:",jsxRuntimeExports.jsx("input",{type:"number",id:"input-size",value:l,onChange:C=>t(w=>({...w,size:Number(C.target.value)}))})]}),jsxRuntimeExports.jsxs("label",{children:["line height:",jsxRuntimeExports.jsx("span",{title:"when you have multiline text",children:""}),":",jsxRuntimeExports.jsx("input",{type:"number",id:"input-line-height",value:a,onChange:C=>t(w=>({...w,lineHeight:Number(C.target.value)})),step:"0.1",min:"0.1"})]}),jsxRuntimeExports.jsxs("label",{children:["letter spacing:",jsxRuntimeExports.jsx("input",{type:"range",id:"input-letter-spacing",value:c,onChange:C=>t(w=>({...w,letterSpacing:Number(C.target.value)})),min:"-50",max:"100",step:"1"}),jsxRuntimeExports.jsx("input",{type:"number",value:c,onChange:C=>{const w=Math.max(-50,Math.min(100,Number(C.target.value)));t(E=>({...E,letterSpacing:w}))},min:"-50",max:"100",style:{marginLeft:"8px",width:"60px"}})]}),jsxRuntimeExports.jsxs("label",{children:["kerning:",jsxRuntimeExports.jsx("input",{type:"checkbox",id:"input-kerning",checked:y,onChange:C=>t(w=>({...w,kerning:C.target.checked}))})]})]})]}),jsxRuntimeExports.jsxs("details",{open:!0,children:[jsxRuntimeExports.jsx("summary",{children:"Stroke"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{children:["Stroke color:",jsxRuntimeExports.jsx("input",{type:"color",id:"input-stroke",value:p,onChange:C=>t(w=>({...w,stroke:C.target.value}))}),jsxRuntimeExports.jsx("input",{type:"text",value:p,onChange:C=>t(w=>({...w,stroke:C.target.value})),placeholder:"#000000",style:{marginLeft:"8px",width:"80px"}})]}),jsxRuntimeExports.jsxs("label",{children:["Stroke Width:",jsxRuntimeExports.jsx("input",{type:"text",id:"input-stroke-width",value:f,onChange:C=>t(w=>({...w,strokeWidth:C.target.value}))})]}),jsxRuntimeExports.jsxs("label",{children:["Non-scaling stroke:",jsxRuntimeExports.jsx("input",{type:"checkbox",id:"input-stroke-non-scaling",checked:h,onChange:C=>t(w=>({...w,strokeNonScaling:C.target.checked}))})]})]})]}),jsxRuntimeExports.jsxs("details",{open:!0,children:[jsxRuntimeExports.jsx("summary",{children:"Fill"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{children:["fill:",jsxRuntimeExports.jsx("input",{type:"checkbox",id:"input-filled",checked:T,onChange:C=>t(w=>({...w,filled:C.target.checked}))})]}),jsxRuntimeExports.jsxs("label",{children:["Fill color:",jsxRuntimeExports.jsx("input",{type:"color",id:"input-fill",value:u,onChange:C=>t(w=>({...w,fill:C.target.value}))}),jsxRuntimeExports.jsx("input",{type:"text",value:u,onChange:C=>t(w=>({...w,fill:C.target.value})),placeholder:"#000000",style:{marginLeft:"8px",width:"80px"}})]}),jsxRuntimeExports.jsxs("label",{children:["Fill rule:",jsxRuntimeExports.jsxs("select",{id:"input-fill-rule",value:v,onChange:C=>t(w=>({...w,fillRule:C.target.value})),children:[jsxRuntimeExports.jsx("option",{value:"evenodd",children:"evenodd"}),jsxRuntimeExports.jsx("option",{value:"nonzero",children:"nonzero"})]})]})]})]}),jsxRuntimeExports.jsxs("details",{children:[jsxRuntimeExports.jsx("summary",{children:"Options"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{children:["union:",jsxRuntimeExports.jsx("input",{type:"checkbox",id:"input-union",checked:g,onChange:C=>t(w=>({...w,union:C.target.checked}))})]}),jsxRuntimeExports.jsxs("label",{children:["separate characters:",jsxRuntimeExports.jsx("input",{type:"checkbox",id:"input-separate",checked:x,onChange:C=>t(w=>({...w,separate:C.target.checked}))})]}),jsxRuntimeExports.jsxs("label",{children:["bezier accuracy",jsxRuntimeExports.jsx("span",{title:"0.5 = accurate to half a pixel \r.001 = accurate to 1/1000th of a pixel \rsmaller numbers take longer to compute \rleave blank for auto",children:""}),":",jsxRuntimeExports.jsx("input",{type:"text",id:"input-bezier-accuracy",placeholder:"auto",value:b,onChange:C=>t(w=>({...w,bezierAccuracy:C.target.value}))})]}),jsxRuntimeExports.jsxs("label",{children:["Dxf Units:",jsxRuntimeExports.jsxs("select",{id:"dxf-units",value:d,onChange:C=>t(w=>({...w,dxfUnits:C.target.value})),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select units..."}),Object.values(makerjs.unitType).map(C=>jsxRuntimeExports.jsx("option",{value:C,children:C},C))]})]})]})]})]})}function Output({state:e}){const{svgOutput:t,dxfOutput:n,errorMessage:r,text:i}=e,[o,s]=reactExports.useState("copy to clipboard"),l=()=>{const y=document.getElementById("output-svg");y&&(y.select(),document.execCommand("copy"),s("copied"),setTimeout(()=>{s("copy to clipboard")},2e3))},a=()=>{const y=document.createElement("a");y.href="data:image/svg+xml;base64,"+window.btoa(t),y.download=`${i}.svg`,y.click()},c=()=>{const y=document.createElement("a");y.href="data:application/dxf;base64,"+window.btoa(n),y.download=`${i}.dxf`,y.click()},g=()=>{const y=window.location.href;navigator.clipboard.writeText(y).then(()=>{const T=document.getElementById("create-link");T&&(T.textContent="copied",setTimeout(()=>{T.textContent="Create link"},2e3))})};return jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsxs("section",{children:[r&&jsxRuntimeExports.jsx("div",{id:"error-display",style:{color:"red",padding:"10px"},children:r}),jsxRuntimeExports.jsx("div",{id:"svg-render",dangerouslySetInnerHTML:{__html:t},style:{marginBottom:"20px"}})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h2",{children:"SVG Output"}),jsxRuntimeExports.jsxs("div",{className:"textarea-container",children:[jsxRuntimeExports.jsx("textarea",{id:"output-svg",readOnly:!0,value:t,style:{width:"100%",minHeight:"200px",fontFamily:"monospace"}}),jsxRuntimeExports.jsxs("div",{className:"buttons-container",children:[jsxRuntimeExports.jsx("button",{className:"btn",onClick:l,children:o}),jsxRuntimeExports.jsx("button",{className:"btn",onClick:a,children:"Download Svg"}),jsxRuntimeExports.jsx("button",{id:"create-link",className:"btn",onClick:g,children:"Create link"}),jsxRuntimeExports.jsx("button",{className:"btn",onClick:c,children:"Download Dxf"})]})]})]})]})}const apiKey="AIzaSyAOES8EmKhuJEnsn9kS1XKBpxxp-TgN8Jc";async function loadGoogleFonts(){return(await fetch(`https://www.googleapis.com/webfonts/v1/webfonts?key=${apiKey}`)).json()}async function renderSvg(e){try{const{fontList:t,fontFamily:n,fontVariant:r,customFont:i,text:o,size:s,lineHeight:l,letterSpacing:a,union:c,filled:g,kerning:y,separate:T,bezierAccuracy:x,dxfUnits:b,fill:d,stroke:u,strokeWidth:p,strokeNonScaling:f,fillRule:h}=e;let v;if(i)v=i;else{const C=t.items.find(E=>E.family===n);if(!C)return{errorMessage:"Font not found"};const w=C.files[r]?.replace("http:","https:");if(!w)return{errorMessage:"Font variant not found"};v=await new Promise((E,F)=>{load(w,(S,A)=>{S?F(S):E(A)})})}const m=o.split(`
`),P={models:{}};if(m.forEach((C,w)=>{if(C.length===0)return;const E=parseFloat(x)||void 0,F=new makerjs.models.Text(v,C,s,c,!1,E,{kerning:y}),S=-w*s*l;if(a!==0){let A=0;for(const D in F.models){const L=F.models[D],B=A*a;makerjs.model.move(L,[B,0]),A++}}makerjs.model.move(F,[0,S]),P.models[`line_${w}`]=F}),T){let C=0;for(const w in P.models){const E=P.models[w];for(const F in E.models)E.models[F].layer=String(C),C++}}const O=makerjs.exporter.toSVG(P,{fill:g?d:void 0,stroke:u||void 0,strokeWidth:p||void 0,fillRule:h||void 0,scalingStroke:!f}),R=makerjs.exporter.toDXF(P,{units:b,usePOLYLINE:!0});return{svgOutput:O,dxfOutput:R,errorMessage:""}}catch(t){return{errorMessage:t.toString()}}}const defaultState={fontList:null,customFont:void 0,fontFamily:"ABeeZee",fontVariant:"regular",text:"Verb",size:100,lineHeight:1.2,letterSpacing:0,union:!1,kerning:!0,filled:!1,separate:!1,bezierAccuracy:"",dxfUnits:"",fill:"#000000",stroke:"#000000",strokeWidth:"0.25mm",strokeNonScaling:!0,fillRule:"evenodd",svgOutput:"",dxfOutput:"",errorMessage:""};function App(){const[e,t]=reactExports.useState(defaultState);return reactExports.useEffect(()=>{loadGoogleFonts().then(n=>{t(r=>({...r,fontList:n}))})},[]),reactExports.useEffect(()=>{(e.customFont||e.fontList&&e.fontFamily&&e.fontVariant)&&renderSvg(e).then(n=>{t(r=>({...r,...n}))})},[e.fontList,e.fontFamily,e.fontVariant,e.customFont,e.text,e.size,e.lineHeight,e.letterSpacing,e.union,e.filled,e.kerning,e.separate,e.bezierAccuracy,e.dxfUnits,e.fill,e.stroke,e.strokeWidth,e.strokeNonScaling,e.fillRule]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sidebar,{state:e,setState:t}),jsxRuntimeExports.jsx(Output,{state:e})]})}export{App as default};
