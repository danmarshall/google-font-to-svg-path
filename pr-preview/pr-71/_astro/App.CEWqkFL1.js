import{r as reactExports}from"./index.WFquGv8Z.js";function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,o){var s=null;if(o!==void 0&&(s=""+o),i.key!==void 0&&(s=""+i.key),"key"in i){o={};for(var l in i)l!=="key"&&(o[l]=i[l])}else o=i;return i=o.ref,{$$typeof:e,type:r,key:s,ref:i!==void 0?i:null,props:o}}return reactJsxRuntime_production.Fragment=t,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),clone={exports:{}},hasRequiredClone;function requireClone(){return hasRequiredClone||(hasRequiredClone=1,(function(e){var t=(function(){function n(a,f,g,y){typeof f=="object"&&(g=f.depth,y=f.prototype,f.filter,f=f.circular);var T=[],x=[],b=typeof Buffer<"u";typeof f>"u"&&(f=!0),typeof g>"u"&&(g=1/0);function d(u,p){if(u===null)return null;if(p==0)return u;var c,h;if(typeof u!="object")return u;if(n.__isArray(u))c=[];else if(n.__isRegExp(u))c=new RegExp(u.source,l(u)),u.lastIndex&&(c.lastIndex=u.lastIndex);else if(n.__isDate(u))c=new Date(u.getTime());else{if(b&&Buffer.isBuffer(u))return Buffer.allocUnsafe?c=Buffer.allocUnsafe(u.length):c=new Buffer(u.length),u.copy(c),c;typeof y>"u"?(h=Object.getPrototypeOf(u),c=Object.create(h)):(c=Object.create(y),h=y)}if(f){var m=T.indexOf(u);if(m!=-1)return x[m];T.push(u),x.push(c)}for(var v in u){var E;h&&(E=Object.getOwnPropertyDescriptor(h,v)),!(E&&E.set==null)&&(c[v]=d(u[v],p-1))}return c}return d(a,g)}n.clonePrototype=function(f){if(f===null)return null;var g=function(){};return g.prototype=f,new g};function r(a){return Object.prototype.toString.call(a)}n.__objToStr=r;function i(a){return typeof a=="object"&&r(a)==="[object Date]"}n.__isDate=i;function o(a){return typeof a=="object"&&r(a)==="[object Array]"}n.__isArray=o;function s(a){return typeof a=="object"&&r(a)==="[object RegExp]"}n.__isRegExp=s;function l(a){var f="";return a.global&&(f+="g"),a.ignoreCase&&(f+="i"),a.multiline&&(f+="m"),f}return n.__getRegExpFlags=l,n})();e.exports&&(e.exports=t)})(clone)),clone.exports}function sortKD(e,t,n,r,i,o){if(!(i-r<=n)){var s=Math.floor((r+i)/2);select(e,t,s,r,i,o%2),sortKD(e,t,n,r,s-1,o+1),sortKD(e,t,n,s+1,i,o+1)}}function select(e,t,n,r,i,o){for(;i>r;){if(i-r>600){var s=i-r+1,l=n-r+1,a=Math.log(s),f=.5*Math.exp(2*a/3),g=.5*Math.sqrt(a*f*(s-f)/s)*(l-s/2<0?-1:1),y=Math.max(r,Math.floor(n-l*f/s+g)),T=Math.min(i,Math.floor(n+(s-l)*f/s+g));select(e,t,n,y,T,o)}var x=t[2*n+o],b=r,d=i;for(swapItem(e,t,r,n),t[2*i+o]>x&&swapItem(e,t,r,i);b<d;){for(swapItem(e,t,b,d),b++,d--;t[2*b+o]<x;)b++;for(;t[2*d+o]>x;)d--}t[2*r+o]===x?swapItem(e,t,r,d):(d++,swapItem(e,t,d,i)),d<=n&&(r=d+1),n<=d&&(i=d-1)}}function swapItem(e,t,n,r){swap(e,n,r),swap(t,2*n,2*r),swap(t,2*n+1,2*r+1)}function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function range(e,t,n,r,i,o,s){for(var l=[0,e.length-1,0],a=[],f,g;l.length;){var y=l.pop(),T=l.pop(),x=l.pop();if(T-x<=s){for(var b=x;b<=T;b++)f=t[2*b],g=t[2*b+1],f>=n&&f<=i&&g>=r&&g<=o&&a.push(e[b]);continue}var d=Math.floor((x+T)/2);f=t[2*d],g=t[2*d+1],f>=n&&f<=i&&g>=r&&g<=o&&a.push(e[d]);var u=(y+1)%2;(y===0?n<=f:r<=g)&&(l.push(x),l.push(d-1),l.push(u)),(y===0?i>=f:o>=g)&&(l.push(d+1),l.push(T),l.push(u))}return a}function within(e,t,n,r,i,o){for(var s=[0,e.length-1,0],l=[],a=i*i;s.length;){var f=s.pop(),g=s.pop(),y=s.pop();if(g-y<=o){for(var T=y;T<=g;T++)sqDist(t[2*T],t[2*T+1],n,r)<=a&&l.push(e[T]);continue}var x=Math.floor((y+g)/2),b=t[2*x],d=t[2*x+1];sqDist(b,d,n,r)<=a&&l.push(e[x]);var u=(f+1)%2;(f===0?n-i<=b:r-i<=d)&&(s.push(y),s.push(x-1),s.push(u)),(f===0?n+i>=b:r+i>=d)&&(s.push(x+1),s.push(g),s.push(u))}return l}function sqDist(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}function kdbush(e,t,n,r,i){return new KDBush(e,t,n,r,i)}function KDBush(e,t,n,r,i){t=t||defaultGetX,n=n||defaultGetY,i=i||Array,this.nodeSize=r||64,this.points=e,this.ids=new i(e.length),this.coords=new i(e.length*2);for(var o=0;o<e.length;o++)this.ids[o]=o,this.coords[2*o]=t(e[o]),this.coords[2*o+1]=n(e[o]);sortKD(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}KDBush.prototype={range:function(e,t,n,r){return range(this.ids,this.coords,e,t,n,r,this.nodeSize)},within:function(e,t,n){return within(this.ids,this.coords,e,t,n,this.nodeSize)}};function defaultGetX(e){return e[0]}function defaultGetY(e){return e[1]}const src=Object.freeze(Object.defineProperty({__proto__:null,default:kdbush},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(src);var graham_scan_min={exports:{}},hasRequiredGraham_scan_min;function requireGraham_scan_min(){return hasRequiredGraham_scan_min||(hasRequiredGraham_scan_min=1,(function(e){function t(){this.anchorPoint=void 0,this.reverse=!1,this.points=[]}t.prototype={constructor:t,Point:function(n,r){this.x=n,this.y=r},_findPolarAngle:function(n,r){var i,o,s=57.295779513082;if(!n||!r||(i=r.x-n.x,o=r.y-n.y,i==0&&o==0))return 0;var l=Math.atan2(o,i)*s;return this.reverse?0>=l&&(l+=360):l>=0&&(l+=360),l},addPoint:function(n,r){return this.anchorPoint===void 0?void(this.anchorPoint=new this.Point(n,r)):this.anchorPoint.y>r&&this.anchorPoint.x>n||this.anchorPoint.y===r&&this.anchorPoint.x>n||this.anchorPoint.y>r&&this.anchorPoint.x===n?(this.points.push(new this.Point(this.anchorPoint.x,this.anchorPoint.y)),void(this.anchorPoint=new this.Point(n,r))):void this.points.push(new this.Point(n,r))},_sortPoints:function(){var n=this;return this.points.sort(function(r,i){var o=n._findPolarAngle(n.anchorPoint,r),s=n._findPolarAngle(n.anchorPoint,i);return s>o?-1:o>s?1:0})},_checkPoints:function(n,r,i){var o,s=this._findPolarAngle(n,r),l=this._findPolarAngle(n,i);return s>l?(o=s-l,!(o>180)):l>s?(o=l-s,o>180):!0},getHull:function(){var n,r,i=[];if(this.reverse=this.points.every(function(f){return f.x<0&&f.y<0}),n=this._sortPoints(),r=n.length,3>r)return n.unshift(this.anchorPoint),n;for(i.push(n.shift(),n.shift());;){var o,s,l;if(i.push(n.shift()),o=i[i.length-3],s=i[i.length-2],l=i[i.length-1],this._checkPoints(o,s,l)&&i.splice(i.length-2,1),n.length==0){if(r==i.length){var a=this.anchorPoint;return i=i.filter(function(f){return!!f}),i.some(function(f){return f.x==a.x&&f.y==a.y})||i.unshift(this.anchorPoint),i}n=i,r=n.length,i=[],i.push(n.shift(),n.shift())}}}},e.exports=t})(graham_scan_min)),graham_scan_min.exports}var bezier={exports:{}},utils={exports:{}},hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,(function(){var e=Math.abs,t=Math.cos,n=Math.sin,r=Math.acos,i=Math.atan2,o=Math.sqrt,s=Math.pow,l=function(u){return u<0?-s(-u,1/3):s(u,1/3)},a=Math.PI,f=2*a,g=a/2,y=1e-6,T=Number.MAX_SAFE_INTEGER||9007199254740991,x=Number.MIN_SAFE_INTEGER||-9007199254740991,b={x:0,y:0,z:0},d={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(u,p){var c=p(u),h=c.x*c.x+c.y*c.y;return typeof c.z<"u"&&(h+=c.z*c.z),o(h)},compute:function(u,p,c){if(u===0)return p[0];var h=p.length-1;if(u===1)return p[h];var m=p,v=1-u;if(h===0)return p[0];if(h===1)return w={x:v*m[0].x+u*m[1].x,y:v*m[0].y+u*m[1].y},c&&(w.z=v*m[0].z+u*m[1].z),w;if(h<4){var E=v*v,A=u*u,S,C,O,R=0;h===2?(m=[m[0],m[1],m[2],b],S=E,C=v*u*2,O=A):h===3&&(S=E*v,C=E*u*3,O=v*A*3,R=u*A);var w={x:S*m[0].x+C*m[1].x+O*m[2].x+R*m[3].x,y:S*m[0].y+C*m[1].y+O*m[2].y+R*m[3].y};return c&&(w.z=S*m[0].z+C*m[1].z+O*m[2].z+R*m[3].z),w}for(var P=JSON.parse(JSON.stringify(p));P.length>1;){for(var F=0;F<P.length-1;F++)P[F]={x:P[F].x+(P[F+1].x-P[F].x)*u,y:P[F].y+(P[F+1].y-P[F].y)*u},typeof P[F].z<"u"&&(P[F]=P[F].z+(P[F+1].z-P[F].z)*u);P.splice(P.length-1,1)}return P[0]},computeWithRatios:function(u,p,c,h){var m=1-u,v=c,E=p,A,S=v[0],C=v[1],O=v[2],R=v[3];if(S*=m,C*=u,E.length===2)return A=S+C,{x:(S*E[0].x+C*E[1].x)/A,y:(S*E[0].y+C*E[1].y)/A,z:h?(S*E[0].z+C*E[1].z)/A:!1};if(S*=m,C*=2*m,O*=u*u,E.length===3)return A=S+C+O,{x:(S*E[0].x+C*E[1].x+O*E[2].x)/A,y:(S*E[0].y+C*E[1].y+O*E[2].y)/A,z:h?(S*E[0].z+C*E[1].z+O*E[2].z)/A:!1};if(S*=m,C*=1.5*m,O*=3*m,R*=u*u*u,E.length===4)return A=S+C+O+R,{x:(S*E[0].x+C*E[1].x+O*E[2].x+R*E[3].x)/A,y:(S*E[0].y+C*E[1].y+O*E[2].y+R*E[3].y)/A,z:h?(S*E[0].z+C*E[1].z+O*E[2].z+R*E[3].z)/A:!1}},derive:function(u,p){for(var c=[],h=u,m=h.length,v=m-1;m>1;m--,v--){for(var E=[],A=0,S;A<v;A++)S={x:v*(h[A+1].x-h[A].x),y:v*(h[A+1].y-h[A].y)},p&&(S.z=v*(h[A+1].z-h[A].z)),E.push(S);c.push(E),h=E}return c},between:function(u,p,c){return p<=u&&u<=c||d.approximately(u,p)||d.approximately(u,c)},approximately:function(u,p,c){return e(u-p)<=(c||y)},length:function(u){var p=.5,c=0,h=d.Tvalues.length,m,v;for(m=0;m<h;m++)v=p*d.Tvalues[m]+p,c+=d.Cvalues[m]*d.arcfn(v,u);return p*c},map:function(u,p,c,h,m){var v=c-p,E=m-h,A=u-p,S=A/v;return h+E*S},lerp:function(u,p,c){var h={x:p.x+u*(c.x-p.x),y:p.y+u*(c.y-p.y)};return p.z&&c.z&&(h.z=p.z+u*(c.z-p.z)),h},pointToString:function(u){var p=u.x+"/"+u.y;return typeof u.z<"u"&&(p+="/"+u.z),p},pointsToString:function(u){return"["+u.map(d.pointToString).join(", ")+"]"},copy:function(u){return JSON.parse(JSON.stringify(u))},angle:function(u,p,c){var h=p.x-u.x,m=p.y-u.y,v=c.x-u.x,E=c.y-u.y,A=h*E-m*v,S=h*v+m*E;return i(A,S)},round:function(u,p){var c=""+u,h=c.indexOf(".");return parseFloat(c.substring(0,h+1+p))},dist:function(u,p){var c=u.x-p.x,h=u.y-p.y;return o(c*c+h*h)},closest:function(u,p){var c=s(2,63),h,m;return u.forEach(function(v,E){m=d.dist(p,v),m<c&&(c=m,h=E)}),{mdist:c,mpos:h}},abcratio:function(u,p){if(p!==2&&p!==3)return!1;if(typeof u>"u")u=.5;else if(u===0||u===1)return u;var c=s(u,p)+s(1-u,p),h=c-1;return e(h/c)},projectionratio:function(u,p){if(p!==2&&p!==3)return!1;if(typeof u>"u")u=.5;else if(u===0||u===1)return u;var c=s(1-u,p),h=s(u,p)+c;return c/h},lli8:function(u,p,c,h,m,v,E,A){var S=(u*h-p*c)*(m-E)-(u-c)*(m*A-v*E),C=(u*h-p*c)*(v-A)-(p-h)*(m*A-v*E),O=(u-c)*(v-A)-(p-h)*(m-E);return O==0?!1:{x:S/O,y:C/O}},lli4:function(u,p,c,h){var m=u.x,v=u.y,E=p.x,A=p.y,S=c.x,C=c.y,O=h.x,R=h.y;return d.lli8(m,v,E,A,S,C,O,R)},lli:function(u,p){return d.lli4(u,u.c,p,p.c)},makeline:function(u,p){var c=requireBezier(),h=u.x,m=u.y,v=p.x,E=p.y,A=(v-h)/3,S=(E-m)/3;return new c(h,m,h+A,m+S,h+2*A,m+2*S,v,E)},findbbox:function(u){var p=T,c=T,h=x,m=x;return u.forEach(function(v){var E=v.bbox();p>E.x.min&&(p=E.x.min),c>E.y.min&&(c=E.y.min),h<E.x.max&&(h=E.x.max),m<E.y.max&&(m=E.y.max)}),{x:{min:p,mid:(p+h)/2,max:h,size:h-p},y:{min:c,mid:(c+m)/2,max:m,size:m-c}}},shapeintersections:function(u,p,c,h,m){if(!d.bboxoverlap(p,h))return[];var v=[],E=[u.startcap,u.forward,u.back,u.endcap],A=[c.startcap,c.forward,c.back,c.endcap];return E.forEach(function(S){S.virtual||A.forEach(function(C){if(!C.virtual){var O=S.intersects(C,m);O.length>0&&(O.c1=S,O.c2=C,O.s1=u,O.s2=c,v.push(O))}})}),v},makeshape:function(u,p,c){var h=p.points.length,m=u.points.length,v=d.makeline(p.points[h-1],u.points[0]),E=d.makeline(u.points[m-1],p.points[0]),A={startcap:v,forward:u,back:p,endcap:E,bbox:d.findbbox([v,u,p,E])},S=d;return A.intersections=function(C){return S.shapeintersections(A,A.bbox,C,C.bbox,c)},A},getminmax:function(u,p,c){if(!c)return{min:0,max:0};var h=T,m=x,v,E;c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1);for(var A=0,S=c.length;A<S;A++)v=c[A],E=u.get(v),E[p]<h&&(h=E[p]),E[p]>m&&(m=E[p]);return{min:h,mid:(h+m)/2,max:m,size:m-h}},align:function(u,p){var c=p.p1.x,h=p.p1.y,m=-i(p.p2.y-h,p.p2.x-c),v=function(E){return{x:(E.x-c)*t(m)-(E.y-h)*n(m),y:(E.x-c)*n(m)+(E.y-h)*t(m)}};return u.map(v)},roots:function(u,p){p=p||{p1:{x:0,y:0},p2:{x:1,y:0}};var c=u.length-1,L=d.align(u,p),h=function(re){return 0<=re&&re<=1};if(c===2){var w=L[0].y,P=L[1].y,F=L[2].y,R=w-2*P+F;if(R!==0){var m=-o(P*P-w*F),v=-w+P,U=-(m+v)/R,E=-(-m+v)/R;return[U,E].filter(h)}else if(P!==F&&R===0)return[(2*P-F)/(2*P-2*F)].filter(h);return[]}var A=L[0].y,S=L[1].y,C=L[2].y,O=L[3].y,R=-A+3*S-3*C+O,w=3*A-6*S+3*C,P=-3*A+3*S,F=A;if(d.approximately(R,0)){if(d.approximately(w,0))return d.approximately(P,0)?[]:[-F/P].filter(h);var G=o(P*P-4*w*F),D=2*w;return[(G-P)/D,(-P-G)/D].filter(h)}w/=R,P/=R,F/=R;var L=(3*P-w*w)/3,B=L/3,G=(2*w*w*w-9*w*P+27*F)/27,_=G/2,q=_*_+B*B*B,k,U,I,z,N;if(q<0){var j=-L/3,H=j*j*j,X=o(H),V=-G/(2*X),Z=V<-1?-1:V>1?1:V,oe=r(Z),ee=l(X),ae=2*ee;return I=ae*t(oe/3)-w/3,z=ae*t((oe+f)/3)-w/3,N=ae*t((oe+2*f)/3)-w/3,[I,z,N].filter(h)}else{if(q===0)return k=_<0?l(-_):-l(_),I=2*k-w/3,z=-k-w/3,[I,z].filter(h);var te=o(q);return k=l(-_+te),U=l(_+te),[k-U-w/3].filter(h)}},droots:function(u){if(u.length===3){var p=u[0],c=u[1],h=u[2],m=p-2*c+h;if(m!==0){var v=-o(c*c-p*h),E=-p+c,A=-(v+E)/m,S=-(-v+E)/m;return[A,S]}else if(c!==h&&m===0)return[(2*c-h)/(2*(c-h))];return[]}if(u.length===2){var p=u[0],c=u[1];return p!==c?[p/(p-c)]:[]}},curvature:function(u,p,c,h){var m=d.derive(p),v=m[0],E=m[1],A,S,C,O,R=0,w=0,P=d.compute(u,v),F=d.compute(u,E),D=P.x*P.x+P.y*P.y;if(c?(A=o(s(P.y*F.z-F.y*P.z,2)+s(P.z*F.x-F.z*P.x,2)+s(P.x*F.y-F.x*P.y,2)),S=s(D+P.z*P.z,3/2)):(A=P.x*F.y-P.y*F.x,S=s(D,3/2)),A===0||S===0)return{k:0,r:0};if(R=A/S,w=S/A,!h){var L=d.curvature(u-.001,p,c,!0).k,B=d.curvature(u+.001,p,c,!0).k;O=(B-R+(R-L))/2,C=(e(B-R)+e(R-L))/2}return{k:R,r:w,dk:O,adk:C}},inflections:function(u){if(u.length<4)return[];var p=d.align(u,{p1:u[0],p2:u.slice(-1)[0]}),c=p[2].x*p[1].y,h=p[3].x*p[1].y,m=p[1].x*p[2].y,R=p[3].x*p[2].y,v=18*(-3*c+2*h+3*m-R),E=18*(3*c-h-3*m),A=18*(m-c);if(d.approximately(v,0)){if(!d.approximately(E,0)){var S=-A/E;if(0<=S&&S<=1)return[S]}return[]}var C=E*E-4*v*A,O=Math.sqrt(C),R=2*v;return d.approximately(R,0)?[]:[(O-E)/R,-(E+O)/R].filter(function(w){return 0<=w&&w<=1})},bboxoverlap:function(u,p){var c=["x","y"],h=c.length,m,v,E,A,S;for(m=0;m<h;m++)if(v=c[m],E=u[v].mid,A=p[v].mid,S=(u[v].size+p[v].size)/2,e(E-A)>=S)return!1;return!0},expandbox:function(u,p){p.x.min<u.x.min&&(u.x.min=p.x.min),p.y.min<u.y.min&&(u.y.min=p.y.min),p.z&&p.z.min<u.z.min&&(u.z.min=p.z.min),p.x.max>u.x.max&&(u.x.max=p.x.max),p.y.max>u.y.max&&(u.y.max=p.y.max),p.z&&p.z.max>u.z.max&&(u.z.max=p.z.max),u.x.mid=(u.x.min+u.x.max)/2,u.y.mid=(u.y.min+u.y.max)/2,u.z&&(u.z.mid=(u.z.min+u.z.max)/2),u.x.size=u.x.max-u.x.min,u.y.size=u.y.max-u.y.min,u.z&&(u.z.size=u.z.max-u.z.min)},pairiteration:function(u,p,c){var h=u.bbox(),m=p.bbox(),v=1e5,E=c||.5;if(h.x.size+h.y.size<E&&m.x.size+m.y.size<E)return[(v*(u._t1+u._t2)/2|0)/v+"/"+(v*(p._t1+p._t2)/2|0)/v];var A=u.split(.5),S=p.split(.5),C=[{left:A.left,right:S.left},{left:A.left,right:S.right},{left:A.right,right:S.right},{left:A.right,right:S.left}];C=C.filter(function(R){return d.bboxoverlap(R.left.bbox(),R.right.bbox())});var O=[];return C.length===0||(C.forEach(function(R){O=O.concat(d.pairiteration(R.left,R.right,E))}),O=O.filter(function(R,w){return O.indexOf(R)===w})),O},getccenter:function(u,p,c){var h=p.x-u.x,m=p.y-u.y,v=c.x-p.x,E=c.y-p.y,A=h*t(g)-m*n(g),S=h*n(g)+m*t(g),C=v*t(g)-E*n(g),O=v*n(g)+E*t(g),R=(u.x+p.x)/2,w=(u.y+p.y)/2,P=(p.x+c.x)/2,F=(p.y+c.y)/2,D=R+A,L=w+S,B=P+C,G=F+O,_=d.lli8(R,w,D,L,P,F,B,G),q=d.dist(_,u),k=i(u.y-_.y,u.x-_.x),U=i(p.y-_.y,p.x-_.x),I=i(c.y-_.y,c.x-_.x),z;return k<I?((k>U||U>I)&&(k+=f),k>I&&(z=I,I=k,k=z)):I<U&&U<k?(z=I,I=k,k=z):I+=f,_.s=k,_.e=I,_.r=q,_},numberSort:function(u,p){return u-p}};utils.exports=d})()),utils.exports}var polyBezier={exports:{}},hasRequiredPolyBezier;function requirePolyBezier(){return hasRequiredPolyBezier||(hasRequiredPolyBezier=1,(function(){var e=requireUtils(),t=function(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)};t.prototype={valueOf:function(){return this.toString()},toString:function(){return"["+this.curves.map(function(n){return e.pointsToString(n.points)}).join(", ")+"]"},addCurve:function(n){this.curves.push(n),this._3d=this._3d||n._3d},length:function(){return this.curves.map(function(n){return n.length()}).reduce(function(n,r){return n+r})},curve:function(n){return this.curves[n]},bbox:function(){for(var n=this.curves,r=n[0].bbox(),i=1;i<n.length;i++)e.expandbox(r,n[i].bbox());return r},offset:function(n){var r=[];return this.curves.forEach(function(i){r=r.concat(i.offset(n))}),new t(r)}},polyBezier.exports=t})()),polyBezier.exports}var normaliseSvg,hasRequiredNormaliseSvg;function requireNormaliseSvg(){if(hasRequiredNormaliseSvg)return normaliseSvg;hasRequiredNormaliseSvg=1;function e(t){t=t.replace(/,/g," ").replace(/-/g," - ").replace(/-\s+/g,"-").replace(/([a-zA-Z])/g," $1 ");var n=t.replace(/([a-zA-Z])\s?/g,"|$1").split("|"),r=n.length,i,o,s,l,a=[],f,g,y=0,T=0,x=0,b=0,d=0,u=0,p=0,c=0,h="";for(i=1;i<r;i++)if(o=n[i],s=o.substring(0,1),l=s.toLowerCase(),a=o.replace(s,"").trim().split(" "),a=a.filter(function(m){return m!==""}).map(parseFloat),f=a.length,l==="m"){if(h+="M ",s==="m"?(x+=a[0],b+=a[1]):(x=a[0],b=a[1]),y=x,T=b,h+=x+" "+b+" ",f>2)for(g=0;g<f;g+=2)s==="m"?(x+=a[g],b+=a[g+1]):(x=a[g],b=a[g+1]),h+=["L",x,b,""].join(" ")}else if(l==="l")for(g=0;g<f;g+=2)s==="l"?(x+=a[g],b+=a[g+1]):(x=a[g],b=a[g+1]),h+=["L",x,b,""].join(" ");else if(l==="h")for(g=0;g<f;g++)s==="h"?x+=a[g]:x=a[g],h+=["L",x,b,""].join(" ");else if(l==="v")for(g=0;g<f;g++)s==="v"?b+=a[g]:b=a[g],h+=["L",x,b,""].join(" ");else if(l==="q")for(g=0;g<f;g+=4)s==="q"?(d=x+a[g],u=b+a[g+1],x+=a[g+2],b+=a[g+3]):(d=a[g],u=a[g+1],x=a[g+2],b=a[g+3]),h+=["Q",d,u,x,b,""].join(" ");else if(l==="t")for(g=0;g<f;g+=2)d=x+(x-d),u=b+(b-u),s==="t"?(x+=a[g],b+=a[g+1]):(x=a[g],b=a[g+1]),h+=["Q",d,u,x,b,""].join(" ");else if(l==="c")for(g=0;g<f;g+=6)s==="c"?(d=x+a[g],u=b+a[g+1],p=x+a[g+2],c=b+a[g+3],x+=a[g+4],b+=a[g+5]):(d=a[g],u=a[g+1],p=a[g+2],c=a[g+3],x=a[g+4],b=a[g+5]),h+=["C",d,u,p,c,x,b,""].join(" ");else if(l==="s")for(g=0;g<f;g+=4)d=x+(x-p),u=b+(b-c),s==="s"?(p=x+a[g],c=b+a[g+1],x+=a[g+2],b+=a[g+3]):(p=a[g],c=a[g+1],x=a[g+2],b=a[g+3]),h+=["C",d,u,p,c,x,b,""].join(" ");else l==="z"&&(h+="Z ",x=y,b=T);return h.trim()}return normaliseSvg=e,normaliseSvg}var svgToBeziers,hasRequiredSvgToBeziers;function requireSvgToBeziers(){if(hasRequiredSvgToBeziers)return svgToBeziers;hasRequiredSvgToBeziers=1;var e=requireNormaliseSvg(),t={x:!1,y:!1};function n(i,o,s){if(o!=="Z"){if(o==="M"){t={x:s[0],y:s[1]};return}var l=[!1,t.x,t.y].concat(s),a=i.bind.apply(i,l),f=new a,g=s.slice(-2);return t={x:g[0],y:g[1]},f}}function r(i,o){for(var s=e(o).split(" "),l,a=new RegExp("[MLCQZ]",""),f,g,y=[],T={C:6,Q:4,L:2,M:2};s.length;)l=s.splice(0,1)[0],a.test(l)&&(g=s.splice(0,T[l]).map(parseFloat),f=n(i,l,g),f&&y.push(f));return new i.PolyBezier(y)}return svgToBeziers=r,svgToBeziers}var hasRequiredBezier;function requireBezier(){return hasRequiredBezier||(hasRequiredBezier=1,(function(){var e=Math.abs,t=Math.min,n=Math.max,r=Math.cos,i=Math.sin,o=Math.acos,s=Math.sqrt,l=Math.PI,a={x:0,y:0,z:0},f=requireUtils(),g=requirePolyBezier(),y=function(d){var u=d&&d.forEach?d:[].slice.call(arguments),p=!1;if(typeof u[0]=="object"){p=u.length;var c=[];u.forEach(function(R){["x","y","z"].forEach(function(w){typeof R[w]<"u"&&c.push(R[w])})}),u=c}var h=!1,m=u.length;if(p){if(p>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");h=!0}}else if(m!==6&&m!==8&&m!==9&&m!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");var v=!h&&(m===9||m===12)||d&&d[0]&&typeof d[0].z<"u";this._3d=v;for(var E=[],A=0,S=v?3:2;A<m;A+=S){var C={x:u[A],y:u[A+1]};v&&(C.z=u[A+2]),E.push(C)}this.order=E.length-1,this.points=E;var O=["x","y"];v&&O.push("z"),this.dims=O,this.dimlen=O.length,(function(R){for(var w=R.order,P=R.points,F=f.align(P,{p1:P[0],p2:P[w]}),D=0;D<F.length;D++)if(e(F[D].y)>1e-4){R._linear=!1;return}R._linear=!0})(this),this._t1=0,this._t2=1,this.update()},T=requireSvgToBeziers();y.SVGtoBeziers=function(d){return T(y,d)};function x(d,u,p,c,h){typeof h>"u"&&(h=.5);var m=f.projectionratio(h,d),v=1-m,E={x:m*u.x+v*c.x,y:m*u.y+v*c.y},A=f.abcratio(h,d),S={x:p.x+(p.x-E.x)/A,y:p.y+(p.y-E.y)/A};return{A:S,B:p,C:E}}y.quadraticFromPoints=function(d,u,p,c){if(typeof c>"u"&&(c=.5),c===0)return new y(u,u,p);if(c===1)return new y(d,u,u);var h=x(2,d,u,p,c);return new y(d,h.A,p)},y.cubicFromPoints=function(d,u,p,c,h){typeof c>"u"&&(c=.5);var m=x(3,d,u,p,c);typeof h>"u"&&(h=f.dist(u,m.C));var v=h*(1-c)/c,E=f.dist(d,p),A=(p.x-d.x)/E,S=(p.y-d.y)/E,C=h*A,O=h*S,R=v*A,w=v*S,P={x:u.x-C,y:u.y-O},F={x:u.x+R,y:u.y+w},D=m.A,L={x:D.x+(P.x-D.x)/(1-c),y:D.y+(P.y-D.y)/(1-c)},B={x:D.x+(F.x-D.x)/c,y:D.y+(F.y-D.y)/c},G={x:d.x+(L.x-d.x)/c,y:d.y+(L.y-d.y)/c},_={x:p.x+(B.x-p.x)/(1-c),y:p.y+(B.y-p.y)/(1-c)};return new y(d,G,_,p)};var b=function(){return f};y.getUtils=b,y.PolyBezier=g,y.prototype={getUtils:b,valueOf:function(){return this.toString()},toString:function(){return f.pointsToString(this.points)},toSVG:function(d){if(this._3d)return!1;for(var u=this.points,p=u[0].x,c=u[0].y,h=["M",p,c,this.order===2?"Q":"C"],m=1,v=u.length;m<v;m++)h.push(u[m].x),h.push(u[m].y);return h.join(" ")},setRatios:function(d){if(d.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=d,this._lut=[]},verify:function(){var d=this.coordDigest();d!==this._print&&(this._print=d,this.update())},coordDigest:function(){return this.points.map(function(d,u){return""+u+d.x+d.y+(d.z?d.z:0)}).join("")},update:function(d){this._lut=[],this.dpoints=f.derive(this.points,this._3d),this.computedirection()},computedirection:function(){var d=this.points,u=f.angle(d[0],d[this.order],d[1]);this.clockwise=u>0},length:function(){return f.length(this.derivative.bind(this))},_lut:[],getLUT:function(d){if(this.verify(),d=d||100,this._lut.length===d)return this._lut;this._lut=[],d--;for(var u=0;u<=d;u++)this._lut.push(this.compute(u/d));return this._lut},on:function(d,u){u=u||5;for(var p=this.getLUT(),c=[],h,m=0,v=0;v<p.length;v++)h=p[v],f.dist(h,d)<u&&(c.push(h),m+=v/p.length);return c.length?m/=c.length:!1},project:function(d){var u=this.getLUT(),p=u.length-1,c=f.closest(u,d),h=c.mdist,m=c.mpos,v,E,A,S,C=(m-1)/p,O=(m+1)/p,R=.1/p;for(h+=1,E=C,v=E;E<O+R;E+=R)A=this.compute(E),S=f.dist(d,A),S<h&&(h=S,v=E);return A=this.compute(v),A.t=v,A.d=h,A},get:function(d){return this.compute(d)},point:function(d){return this.points[d]},compute:function(d){return this.ratios?f.computeWithRatios(d,this.points,this.ratios,this._3d):f.compute(d,this.points,this._3d,this.ratios)},raise:function(){for(var d=this.points,u=[d[0]],p,c=d.length,h,m,p=1;p<c;p++)h=d[p],m=d[p-1],u[p]={x:(c-p)/c*h.x+p/c*m.x,y:(c-p)/c*h.y+p/c*m.y};return u[c]=d[c-1],new y(u)},derivative:function(d){var u=1-d,p,c,h=0,m=this.dpoints[0];this.order===2&&(m=[m[0],m[1],a],p=u,c=d),this.order===3&&(p=u*u,c=u*d*2,h=d*d);var v={x:p*m[0].x+c*m[1].x+h*m[2].x,y:p*m[0].y+c*m[1].y+h*m[2].y};return this._3d&&(v.z=p*m[0].z+c*m[1].z+h*m[2].z),v},curvature:function(d){return f.curvature(d,this.points,this._3d)},inflections:function(){return f.inflections(this.points)},normal:function(d){return this._3d?this.__normal3(d):this.__normal2(d)},__normal2:function(d){var u=this.derivative(d),p=s(u.x*u.x+u.y*u.y);return{x:-u.y/p,y:u.x/p}},__normal3:function(d){var u=this.derivative(d),p=this.derivative(d+.01),c=s(u.x*u.x+u.y*u.y+u.z*u.z),h=s(p.x*p.x+p.y*p.y+p.z*p.z);u.x/=c,u.y/=c,u.z/=c,p.x/=h,p.y/=h,p.z/=h;var m={x:p.y*u.z-p.z*u.y,y:p.z*u.x-p.x*u.z,z:p.x*u.y-p.y*u.x},v=s(m.x*m.x+m.y*m.y+m.z*m.z);m.x/=v,m.y/=v,m.z/=v;var E=[m.x*m.x,m.x*m.y-m.z,m.x*m.z+m.y,m.x*m.y+m.z,m.y*m.y,m.y*m.z-m.x,m.x*m.z-m.y,m.y*m.z+m.x,m.z*m.z],A={x:E[0]*u.x+E[1]*u.y+E[2]*u.z,y:E[3]*u.x+E[4]*u.y+E[5]*u.z,z:E[6]*u.x+E[7]*u.y+E[8]*u.z};return A},hull:function(d){var u=this.points,p=[],c,h=[],m=0,v=0,E=0;for(h[m++]=u[0],h[m++]=u[1],h[m++]=u[2],this.order===3&&(h[m++]=u[3]);u.length>1;){for(p=[],v=0,E=u.length-1;v<E;v++)c=f.lerp(d,u[v],u[v+1]),h[m++]=c,p.push(c);u=p}return h},split:function(d,u){if(d===0&&u)return this.split(u).left;if(u===1)return this.split(d).right;var p=this.hull(d),c={left:this.order===2?new y([p[0],p[3],p[5]]):new y([p[0],p[4],p[7],p[9]]),right:this.order===2?new y([p[5],p[4],p[2]]):new y([p[9],p[8],p[6],p[3]]),span:p};if(c.left._t1=f.map(0,0,1,this._t1,this._t2),c.left._t2=f.map(d,0,1,this._t1,this._t2),c.right._t1=f.map(d,0,1,this._t1,this._t2),c.right._t2=f.map(1,0,1,this._t1,this._t2),!u)return c;u=f.map(u,d,1,0,1);var h=c.right.split(u);return h.left},extrema:function(){var d=this.dims,u={},p=[],c,h;return d.forEach(function(m){h=function(v){return v[m]},c=this.dpoints[0].map(h),u[m]=f.droots(c),this.order===3&&(c=this.dpoints[1].map(h),u[m]=u[m].concat(f.droots(c))),u[m]=u[m].filter(function(v){return v>=0&&v<=1}),p=p.concat(u[m].sort(f.numberSort))}.bind(this)),p=p.sort(f.numberSort).filter(function(m,v){return p.indexOf(m)===v}),u.values=p,u},bbox:function(){var d=this.extrema(),u={};return this.dims.forEach(function(p){u[p]=f.getminmax(this,p,d[p])}.bind(this)),u},overlaps:function(d){var u=this.bbox(),p=d.bbox();return f.bboxoverlap(u,p)},offset:function(d,u){if(typeof u<"u"){var p=this.get(d),c=this.normal(d),h={c:p,n:c,x:p.x+c.x*u,y:p.y+c.y*u};return this._3d&&(h.z=p.z+c.z*u),h}if(this._linear){var m=this.normal(0),v=this.points.map(function(A){var S={x:A.x+d*m.x,y:A.y+d*m.y};return A.z&&c.z&&(S.z=A.z+d*m.z),S});return[new y(v)]}var E=this.reduce();return E.map(function(A){return A._linear?A.offset(d)[0]:A.scale(d)})},simple:function(){if(this.order===3){var d=f.angle(this.points[0],this.points[3],this.points[1]),u=f.angle(this.points[0],this.points[3],this.points[2]);if(d>0&&u<0||d<0&&u>0)return!1}var p=this.normal(0),c=this.normal(1),h=p.x*c.x+p.y*c.y;this._3d&&(h+=p.z*c.z);var m=e(o(h));return m<l/3},reduce:function(){var d,u=0,p=0,c=.01,h,m=[],v=[],E=this.extrema().values;for(E.indexOf(0)===-1&&(E=[0].concat(E)),E.indexOf(1)===-1&&E.push(1),u=E[0],d=1;d<E.length;d++)p=E[d],h=this.split(u,p),h._t1=u,h._t2=p,m.push(h),u=p;return m.forEach(function(A){for(u=0,p=0;p<=1;)for(p=u+c;p<=1+c;p+=c)if(h=A.split(u,p),!h.simple()){if(p-=c,e(u-p)<c)return[];h=A.split(u,p),h._t1=f.map(u,0,1,A._t1,A._t2),h._t2=f.map(p,0,1,A._t1,A._t2),v.push(h),u=p;break}u<1&&(h=A.split(u,1),h._t1=f.map(u,0,1,A._t1,A._t2),h._t2=A._t2,v.push(h))}),v},scale:function(d){var u=this.order,p=!1;if(typeof d=="function"&&(p=d),p&&u===2)return this.raise().scale(p);var c=this.clockwise,h=p?p(0):d,m=p?p(1):d,v=[this.offset(0,10),this.offset(1,10)],E=f.lli4(v[0],v[0].c,v[1],v[1].c);if(!E)throw new Error("cannot scale this curve. Try reducing it first.");var A=this.points,S=[];return[0,1].forEach(function(C){var O=S[C*u]=f.copy(A[C*u]);O.x+=(C?m:h)*v[C].n.x,O.y+=(C?m:h)*v[C].n.y}.bind(this)),p?([0,1].forEach(function(C){if(!(this.order===2&&C)){var O=A[C+1],R={x:O.x-E.x,y:O.y-E.y},w=p?p((C+1)/u):d;p&&!c&&(w=-w);var P=s(R.x*R.x+R.y*R.y);R.x/=P,R.y/=P,S[C+1]={x:O.x+w*R.x,y:O.y+w*R.y}}}.bind(this)),new y(S)):([0,1].forEach(function(C){if(!(this.order===2&&C)){var O=S[C*u],R=this.derivative(C),w={x:O.x+R.x,y:O.y+R.y};S[C+1]=f.lli4(O,w,E,A[C+1])}}.bind(this)),new y(S))},outline:function(d,u,p,c){u=typeof u>"u"?d:u;var h=this.reduce(),m=h.length,v=[],E=[],A,S=0,C=this.length(),O=typeof p<"u"&&typeof c<"u";function R(q,k,U,I,z){return function(N){var j=I/U,H=(I+z)/U,X=k-q;return f.map(N,0,1,q+j*X,q+H*X)}}h.forEach(function(q){_=q.length(),O?(v.push(q.scale(R(d,p,C,S,_))),E.push(q.scale(R(-u,-c,C,S,_)))):(v.push(q.scale(d)),E.push(q.scale(-u))),S+=_}),E=E.map(function(q){return A=q.points,A[3]?q.points=[A[3],A[2],A[1],A[0]]:q.points=[A[2],A[1],A[0]],q}).reverse();var w=v[0].points[0],P=v[m-1].points[v[m-1].points.length-1],F=E[m-1].points[E[m-1].points.length-1],D=E[0].points[0],L=f.makeline(F,w),B=f.makeline(P,D),G=[L].concat(v).concat([B]).concat(E),_=G.length;return new g(G)},outlineshapes:function(d,u,p){u=u||d;for(var c=this.outline(d,u).curves,h=[],m=1,v=c.length;m<v/2;m++){var E=f.makeshape(c[m],c[v-m],p);E.startcap.virtual=m>1,E.endcap.virtual=m<v/2-1,h.push(E)}return h},intersects:function(d,u){return d?d.p1&&d.p2?this.lineIntersects(d):(d instanceof y&&(d=d.reduce()),this.curveintersects(this.reduce(),d,u)):this.selfintersects(u)},lineIntersects:function(d){var u=t(d.p1.x,d.p2.x),p=t(d.p1.y,d.p2.y),c=n(d.p1.x,d.p2.x),h=n(d.p1.y,d.p2.y),m=this;return f.roots(this.points,d).filter(function(v){var E=m.get(v);return f.between(E.x,u,c)&&f.between(E.y,p,h)})},selfintersects:function(d){var u=this.reduce(),p,c=u.length-2,h=[],m,v,E;for(p=0;p<c;p++)v=u.slice(p,p+1),E=u.slice(p+2),m=this.curveintersects(v,E,d),h=h.concat(m);return h},curveintersects:function(d,u,p){var c=[];d.forEach(function(m){u.forEach(function(v){m.overlaps(v)&&c.push({left:m,right:v})})});var h=[];return c.forEach(function(m){var v=f.pairiteration(m.left,m.right,p);v.length>0&&(h=h.concat(v))}),h},arcs:function(d){d=d||.5;var u=[];return this._iterate(d,u)},_error:function(d,u,p,c){var h=(c-p)/4,m=this.get(p+h),v=this.get(c-h),E=f.dist(d,u),A=f.dist(d,m),S=f.dist(d,v);return e(A-E)+e(S-E)},_iterate:function(d,u){var p=0,c=1,h;do{h=0,c=1;var m=this.get(p),v,E,A,S,C=!1,O=!1,R,w=c,P=1;do{O=C,S=A,w=(p+c)/2,v=this.get(w),E=this.get(c),A=f.getccenter(m,v,E),A.interval={start:p,end:c};var F=this._error(A,m,p,c);if(C=F<=d,R=O&&!C,R||(P=c),C){if(c>=1){if(A.interval.end=P=1,S=A,c>1){var D={x:A.x+A.r*r(A.e),y:A.y+A.r*i(A.e)};A.e+=f.angle({x:A.x,y:A.y},D,this.get(1))}break}c=c+(c-p)/2}else c=w}while(!R&&h++<100);if(h>=100)break;S=S||A,u.push(S),p=P}while(c<1);return u}},bezier.exports=y})()),bezier.exports}var bezierJs,hasRequiredBezierJs;function requireBezierJs(){return hasRequiredBezierJs||(hasRequiredBezierJs=1,bezierJs=requireBezier()),bezierJs}var dist,hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1;var MakerJs;(function(MakerJs){MakerJs.version="debug",MakerJs.environmentTypes={BrowserUI:"browser",NodeJs:"node",WebWorker:"worker",Unknown:"unknown"};var EPSILON=Number.EPSILON||Math.pow(2,-52);function tryEval(name){try{var value=eval(name);return value}catch(e){}}function detectEnvironment(){return tryEval("WorkerGlobalScope")&&tryEval("self")?MakerJs.environmentTypes.WebWorker:tryEval("window")&&tryEval("document")?MakerJs.environmentTypes.BrowserUI:tryEval("global")&&tryEval("process")?MakerJs.environmentTypes.NodeJs:MakerJs.environmentTypes.Unknown}MakerJs.environment=detectEnvironment(),MakerJs.unitType={Centimeter:"cm",Foot:"foot",Inch:"inch",Meter:"m",Millimeter:"mm"};function split(e,t){var n=e.indexOf(t);return n<0?[e]:n>0?[e.substr(0,n),e.substr(n+1)]:["",e]}function splitDecimal(e){var t=e.toString();return t.indexOf("e")>0&&(t=e.toFixed(20).match(/.*[^(0+$)]/)[0]),split(t,".")}MakerJs.splitDecimal=splitDecimal;function round(e,t){if(t===void 0&&(t=1e-7),e%1===0)return e;var n=1/t;return Math.round((e+EPSILON)*n)/n}MakerJs.round=round;function createRouteKey(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i;n%2===0?i=(n>0?".":"")+r:i=JSON.stringify([r]),t.push(i)}return t.join("")}MakerJs.createRouteKey=createRouteKey;function travel(e,t){if(!e||!t)return null;var n;Array.isArray(t)?n=t:n=JSON.parse(t);for(var r=n.slice(),i=e,o=e.origin||[0,0];r.length;){var s=r.shift();if(i=i[s],!i)return null;i.origin&&r.length&&(o=MakerJs.point.add(o,i.origin))}return{result:i,offset:o}}MakerJs.travel=travel;var clone=requireClone();function cloneObject(e){return clone(e)}MakerJs.cloneObject=cloneObject;function extendObject(e,t){if(e&&t)for(var n in t)typeof t[n]<"u"&&(e[n]=t[n]);return e}MakerJs.extendObject=extendObject;function isFunction(e){return typeof e=="function"}MakerJs.isFunction=isFunction;function isNumber(e){return typeof e=="number"}MakerJs.isNumber=isNumber;function isObject(e){return typeof e=="object"}MakerJs.isObject=isObject;function isPoint(e){return e&&Array.isArray(e)&&e.length==2&&isNumber(e[0])&&isNumber(e[1])}MakerJs.isPoint=isPoint;function isPath(e){return e&&e.type&&isPoint(e.origin)}MakerJs.isPath=isPath;function isPathLine(e){return isPath(e)&&e.type==MakerJs.pathType.Line&&isPoint(e.end)}MakerJs.isPathLine=isPathLine;function isPathCircle(e){return isPath(e)&&e.type==MakerJs.pathType.Circle&&isNumber(e.radius)}MakerJs.isPathCircle=isPathCircle;function isPathArc(e){return isPath(e)&&e.type==MakerJs.pathType.Arc&&isNumber(e.radius)&&isNumber(e.startAngle)&&isNumber(e.endAngle)}MakerJs.isPathArc=isPathArc;function isPathArcInBezierCurve(e){return isPathArc(e)&&isObject(e.bezierData)&&isNumber(e.bezierData.startT)&&isNumber(e.bezierData.endT)}MakerJs.isPathArcInBezierCurve=isPathArcInBezierCurve,MakerJs.pathType={Line:"line",Circle:"circle",Arc:"arc",BezierSeed:"bezier-seed"};function isModel(e){return e&&(e.paths||e.models)}MakerJs.isModel=isModel;function isChain(e){var t=e;return t&&t.links&&Array.isArray(t.links)&&isNumber(t.pathLength)}MakerJs.isChain=isChain;var Cascade=(function(){function e(t,n){this._module=t,this.$initial=n;for(var r in this._module)this._shadow(r);this.$result=n}return e.prototype._shadow=function(t){var n=this;this[t]=function(){return n._apply(n._module[t],arguments)}},e.prototype._apply=function(t,n){var r=[].slice.call(n);return r.unshift(this.$result),this.$result=t.apply(void 0,r),this},e.prototype.$reset=function(){return this.$result=this.$initial,this},e})();function $(e){if(isModel(e))return new Cascade(MakerJs.model,e);if(isPath(e))return new Cascade(MakerJs.path,e);if(isPoint(e))return new Cascade(MakerJs.point,e)}MakerJs.$=$})(MakerJs||(MakerJs={})),dist=MakerJs;var MakerJs;(function(e){(function(t){function n(c){return e.splitDecimal(c)[1]}function r(c,h){return h?+(e.splitDecimal(c)[0]+"."+h):c}function i(c,h){return c<0&&h<0||c>0&&h>0?r(h,n(c)):h}function o(c){var h=Math.floor(c/360);if(h===0)return c;var m=c-360*h;return i(c,m)}t.noRevolutions=o;function s(c){return o(c)*Math.PI/180}t.toRadians=s;function l(c){return c*180/Math.PI}t.toDegrees=l;function a(c){if(c.endAngle<c.startAngle){var h=Math.ceil((c.startAngle-c.endAngle)/360),m=h*360+c.endAngle;return i(c.endAngle,m)}return c.endAngle}t.ofArcEnd=a;function f(c,h){return h===void 0&&(h=.5),c.startAngle+g(c)*h}t.ofArcMiddle=f;function g(c){var h=t.ofArcEnd(c),m=h-c.startAngle;return e.round(m)>360?o(m):m}t.ofArcSpan=g;function y(c){return o(l(x(c.origin,c.end)))}t.ofLineInDegrees=y;function T(c,h){return l(x(c,h))}t.ofPointInDegrees=T;function x(c,h){var m=e.point.subtract(h,c),v=m[0],E=m[1];return Math.atan2(-E,-v)+Math.PI}t.ofPointInRadians=x;function b(c,h,m){return m&&(c=360-c),h&&(c=(c<180?180:540)-c),c}t.mirror=b;var d={};d[e.pathType.Arc]=function(c,h,m){var v=h!=m,E=v?c.endAngle-90:c.startAngle+90,A=e.point.fromArc(c)[v?1:0],S=e.point.rotate(e.point.add(A,[c.radius,0]),E,A);return new e.paths.Line(h?[S,A]:[A,S])},d[e.pathType.Line]=function(c,h,m){return m?new e.paths.Line(c.end,c.origin):c};function u(c,h){if(c){var m=c.walkedPath.pathContext,v=d[m.type];if(v)return v(m,h,c.reversed)}}function p(c,h){if(arguments.length<2)return null;var m=[c,h].map(function(E,A){return u(E,A===0)}),v=o(y(m[1])-y(m[0]));return v>180&&(v-=360),v}t.ofChainLinkJoint=p})(e.angle||(e.angle={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(C,O,R){var w=i(C);if(!O)return w;for(var P=2;P--;)R?w[P]-=O[P]:w[P]+=O[P];return w}t.add=n;function r(C,O){function R(w){return(C[w]+O[w])/2}return[R(0),R(1)]}t.average=r;function i(C){return C?[C[0],C[1]]:t.zero()}t.clone=i;function o(C,O){for(var R={index:0,distance:-1},w=0;w<O.length;w++){var P=e.measure.pointDistance(C,O[w]);(R.distance==-1||P<R.distance)&&(R.distance=P,R.index=w)}return O[R.index]}t.closest=o;var s={};s[Math.PI/2]=!0,s[3*Math.PI/2]=!0;var l={};l[Math.PI]=!0,l[2*Math.PI]=!0;function a(C,O){return[C in s?0:e.round(O*Math.cos(C)),C in l?0:e.round(O*Math.sin(C))]}t.fromPolar=a;function f(C,O){return n(O.origin,a(e.angle.toRadians(C),O.radius))}t.fromAngleOnCircle=f;function g(C){return[f(C.startAngle,C),f(C.endAngle,C)]}t.fromArc=g;var y={};y[e.pathType.Arc]=function(C){return t.fromArc(C)},y[e.pathType.Line]=function(C){return[C.origin,C.end]},y[e.pathType.BezierSeed]=y[e.pathType.Line];function T(C,O){var R=null,w=y[C.type];return w&&(R=w(C),O&&(R=R.map(function(P){return n(P,O)}))),R}t.fromPathEnds=T;function x(C,O){var R=C.origin[0],w=O.slope*R+O.yIntercept;return[R,w]}function b(C,O,R){R===void 0&&(R={});var w=e.measure.lineSlope(C),P=e.measure.lineSlope(O);if(e.measure.isSlopeParallel(w,P))return e.measure.isSlopeEqual(w,P)&&(R.out_AreOverlapped=e.measure.isLineOverlapping(C,O,R.excludeTangents)),null;var F;if(!w.hasSlope)F=x(C,P);else if(!P.hasSlope)F=x(O,w);else{var D=(P.yIntercept-w.yIntercept)/(w.slope-P.slope),L=w.slope*D+w.yIntercept;F=[D,L]}return F}t.fromSlopeIntersection=b;function d(C,O){return t.add(C.origin,t.fromPolar(e.angle.toRadians(O),C.radius))}var u={};u[e.pathType.Arc]=function(C,O){var R=e.angle.ofArcMiddle(C,O);return d(C,R)},u[e.pathType.Circle]=function(C,O){return d(C,360*O)},u[e.pathType.Line]=function(C,O){function R(w,P){return w+(P-w)*O}return[R(C.origin[0],C.end[0]),R(C.origin[1],C.end[1])]},u[e.pathType.BezierSeed]=function(C,O){return e.models.BezierCurve.computePoint(C,O)};function p(C,O){O===void 0&&(O=.5);var R=null,w=u[C.type];return w&&(R=w(C,O)),R}t.middle=p;function c(C,O,R){var w=i(C);return O&&(w[0]=-w[0]),R&&(w[1]=-w[1]),w}t.mirror=c;function h(C,O){return[e.round(C[0],O),e.round(C[1],O)]}t.rounded=h;function m(C,O,R){R===void 0&&(R=[0,0]);var w=e.angle.ofPointInRadians(R,C),P=e.measure.pointDistance(R,C),F=a(w+e.angle.toRadians(O),P);return n(R,F)}t.rotate=m;function v(C,O){for(var R=i(C),w=2;w--;)R[w]*=O;return R}t.scale=v;function E(C,O,R){return[C[0]*O,C[1]*R]}t.distort=E;function A(C,O){return n(C,O,!0)}t.subtract=A;function S(){return[0,0]}t.zero=S})(e.point||(e.point={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(P,F,D,L){return L===void 0&&(L=!1),e.model.addPath(F,P,D,L),P}t.addTo=n;function r(P,F){P&&F&&typeof P.layer<"u"&&(F.layer=P.layer),P&&F&&"bezierData"in P&&(F.bezierData=P.bezierData)}var i={};i[e.pathType.Circle]=function(P,F,D){F.radius=P.radius},i[e.pathType.Arc]=function(P,F,D){i[e.pathType.Circle](P,F,D),F.startAngle=P.startAngle,F.endAngle=P.endAngle},i[e.pathType.Line]=function(P,F,D){F.end=e.point.add(P.end,D)},i[e.pathType.BezierSeed]=function(P,F,D){i[e.pathType.Line](P,F,D),F.controls=P.controls.map(function(L){return e.point.add(L,D)})};function o(P,F){var D={type:P.type,origin:e.point.add(P.origin,F)},L=i[P.type];return L&&L(P,D,F),r(P,D),D}t.clone=o;function s(P,F){var D=i[P.type];return D&&(F.origin=e.point.clone(P.origin),D(P,F)),r(P,F),P}t.copyProps=s;var l={};l[e.pathType.Line]=function(P,F,D,L){return new e.paths.Line(F,e.point.mirror(P.end,D,L))},l[e.pathType.Circle]=function(P,F,D,L){return new e.paths.Circle(F,P.radius)},l[e.pathType.Arc]=function(P,F,D,L){var B=e.angle.mirror(P.startAngle,D,L),G=e.angle.mirror(e.angle.ofArcEnd(P),D,L),_=D!=L;return new e.paths.Arc(F,P.radius,_?G:B,_?B:G)},l[e.pathType.BezierSeed]=function(P,F,D,L){var B=l[e.pathType.Line](P,F,D,L);return B.type=e.pathType.BezierSeed,B.controls=P.controls.map(function(G){return e.point.mirror(G,D,L)}),B};function a(P,F){return P.layer=F,P}t.layer=a;function f(P,F,D){var L=null;if(P){var B=e.point.mirror(P.origin,F,D),G=l[P.type];G&&(L=G(P,B,F,D))}return r(P,L),L}t.mirror=f;var g={};g[e.pathType.Line]=function(P,F){var D=e.point.subtract(P.end,P.origin);P.end=e.point.add(F,D)};function y(P,F){if(P){var D=g[P.type];D&&D(P,F),P.origin=F}return P}t.move=y;var T={};T[e.pathType.Line]=function(P,F,D){P.end=e.point.add(P.end,F,D)},T[e.pathType.BezierSeed]=function(P,F,D){T[e.pathType.Line](P,F,D),P.controls=P.controls.map(function(L){return e.point.add(L,F,D)})};function x(P,F,D){if(P&&F){P.origin=e.point.add(P.origin,F,D);var L=T[P.type];L&&L(P,F,D)}return P}t.moveRelative=x;function b(P,F,D){var L=!1;function B(G,_){F[_]&&x(G,F[_],L)}P.map(B),D(),L=!0,P.map(B)}t.moveTemporary=b;var d={};d[e.pathType.Line]=function(P,F,D){P.end=e.point.rotate(P.end,F,D)},d[e.pathType.Arc]=function(P,F,D){P.startAngle=e.angle.noRevolutions(P.startAngle+F),P.endAngle=e.angle.noRevolutions(P.endAngle+F)},d[e.pathType.BezierSeed]=function(P,F,D){d[e.pathType.Line](P,F,D),P.controls=P.controls.map(function(L){return e.point.rotate(L,F,D)})};function u(P,F,D){if(D===void 0&&(D=[0,0]),!P||!F)return P;P.origin=e.point.rotate(P.origin,F,D);var L=d[P.type];return L&&L(P,F,D),P}t.rotate=u;var p={};p[e.pathType.Line]=function(P,F){P.end=e.point.scale(P.end,F)},p[e.pathType.BezierSeed]=function(P,F){p[e.pathType.Line](P,F),P.controls=P.controls.map(function(D){return e.point.scale(D,F)})},p[e.pathType.Circle]=function(P,F){P.radius*=F},p[e.pathType.Arc]=p[e.pathType.Circle];function c(P,F){if(!P||F===1||!F)return P;P.origin=e.point.scale(P.origin,F);var D=p[P.type];return D&&D(P,F),P}t.scale=c;var h={};h[e.pathType.Arc]=function(P,F,D){return new e.models.EllipticArc(P,F,D)},h[e.pathType.Circle]=function(P,F,D){var L=new e.models.Ellipse(P.radius*F,P.radius*D);return L.origin=e.point.distort(P.origin,F,D),L},h[e.pathType.Line]=function(P,F,D){return new e.paths.Line([P.origin,P.end].map(function(L){return e.point.distort(L,F,D)}))},h[e.pathType.BezierSeed]=function(P,F,D){var L=e.point.distort;return{type:e.pathType.BezierSeed,origin:L(P.origin,F,D),controls:P.controls.map(function(B){return L(B,F,D)}),end:L(P.end,F,D)}};function m(P,F,D){if(!P||!F||!D)return null;var L=h[P.type];if(L){var B=L(P,F,D);return typeof P.layer<"u"&&(B.layer=P.layer),B}return null}t.distort=m;function v(P,F,D,L){var B=e.point.fromSlopeIntersection(P,F);if(B){let q=function(k,U){var I;U?I=k.origin:I=k.end,I[0]=B[0],I[1]=B[1]};var G=[P,F],_=[D,L];arguments.length===2&&G.forEach(function(k,U){_[U]=e.point.closest(B,[k.origin,k.end])===k.origin}),G.forEach(function(k,U){q(k,_[U])})}return B}t.converge=v;var E={};E[e.pathType.Arc]=function(P,F,D,L){var B=e.angle.ofArcSpan(P),G=(F+D)*B/F-B;L?P.startAngle-=G:P.endAngle+=G},E[e.pathType.Circle]=function(P,F,D,L){P.radius*=(F+D)/F},E[e.pathType.Line]=function(P,F,D,L){var B=e.point.scale(e.point.subtract(P.end,P.origin),D/F);L?P.origin=e.point.subtract(P.origin,B):P.end=e.point.add(P.end,B)};function A(P,F,D){if(D===void 0&&(D=!1),!P||!F)return null;var L=E[P.type];if(L){var B=e.measure.pathLength(P);return!B||-F>=B?null:(L(P,B,F,D),P)}return null}t.alterLength=A;function S(P,F){if(F==1)return[e.point.middle(P)];var D=[],L=F;P.type!=e.pathType.Circle&&L--;for(var B=0;B<F;B++)D.push(e.point.middle(P,B/L));return D}t.toPoints=S;var C={};C[e.pathType.Line]=function(P){return 2},C[e.pathType.Circle]=function(P,F){var D=e.measure.pathLength(P);return D?(F=F||D,Math.max(8,Math.ceil(D/(F||D)))):0},C[e.pathType.Arc]=function(P,F){var D=e.measure.pathLength(P);if(!D)return 0;var L=Math.ceil(e.angle.ofArcSpan(P)/45)+1;return Math.max(L,Math.ceil(D/(F||D)))};function O(P,F){if(P.type==e.pathType.BezierSeed){var D=new e.models.BezierCurve(P),L;return e.model.findChains(D,function(_,q,k){if(_.length==1){var U=_[0];switch(U.links[0].walkedPath.pathId){case"arc_0":case"line_0":break;default:e.chain.reverse(U)}L=e.chain.toKeyPoints(U)}else q.length===1&&(L=O(q[0].pathContext))}),L}else{var B=C[P.type];if(B){var G=B(P,F);if(G)return S(P,G)}}return[]}t.toKeyPoints=O;function R(P){var F=e.measure.pathExtents(P),D=e.point.average(F.high,F.low),L=e.point.subtract(P.origin||[0,0],D);return y(P,L),P}t.center=R;function w(P){var F=e.measure.pathExtents(P),D=e.point.subtract(P.origin||[0,0],F.low);return y(P,D),P}t.zero=w})(e.path||(e.path={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n={};n[e.pathType.Arc]=function(i,o){var s=e.angle.ofPointInDegrees(i.origin,o);if(e.measure.isAngleEqual(s,i.startAngle)||e.measure.isAngleEqual(s,i.endAngle))return null;function l(){for(var y=e.angle.noRevolutions(i.startAngle),T=y+e.angle.ofArcEnd(i)-i.startAngle,x=[0,1,-1],b=0;b<x.length;b++){var d=360*x[b];if(e.measure.isBetween(s+d,y,T,!0))return i.startAngle+s+d-y}return null}var a=l();if(a==null)return null;var f=i.endAngle;i.endAngle=a;var g=e.cloneObject(i);return g.startAngle=a,g.endAngle=f,g},n[e.pathType.Circle]=function(i,o){i.type=e.pathType.Arc;var s=i,l=e.angle.ofPointInDegrees(i.origin,o);return s.startAngle=l,s.endAngle=l+360,null},n[e.pathType.Line]=function(i,o){if(!e.measure.isBetweenPoints(o,i,!0))return null;var s=i.end;i.end=o;var l=e.cloneObject(i);return l.origin=o,l.end=s,l};function r(i,o){if(i&&o){var s=n[i.type];if(s){var l=s(i,o);return l&&"layer"in i&&(l.layer=i.layer),l}}return null}t.breakAtPoint=r})(e.path||(e.path={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function l(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];var g,y;function T(C){var O=e.angle.ofPointInDegrees(C,a[S?1:0]),R=e.angle.ofPointInDegrees(C,a[S?0:1]);return R<O&&(R+=360),{origin:C,startAngle:O,endAngle:R,size:R-O}}switch(a.length){case 5:var x=a[0],b=a[1];this.radius=a[2];var d=a[3],S=a[4],u,p=e.measure.pointDistance(x,b)/2;if(e.round(this.radius-p)<=0)this.radius=p,u=T(e.point.average(x,b));else{for(var c=(y=(g=e.path.intersection(new r(x,this.radius),new r(b,this.radius)))===null||g===void 0?void 0:g.intersectionPoints)!==null&&y!==void 0?y:[x,b],h=[],m=c.length;m--;)u=T(c[m]),h.length==0||u.size>h[0].size?h.push(u):h.unshift(u);var v=d?1:0;u=h[v]}this.origin=u.origin,this.startAngle=u.startAngle,this.endAngle=u.endAngle;break;case 4:this.origin=a[0],this.radius=a[1],this.startAngle=a[2],this.endAngle=a[3];break;case 3:if(e.isPoint(a[2])){r.apply(this,a);for(var E=[],A=0;A<3;A++)E.push(e.angle.ofPointInDegrees(this.origin,a[A]));this.startAngle=E[0],this.endAngle=E[2],e.measure.isBetweenArcAngles(E[1],this,!1)||(this.startAngle=E[2],this.endAngle=E[0]);break}case 2:var S=a[2];r.call(this,a[0],a[1]),this.startAngle=e.angle.ofPointInDegrees(this.origin,a[S?1:0]),this.endAngle=e.angle.ofPointInDegrees(this.origin,a[S?0:1]);break}this.type=e.pathType.Arc}return l})();t.Arc=n;var r=(function(){function l(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];switch(this.type=e.pathType.Circle,a.length){case 1:this.origin=[0,0],this.radius=a[0];break;case 2:e.isNumber(a[1])?(this.origin=a[0],this.radius=a[1]):(this.origin=e.point.average(a[0],a[1]),this.radius=e.measure.pointDistance(this.origin,a[0]));break;default:for(var g=[new i(a[0],a[1]),new i(a[1],a[2])],y=[],T=2;T--;){var x=e.point.middle(g[T]);y.push(e.path.rotate(g[T],90,x))}var b=e.point.fromSlopeIntersection(y[0],y[1]);if(b)this.origin=b,this.radius=e.measure.pointDistance(this.origin,a[0]);else throw"invalid parameters - attempted to construct a circle from 3 points on a line: "+JSON.stringify(a);break}}return l})();t.Circle=r;var i=(function(){function l(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];switch(this.type=e.pathType.Line,a.length){case 1:var g=a[0];this.origin=g[0],this.end=g[1];break;case 2:this.origin=a[0],this.end=a[1];break}}return l})();t.Line=i;var o=(function(){function l(a){var f=e.point.fromArc(a);this.type=e.pathType.Line,this.origin=f[0],this.end=f[1]}return l})();t.Chord=o;var s=(function(){function l(a,f,g){this.type=e.pathType.Line,this.origin=e.point.clone(a.origin),this.end=e.point.clone(a.end);var y=e.angle.ofLineInDegrees(this);function T(d){var u=e.point.add(a.origin,e.point.fromPolar(e.angle.toRadians(y+d),f));return{origin:u,nearness:e.measure.pointDistance(u,g)}}var x=[T(-90),T(90)],b=x[0].nearness<x[1].nearness?x[0].origin:x[1].origin;e.path.move(this,b)}return l})();t.Parallel=s})(e.paths||(e.paths={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(R,w,P,F){return P||(P=e.point.zero()),F||(F=e.point.clone(P)),R.caption={text:w,anchor:new e.paths.Line(P,F)},R}t.addCaption=n;function r(R,w,P,F){F===void 0&&(F=!1);var D=F?P:y(R,P);return R.paths=R.paths||{},R.paths[D]=w,R}t.addPath=r;function i(R,w,P,F){F===void 0&&(F=!1);var D=F?P:g(R,P);return R.models=R.models||{},R.models[D]=w,R}t.addModel=i;function o(R,w,P,F){return F===void 0&&(F=!1),i(w,R,P,F),R}t.addTo=o;function s(R){return e.cloneObject(R)}t.clone=s;function l(R){var w=0;if(R.models)for(var P in R.models)w++;return w}t.countChildModels=l;function a(R){var w=[];function P(F,D,L){F.caption&&w.push({text:F.caption.text,anchor:e.path.clone(F.caption.anchor,e.point.add(F.origin,D)),layer:F.caption.anchor.layer||L})}return P(R,R.origin,R.layer),t.walk(R,{afterChildWalk:function(F){return P(F.childModel,F.offset,F.layer)}}),w}t.getAllCaptionsOffset=a;function f(R,w){if(!R)return w;for(var P=0,F=w;F in R;)P++,F=[w,P].join("_");return F}function g(R,w){return f(R.models,w)}t.getSimilarModelId=g;function y(R,w){return f(R.paths,w)}t.getSimilarPathId=y;function T(R,w){return R.layer=w,R}t.layer=T;function x(R,w){function P(F,D){if(F){var L=e.point.add(F.origin,D);if(F.type===e.models.BezierCurve.typeName&&e.path.moveRelative(F.seed,L),F.paths)for(var B in F.paths)e.path.moveRelative(F.paths[B],L);if(F.models)for(var B in F.models)P(F.models[B],L);F.caption&&e.path.moveRelative(F.caption.anchor,L),F.origin=e.point.zero()}}return P(R,w?e.point.subtract([0,0],w):[0,0]),w&&(R.origin=w),R}t.originate=x;function b(R,w,P){w===void 0&&(w=!0),P===void 0&&(P=!0);var F=e.measure.modelExtents(R),D=R.origin||[0,0];return w&&(D[0]-=F.center[0]),P&&(D[1]-=F.center[1]),R.origin=D,R}t.center=b;function d(R,w,P){var F={};if(!R)return null;if(R.origin&&(F.origin=e.point.mirror(R.origin,w,P)),R.type&&(F.type=R.type),"layer"in R&&(F.layer=R.layer),R.units&&(F.units=R.units),R.type===e.models.BezierCurve.typeName&&(F.type=e.models.BezierCurve.typeName,F.seed=e.path.mirror(R.seed,w,P)),R.paths){F.paths={};for(var D in R.paths){var L=R.paths[D];if(L){var B=e.path.mirror(L,w,P);B&&(F.paths[D]=B)}}}if(R.models){F.models={};for(var D in R.models){var G=R.models[D];if(G){var _=d(G,w,P);_&&(F.models[D]=_)}}}return R.caption&&(F.caption=e.cloneObject(R.caption),F.caption.anchor=e.path.mirror(R.caption.anchor,w,P)),F}t.mirror=d;function u(R,w){return R.origin=e.point.clone(w),R}t.move=u;function p(R,w){return R&&(R.origin=e.point.add(R.origin||e.point.zero(),w)),R}t.moveRelative=p;function c(R,w){var P=[];C(R,{onPath:function(L){P.push(L)}});for(var F=0;F<P.length;F++){var D=P[F];delete D.modelContext.paths[D.pathId],D.modelContext.paths[w+D.pathId]=D.pathContext}return R}t.prefixPathIds=c;function h(R,w,P){if(P===void 0&&(P=[0,0]),!R||!w)return R;var F=e.point.subtract(P,R.origin);if(R.type===e.models.BezierCurve.typeName&&e.path.rotate(R.seed,w,F),R.paths)for(var D in R.paths)e.path.rotate(R.paths[D],w,F);if(R.models)for(var D in R.models)h(R.models[D],w,F);return R.caption&&e.path.rotate(R.caption.anchor,w,F),R}t.rotate=h;function m(R,w,P){if(P===void 0&&(P=!1),P&&R.origin&&(R.origin=e.point.scale(R.origin,w)),R.type===e.models.BezierCurve.typeName&&e.path.scale(R.seed,w),R.paths)for(var F in R.paths)e.path.scale(R.paths[F],w);if(R.models)for(var F in R.models)m(R.models[F],w,!0);return R.caption&&e.path.scale(R.caption.anchor,w),R}t.scale=m;function v(R,w,P,F,D,L,B){var G=e.path.distort(w,D,L);if(F=F||w.layer,F&&(G.layer=F),e.isPath(G))if(G.type===e.pathType.BezierSeed){var _=new e.models.BezierCurve(G,B);i(R,_,P)}else r(R,G,P);else i(R,G,P)}function E(R,w,P,F,D){F===void 0&&(F=!1);var L={};if(R.layer&&(L.layer=R.layer),F&&R.origin&&(L.origin=e.point.distort(R.origin,w,P)),R.type===e.models.BezierCurve.typeName){var B=R,G=e.models.BezierCurve.getBezierSeeds(B,{byLayers:!0,pointMatchingDistance:D}),_=function(j){var H=G[j];H.forEach(function(X,V){v(L,X,V.toString(),j,w,P,D)})};for(var q in G)_(q)}else if(R.paths)for(var k in R.paths){var U=R.paths[k];v(L,U,k,null,w,P,D)}if(R.models)for(var I in R.models){var z=R.models[I],N=E(z,w,P,!0,D);i(L,N,I)}return R.caption&&(L.caption=e.cloneObject(R.caption),L.caption.anchor=e.path.distort(R.caption.anchor,w,P)),L}t.distort=E;function A(R,w){if(R.units&&e.units.isValidUnit(R.units)&&e.units.isValidUnit(w)){var P=e.units.conversionScale(R.units,w);P!=1&&(m(R,P),R.units=w)}return R}t.convertUnits=A;function S(R,w){if(R.paths)for(var P in R.paths)R.paths[P]&&w(R,P,R.paths[P]);if(R.models)for(var F in R.models)R.models[F]&&S(R.models[F],w)}t.walkPaths=S;function C(R,w){if(!R)return;function P(F,D,L,B,G){var _=e.point.add(F.origin,L);if(D=D??"",F.paths)for(var q in F.paths){var k=F.paths[q];if(k){var U={modelContext:F,layer:k.layer!=null?k.layer:D,offset:_,pathContext:k,pathId:q,route:B.concat(["paths",q]),routeKey:G+(G?".":"")+"paths"+JSON.stringify([q])};w.onPath&&w.onPath(U)}}if(F.models)for(var I in F.models){var z=F.models[I];if(z){var N={parentModel:F,layer:z.layer!=null?z.layer:D,offset:_,route:B.concat(["models",I]),routeKey:G+(G?".":"")+"models"+JSON.stringify([I]),childId:I,childModel:z};w.beforeChildWalk&&!w.beforeChildWalk(N)||(P(N.childModel,N.layer,_,N.route,N.routeKey),w.afterChildWalk&&w.afterChildWalk(N))}}}return P(R,R.layer,[0,0],[],""),R}t.walk=C;function O(R,w,P){w===void 0&&(w=!0),P===void 0&&(P=!0);var F=e.measure.modelExtents(R),D=R.origin||[0,0];return w&&(D[0]-=F.low[0]),P&&(D[1]-=F.low[1]),R.origin=D,R}t.zero=O})(e.model||(e.model={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(b,d){var u=e.cloneObject(b);if(!u)return null;var p=e.path.breakAtPoint(u,d);if(p){for(var c=[u,p],h=2;h--;)if(e.round(e.measure.pathLength(c[h]),1e-4)==0)return null;return c}else if(b.type==e.pathType.Circle)return[u];return null}function r(b,d,u){var p=[];return b.forEach(function(c){e.measure.isPointOnPath(c,d,1e-5,null,u)&&p.push(c)}),p}function i(b,d,u){var p=u.pathContext,c=b.segments;if(e.measure.isPathEqual(c[0].absolutePath,p,1e-4,null,u.offset)){c[0].overlapped=!0,c[0].duplicate=!0,d.push(c[0]);return}for(var h={},m={path1Offset:b.offset,path2Offset:u.offset},v=e.path.intersection(b.pathContext,p,m),E=v?v.intersectionPoints:null,A=e.point.fromPathEnds(p,u.offset)||[],S=0;S<c.length;S++){var C=E?A.concat(E):A,O=r(C,c[S].absolutePath,h);if(m.out_AreOverlapped&&(c[S].overlapped=!0,d.push(c[S])),O.length>0){for(var R=null,w=0;!R&&w<O.length;)R=n(c[S].absolutePath,O[w]),w++;if(R){if(b.broken=!0,c[S].absolutePath=R[0],R[1]){var P={absolutePath:R[1],pathId:c[0].pathId,overlapped:c[S].overlapped,uniqueForeignIntersectionPoints:[]};c[S].overlapped&&d.push(P),c.push(P)}S--}}}}function o(b,d,u,p,c){var h={farPoint:p,measureAtlas:c},m=e.point.add(e.point.middle(b),u);return e.measure.isPointInsideModel(m,d,h)}t.isPathInsideModel=o;function s(b,d){var u=new e.measure.Atlas(b);u.measureModels();var p;return d?(p=new e.measure.Atlas(d),p.measureModels()):(d=b,p=u),l(b,d||b,!1,u,p),b}t.breakPathsAtIntersections=s;function l(b,d,u,p,c,h){var m=[],v=[],E={onPath:function(A){var S={absolutePath:e.path.clone(A.pathContext,A.offset),pathId:A.pathId,overlapped:!1,uniqueForeignIntersectionPoints:[]},C=A;C.broken=!1,C.segments=[S];var O={onPath:function(F){A.pathContext!==F.pathContext&&e.measure.isMeasurementOverlapping(p.pathMap[A.routeKey],c.pathMap[F.routeKey])&&i(C,v,F)},beforeChildWalk:function(F){var D=c.modelMap[F.routeKey];return D&&e.measure.isMeasurementOverlapping(p.pathMap[A.routeKey],D)}};if(t.walk(d,O),u)for(var R=0;R<C.segments.length;R++){var w=e.point.middle(C.segments[R].absolutePath),P={measureAtlas:c,farPoint:h};C.segments[R].isInside=e.measure.isPointInsideModel(w,d,P),C.segments[R].uniqueForeignIntersectionPoints=P.out_intersectionPoints}m.push(C)}};return t.walk(b,E),{crossedPaths:m,overlappedSegments:v}}function a(b,d,u){function p(m,v){e.measure.isPathEqual(m.absolutePath,v.absolutePath,u)&&(m.duplicate=v.duplicate=!0)}function c(m){for(var v=0;v<d.length;v++)p(d[v],m)}for(var h=0;h<b.length;h++)c(b[h])}function f(b,d,u,p,c,h){function m(S,C,O){var R=t.getSimilarPathId(S,C),w=R==C?b.routeKey:e.createRouteKey(b.route.slice(0,-1).concat([R]));if(O.addedPath=e.cloneObject(b.pathContext),O.addedPath.type=O.absolutePath.type,e.path.copyProps(O.absolutePath,O.addedPath),e.path.moveRelative(O.addedPath,b.offset,!0),S.paths[R]=O.addedPath,b.broken){var P=e.measure.pathExtents(O.absolutePath);c.pathMap[w]=P,c.modelsMeasured=!1}else c.pathMap[w]=E}function v(S,C,O){O.isInside&&d||!O.isInside&&u?m(S,C,O):(c.modelsMeasured=!1,h(O.absolutePath,b.routeKey,"segment is "+(O.isInside?"inside":"outside")+" intersectionPoints="+JSON.stringify(O.uniqueForeignIntersectionPoints)))}var E=c.pathMap[b.routeKey];delete b.modelContext.paths[b.pathId],delete c.pathMap[b.routeKey];for(var A=0;A<b.segments.length;A++)b.segments[A].duplicate?p?m(b.modelContext,b.pathId,b.segments[A]):h(b.segments[A].absolutePath,b.routeKey,"segment is duplicate"):v(b.modelContext,b.pathId,b.segments[A])}function g(b,d,u,p,c,h,m){u===void 0&&(u=!1),p===void 0&&(p=!0),c===void 0&&(c=!1),h===void 0&&(h=!0);var v={trimDeadEnds:!0,pointMatchingDistance:.005,out_deleted:[{paths:{}},{paths:{}}]};if(e.extendObject(v,m),v.measureA=v.measureA||new e.measure.Atlas(b),v.measureB=v.measureB||new e.measure.Atlas(d),v.measureA.measureModels(),v.measureB.measureModels(),!v.farPoint){var E=e.measure.increase(e.measure.increase({high:[null,null],low:[null,null]},v.measureA.modelMap[""]),v.measureB.modelMap[""]);v.farPoint=e.point.add(E.high,[1,1])}var A=l(b,d,!0,v.measureA,v.measureB,v.farPoint),S=l(d,b,!0,v.measureB,v.measureA,v.farPoint);a(A.overlappedSegments,S.overlappedSegments,v.pointMatchingDistance);function C(P,F,D,L){t.addPath(v.out_deleted[P],F,"deleted");var B=F;B.reason=L,B.routeKey=D}for(var O=0;O<A.crossedPaths.length;O++)f(A.crossedPaths[O],u,p,!0,v.measureA,function(P,F,D){return C(0,P,F,D)});for(var O=0;O<S.crossedPaths.length;O++)f(S.crossedPaths[O],c,h,!1,v.measureB,function(F,D,L){return C(1,F,D,L)});var R={models:{a:b,b:d}};if(v.trimDeadEnds){var w;!u&&!c&&(w=function(P){for(var F=0;F<A.overlappedSegments.length;F++)if(A.overlappedSegments[F].duplicate&&P.pathContext===A.overlappedSegments[F].addedPath)return!1;return!0}),t.removeDeadEnds(R,null,w,function(P,F){var D=P.route[1]==="a"?0:1;C(D,P.pathContext,P.routeKey,F)})}return e.extendObject(m,v),R}t.combine=g;function y(b,d){return g(b,d,!0,!1,!0,!1)}t.combineIntersection=y;function T(b,d){return g(b,d,!1,!0,!0,!1)}t.combineSubtraction=T;function x(b,d){return g(b,d,!1,!0,!1,!0)}t.combineUnion=x})(e.model||(e.model={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){var t=(function(){function o(s){this.comparer=s,this.collections=[]}return o.prototype.addItemToCollection=function(s,l){var a=this.findCollection(s);if(a)a.push(l);else{var f={key:s,items:[l]};this.collections.push(f)}},o.prototype.findCollection=function(s,l){for(var a=0;a<this.collections.length;a++){var f=this.collections[a];if(this.comparer(s,f.key))return l&&l(a),f.items}return null},o.prototype.removeCollection=function(s){var l=this;return!!this.findCollection(s,function(a){l.collections.splice(a,1)})},o.prototype.removeItemFromCollection=function(s,l){var a=this.findCollection(s);if(a){for(var f=0;f<a.length;f++)if(a[f]===l)return a.splice(f,1),!0;return!1}},o.prototype.getCollectionsOfMultiple=function(s){for(var l=0;l<this.collections.length;l++){var a=this.collections[l];a.items.length>1&&s(a.key,a.items)}},o})();e.Collector=t;var n=require$$1,r=n.default||n,i=(function(){function o(){this.reset()}return o.prototype.reset=function(){this.insertedCount=0,this.graph={},this.index={},this.merged={},this.values=[]},o.prototype.insertValue=function(s){return this.values.push(s),this.values.length-1},o.prototype.insertValueIdAtPoint=function(s,l){var a=l[0],f=l[1];this.graph[a]||(this.graph[a]={});var g=this.graph[a],y=f in g,T,x;return y?(x=g[f],x in this.merged&&(x=this.merged[x]),T=this.index[x],T.valueIds.push(s)):(g[f]=x=this.insertedCount++,T={pointId:x,point:l,valueIds:[s]},this.index[x]=T),{existed:y,pointId:x}},o.prototype.mergePoints=function(s){var l=this,a=[],f=[];for(var g in this.index){var y=this.index[g],T=y.point;y.kdId=a.length,a.push(T),f.push(y)}this.kdbush=r(a);var x=function(d){if(d in b.merged)return"continue";var u=b.index[d],p=b.kdbush.within(u.point[0],u.point[1],s);p.forEach(function(c){c!==u.kdId&&l.mergeIndexElements(u,f[c])})},b=this;for(var g in this.index)x(g)},o.prototype.mergeNearestSinglePoints=function(s){var l=this,a=[];for(var f in this.index){var g=this.index[f];g.valueIds.length===1&&a.push(g)}this.kdbush=r(a.map(function(y){return y.point})),a.forEach(function(y){if(!(y.pointId in l.merged)){var T=l.kdbush.within(y.point[0],y.point[1],s),x=[];T.forEach(function(u){var p=a[u];p.pointId!==y.pointId&&x.push({el:p,distance:e.measure.pointDistance(p.point,y.point)})}),x.sort(function(u,p){return u.distance-p.distance});for(var b=0;b<x.length;b++){var d=x[b].el;if(!(d.pointId in l.merged)){d.merged&&d.merged.length>0?l.mergeIndexElements(d,y):l.mergeIndexElements(y,d);return}}}})},o.prototype.mergeIndexElements=function(s,l){return s.merged=s.merged||[],s.merged.push(l.pointId),this.merged[l.pointId]=s.pointId,s.valueIds.push.apply(s.valueIds,l.valueIds),delete this.index[l.pointId],s.pointId},o.prototype.forEachPoint=function(s){for(var l=this,a=0;a<this.insertedCount;a++){var f=this.index[a];if(f){var g=f.valueIds.length;g>0&&s(f.point,f.valueIds.map(function(y){return l.values[y]}),a,f)}}},o.prototype.getIdOfPoint=function(s){var l=this.graph[s[0]];if(l){var a=l[s[1]];if(a>=0)return a in this.merged?this.merged[a]:a}},o.prototype.getElementAtPoint=function(s){var l=this.getIdOfPoint(s);if(l>=0)return this.index[l]},o})();e.PointGraph=i})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(i,o,s){var l=0;do{var a=i[l];do for(var f=!1,g=l+1;g<i.length;g++){var y=i[g];if(f=o(a.pathContext,y.pathContext,!1),f){s(a.pathContext,y.pathContext),delete y.modelContext.paths[y.pathId],i.splice(g,1);break}}while(f);l++}while(l<i.length)}function r(i,o){function s(x,b){if(Math.abs(x.radius-b.radius)<=y.scalarMatchingDistance){var d=e.measure.pointDistance(x.origin,b.origin);return d<=y.pointMatchingDistance}return!1}var l=new e.Collector(s),a=new e.Collector(s),f=new e.Collector(e.measure.isSlopeEqual),g={};g[e.pathType.Arc]=function(x){l.addItemToCollection(x.pathContext,x)},g[e.pathType.Circle]=function(x){a.addItemToCollection(x.pathContext,x)},g[e.pathType.Line]=function(x){var b=e.measure.lineSlope(x.pathContext);f.addItemToCollection(b,x)};var y={scalarMatchingDistance:.001,pointMatchingDistance:.005};e.extendObject(y,o);var T={onPath:function(x){var b=g[x.pathContext.type];b&&b(x)}};return t.walk(i,T),l.getCollectionsOfMultiple(function(x,b){n(b,e.measure.isArcOverlapping,function(d,u){var p=e.measure.isBetweenArcAngles(d.endAngle,u,!1),c=e.measure.isBetweenArcAngles(u.endAngle,d,!1);if(p&&c){d.endAngle=d.startAngle+360;return}var h=p?[d,u]:[u,d];d.startAngle=e.angle.noRevolutions(h[0].startAngle),d.endAngle=h[1].endAngle})}),a.getCollectionsOfMultiple(function(x,b){for(var d=1;d<b.length;d++){var u=b[d];delete u.modelContext.paths[u.pathId]}}),f.getCollectionsOfMultiple(function(x,b){n(b,e.measure.isLineOverlapping,function(d,u){var p={paths:{lineA:d,lineB:u}},c=e.measure.modelExtents(p);x.hasSlope?x.slope<0?(d.origin=[c.low[0],c.high[1]],d.end=[c.high[0],c.low[1]]):x.slope>0?(d.origin=c.low,d.end=c.high):(d.origin[0]=c.low[0],d.end[0]=c.high[0]):(d.origin[1]=c.low[1],d.end[1]=c.high[1])})}),i}t.simplify=r})(e.model||(e.model={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n={};n[e.pathType.Arc]=function(o,s,l){return new e.models.OvalArc(o.startAngle,o.endAngle,o.radius,s,!1,l)},n[e.pathType.Circle]=function(o,s,l){return new e.models.Ring(o.radius+s,o.radius-s)},n[e.pathType.Line]=function(o,s,l){return new e.models.Slot(o.origin,o.end,s,l)};function r(o,s,l){if(!o)return null;var a=null,f=n[o.type];return f&&(a=f(o,s,l),a.origin=o.origin),a}t.expand=r;function i(o,s,l,a){var f=e.angle.ofArcSpan(o),g=1;f>=270?g=4:f>180?g=3:(f>150||s)&&(g=2);for(var y=e.angle.toRadians(f/g),T=e.models.Polygon.circumscribedRadius(o.radius,y),x=e.point.fromArc(o),b=[e.point.subtract(x[0],o.origin)],d=e.angle.toRadians(o.startAngle)+y/2,u=0;u<g;u++)b.push(e.point.fromPolar(d,T)),d+=y;b.push(e.point.subtract(x[1],o.origin));var p=new e.models.ConnectTheDots(a,b);return p.origin=o.origin,typeof l=="string"&&l.length&&e.model.prefixPathIds(p,l),p}t.straighten=i})(e.path||(e.path={}))})(MakerJs||(MakerJs={})),(function(e){(function(t){function n(s,l,a,f){if(a===void 0&&(a=0),f===void 0&&(f={}),l<=0)return null;var g={models:{expansions:{models:{}},caps:{models:{}}}},y=!0,T=f.farPoint,x={onPath:function(p){if(!(f.pointMatchingDistance&&e.measure.pathLength(p.pathContext)<f.pointMatchingDistance)){var c=e.path.expand(p.pathContext,l,!0);if(c){t.moveRelative(c,p.offset);var h=t.getSimilarModelId(g.models.expansions,p.pathId);if(t.prefixPathIds(c,p.pathId+"_"),t.originate(c),y||(t.combine(g,c,!1,!0,!1,!0,f),f.measureA.modelsMeasured=!1,T=f.farPoint,delete f.farPoint,delete f.measureB),g.models.expansions.models[h]=c,c.models){var m=c.models.Caps;m&&(delete c.models.Caps,g.models.caps.models[h]=m)}y=!1}}}};if(t.walk(s,x),a){var b=g.models.caps,d={models:{}};g.models.straightcaps=d,t.simplify(b);for(var u in b.models)d.models[u]={models:{}},t.walk(b.models[u],{onPath:function(p){var c=p.pathContext,h=e.path.straighten(c,a==2,p.pathId+"_",!0);t.combine(g,h,!1,!0,!1,!0,f),f.measureA.modelsMeasured=!1,T=f.farPoint,delete f.farPoint,delete f.measureB,d.models[u].models[p.pathId]=h,delete p.modelContext.paths[p.pathId]}});delete g.models.caps}return f.farPoint=T,g}t.expandPaths=n;function r(s){var l=[];return t.findChains(s,function(a,f,g){l=a.filter(function(y){return y.endless})}),l}function i(s){var l=r(s);if(l.length==0)return null;var a={models:{}};return l.forEach(function(f,g){a.models[g]=e.chain.toNewModel(f)}),a}function o(s,l,a,f,g){a===void 0&&(a=0),f===void 0&&(f=!1),g===void 0&&(g={});var y=n(s,l,a,g);if(!y)return null;var T=i(s);if(T){var x=0,b={models:{}},d=r(y);return d.forEach(function(u){var p=u.links[0].walkedPath,c=e.measure.isPointInsideModel(e.point.middle(p.pathContext),T,p.offset);(f&&c||!f&&!c)&&(b.models[x++]=e.chain.toNewModel(u))}),b}else return y}t.outline=o})(e.model||(e.model={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=e.unitType.Millimeter;function r(){s(e.unitType.Centimeter,10),s(e.unitType.Meter,1e3),s(e.unitType.Inch,25.4),s(e.unitType.Foot,25.4*12)}var i;function o(f,g,y){function T(x){return i[x]||(i[x]={}),i[x]}T(f)[g]=y,T(g)[f]=1/y}function s(f,g){o(f,n,g)}function l(f,g){return f==g?1:(i||(i={},r()),i[f][g]||o(f,g,i[f][n]*i[n][g]),i[f]&&i[f][g])}t.conversionScale=l;function a(f){for(var g in e.unitType)if(e.unitType[g]==f)return!0;return!1}t.isValidUnit=a})(e.units||(e.units={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(x,b,d){d===void 0&&(d=1e-4);var u=e.angle.noRevolutions(x),p=e.angle.noRevolutions(b),c=e.angle.noRevolutions(e.round(p-u,d));return c==0}t.isAngleEqual=n;var r={};r[e.pathType.Line]=function(x,b,d){return o(x.origin,b.origin,d)&&o(x.end,b.end,d)||o(x.origin,b.end,d)&&o(x.end,b.origin,d)},r[e.pathType.Circle]=function(x,b,d){return o(x.origin,b.origin,d)&&x.radius==b.radius},r[e.pathType.Arc]=function(x,b,d){return r[e.pathType.Circle](x,b,d)&&n(x.startAngle,b.startAngle)&&n(x.endAngle,b.endAngle)};function i(x,b,d,u,p){var c=!1;if(x.type==b.type){var h=r[x.type];if(h){let m=function(){c=h(x,b,d)};u||p?e.path.moveTemporary([x,b],[u,p],m):m()}}return c}t.isPathEqual=i;function o(x,b,d){if(d){if(!x||!b)return!1;var u=t.pointDistance(x,b);return u<=d}else return e.round(x[0]-b[0])==0&&e.round(x[1]-b[1])==0}t.isPointEqual=o;function s(x,b,d){for(var u=0;u<b.length;u++)if(o(b[u],x,d))return!1;return!0}t.isPointDistinct=s;function l(x,b,d){return d===void 0&&(d=0),b.hasSlope?Math.abs(x[1]-(b.slope*x[0]+b.yIntercept))<=d:Math.abs(x[0]-b.line.origin[0])<=d}t.isPointOnSlope=l;function a(x,b,d){d===void 0&&(d=0);var u=Math.abs(t.pointDistance(x,b.origin)-b.radius);return u<=d}t.isPointOnCircle=a;var f={};f[e.pathType.Circle]=function(x,b,d){return a(x,b,d)},f[e.pathType.Arc]=function(x,b,d){if(f[e.pathType.Circle](x,b,d)){var u=e.angle.ofPointInDegrees(b.origin,x);return t.isBetweenArcAngles(u,b,!1)}return!1},f[e.pathType.Line]=function(x,b,d,u){var p=u&&u.cachedLineSlope||t.lineSlope(b);return u&&!u.cachedLineSlope&&(u.cachedLineSlope=p),l(x,p,d)&&t.isBetweenPoints(x,b,!1)};function g(x,b,d,u,p){d===void 0&&(d=0);var c=f[b.type];if(c){var h=u?e.path.clone(b,u):b;return c(x,h,d,p)}return!1}t.isPointOnPath=g;function y(x,b){if(!T(x,b))return!1;if(!x.hasSlope&&!b.hasSlope)return e.round(x.line.origin[0]-b.line.origin[0])==0;var d=[x,b],u=d.map(function(m){return e.angle.toDegrees(Math.atan(m.slope))}),p=d.map(function(m){return e.path.clone(m.line)}),c=p[0].origin;p.forEach(function(m,v){return e.path.rotate(m,-u[v],c)});var h=p.map(function(m){return(m.origin[1]+m.end[1])/2});return e.round(h[0]-h[1],1e-5)==0}t.isSlopeEqual=y;function T(x,b){return!!(!x.hasSlope&&!b.hasSlope||x.hasSlope&&b.hasSlope&&e.round(x.slope-b.slope,1e-5)==0)}t.isSlopeParallel=T})(e.measure||(e.measure={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(U,I,z){function N(j,H,X){if(H)for(var V=2;V--;)H[V]!=null&&(j[V]==null?j[V]=H[V]:j[V]=X(j[V],H[V]))}return I&&(N(U.low,I.low,Math.min),N(U.high,I.high,Math.max)),z&&O(U),U}t.increase=n;function r(U,I){if(p(U.origin,I)<=U.radius)return!0;var z=new e.paths.Line(e.point.middle(U),I),N={},j=e.path.intersection(z,new e.paths.Chord(U),N);return!!(j||N.out_AreOverlapped)}t.isArcConcaveTowardsPoint=r;function i(U,I,z){return o(U,I,z)}t.isArcOverlapping=i;function o(U,I,z){function N(j,H){function X(V){return l(V,j,z)}return X(H.startAngle)||X(H.endAngle)}return N(U,I)||N(I,U)||U.startAngle==I.startAngle&&U.endAngle==I.endAngle}t.isArcSpanOverlapping=o;function s(U,I,z,N){return N?Math.min(I,z)<U&&U<Math.max(I,z):Math.min(I,z)<=U&&U<=Math.max(I,z)}t.isBetween=s;function l(U,I,z){var N=e.angle.noRevolutions(I.startAngle),j=e.angle.ofArcSpan(I),H=N+j;return U=e.angle.noRevolutions(U),s(U,N,H,z)||s(U,N+360,H+360,z)||s(U,N-360,H-360,z)}t.isBetweenArcAngles=l;function a(U,I,z){for(var N=!1,j=2;j--;){if(e.round(I.origin[j]-I.end[j],1e-6)==0){if(N)return!1;N=!0;continue}var H=e.round(I.origin[j]),X=e.round(I.end[j]);if(!s(e.round(U[j]),H,X,z))return!1}return!0}t.isBetweenPoints=a;function f(U,I){for(var z=u(U),N=0;N<U.controls.length;N++)if(!t.isPointOnSlope(U.controls[N],z)&&(!I||a(U.controls[N],U,!1)))return!1;return!0}t.isBezierSeedLinear=f;var g=requireGraham_scan_min();function y(U){return U.join(",")}function T(U,I){if(!U.endless||U.links.length===1)return null;var z=e.chain.toKeyPoints(U);return x(z,I)}t.isChainClockwise=T;function x(U,I){var z=new g,N=[];function j(Z){z.addPoint(Z[0],Z[1]),N.push(y(Z))}U.forEach(j);var H=z.getHull(),X=H.slice(0,3).map(function(Z){return y([Z.x,Z.y])}),V=[];switch(N.forEach(function(Z){~X.indexOf(Z)&&V.push(Z)}),V.indexOf(X[1])){case 0:V.unshift(V.pop());break;case 2:V.push(V.shift());break}return I&&(I.hullPoints=H.map(function(Z){return[Z.x,Z.y]}),I.keyPoints=U),X[0]!=V[0]}t.isPointArrayClockwise=x;function b(U,I,z){function N(j,H,X){function V(Z){return a(Z,H,z)}return V(X.origin)||V(X.end)}return N(0,U,I)||N(1,I,U)}t.isLineOverlapping=b;function d(U,I){for(var z=2;z--;)if(!(e.round(U.low[z]-I.high[z])<=0&&e.round(U.high[z]-I.low[z])>=0))return!1;return!0}t.isMeasurementOverlapping=d;function u(U){var I=U.end[0]-U.origin[0];if(e.round(I,1e-6)==0)return{line:U,hasSlope:!1};var z=U.end[1]-U.origin[1],N=z/I,j=U.origin[1]-N*U.origin[0];return{line:U,hasSlope:!0,slope:N,yIntercept:j}}t.lineSlope=u;function p(U,I){var z=I[0]-U[0],N=I[1]-U[1];return Math.sqrt(z*z+N*N)}t.pointDistance=p;function c(U,I,z){return[z(U[0],I[0]),z(U[1],I[1])]}var h={};h[e.pathType.Line]=function(U){return{low:c(U.origin,U.end,Math.min),high:c(U.origin,U.end,Math.max)}},h[e.pathType.Circle]=function(U){var I=U.radius;return{low:e.point.add(U.origin,[-I,-I]),high:e.point.add(U.origin,[I,I])}},h[e.pathType.Arc]=function(U){var I=U.radius,z=e.point.fromArc(U);function N(j,H,X){for(var V=c(z[0],z[1],X),Z=2;Z--;)l(j[Z],U,!1)&&(V[Z]=H+U.origin[Z]);return V}return{low:N([180,270],-I,Math.min),high:N([360,90],I,Math.max)}};function m(U,I){if(U){var z=h[U.type];if(z){var N=z(U);return I&&(N.high=e.point.add(N.high,I),N.low=e.point.add(N.low,I)),N}}return{low:null,high:null}}t.pathExtents=m;var v={};v[e.pathType.Line]=function(U){return p(U.origin,U.end)},v[e.pathType.Circle]=function(U){return 2*Math.PI*U.radius},v[e.pathType.Arc]=function(U){var I=v[e.pathType.Circle](U),z=e.angle.ofArcSpan(U)/360;return I*=z,I},v[e.pathType.BezierSeed]=function(U){return e.models.BezierCurve.computeLength(U)};function E(U){if(U){var I=v[U.type];if(I)return I(U)}return 0}t.pathLength=E;function A(U){var I=0;return e.model.walk(U,{onPath:function(z){I+=E(z.pathContext)}}),I}t.modelPathLength=A;function S(U){return{high:e.point.clone(U.high),low:e.point.clone(U.low)}}function C(U,I){function z(H,X){if(X){var V=H.slice(0,-2),Z=e.createRouteKey(V);Z in I.modelMap?n(I.modelMap[Z],X):I.modelMap[Z]=S(X)}}I||(I=new R(U));var N={onPath:function(H){H.routeKey in I.pathMap||(I.pathMap[H.routeKey]=m(H.pathContext,H.offset)),z(H.route,I.pathMap[H.routeKey])},afterChildWalk:function(H){z(H.route,I.modelMap[H.routeKey])}};e.model.walk(U,N),I.modelsMeasured=!0;var j=I.modelMap[""];return j?O(j):null}t.modelExtents=C;function O(U){var I=U;return I.center=e.point.average(I.high,I.low),I.width=I.high[0]-I.low[0],I.height=I.high[1]-I.low[1],I}t.augment=O;var R=(function(){function U(I){this.modelContext=I,this.modelsMeasured=!1,this.modelMap={},this.pathMap={}}return U.prototype.measureModels=function(){this.modelsMeasured||C(this.modelContext,this)},U})();t.Atlas=R;function w(U,I){return I>=U?I-U:I<0?I+U:I}function P(U,I){return U.slope*I+U.yIntercept}function F(U,I){var z=u(U);return[I,P(z,I)]}function D(U){for(var I=1;I<3;I++)if(!t.isPointEqual(U[0].center,U[I].center,1e-6)||e.round(U[0].width-U[I].width)!==0)return!1;return!0}function L(U,I,z,N){e.model.rotate(I,z);var j=C(I),H={index:U,rotation:N,center:e.point.rotate(j.center,N),width:j.height,height:j.width,bottom:new e.paths.Line(j.low,[j.high[0],j.low[1]]),middle:new e.paths.Line([j.low[0],j.center[1]],[j.high[0],j.center[1]]),top:new e.paths.Line(j.high,[j.low[0],j.high[1]])};return[H.top,H.middle,H.bottom].forEach(function(X){return e.path.rotate(X,N)}),H}function B(U,I){var z=U[1].origin,N=z[0],j=U[3].origin[0],H=U[0].origin[0],X=N-H;if(H-j>2*X)return null;var V=(N-j)/3;if(X<V)return null;var Z=Math.min(V,X),oe=e.solvers.equilateralSide(Z),ee=[e.point.fromSlopeIntersection(U[1],U[2]),e.point.fromSlopeIntersection(U[4],U[5])],ae=ee.map(function(Q){return Math.abs(Q[1]-z[1])}),te=ae[0]>ae[1]?0:1,re=ae[te];if(re>oe){var le=e.solvers.equilateralAltitude(re),de=N-2*le;if(H>de+le||j<de-le)return null;var ie=j-de+le,ce=2*le-I[te+1].width,Y=Math.min(ie,ce)/2;return{origin:F(I[2-te].middle,de+Y),radius:re,type:"peak "+te}}else return{origin:[N-2*Z,z[1]],radius:oe,type:"side"}}function G(U){var I=e.cloneObject(U);e.model.originate(I);var z=C(I),N=[],j={paths:{}};e.model.center(I);function H(ie,ce,Y){return{radius:ie,paths:new e.models.Polygon(6,ie,30).paths,origin:e.point.add(ce,z.center),notes:Y}}for(var X=[[90,-90],[-60,-30],[-60,30]];X.length;){var V=X.shift(),Z=L(N.length,I,V[0],V[1]),oe=e.solvers.equilateralSide(Z.width/2);if(oe>=Z.height)return H(oe,Z.center,"solved by bound "+N.length);N.push(Z)}if(D(N))return H(e.solvers.equilateralSide(N[0].width/2),N[0].center,"solved as circular");var ee=N.map(function(ie){return ie.top}).concat(N.map(function(ie){return ie.bottom}));ee.forEach(function(ie,ce){j.paths[ce]=ie,e.path.converge(ee[w(6,ce+2)],ie,!0)}),N.forEach(function(ie,ce){j.paths["m"+ce]=ie.middle});for(var ae=N.slice(),te,re=0;re<6;re++){re>0&&(ee.push(ee.shift()),ae.push(ae.shift()),e.model.rotate(j,-60));var le=B(ee,ae);le&&(!te||le.radius<te.radius)&&(te=le,te.index=re)}var de=e.point.rotate(te.origin,te.index*60);return H(te.radius,de,"solved by "+te.index+" as "+te.type)}t.boundingHexagon=G;function _(U,I){var z=0;return I.forEach(function(N){t.isPointDistinct(N,U,1e-8)&&(U.push(N),z++)}),z}function q(U,I,z){if(I)return I;var N=C(U).high;return N?e.point.add(N,[1,1]):[7654321,1234567]}function k(U,I,z){z===void 0&&(z={}),z.farPoint||(z.farPoint=q(I,z.farPoint,z.measureAtlas)),z.out_intersectionPoints=[];var N,j=new e.paths.Line(U,z.farPoint),H=m(j),X={onPath:function(V){if(!(z.measureAtlas&&!d(H,z.measureAtlas.pathMap[V.routeKey]))){var Z={path2Offset:V.offset},oe=e.path.intersection(j,V.pathContext,Z);if(oe){var ee=_(z.out_intersectionPoints,oe.intersectionPoints);ee%2==1&&(N=!N)}}},beforeChildWalk:function(V){if(!z.measureAtlas)return!0;var Z=z.measureAtlas.modelMap[V.routeKey];return Z&&d(H,Z)}};return e.model.walk(I,X),!!N}t.isPointInsideModel=k})(e.measure||(e.measure={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(i,o){o===void 0&&(o={});function s(l,a){if(e.isNumber(a)){var f=e.round(a,o.accuracy);return f}if(e.isPoint(a)){var g=e.point.rounded(a,o.accuracy);return g}return a}return JSON.stringify(i,o.accuracy&&s,o.indentation)}t.toJson=n;function r(i){if(e.isModel(i))return i.units}t.tryGetModelUnits=r,t.colors={black:0,red:1,yellow:2,lime:3,aqua:4,blue:5,fuchsia:6,white:7,gray:9,maroon:14,orange:30,olive:58,green:94,teal:134,navy:174,purple:214,silver:254}})(e.exporter||(e.exporter={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(r){for(var i=[],o=/-?(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s;(s=o.exec(r))!==null;)s.index===o.lastIndex&&o.lastIndex++,s[0]!==""&&i.push(parseFloat(s[0]));return i}t.parseNumericList=n})(e.importer||(e.importer={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(o,s){s===void 0&&(s={});var l={fontSize:9},a=[],f={entities:[],header:{},tables:{}};if(e.extendObject(l,s),e.isModel(o)){var g=o;g.exporterOptions&&e.extendObject(l,g.exporterOptions.toDXF)}function y(w){if(l.layerOptions&&l.layerOptions[w])return l.layerOptions[w];if(w in t.colors)return{color:t.colors[w]}}function T(w){return l.layerOptions&&l.layerOptions[w]&&l.layerOptions[w].lineType?l.layerOptions[w].lineType:"CONTINUOUS"}function x(w,P){var F=w&&w.layer||P||"0";return a.indexOf(F)<0&&a.push(F),F}var b={};b[e.pathType.Line]=function(w,P,F){var D=x(w,F),L={type:"LINE",layer:D,vertices:[{x:e.round(w.origin[0]+P[0],l.accuracy),y:e.round(w.origin[1]+P[1],l.accuracy)},{x:e.round(w.end[0]+P[0],l.accuracy),y:e.round(w.end[1]+P[1],l.accuracy)}]};return L.lineType=T(D),L},b[e.pathType.Circle]=function(w,P,F){var D=x(w,F),L={type:"CIRCLE",layer:D,center:{x:e.round(w.origin[0]+P[0],l.accuracy),y:e.round(w.origin[1]+P[1],l.accuracy)},radius:e.round(w.radius,l.accuracy)};return L.lineType=T(D),L},b[e.pathType.Arc]=function(w,P,F){var D=x(w,F),L={type:"ARC",layer:D,center:{x:e.round(w.origin[0]+P[0],l.accuracy),y:e.round(w.origin[1]+P[1],l.accuracy)},radius:e.round(w.radius,l.accuracy),startAngle:e.round(w.startAngle,l.accuracy),endAngle:e.round(w.endAngle,l.accuracy)};return L.lineType=T(D),L};function d(w,P,F){var D={type:"VERTEX",layer:x(null,P),x:e.round(w[0],l.accuracy),y:e.round(w[1],l.accuracy),bulge:F};return D}function u(w){var P={type:"POLYLINE",layer:x(null,w.layer),shape:w.chain.endless,vertices:[]};if(P.lineType=T(P.layer),w.chain.links.forEach(function(L,B){var G;if(L.walkedPath.pathContext.type===e.pathType.Arc){var _=L.walkedPath.pathContext;G=e.round(Math.tan(e.angle.toRadians(e.angle.ofArcSpan(_))/4),l.accuracy),L.reversed&&(G*=-1)}var q=L.endPoints[L.reversed?1:0];P.vertices.push(d(q,w.layer,G))}),!w.chain.endless){var F=w.chain.links[w.chain.links.length-1],D=F.endPoints[F.reversed?0:1];P.vertices.push(d(D,w.layer))}return P}function p(w){var P=x(null,w.layer),F=y(P),D=e.point.middle(w.anchor),L={type:"TEXT",startPoint:d(D,null),endPoint:d(D,null),layer:P,textHeight:F&&F.fontSize||l.fontSize,text:w.text,halign:4,valign:0,rotation:e.angle.ofPointInDegrees(w.anchor.origin,w.anchor.end)};return L}function c(w,P){var F={name:w,color:P};return F.lineType=T(w),F}function h(){var w={lineTypes:{CONTINUOUS:{name:"CONTINUOUS",description:"______",patternLength:0,elements:[]},DASHED:{name:"DASHED",description:"_ _ _ ",elements:[5,-2.5],patternLength:7.5},DOTTED:{name:"DOTTED",description:". . . ",elements:[.5,-1],patternLength:1.5}}},P="lineType";f.tables[P]=w}function m(){var w={layers:{}};a.forEach(function(F){var D=y(F);D&&(w.layers[F]=c(F,D.color))});var P="layer";f.tables[P]=w}function v(){if(l.units){var w=i[l.units];f.header.$INSUNITS=w}}function E(w,P,F){var D=f.entities;D.push.apply(D,P.map(u)),w.forEach(function(L){var B=b[L.pathContext.type];if(B){var G=B(L.pathContext,L.offset,L.layer);D.push(G)}}),D.push.apply(D,F.map(p))}if(!l.units){var A=t.tryGetModelUnits(o);A&&(l.units=A)}e.extendObject(s,l);var S=[],C=[];if(l.usePOLYLINE){var O=function(w,P,F){w.forEach(function(D){if(D.endless&&D.links.length===1&&D.links[0].walkedPath.pathContext.type===e.pathType.Circle){C.push(D.links[0].walkedPath);return}var L={chain:D,layer:F};S.push(L)}),C.push.apply(C,P)};e.model.findChains(g,O,{byLayers:!0,pointMatchingDistance:l.pointMatchingDistance})}else{var R={onPath:function(w){C.push(w)}};e.model.walk(g,R)}return E(C,S,e.model.getAllCaptionsOffset(g)),v(),h(),m(),r(f)}t.toDXF=n;function r(o){var s=[];function l(){for(var h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];s.push.apply(s,h)}function a(h){var m=h.lineType;m&&l("6",m)}var f={};f.LINE=function(h){l("0","LINE","8",h.layer),a(h),l("10",h.vertices[0].x,"20",h.vertices[0].y,"11",h.vertices[1].x,"21",h.vertices[1].y)},f.CIRCLE=function(h){l("0","CIRCLE","8",h.layer),a(h),l("10",h.center.x,"20",h.center.y,"40",h.radius)},f.ARC=function(h){l("0","ARC","8",h.layer),a(h),l("10",h.center.x,"20",h.center.y,"40",h.radius,"50",h.startAngle,"51",h.endAngle)},f.VERTEX=function(h){l("0","VERTEX","8",h.layer,"10",h.x,"20",h.y),h.bulge!==void 0&&l("42",h.bulge)},f.POLYLINE=function(h){l("0","POLYLINE","8",h.layer),a(h),l("66",1,"70",h.shape?1:0),h.vertices.forEach(function(m){return f.VERTEX(m)}),l("0","SEQEND")},f.TEXT=function(h){l("0","TEXT","10",h.startPoint.x,"20",h.startPoint.y,"11",h.endPoint.x,"21",h.endPoint.y,"40",h.textHeight,"1",h.text,"50",h.rotation,"8",h.layer,"72",h.halign,"73",h.valign)};function g(h){l("0","SECTION"),h(),l("0","ENDSEC")}function y(h){l("0","TABLE"),h(),l("0","ENDTAB")}function T(){l("2","TABLES"),y(d),y(u)}function x(h){var m=h.lineType||"CONTINUOUS";l("0","LAYER","2",h.name,"70","0","62",h.color,"6",m)}function b(h){var m=h.elements||[];l("0","LTYPE","72","65","70","0","2",h.name,"3",h.description,"73",m.length,"40",h.patternLength),m.forEach(function(v){return l("49",v)})}function d(){var h="lineType",m=o.tables[h];l("2","LTYPE");for(var v in m.lineTypes){var E=m.lineTypes[v];b(E)}}function u(){var h="layer",m=o.tables[h];l("2","LAYER");for(var v in m.layers){var E=m.layers[v];x(E)}}function p(){l("2","HEADER");for(var h in o.header){var m=o.header[h];l("9",h,"70",m)}}function c(h){l("2","ENTITIES"),h.forEach(function(m){var v=f[m.type];v&&v(m)})}return g(p),g(T),g(function(){return c(o.entities)}),l("0","EOF"),s.join(`
`)}var i={};i[""]=0,i[e.unitType.Inch]=1,i[e.unitType.Foot]=2,i[e.unitType.Millimeter]=4,i[e.unitType.Centimeter]=5,i[e.unitType.Meter]=6})(e.exporter||(e.exporter={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=Math.sqrt(3)/2;function r(a){return a*n}t.equilateralAltitude=r;function i(a){return a/n}t.equilateralSide=i;function o(a,f,g){return e.angle.toDegrees(Math.acos((f*f+g*g-a*a)/(2*f*g)))}t.solveTriangleSSS=o;function s(a,f,g){var y=180-a-g;return f*Math.sin(e.angle.toRadians(a))/Math.sin(e.angle.toRadians(y))}t.solveTriangleASA=s;function l(a,f,g){g===void 0&&(g=!1);var y=new e.paths.Line(a.origin,f.origin),T=e.measure.pointDistance(a.origin,f.origin);if(a.radius>=T+f.radius||f.radius>=T+a.radius||g&&a.radius+f.radius>=T)return null;var x;if(!g&&e.round(a.radius-f.radius)==0)x=[90,270];else{var b=T/2,d=new e.paths.Circle([b,0],b),u=new e.paths.Circle(a.radius>f.radius?[0,0]:[T,0],g?a.radius+f.radius:Math.abs(a.radius-f.radius)),p=e.path.intersection(u,d);if(!p||!p.path1Angles)return null;x=p.path1Angles}var c=e.angle.ofLineInDegrees(y);return x.map(function(h){return e.angle.noRevolutions(h+c)})}t.circleTangentAngles=l})(e.solvers||(e.solvers={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n={};n[e.pathType.Arc]={},n[e.pathType.Circle]={},n[e.pathType.Line]={},n[e.pathType.Arc][e.pathType.Arc]=function(y,T,x,b){var d=null;return r([y,T],x,b,function(){var u=g(y,T,x);if(u){var p=a(u[0],y,x),c=a(u[1],T,x);if(p&&c)if(p.length===1||c.length===1)for(var h=0;h<p.length;h++)for(var m=0;m<c.length;m++){var v=e.point.fromAngleOnCircle(p[h],y),E=e.point.fromAngleOnCircle(c[m],T);if(e.measure.isPointEqual(v,E,1e-4)){d={intersectionPoints:[v],path1Angles:[p[h]],path2Angles:[c[m]]};return}}else d={intersectionPoints:l(p,y),path1Angles:p,path2Angles:c}}else x.out_AreOverlapped&&(x.out_AreOverlapped=e.measure.isArcOverlapping(y,T,x.excludeTangents))}),d},n[e.pathType.Arc][e.pathType.Circle]=function(y,T,x,b){var d=null;return r([y,T],x,b,function(){var u=g(y,T,x);if(u){var p=a(u[0],y,x);if(p){var c;if(p.length==2)c=u[1];else{var h=s(u[0],p[0]);c=[u[1][h]]}d={intersectionPoints:l(p,y),path1Angles:p,path2Angles:c}}}}),d},n[e.pathType.Arc][e.pathType.Line]=function(y,T,x,b){var d=null;return r([y,T],x,b,function(){var u=f(T,y,x);if(u){var p=a(u,y,x);p&&(d={intersectionPoints:l(p,y),path1Angles:p})}}),d},n[e.pathType.Circle][e.pathType.Arc]=function(y,T,x){var b=n[e.pathType.Arc][e.pathType.Circle](T,y,x,!0);return b?i(b):null},n[e.pathType.Circle][e.pathType.Circle]=function(y,T,x,b){var d=null;return r([y,T],x,b,function(){var u=g(y,T,x);u&&(d={intersectionPoints:l(u[0],y),path1Angles:u[0],path2Angles:u[1]})}),d},n[e.pathType.Circle][e.pathType.Line]=function(y,T,x,b){var d=null;return r([y,T],x,b,function(){var u=f(T,y,x);u&&(d={intersectionPoints:l(u,y),path1Angles:u})}),d},n[e.pathType.Line][e.pathType.Arc]=function(y,T,x){var b=n[e.pathType.Arc][e.pathType.Line](T,y,x,!0);return b?i(b):null},n[e.pathType.Line][e.pathType.Circle]=function(y,T,x){var b=n[e.pathType.Circle][e.pathType.Line](T,y,x,!0);return b?i(b):null},n[e.pathType.Line][e.pathType.Line]=function(y,T,x,b){var d=null;return r([y,T],x,b,function(){var u=e.point.fromSlopeIntersection(y,T,x);u&&e.measure.isBetweenPoints(u,y,x.excludeTangents)&&e.measure.isBetweenPoints(u,T,x.excludeTangents)&&(d={intersectionPoints:[u]})}),d};function r(y,T,x,b){var d=x?[T.path2Offset,T.path1Offset]:[T.path1Offset,T.path2Offset];t.moveTemporary(y,d,b)}function i(y){var T=y.path1Angles;return y.path2Angles?y.path1Angles=y.path2Angles:delete y.path1Angles,T&&(y.path2Angles=T),y}function o(y,T,x){if(x===void 0&&(x={}),y&&T){var b=n[y.type][T.type];if(b)return b(y,T,x)}return null}t.intersection=o;function s(y,T){for(var x=2;x--;)if(y[x]===T)return x}function l(y,T){for(var x=[],b=0;b<y.length;b++)x.push(e.point.fromAngleOnCircle(y[b],T));return x}function a(y,T,x){if(!y)return null;for(var b=[],d=0;d<y.length;d++)e.measure.isBetweenArcAngles(y[d],T,x.excludeTangents)&&b.push(y[d]);return b.length==0?null:b}function f(y,T,x){var b=e.round(T.radius);if(T.radius<=0)return null;var d=new e.paths.Line(e.point.subtract(y.origin,T.origin),e.point.subtract(y.end,T.origin)),u=e.angle.ofLineInDegrees(y),p=u>=180?u-360:u;t.rotate(d,-p,e.point.zero());function c(C){var O=C+p;return e.round(e.angle.noRevolutions(O))}var h=e.round(d.origin[1]),m=Math.abs(h);if(m>b)return null;var v=[];if(m==b){if(x.excludeTangents)return null;v.push(c(h>0?90:270))}else{let C=function(O,R){e.measure.isBetween(e.round(O),e.round(d.origin[0]),e.round(d.end[0]),x.excludeTangents)&&v.push(c(R))};var E=Math.asin(h/b),A=e.angle.toDegrees(E),S=Math.cos(E)*b;C(-S,180-A),C(S,A)}return v.length>0?v:null}function g(y,T,x){if(y.radius<=0||T.radius<=0)return null;if(y.radius==T.radius&&e.measure.isPointEqual(y.origin,T.origin,1e-4))return x.out_AreOverlapped=!0,null;e.point.subtract(e.point.zero(),y.origin);var b=new e.paths.Circle(e.point.zero(),y.radius),d=new e.paths.Circle(e.point.subtract(T.origin,y.origin),T.radius),u=e.angle.ofPointInDegrees(e.point.zero(),d.origin);t.rotate(d,-u,e.point.zero());function p(E){var A=E+u;return e.angle.noRevolutions(A)}var c=d.origin[0];if(e.round(d.radius-c-b.radius)==0)return x.excludeTangents?null:[[p(180)],[p(180)]];if(e.round(d.radius+c-b.radius)==0)return x.excludeTangents?null:[[p(0)],[p(0)]];if(e.round(c-d.radius-b.radius)==0)return x.excludeTangents?null:[[p(0)],[p(180)]];if(e.round(c-d.radius)>b.radius||e.round(c+d.radius)<b.radius||e.round(c-d.radius)<-b.radius)return null;function h(E){return[p(E),p(e.angle.mirror(E,!1,!0))]}var m=e.solvers.solveTriangleSSS(d.radius,b.radius,c),v=e.solvers.solveTriangleSSS(b.radius,c,d.radius);return[h(m),h(180-v)]}})(e.path||(e.path={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n={};n[e.pathType.Arc]=function(u){return["startAngle","endAngle"]},n[e.pathType.Line]=function(u){return["origin","end"]};function r(u){var p=e.point.fromPathEnds(u);if(p){let m=function(v){return{point:p[v],propertyName:c[v]}};var c=null,h=n[u.type];if(h)return c=h(u),[m(0),m(1)]}return null}function i(u,p,c){var h=r(u),m=r(p),v=null;function E(S,C,O){return{path:S,isStart:O==0,propertyName:C[O].propertyName,point:C[O].point,oppositePoint:C[1-O].point}}function A(S,C){return e.measure.isPointEqual(h[S].point,m[C].point,1e-4)?(v=[E(u,h,S),E(p,m,C)],!0):!1}return A(0,0)||A(0,1)||A(1,0)||A(1,1),v}function o(u,p,c,h){for(var m=new e.paths.Circle(p,u),v=0;v<2;v++){var E=t.intersection(m,c[v].path);if(!E)return!1;if(c[v].shardPoint=E.intersectionPoints[0],e.measure.isPointEqual(c[v].point,E.intersectionPoints[0],1e-4))if(E.intersectionPoints.length>1)c[v].shardPoint=E.intersectionPoints[1];else return!1}return!0}function s(u,p){var c=t.clone(u),h=t.breakAtPoint(c,p);return[c,h]}var l={};l[e.pathType.Arc]=function(u,p,c,h,m){var v=u.radius,E=s(u,h)[m?0:1];return E?(e.measure.isArcConcaveTowardsPoint(E,c)?v-=p:v+=p,e.round(v)<=0?null:new e.paths.Arc(u.origin,v,u.startAngle,u.endAngle)):null},l[e.pathType.Line]=function(u,p,c,h,m){return new e.paths.Parallel(u,p,c)};function a(u,p,c){var h=null,m=l[u.path.type];return m&&(h=m(u.path,p,c,u.shardPoint,u.isStart)),h}var f={};f[e.pathType.Arc]=function(u,p,c,h){var m=new e.paths.Line(u.origin,h),v=e.angle.ofLineInDegrees(m),E=v;return e.measure.isArcConcaveTowardsPoint(u,h)||(E+=180),{filletAngle:e.angle.noRevolutions(E),clipPath:function(){u[p]=v}}},f[e.pathType.Line]=function(u,p,c,h){var m=new e.paths.Line([0,0],[0,1]),v=e.angle.ofLineInDegrees(u);t.rotate(m,v,[0,0]),t.moveRelative(m,h);var E=e.point.fromSlopeIntersection(u,m);return E?{filletAngle:e.angle.ofPointInDegrees(h,E),clipPath:function(){u[p]=E}}:null};function g(u,p,c){var h=null,m=f[u.path.type];return m&&(h=m(u.path,u.propertyName,p,c)),T(u,h)||(h=null),h}function y(u,p){var c={filletAngle:e.angle.ofPointInDegrees(p,u.shardPoint),clipPath:function(){u.path[u.propertyName]=u.shardPoint}};return T(u,c)||(c=null),c}function T(u,p){var c=!1;if(p){var h=u.path[u.propertyName];p.clipPath(),e.measure.pathLength(u.path)>0&&(c=!0),u.path[u.propertyName]=h}return c}function x(u){for(var p=0,c=[],h=0;h<u.length;h++){var m=e.measure.pathLength(u[h]);c.push(m),p+=m}return c[0]/p}function b(u,p,c,h){if(e.isPathLine(u)&&e.isPathLine(p)&&c&&c>0){var m={pointMatchingDistance:.005};e.extendObject(m,h);var v=i(u,p);if(v){var E=x([u,p]),A=new e.paths.Line(v[0].oppositePoint,v[1].oppositePoint),S=e.point.middle(A,E),C=e.angle.ofPointInDegrees(v[0].point,S),O=e.point.add(v[0].point,e.point.fromPolar(e.angle.toRadians(C),c));if(!o(c,O,v))return null;for(var R=[],w=0;w<2;w++){var P=y(v[w],O);if(!P)return null;R.push(P)}var F=new e.paths.Arc(O,c,R[0].filletAngle,R[1].filletAngle);return e.round(e.angle.noRevolutions(e.angle.ofArcMiddle(F)))==e.round(C)&&(F.startAngle=R[1].filletAngle,F.endAngle=R[0].filletAngle),R[0].clipPath(),R[1].clipPath(),F}}return null}t.dogbone=b;function d(u,p,c,h){if(u&&p&&c&&c>0){var m={pointMatchingDistance:.005};e.extendObject(m,h);var v=i(u,p);if(v){if(!o(c,v[0].point,v))return null;for(var E=[],A=0;A<2;A++){var S=v[1-A].shardPoint;if(!S)return null;var C=a(v[A],c,S);E.push(C)}var O=t.intersection(E[0],E[1]);if(O){var R;O.intersectionPoints.length==1?R=O.intersectionPoints[0]:R=e.point.closest(v[0].point,O.intersectionPoints);for(var w=[],A=0;A<2;A++){var P=g(v[A],c,R);if(!P)return null;w.push(P)}if(e.round(w[0].filletAngle-w[1].filletAngle)==0)return null;var F=new e.paths.Arc(R,c,w[0].filletAngle,w[1].filletAngle),D=e.angle.ofArcSpan(F);return D==180?null:(D>180&&(F.startAngle=w[1].filletAngle,F.endAngle=w[0].filletAngle),w[0].clipPath(),w[1].clipPath(),F)}}}return null}t.fillet=d})(e.path||(e.path={}))})(MakerJs||(MakerJs={})),(function(e){(function(t){function n(o,s){return i(!1,o,s)}t.dogbone=n;function r(o,s){return i(!0,o,s)}t.fillet=r;function i(o,s,l){var a={paths:{}},f=0,g=s.links;function y(x,b){var d=g[x].walkedPath,u=g[b].walkedPath;d.modelContext===u.modelContext&&d.modelContext.type==e.models.BezierCurve.typeName||e.path.moveTemporary([d.pathContext,u.pathContext],[d.offset,u.offset],function(){var p;if(e.isObject(l)){var c=e.angle.ofChainLinkJoint(g[x],g[b]);if(e.round(c)===0)return;p=c>0?l.left:l.right}else p=l;if(!(!p||p<0)){var h;o?h=e.path.fillet(d.pathContext,u.pathContext,p):h=e.path.dogbone(d.pathContext,u.pathContext,p),h&&(a.paths["fillet"+f]=h,f++)}})}for(var T=1;T<g.length;T++)y(T-1,T);return s.endless&&y(T-1,0),f?a:null}})(e.chain||(e.chain={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(i,o){function s(){return i.apply(this,o)}return s.prototype=i.prototype,new s}t.construct=n;function r(i){var o=[],s=i.metaParameters;if(s)for(var l=0;l<s.length;l++){var a=s[l].value;Array.isArray(a)&&(a=a[0]),o.push(a)}return o}t.getParameterValues=r})(e.kit||(e.kit={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(g,y){return g[0].walkedPath.pathContext===y?g[1]:g[0]}function r(g,y,T){function x(b,d,u){for(;b;){d.links.push(b),d.pathLength+=b.pathLength;var p=b.reversed?0:1,c=b.endPoints[p],h=g.getElementAtPoint(c);if(!h||h.valueIds.length===0)break;var m=h.valueIds.map(function(E){return g.values[E]}),v=n(m,b.walkedPath.pathContext);if(h.valueIds.splice(0,2),!v)break;if(v.walkedPath.pathContext===u.walkedPath.pathContext){d.links.length>1&&(d.endless=!0);break}b=v}}g.forEachPoint(function(b,d,u,p){if(p.valueIds.length>0){var c={links:[],pathLength:0};if(x(d[0],c,d[0]),c.endless)y(c,!1);else{c.links.reverse();var h=c.links[0];c.links.map(function(v){v.reversed=!v.reversed}),c.pathLength-=c.links[c.links.length-1].pathLength;var m=c.links.pop();x(m,c,h),c.links.length>1?y(c,!0):T(c.links[0].walkedPath)}}})}function i(g){var y=null;return s(g,function(T,x,b){y=T[0]},{byLayers:!1}),y}t.findSingleChain=i;function o(g,y){var T=y===g.reversed?1:0;return g.endPoints[T]}function s(g){for(var y=[],T=1;T<arguments.length;T++)y[T-1]=arguments[T];var x,b;switch(y.length){case 1:typeof y[0]=="function"?b=y[0]:x=y[0];break;case 2:b=y[0],x=y[1];break}var d={pointMatchingDistance:.005};e.extendObject(d,x);var u={},p={},c={},h={onPath:function(O){var R=d.byLayers?O.layer:"";u[R]||(u[R]=new e.PointGraph);var w=u[R],P=e.measure.pathLength(O.pathContext);if(O.pathContext.type===e.pathType.Circle||O.pathContext.type===e.pathType.Arc&&e.round(e.angle.ofArcSpan(O.pathContext)-360)===0||O.pathContext.type===e.pathType.BezierSeed&&e.measure.isPointEqual(O.pathContext.origin,O.pathContext.end,d.pointMatchingDistance)){var F={links:[{walkedPath:O,reversed:null,endPoints:null,pathLength:P}],endless:!0,pathLength:P};p[R]||(p[R]=[]),p[R].push(F)}else{if(P<d.pointMatchingDistance/5){c[R]||(c[R]=[]),c[R].push(O);return}for(var D=e.point.fromPathEnds(O.pathContext,O.offset),L=0;L<2;L++){var B={walkedPath:O,endPoints:D,reversed:L!=0,pathLength:P},G=w.insertValue(B);w.insertValueIdAtPoint(G,D[L])}}}};d.shallow&&(h.beforeChildWalk=function(){return!1});var m;d.unifyBeziers&&(m=a(g),f(m,!0,d.pointMatchingDistance)),t.walk(g,h);var v=function(O){var R=u[O];R.mergeNearestSinglePoints(d.pointMatchingDistance),E=[],p[O]||(p[O]=[]),r(R,function(w,P){P?w.endless=e.measure.isPointEqual(o(w.links[0],!0),o(w.links[w.links.length-1],!1),d.pointMatchingDistance):w.endless=!!w.endless,p[O].push(w)},function(w){E.push(w)}),p[O].sort(function(w,P){return P.pathLength-w.pathLength}),d.contain&&(A=e.isObject(d.contain)?d.contain:{alternateDirection:!1},S=l(p[O],A),p[O]=S),b&&b(p[O],E,O,c[O])},E,A,S;for(var C in u)v(C);return m&&f(m,!1,d.pointMatchingDistance),d.byLayers?p:p[""]}t.findChains=s;function l(g,y){var T=g.map(function(d){return e.chain.toNewModel(d)}),x=[];g.forEach(function(d,u){if(d.endless){var p=d.links[0].walkedPath,c=e.path.clone(p.pathContext,p.offset);g.forEach(function(h,m){d!==h&&h.endless&&e.measure.isPointInsideModel(e.point.middle(c),T[m])&&(x[u]=h)})}});var b=[];if(g.forEach(function(d,u){var p=x[u];p?(p.contains||(p.contains=[]),p.contains.push(d)):b.push(d)}),y.alternateDirection){let d=function(u,p){u.forEach(function(c,h){var m=e.measure.isChainClockwise(c);m!==null&&(!m&&p||m&&!p)&&e.chain.reverse(c),c.contains&&d(c.contains,!p)})};d(b,!0)}return b}function a(g){var y=[];function T(d){d.childModel.type===e.models.BezierCurve.typeName&&y.push(d)}var x={beforeChildWalk:function(d){return T(d),!0}},b={childId:"",childModel:g,layer:g.layer,offset:g.origin,parentModel:null,route:[],routeKey:""};return T(b),t.walk(g,x),y}function f(g,y,T){var x="tempPaths",b="tempLayer";g.forEach(function(d){var u=d.childModel;if(y){d.layer!=null&&d.layer!==""&&(u[b]=u.layer,u.layer=d.layer);var p=e.models.BezierCurve.getBezierSeeds(u,{byLayers:!0,pointMatchingDistance:T});for(var c in p){var h=p[c];if(h.length>0){u[x]=u.paths;var m={};h.forEach(function(v,E){v.layer=c,m["seed_"+E]=v}),u.paths=m}}}else x in u&&(u.paths=u[x],delete u[x]),b in u&&(u[b]==null?delete u.layer:u.layer=u[b],delete u[b])})}})(e.model||(e.model={}))})(MakerJs||(MakerJs={})),(function(e){(function(t){function n(f,g){if(g===void 0&&(g=1),!!f.endless){for(var y=Math.abs(g),T=0;T<y;T++)g<0?f.links.push(f.links.shift()):f.links.unshift(f.links.pop());return f}}t.cycle=n;function r(f){return f.links.reverse(),f.links.forEach(function(g){return g.reversed=!g.reversed}),f}t.reverse=r;function i(f,g){if(f.endless){for(var y=-1,T=0;T<f.links.length;T++)if(f.links[T].walkedPath.routeKey==g){y=T;break}return y>0&&n(f,y),f}}t.startAt=i;function o(f,g){g===void 0&&(g=!1);for(var y={paths:{}},T=0;T<f.links.length;T++){var x=f.links[T].walkedPath;if(x.pathContext.type===e.pathType.BezierSeed){g&&delete x.modelContext.paths[x.pathId],y.models||(y.models={});var b=e.model.getSimilarModelId(y,x.pathId);y.models[b]=e.model.moveRelative(new e.models.BezierCurve(x.pathContext),x.offset)}else{var d;g?(d=x.pathContext,delete x.modelContext.paths[x.pathId]):d=e.path.clone(x.pathContext);var u=e.model.getSimilarPathId(y,x.pathId);y.paths[u]=e.path.moveRelative(d,x.offset)}}return y}t.toNewModel=o;function s(f,g){!f||g.length<2||e.measure.isPointEqual(g[0],g[g.length-1],1e-5)&&g.pop()}function l(f,g,y){var T=[],x=0,b=0,d;Array.isArray(g)&&(d=g);for(var u=0;u<f.links.length;u++){for(var p=f.links[u],c=p.walkedPath,h=p.pathLength;e.round(h-b)>0;){var m=b/h;if(p.reversed&&(m=1-m),T.push(e.point.add(e.point.middle(c.pathContext,m),c.offset)),y&&T.length>=y)return T;var v;if(d){if(v=d[x],x++,x>d.length)return T}else v=g;b+=v}b-=h}return s(f.endless,T),T}t.toPoints=l;function a(f,g){for(var y=[],T=0;T<f.links.length;T++){var x=f.links[T],b=x.walkedPath,d=e.path.toKeyPoints(b.pathContext,g);if(d.length>0){x.reversed&&d.reverse(),T>0&&d.shift();var u=d.map(function(p){return e.point.add(p,b.offset)});y.push.apply(y,u)}}return s(f.endless,y),y}t.toKeyPoints=a})(e.chain||(e.chain={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function i(o,s){this.modelContext=o,this.options=s,this.pointMap=new e.PointGraph,this.list=[],this.removed=[],this.ordinals={},this.load()}return i.prototype.load=function(){var o=this,s={onPath:function(l){var a=e.point.fromPathEnds(l.pathContext,l.offset);if(a){var f=l;f.endPoints=a;for(var g=o.pointMap.insertValue(f),y=2;y--;)o.pointMap.insertValueIdAtPoint(g,a[y])}}};t.walk(this.modelContext,s),this.options.pointMatchingDistance&&this.pointMap.mergePoints(this.options.pointMatchingDistance)},i.prototype.findDeadEnds=function(){var o=this,s=0;this.pointMap.forEachPoint(function(f,g,y,T){o.ordinals[y]=s++,o.list.push(T)}),s=0;for(var l=function(){var f=a.list[s];f.valueIds.length===1?a.removePath(f,f.valueIds[0],s):a.options.keep&&f.valueIds.length%2&&f.valueIds.forEach(function(g){var y=o.pointMap.values[g];o.options.keep(y)||o.removePath(f,g,s)}),s++},a=this;s<this.list.length;)l();return this.removed},i.prototype.removePath=function(o,s,l){var a=this.pointMap.values[s],f=this.getOtherPointId(a.endPoints,o.pointId),g=this.pointMap.index[f];this.removed.push(a),this.removeValue(o,s),this.removeValue(g,s),g.valueIds.length>0&&this.appendQueue(g,l)},i.prototype.removeValue=function(o,s){var l=o.valueIds.indexOf(s);l>=0&&o.valueIds.splice(l,1)},i.prototype.appendQueue=function(o,s){var l=this.ordinals[o.pointId];l<s&&(this.list[l]=null,this.list.push(o),this.ordinals[o.pointId]=this.list.length)},i.prototype.getOtherPointId=function(o,s){for(var l=0;l<o.length;l++){var a=this.pointMap.getIdOfPoint(o[l]);if(s!==a)return a}},i})();function r(i,o,s,l){var a={pointMatchingDistance:o||.005,keep:s},f=new n(i,a),g=f.findDeadEnds();return g.length<f.pointMap.values.length&&g.forEach(function(y){l(y,"dead end"),delete y.modelContext.paths[y.pathId]}),i}t.removeDeadEnds=r})(e.model||(e.model={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o){this.name=i,this.attrs=o,this.innerText=""}return r.escapeString=function(i){var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};for(var s in o)i=i.split(s).join(o[s]);return i},r.prototype.getOpeningTag=function(i){var o="";function s(a,f){f==null||typeof f>"u"||((Array.isArray(f)||typeof f=="object")&&(f=JSON.stringify(f)),typeof f=="string"&&(f=r.escapeString(f)),o+=" "+a+'="'+f+'"')}for(var l in this.attrs)s(l,this.attrs[l]);return"<"+this.name+o+(i?"/":"")+">"},r.prototype.getInnerText=function(){return this.innerTextEscaped?this.innerText:r.escapeString(this.innerText)},r.prototype.getClosingTag=function(){return"</"+this.name+">"},r.prototype.toString=function(){var i=!this.innerText;return i&&!this.closingTags?this.getOpeningTag(!0):this.getOpeningTag(!1)+this.getInnerText()+this.getClosingTag()},r})();t.XmlTag=n})(e.exporter||(e.exporter={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(T,x,b){return T+"("+x+")"}function r(T,x){if(x){var b=new e.paths.Circle([0,0],T.radius),d=e.measure.pathLength(b);if(d)return Math.ceil(d/x)}}function i(T,x,b){var d="",u="",p=!0,c=!1,h=!1,m={};m[e.pathType.Circle]=function(R,w){var P={center:e.point.rounded(e.point.add(R.origin,w.walkedPath.offset),b),radius:e.round(R.radius,b),resolution:r(R,x)};d=n("CAG.circle",JSON.stringify(P)),c=!0},m[e.pathType.Line]=function(R,w){var P=w.endPoints.map(function(F){return e.point.rounded(F,b)});w.reversed&&P.reverse(),d=n("new CSG.Path2D",JSON.stringify(P))},m[e.pathType.Arc]=function(R,w){var P=e.angle.ofArcEnd(R);w.reversed&&(h=!0);var F={center:e.point.rounded(e.point.add(R.origin,w.walkedPath.offset),b),radius:e.round(R.radius,b),startangle:e.round(R.startAngle,b),endangle:e.round(P,b),resolution:r(R,x)};d=n("new CSG.Path2D.arc",JSON.stringify(F))};var v={};v[e.pathType.Line]=function(R,w){var P=h!=w.reversed,F=e.point.rounded(w.endPoints[P?0:1],b);E(n(".appendPoint",JSON.stringify(F)))},v[e.pathType.Arc]=function(R,w){var P=h!=w.reversed,F=e.angle.ofArcEnd(R),D={radius:e.round(R.radius,b),clockwise:P,large:Math.abs(F-R.startAngle)>180,resolution:r(R,x)},L=e.point.rounded(w.endPoints[P?0:1],b);E(n(".appendArc",JSON.stringify(L)+","+JSON.stringify(D)))};function E(R){h?u=R+u:u+=R}for(var A=0;A<T.links.length;A++){var S=T.links[A],C=S.walkedPath.pathContext,O=p?m[C.type]:v[C.type];if(O&&O(C,S),c)return d;p=!1}return d+u+".close().innerToCAG()"}function o(T,x,b){return function(u){T&&T({progress:x+u.progress*b/100})}}function s(T,x,b){function d(c,h){var m=e.chain.toKeyPoints(c,h);return m.push(m[0]),T.fromPoints(m)}function u(c,h){return c.union(h)}function p(c,h){return c.subtract(h)}return l(d,u,p,x,b)}t.toJscadCAG=s;function l(T,x,b,d,u){u===void 0&&(u={});var p={},c={total:0,complete:0};function h(w,P,F){var D=F.shift();return F.forEach(function(L){return D=x(D,L)}),c.complete++,u.statusCallback&&u.statusCallback({progress:w+P*c.complete/c.total}),D}function m(w,P){var F=[];return P.forEach(function(D){D.endless&&(D.contains&&v(w,D.contains),c.total++,F.unshift(T(D,u.maxArcFacet)))}),F}function v(w,P){P.forEach(function(F){if(F.endless){var D={cag:T(F,u.maxArcFacet),subtracts:[]};if(F.contains){var L=m(w,F.contains);L.length>0&&D.subtracts.push(L)}c.total++,w in p||(p[w]=[]),p[w].unshift(D)}})}var E={pointMatchingDistance:u.pointMatchingDistance,byLayers:u.byLayers,contain:!0};u.statusCallback&&u.statusCallback({progress:25});var A=e.model.findChains(d,E);if(Array.isArray(A))v("",A);else for(var S in A)v(S,A[S]);u.statusCallback&&u.statusCallback({progress:50});var C=0;for(var S in p)C+=p[S].length;if(C===0)throw u.statusCallback&&u.statusCallback({progress:100}),"No closed geometries found.";var O={};for(var S in p){var R=p[S].map(function(P){var F=P.cag;return P.subtracts.forEach(function(D){var L=h(50,50,D);F=b(F,L)}),F});O[S]=h(50,50,R)}return u.statusCallback&&u.statusCallback({progress:100}),E.byLayers?O:O[""]}function a(T,x,b){function d(c){return s(T,x,c)}function u(c,h,m){var v=c.extrude({offset:[0,0,h]});return m&&(v=v.translate([0,0,m])),v}function p(c,h){return c.union(h)}return f(d,u,p,x,b)}t.toJscadCSG=a;function f(T,x,b,d,u){u===void 0&&(u={});var p=u.statusCallback;function c(O,R){return e.isNumber(O)?O:R}d.exporterOptions&&e.extendObject(u,d.exporterOptions.toJscadCSG),u.byLayers=u.byLayers||u.layerOptions&&!0,u.statusCallback=o(p,0,50);var h=T(u),m=[];if(u.byLayers)for(var v in h){var E=u.layerOptions[v],A=x(h[v],E.extrude||u.extrude,c(E.z,u.z));m.push(A)}else{var A=x(h,u.extrude,u.z);m.push(A)}u.statusCallback=o(p,50,100);var S={total:m.length-1,complete:0},C=m.shift();return m.forEach(function(O,R){C=b(C,O),S.complete++,u.statusCallback({progress:S.complete/S.total})}),C}function g(T,x){x===void 0&&(x={});function b(A,S){return h(i(A,S,x.accuracy))}function d(A,S){return A+".union(".concat(S,")")}function u(A,S){return A+".subtract(".concat(S,")")}function p(A){return l(b,d,u,T,x)}function c(A,S,C){var O=A+".extrude({ offset: [0, 0, ".concat(S,"] })");return C&&(O=O+".translate([0, 0, ".concat(C,"])")),O}function h(A){return"".concat(v).concat(m).concat(A).concat(v)}var m=new Array((x.indent||0)+1).join(" "),v=x.indent?`
`:"",E=f(p,c,d,T,x).trim();return"function ".concat(x.functionName||"main","(){").concat(h("return ".concat(E,";")),"}").concat(v)}t.toJscadScript=g;function y(T,x,b,d){var u=d.statusCallback;d.statusCallback=o(u,0,50);var p=a(T,b,d);return x.serialize(p,{binary:!1,statusCallback:o(u,50,50)})}t.toJscadSTL=y})(e.exporter||(e.exporter={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(r,i,o){if(i){var s={fontName:"Courier",fontSize:9,origin:[0,0],stroke:"#000"};e.extendObject(s,o);var l=1,a=s.units||i.units;a?l=e.units.conversionScale(a,e.unitType.Inch):l=1/100,l*=72;var f=e.model.scale(e.cloneObject(i),l),g=e.measure.modelExtents(f),y=-g.low[0],T=[y,g.high[1]];T=e.point.add(T,s.origin),e.model.findChains(f,function(x,b,d){function u(p){var c=t.pathToSVGPathData(p.pathContext,p.offset,T);r.path(c).stroke(s.stroke)}x.map(function(p){if(p.links.length>1){var c=t.chainToSVGPathData(p,T);r.path(c).stroke(s.stroke)}else{var h=p.links[0].walkedPath;if(h.pathContext.type===e.pathType.Circle){var m;e.path.moveTemporary([h.pathContext],[h.offset],function(){m=e.path.mirror(h.pathContext,!1,!0)}),e.path.moveRelative(m,T),r.circle(m.origin[0],m.origin[1],h.pathContext.radius).stroke(s.stroke)}else u(h)}}),b.map(u)},{byLayers:!1}),r.font(s.fontName).fontSize(s.fontSize),e.model.getAllCaptionsOffset(f).forEach(function(x){var b=e.angle.ofLineInDegrees(x.anchor),d=e.path.mirror(x.anchor,!1,!0);e.path.moveRelative(d,T);var u=x.text,p=[r.widthOfString(u)/2,r.heightOfString(u)/2],c=e.point.middle(d),h=e.point.subtract(c,p);r.rotate(-b,{origin:c}),r.text(u,h[0],h[1]),r.rotate(b,{origin:c})})}}t.toPDF=n})(e.exporter||(e.exporter={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n={};n[e.pathType.Arc]=function(d,u,p,c,h){c.push("A"),b(c,d.radius,u,h,e.angle.ofArcSpan(d)>180,p?d.startAngle>d.endAngle:d.startAngle<d.endAngle)},n[e.pathType.Line]=function(d,u,p,c,h){c.push("L",e.round(u[0],h),e.round(u[1],h))},n[e.pathType.BezierSeed]=function(d,u,p,c,h){x(c,d,h,p)};function r(d){return e.point.mirror(d,!1,!0)}function i(d){var u=e.angle.ofArcSpan(d);d.startAngle=e.angle.noRevolutions(d.startAngle),d.endAngle=d.startAngle+u}function o(d,u,p){function c(R){return e.point.add(R,u)}for(var h=d.links[0],m=c(r(h.endPoints[h.reversed?1:0])),v=["M",e.round(m[0],p),e.round(m[1],p)],E=0;E<d.links.length;E++){var A=d.links[E],S=A.walkedPath.pathContext,C=n[S.type];if(C){var O;e.path.moveTemporary([S],[A.walkedPath.offset],function(){O=e.path.mirror(S,!1,!0)}),e.path.moveRelative(O,u),C(O,c(r(A.endPoints[A.reversed?0:1])),A.reversed,v,p)}}return d.endless&&v.push("Z"),v.join(" ")}t.chainToSVGPathData=o;function s(d,u,p){return["M",e.round(d[0],p),e.round(d[1],p)].concat(u)}var l={};l[e.pathType.Line]=function(d,u){return s(d.origin,e.point.rounded(d.end,u),u)},l[e.pathType.Circle]=function(d,u,p){return s(d.origin,T(d.radius,u,p),u)},l[e.pathType.Arc]=function(d,u){i(d);var p=e.point.fromArc(d);if(e.measure.isPointEqual(p[0],p[1]))return l[e.pathType.Circle](d,u);var c=["A"];return b(c,d.radius,p[1],u,e.angle.ofArcSpan(d)>180,d.startAngle>d.endAngle),s(p[0],c,u)},l[e.pathType.BezierSeed]=function(d,u){var p=[];return x(p,d,u),s(d.origin,p,u)};function a(d,u,p,c,h){var m=l[d.type];if(m){var v;e.path.moveTemporary([d],[u],function(){v=e.path.mirror(d,!1,!0)}),e.path.moveRelative(v,p);var E=m(v,c,h);return E.join(" ")}return""}t.pathToSVGPathData=a;function f(d,u,p,c){var h={};return p.unifyBeziers=!0,e.model.findChains(d,function(m,v,E){function A(C,O){var R=a(C.pathContext,C.offset,u,c,O);h[E].push(R)}h[E]=[];function S(C,O){C.forEach(function(R){if(R.links.length>1){var w=o(R,u,c);h[E].push(w)}else A(R.links[0].walkedPath,O);R.contains&&S(R.contains,!O)})}S(m,!0),v.forEach(function(C){return A(C)})},p),h}function g(d){for(var u=[],p=1;p<arguments.length;p++)u[p-1]=arguments[p];var c={fillRule:"evenodd"};typeof u[0]=="boolean"?(c.byLayers=u[0],c.origin=u[1],c.accuracy=u[2]):e.isObject(u[0])&&e.extendObject(c,u[0]);var h={byLayers:c.byLayers,contain:!1};c.fillRule==="nonzero"&&(h.contain={alternateDirection:!0});var m=e.measure.modelExtents(d);c.origin||(c.origin=[-m.low[0],m.high[1]]);var v=f(d,c.origin,h,c.accuracy),E={};for(var A in v)E[A]=v[A].join(" ");return h.byLayers?E:E[""]}t.toSVGPathData=g;function y(d,u){function p(Y,Q,ne){ne===void 0&&(ne=!1),!ne&&typeof Q=="string"&&Q.length>0?(Q in w||(w[Q]=[]),w[Q].push(Y)):R.push(Y)}function c(Y){var Q=[];function ne(fe,ve){ve!==void 0&&Q.push(fe+":"+ve)}return ne("stroke",Y.stroke),ne("stroke-width",Y.strokeWidth),ne("fill",Y.fill),Q.join(";")}function h(Y,Q){Q&&e.extendObject(Y,{stroke:Q.stroke,"stroke-width":Q.strokeWidth,fill:Q.fill,style:Q.cssStyle||c(Q),class:Q.className})}function m(Y){if(S.layerOptions&&S.layerOptions[Y])return S.layerOptions[Y];if(Y in t.colors)return{stroke:Y}}function v(Y,Q,ne,fe,ve){fe===void 0&&(fe=null),ve===void 0&&(ve=!1),Y!=="text"&&h(Q,m(ne)),S.scalingStroke||(Q["vector-effect"]="non-scaling-stroke");var me=new t.XmlTag(Y,Q);me.closingTags=S.closingTags,fe&&(me.innerText=fe),p(me.toString(),ne,ve)}function E(Y){var Q=r(Y);return e.point.scale(Q,S.scale)}function A(Y,Q){var ne=e.path.mirror(Y,!1,!0);return e.path.moveRelative(e.path.scale(ne,S.scale),Q)}var S={accuracy:.001,annotate:!1,origin:null,scale:1,stroke:"#000",strokeLineCap:"round",strokeWidth:"0.25mm",fill:"none",fillRule:"evenodd",fontSize:"9pt",useSvgPathOnly:!0,viewBox:!0};e.extendObject(S,u);var C,O=e.isModel(d);O&&(C=d,C.exporterOptions&&e.extendObject(S,C.exporterOptions.toSVG));var R=[],w={};if(O)C=d;else if(Array.isArray(d)){var P={};d.forEach(function(Y,Q){P[Q]=Y}),C={paths:P}}else e.isPath(d)&&(C={paths:{modelToMeasure:d}});var F=e.measure.modelExtents(C),D=e.model.getAllCaptionsOffset(C);if(D.forEach(function(Y){e.measure.increase(F,e.measure.pathExtents(Y.anchor),!0)}),!S.units){var L=t.tryGetModelUnits(d);L&&(S.units=L)}var B=t.svgUnit[S.units];if(B&&S.viewBox&&(S.scale*=B.scaleConversion),F&&!S.origin){var G=-F.low[0]*S.scale;S.origin=[G,F.high[1]*S.scale]}e.extendObject(u,S);var _={};if(F&&S.viewBox){var q=e.round(F.width*S.scale,S.accuracy),k=e.round(F.height*S.scale,S.accuracy),U=[0,0,q,k],I=B?B.svgUnitType:"";_={width:q+I,height:k+I,viewBox:U.join(" ")}}_.xmlns="http://www.w3.org/2000/svg";var z=new t.XmlTag("svg",e.extendObject(_,S.svgAttrs));p(z.getOpeningTag(!1));var N={id:"svgGroup","stroke-linecap":S.strokeLineCap,"fill-rule":S.fillRule,"font-size":S.fontSize};h(N,S);var j=new t.XmlTag("g",N);if(p(j.getOpeningTag(!1)),S.useSvgPathOnly){var H={byLayers:!0};S.fillRule==="nonzero"&&(H.contain={alternateDirection:!0});var X=f(C,S.origin,H,S.accuracy);for(var V in X){var Z=X[V].join(" "),oe={d:Z};V.length>0&&(oe.id=V),v("path",oe,V,null,!0)}}else{let Y=function(K,W,J){v("text",{id:K+"_text",x:e.round(W[0],S.accuracy),y:e.round(W[1],S.accuracy)},J,K)},Q=function(K,W,J,he,se,ue,pe,M,ge){v("path",{id:K,"data-route":ue,d:["M",e.round(W,S.accuracy),e.round(J,S.accuracy)].concat(he).join(" ")},se),M&&Y(K,pe,se)},ne=function(K,W,J,he,se,ue,pe){var M=T(J,S.accuracy);Q(K,W[0],W[1],M,he,se,W,ue)},fe=function(K,W,J,he,se){var ue="flow";ee[e.pathType.Circle]("",new e.paths.Circle(J,K.size/2),W,ue,null,!1,null);var pe=[-1*K.size,K.size/2],M=[pe,e.point.mirror(pe,!1,!0)].map(function(ge){return new e.paths.Line(e.point.add(e.point.rotate(ge,se),he),he)});M.forEach(function(ge){return ee[e.pathType.Line]("",ge,W,ue,null,!1,null)})},ve=function(K,W){ae.attrs={id:K},p(ae.getOpeningTag(!1),W.layer)},me=function(K){p(ae.getClosingTag(),K.layer)};var ee={};ee[e.pathType.Line]=function(K,W,J,he,se,ue,pe){var M=W.origin,ge=W.end;v("line",{id:K,class:he,"data-route":se,x1:e.round(M[0],S.accuracy),y1:e.round(M[1],S.accuracy),x2:e.round(ge[0],S.accuracy),y2:e.round(ge[1],S.accuracy)},J),ue&&Y(K,e.point.middle(W),J),pe&&fe(pe,J,W.origin,W.end,e.angle.ofLineInDegrees(W))},ee[e.pathType.Circle]=function(K,W,J,he,se,ue,pe){var M=W.origin;v("circle",{id:K,class:he,"data-route":se,r:W.radius,cx:e.round(M[0],S.accuracy),cy:e.round(M[1],S.accuracy)},J),ue&&Y(K,M,J)},ee[e.pathType.Arc]=function(K,W,J,he,se,ue,pe){i(W);var M=e.point.fromArc(W);if(e.measure.isPointEqual(M[0],M[1]))ne(K,W.origin,W.radius,J,se,ue);else{var ge=["A"];b(ge,W.radius,M[1],S.accuracy,e.angle.ofArcSpan(W)>180,W.startAngle>W.endAngle),Q(K,M[0][0],M[0][1],ge,J,se,e.point.middle(W),ue),pe&&fe(pe,J,M[1],M[0],e.angle.noRevolutions(W.startAngle-90))}},ee[e.pathType.BezierSeed]=function(K,W,J,he,se,ue,pe){var M=[];x(M,W,S.accuracy),Q(K,W.origin[0],W.origin[1],M,J,se,e.point.middle(W),ue)};var ae=new t.XmlTag("g"),te={beforeChildWalk:function(K){return ve(K.childId,K.childModel),!0},onPath:function(K){var W=ee[K.pathContext.type];if(W){var J=e.point.add(E(K.offset),S.origin);W(K.pathId,A(K.pathContext,J),K.layer,null,K.route,S.annotate,S.flow)}},afterChildWalk:function(K){me(K.childModel)}};ve("0",C),e.model.walk(C,te);for(var re in w){var le=new t.XmlTag("g",{id:re});h(le.attrs,m(re));for(var de=0;de<w[re].length;de++)le.innerText+=w[re][de];le.innerTextEscaped=!0,p(le.toString())}me(C)}var ie=D.map(function(Y){var Q=A(Y.anchor,S.origin),ne=e.point.rounded(e.point.middle(Q),S.accuracy),fe=new t.XmlTag("text",{"alignment-baseline":"middle","text-anchor":"middle",transform:"rotate(".concat(e.angle.ofLineInDegrees(Q),",").concat(ne[0],",").concat(ne[1],")"),x:ne[0],y:ne[1]});return h(fe.attrs,m(Y.layer)),fe.innerText=Y.text,fe.toString()});if(ie.length){var ce=new t.XmlTag("g",{id:"captions"});h(ce.attrs,m(ce.attrs.id)),ce.innerText=ie.join(""),ce.innerTextEscaped=!0,p(ce.toString())}return p(j.getClosingTag()),p(z.getClosingTag()),R.join("")}t.toSVG=y;function T(d,u,p){var c=e.round(d,u),h=["m",-c,0];function m(v){h.push("a"),b(h,c,[2*c*v,0],u,!1,!p)}return m(1),m(-1),h.push("z"),h}function x(d,u,p,c){if(u.controls.length===1)d.push("Q",e.round(u.controls[0][0],p),e.round(u.controls[0][1],p));else{var h=c?[u.controls[1],u.controls[0]]:u.controls;d.push("C",e.round(h[0][0],p),e.round(h[0][1],p),e.round(h[1][0],p),e.round(h[1][1],p))}var m=c?u.origin:u.end;d.push(e.round(m[0],p),e.round(m[1],p))}function b(d,u,p,c,h,m){var v=e.round(u,c),E=p;d.push(v,v),d.push(0),d.push(h?1:0),d.push(m?0:1),d.push(e.round(E[0],c),e.round(E[1],c))}t.svgUnit={},t.svgUnit[e.unitType.Inch]={svgUnitType:"in",scaleConversion:1},t.svgUnit[e.unitType.Millimeter]={svgUnitType:"mm",scaleConversion:1},t.svgUnit[e.unitType.Centimeter]={svgUnitType:"cm",scaleConversion:1},t.svgUnit[e.unitType.Foot]={svgUnitType:"in",scaleConversion:12},t.svgUnit[e.unitType.Meter]={svgUnitType:"cm",scaleConversion:100}})(e.exporter||(e.exporter={}))})(MakerJs||(MakerJs={})),(function(e){(function(t){function n(r,i){i===void 0&&(i={});var o={};function s(v){o.paths||(o.paths={}),o.paths["p_"+ ++x]=v}function l(v){o.models||(o.models={}),o.models["p_"+ ++x]=v}function a(v,E,A){E===void 0&&(E=0),A===void 0&&(A=v.from),E<0&&(E=E+v.data.length);var S=e.point.mirror([v.data[0+E],v.data[1+E]],!1,!0);return v.absolute?S:e.point.add(S,A)}function f(v,E){return e.measure.isPointEqual(v.from,E)||s(new e.paths.Line(v.from,E)),E}var g={};g.M=function(v){if(y=a(v),v.data.length>2){v.from=y;for(var E=2;E<v.data.length;E=E+2)v.from=f(v,a(v,E));return v.from}else return y},g.Z=function(v){return f(v,y)},g.H=function(v){var E=e.point.clone(v.from);return v.absolute?E[0]=v.data[0]:E[0]+=v.data[0],f(v,E)},g.V=function(v){var E=e.point.clone(v.from);return v.absolute?E[1]=-v.data[0]:E[1]-=v.data[0],f(v,E)},g.L=function(v){for(var E,A=0;A<v.data.length;A=A+2)E=a(v,A),v.from=f(v,E);return v.from},g.A=function(v){for(var E,A,S,C,O,R,w,P,F,D,L,B=0;B<v.data.length;B=B+7)E=v.data[0+B],A=v.data[1+B],S=v.data[2+B],C=v.data[3+B]===1,O=v.data[4+B]===1,R=a(v,5+B),w=E!==A,P=new e.paths.Line(v.from,e.point.rotate(R,S,v.from)),w&&(P=e.path.distort(P,1,E/A)),F=new e.paths.Arc(P.origin,P.end,E,C,O),w?(E<F.radius&&(D=F.radius/E,E*=D,A*=D),L=new e.models.EllipticArc(F,1,A/E,i.bezierAccuracy),e.model.rotate(L,-S,v.from),l(L)):(e.path.rotate(F,-S,v.from),s(F)),v.from=R;return R},g.C=function(v){for(var E,A,S=v.from,C,O=0;O<v.data.length;O=O+6)v.from=S,E=a(v,0+O,S),A=a(v,2+O,S),C=a(v,4+O,S),l(new e.models.BezierCurve(S,E,A,C,i.bezierAccuracy)),S=C;return C},g.S=function(v){var E,A,S,C=v.from,O;v.prev.command==="C"||v.prev.command==="S"?A=a(v.prev,-4):A=v.from;for(var R=0;R<v.data.length;R=R+4)v.from=C,E=e.point.rotate(A,180,C),S=a(v,0+R),O=a(v,2+R),l(new e.models.BezierCurve(C,E,S,O,i.bezierAccuracy)),C=O,A=S;return O},g.Q=function(v){for(var E,A=v.from,S,C=0;C<v.data.length;C=C+4)v.from=A,E=a(v,0+C),S=a(v,2+C),l(new e.models.BezierCurve(A,E,S,i.bezierAccuracy)),A=S;return S},g.T=function(v){var E,A,S;v.prev.command==="Q"?(A=a(v.prev,-4),E=e.point.rotate(A,180,v.from)):v.prev.command==="T"?(v.prev.absolute=!0,E=a(v.prev,-2)):E=v.from;for(var C=0;C<v.data.length;C=C+2)S=a(v,0+C),l(new e.models.BezierCurve(v.from,E,S,i.bezierAccuracy)),v.from=S,E=e.point.rotate(E,180,v.from);var O=e.point.mirror(E,!1,!0);return v.data.push.apply(v.data,O),S};for(var y=[0,0],T=[0,0],x=0,b,d=/([achlmqstvz])([0-9e\.,\+-\s]*)/ig,u;(u=d.exec(r))!==null;){u.index===d.lastIndex&&d.lastIndex++;var p=u[1],c=u[2],h={command:p.toUpperCase(),data:[],from:T,prev:b};p===h.command&&(h.absolute=!0),h.data=t.parseNumericList(c);var m=g[h.command];m&&(T=m(h)),b=h}return o}t.fromSVGPathData=n})(e.importer||(e.importer={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(p,c){var h=new e.measure.Atlas(p),m=e.measure.modelExtents(p,h),v=m.high[1],E=[],A={},S={beforeChildWalk:function(F){var D=F.childModel,L=h.modelMap[F.routeKey];if(L){var B=e.measure.augment(L);e.model.originate(D,[B.center[0],v*c]);var G=D.origin[0]-m.low[0];A[F.childId]=G;var _=G/m.width;return E.push({childId:F.childId,xRatio:_}),!1}}};e.model.walk(p,S),E.sort(function(F,D){return F.xRatio-D.xRatio});var C=E[0],O=E[E.length-1];if(E.length>1){var R=C.xRatio,w=O.xRatio,P=w-R;E.forEach(function(F){return F.xRatio=(F.xRatio-R)/P})}return{cpa:E,firstX:A[C.childId],lastX:m.width-A[O.childId]}}function r(p,c,h){c.forEach(function(m){var v=p.models[m.childId];v.origin=m.origin,h&&e.model.rotate(v,m.angle,m.origin)})}var i={};i[e.pathType.Arc]=function(p,c,h){var m=e.angle.ofArcSpan(p);h.forEach(function(v){return v.angle=c?p.endAngle-v.xRatio*m-90:p.startAngle+v.xRatio*m+90})},i[e.pathType.Line]=function(p,c,h){var m=e.angle.ofLineInDegrees(p);h.forEach(function(v){return v.angle=m})};function o(p,c,h,m,v,E){h===void 0&&(h=0),m===void 0&&(m=!1),v===void 0&&(v=!1),E===void 0&&(E=!0);var A=n(p,h),S=A.cpa,C=c;if(v&&S.length>1){var O=e.measure.pathLength(c);A.firstX+A.lastX<O&&(C=e.path.clone(c),e.path.alterLength(C,-A.firstX,!0),e.path.alterLength(C,-A.lastX))}S.forEach(function(w){return w.origin=e.point.middle(C,m?1-w.xRatio:w.xRatio)});var R=i[C.type];return R&&R(C,m,S),r(p,S,E),p}t.childrenOnPath=o;function s(p,c){var h=new e.paths.Arc([0,0],0,0,0);return p.map(function(m,v){var E;return v===0?E=e.angle.ofPointInDegrees(m,p[v+1])+90:v===p.length-1?E=e.angle.ofPointInDegrees(p[v-1],m)+90:(h.origin=m,h.startAngle=e.angle.ofPointInDegrees(m,p[v+1]),h.endAngle=e.angle.ofPointInDegrees(m,p[v-1]),E=e.angle.ofArcMiddle(h)),E+c})}function l(p,c,h,m,v,E){h===void 0&&(h=0),m===void 0&&(m=!1),v===void 0&&(v=!1),E===void 0&&(E=!0);var A=n(p,h),S=A.cpa,C=c.pathLength,O;if(S.length>1){v&&(C-=A.firstX+A.lastX);var R=S.map(function(D){return(m?1-D.xRatio:D.xRatio)*C}),w;if(m&&R.reverse(),w=R.map(function(D,L){return Math.abs(D-(L==0?0:R[L-1]))}),v?w[0]+=m?A.lastX:A.firstX:w.shift(),O=e.chain.toPoints(c,w),O.length<S.length){var P=c.links[c.links.length-1];O.push(P.endPoints[P.reversed?0:1])}v&&O.shift()}else O=e.chain.toPoints(c,.5*C),O.length=2,O.push(c.links[c.links.length-1].endPoints[c.links[c.links.length-1].reversed?0:1]);m&&O.reverse();var F=s(O,-90);return S.length>1?S.forEach(function(D,L){D.angle=F[L],D.origin=O[L]}):(S[0].angle=F[1],S[0].origin=O[1]),r(p,S,E),p}t.childrenOnChain=l;function a(p,c,h,m){var v={},E,A;e.isModel(p)?(E=v.models={},A=e.model.rotate):(E=v.paths={},A=e.path.rotate);for(var S=0;S<c;S++)E[S]=A(e.cloneObject(p),S*h,m);return v}t.cloneToRadial=a;function f(p,c,h,m){var v={},E,A,S;e.isModel(c)?(A=e.measure.modelExtents,E=v.models={},S=e.model.move):(A=e.measure.pathExtents,E=v.paths={},S=e.path.move);for(var C=A(c),O=C.high[p]-C.low[p],R=0;R<h;R++){var w=[0,0];w[p]=R*(O+m),E[R]=S(e.cloneObject(c),w)}return v}function g(p,c,h){return h===void 0&&(h=0),f(1,p,c,h)}t.cloneToColumn=g;function y(p,c,h){return h===void 0&&(h=0),f(0,p,c,h)}t.cloneToRow=y;function T(p,c,h,m){var v=x(m);return g(y(p,c,v[0]),h,v[1])}t.cloneToGrid=T;function x(p){return Array.isArray(p)?p:[p,p]}function b(p,c,h,m){var v;e.isModel(p)?v=p:v={paths:{0:p}};for(var E=m(v),A={models:{}},S=0;S<h;S++){var C=S%2;A.models[S]=e.model.move(y(p,c+C,E.xMargin),[C*E.x,S*E.y])}return A}function d(p,c,h,m){var v=x(m);function E(A){var S=e.measure.modelExtents(A),C=v[0]||0,O=v[1]||0;return{x:(S.width+C)/-2,y:S.height+O,xMargin:C}}return b(p,c,h,E)}t.cloneToBrick=d;function u(p,c,h,m){m===void 0&&(m=0);function v(E){var A=e.measure.boundingHexagon(E),S=2*e.solvers.equilateralAltitude(A.radius),C=S+m;return{x:C/-2,y:e.solvers.equilateralAltitude(C),xMargin:m}}return b(p,c,h,v)}t.cloneToHoneycomb=u})(e.layout||(e.layout={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=!1;function r(){if(!n)try{var c=Bezier.prototype;n=!0}catch{throw"Bezier library not found. If you are using Node, try running 'npm install' or if you are in the browser, download http://pomax.github.io/bezierjs/bezier.js to your website and add a script tag."}}var i;function o(c){var h=[c.origin];h.push.apply(h,c.controls),h.push(c.end);var m=h.map(function(v){var E={x:v[0],y:v[1]};return E});return i?Bezier.apply(i,m):(r(),i=new Bezier(m)),i}function s(c,h){var m=c.points.map(f),v=new u(m);return v}function l(c){var h=[];return h.push.apply(h,c.origin),h.push.apply(h,c.controls[0]),c.controls.length>1&&h.push.apply(h,c.controls[1]),h.push.apply(h,c.end),r(),new Bezier(h)}function a(c){var h=c.extrema().values.map(function(m){return e.round(m)}).filter(function(m,v,E){return E.indexOf(m)===v}).sort();return h.length===0?[0,1]:(h[0]!==0&&h.unshift(0),h[h.length-1]!==1&&h.push(1),h)}function f(c){return[c.x,c.y]}var g=(function(){function c(h,m,v){this.t=m,this.point=e.point.add(f(h.get(m)),v)}return c})();function y(c,h,m,v,E){var A=m-h;function S(C){var O=h+A*C,R=f(c.get(O)),w=e.point.middle(v,E?1-C:C);return e.measure.pointDistance(w,R)}return S(.25)+S(.75)}function T(c,h,m,v){for(var E,A,S=new g(c,h),C=new g(c,m),O=C,R=S,w=0,P=O,F;w<100;){var D=f(c.get((S.t+P.t)/2));try{E=new e.paths.Arc(S.point,D,P.point)}catch{if(A)return A;break}F===void 0&&(F=e.measure.isPointEqual(S.point,e.point.fromAngleOnCircle(E.endAngle,E)));var L=y(c,h,P.t,E,F);if(L<=v?(E.bezierData={startT:h,endT:P.t},R=P,A=E):O=P,R.t===O.t||A&&A!==E&&e.angle.ofArcSpan(E)-e.angle.ofArcSpan(A)<.5)return A;w++,P=new g(c,(R.t+O.t)/2)}var B=new e.paths.Line(S.point,P.point);return B.bezierData={startT:h,endT:P.t},B}function x(c,h,m,v,E,A){for(var S=0,C;v<E;){C=T(h,v,E,m),v=C.bezierData.endT;var O=e.measure.pathLength(C);O<1e-4||(c.paths[C.type+"_"+(A+S)]=C,S++)}return S}function b(c,h,m,v,E){var A=o(c.seed),S=[h.bezierData.startT,h.bezierData.endT].map(function(w){return new g(A,w,v)}),C=m.slice(),O=C.map(function(w){return e.measure.pointDistance(w,S[0].point)});O[0]>O[1]&&C.reverse();for(var R=2;R--;)if(!e.measure.isPointEqual(C[R],S[R].point,E))return null;return h.bezierData}function d(c,h,m,v,E){var A=[h.links[0],h.links[h.links.length-1]];A[0].walkedPath.pathContext.bezierData.startT>A[1].walkedPath.pathContext.bezierData.startT&&(e.chain.reverse(h),A.reverse());var S=A.map(function(O){return b(c,O.walkedPath.pathContext,O.endPoints,O.walkedPath.offset,E)}),C={startT:S[0]?S[0].startT:null,endT:S[1]?S[1].endT:null};return C.startT!==null&&C.endT!==null?C:h.links.length>2?(C.startT===null&&(v(h.links[0].walkedPath.pathContext,m,!0),C.startT=h.links[1].walkedPath.pathContext.bezierData.startT),C.endT===null&&(v(h.links[h.links.length-1].walkedPath.pathContext,m,!0),C.endT=h.links[h.links.length-2].walkedPath.pathContext.bezierData.endT),C):null}var u=(function(){function c(){for(var h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];switch(this.type=e.pathType.BezierSeed,h.length){case 1:var v=h[0];this.origin=v[0],v.length===3?(this.controls=[v[1]],this.end=v[2]):v.length===4?(this.controls=[v[1],v[2]],this.end=v[3]):this.end=v[1];break;case 3:Array.isArray(h[1])?this.controls=h[1]:this.controls=[h[1]],this.end=h[2];break;case 4:this.controls=[h[1],h[2]],this.end=h[3];break}}return c})(),p=(function(){function c(){for(var h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];this.type=c.typeName;var v=Array.isArray(h[0]);switch(h.length){case 2:if(v)this.accuracy=h[1];else{this.seed=h[0],this.accuracy=h[1];break}case 1:if(v){var E=h[0];this.seed=new u(E)}else this.seed=h[0];break;default:switch(h.length){case 4:if(e.isPoint(h[3])){this.seed=new u(h);break}else this.accuracy=h[3];case 3:v&&(this.seed=new u(h.slice(0,3)));break;case 5:this.accuracy=h[4],this.seed=new u(h.slice(0,4));break}break}if(this.paths={},e.measure.isBezierSeedLinear(this.seed)){var A=new e.paths.Line(e.point.clone(this.seed.origin),e.point.clone(this.seed.end));A.bezierData={startT:0,endT:1},this.paths={0:A};return}var S=l(this.seed),C=a(S);if(this.paths={},!this.accuracy){var O=S.length();this.accuracy=O/100}for(var R=0,w=1;w<C.length;w++){var P=C[w]-C[w-1];R+=x(this,S,this.accuracy*P,C[w-1],C[w],R)}}return c.getBezierSeeds=function(h,m){m===void 0&&(m={}),m.shallow=!0,m.unifyBeziers=!1;var v={},E=function(A,S,C){C===void 0&&(C=!1),v[S]||(v[S]=[]),v[S].push(C?e.path.clone(A):A)};return e.model.findChains(h,function(A,S,C){A.forEach(function(O){var R=d(h,O,C,E,m.pointMatchingDistance);if(R){var w=o(h.seed),P=w.split(R.startT,R.endT);E(s(P),C)}else O.links.forEach(function(F){return E(F.walkedPath.pathContext,C,!0)})}),S.forEach(function(O){if(O.pathContext.type===e.pathType.Line)return E(O.pathContext,C,!0);var R=b(h,O.pathContext,e.point.fromPathEnds(O.pathContext),O.offset,m.pointMatchingDistance);if(R){var w=o(h.seed),P=w.split(R.startT,R.endT);E(s(P),C)}else E(O.pathContext,C,!0)})},m),m.byLayers?v:v[""]},c.computeLength=function(h){var m=l(h);return m.length()},c.computePoint=function(h,m){var v=o(h),E=v.compute(m);return f(E)},c.typeName="BezierCurve",c})();t.BezierCurve=p,p.metaParameters=[{title:"points",type:"select",value:[[[100,0],[-80,-60],[100,220],[100,60]],[[0,0],[100,0],[100,100]],[[0,0],[20,0],[80,100],[100,100]]]}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=45;function r(a){return 4*(Math.tan(a/4)/3)}function i(a){var f=e.angle.ofArcSpan(a),g=r(e.angle.toRadians(f)),y=[a.radius,a.radius*g],T=e.point.rotate(e.point.mirror(y,!1,!0),f,[0,0]);return[y,T].map(function(x){return e.point.add(a.origin,e.point.rotate(x,a.startAngle,[0,0]))})}function o(a){var f=e.angle.ofArcSpan(a);if(f<=90){var g=e.point.fromPathEnds(a),y=i(a);return{type:e.pathType.BezierSeed,origin:g[0],controls:y,end:g[1]}}return null}var s=(function(){function a(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];var y=this;this.models={};var T=360/n,x,b=e.isPoint(f[0]),d=function(u){switch(u){case 2:b&&(y.origin=f[0]);break;case 3:y.origin=f[0];break;case 4:y.origin=[f[0],f[1]];break}for(var p=360/T,c=new e.paths.Arc([0,0],1,0,p),h=0;h<T;h++){var m=o(c);switch(u){case 1:m=e.path.scale(m,f[0]);break;case 2:b?m=e.path.scale(m,f[1]):m=e.path.distort(m,f[0],f[1]);break;case 3:m=e.path.distort(m,f[1],f[2]);break;case 4:m=e.path.distort(m,f[2],f[3]);break}y.models["Curve_"+(1+h)]=new t.BezierCurve(m,x),c.startAngle+=p,c.endAngle+=p}};switch(f.length){case 2:d(2);break;case 3:b?d(3):(x=f[2],d(2));break;case 4:b?(x=f[3],d(3)):d(4);break;case 5:x=f[4],d(4);break}}return a})();t.Ellipse=s,s.metaParameters=[{title:"radiusX",type:"range",min:1,max:50,value:50},{title:"radiusY",type:"range",min:1,max:50,value:25}];var l=(function(){function a(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];this.models={};var y,T,x,b;e.isPathArc(f[0])?(y=f[0],x=f[1],b=f[2],T=f[3]):(y=new e.paths.Arc([0,0],1,f[0],f[1]),x=f[2],b=f[3],T=f[4]);for(var d=e.angle.ofArcSpan(y),u=Math.ceil(d/n),p=d/u,c=e.path.clone(y),h=0;h<u;h++){c.startAngle=y.startAngle+h*p,c.endAngle=c.startAngle+p;var m=o(c);m=e.path.distort(m,x,b),this.models["Curve_"+(1+h)]=new t.BezierCurve(m,T)}}return a})();t.EllipticArc=l,l.metaParameters=[{title:"startAngle",type:"range",min:0,max:90,value:0},{title:"endAngle",type:"range",min:90,max:360,value:180},{title:"radiusX",type:"range",min:1,max:50,value:50},{title:"radiusY",type:"range",min:1,max:50,value:25}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){function n(i){var o;if(Array.isArray(i)){if(e.isPoint(i[0]))return i;o=i}else o=e.importer.parseNumericList(i);for(var s=[],l=0;l<o.length;l+=2)s.push([o[l],o[l+1]]);return s}var r=(function(){function i(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var l=this;this.paths={};var a,f;switch(o.length){case 1:a=!0,f=n(o[0]);break;case 2:a=o[0],f=n(o[1]);break}for(var g=function(T,x,b){b===void 0&&(b=!1),!(b&&e.measure.pointDistance(f[T],f[x])==0)&&(l.paths["ShapeLine"+y]=new e.paths.Line(f[T],f[x]))},y=1;y<f.length;y++)g(y-1,y);a&&f.length>2&&g(f.length-1,0,!0)}return i})();t.ConnectTheDots=r,r.metaParameters=[{title:"closed",type:"bool",value:!0},{title:"points",type:"select",value:[[[0,0],[40,40],[60,20],[100,100],[60,60],[40,80]],[[0,0],[100,0],[50,87]],[-10,0,10,0,0,20],"-10 0 10 0 0 20"]}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l){this.paths={},this.paths=new t.ConnectTheDots(!0,r.getPoints(i,o,s,l)).paths}return r.circumscribedRadius=function(i,o){return i/Math.cos(o/2)},r.getPoints=function(i,o,s,l){s===void 0&&(s=0),l===void 0&&(l=!1);var a=[],f=e.angle.toRadians(s),g=2*Math.PI/i;l&&(o=r.circumscribedRadius(o,g));for(var y=0;y<i;y++)a.push(e.point.fromPolar(g*y+f,o));return a},r})();t.Polygon=n,n.metaParameters=[{title:"number of sides",type:"range",min:3,max:24,value:6},{title:"radius",type:"range",min:1,max:100,value:50},{title:"offset angle",type:"range",min:0,max:180,value:0},{title:"radius on flats (vs radius on vertexes)",type:"bool",value:!1}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s){this.paths={};for(var l=0;l<o.length;l++){var a=s?s[l]:l.toString();this.paths[a]=new e.paths.Circle(o[l],i)}}return r})();t.Holes=n,n.metaParameters=[{title:"holeRadius",type:"range",min:.1,max:10,step:.1,value:1},{title:"points",type:"select",value:[[[0,0],[10,10],[20,20],[30,30],[40,40],[50,50],[60,60],[70,70],[80,80]],[[0,0],[0,25],[0,50],[0,75],[0,100],[25,50],[50,50],[75,50],[100,100],[100,75],[100,50],[100,25],[100,0]]]}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l){l===void 0&&(l=0),this.paths={};var a=t.Polygon.getPoints(s,i,l),f=a.map(function(g,y){return"bolt "+y});this.paths=new t.Holes(o,a,f).paths}return r})();t.BoltCircle=n,n.metaParameters=[{title:"bolt circle radius",type:"range",min:1,max:100,value:50},{title:"hole radius",type:"range",min:1,max:50,value:5},{title:"bolt count",type:"range",min:3,max:24,value:12},{title:"offset angle",type:"range",min:0,max:180,value:0}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s){this.paths={};var l=[[0,0],[i,0],[i,o],[0,o]],a=["BottomLeft_bolt","BottomRight_bolt","TopRight_bolt","TopLeft_bolt"];this.paths=new t.Holes(s,l,a).paths}return r})();t.BoltRectangle=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:100},{title:"height",type:"range",min:1,max:100,value:50},{title:"hole radius",type:"range",min:1,max:50,value:5}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l,a){l===void 0&&(l=0),a===void 0&&(a=!1),this.paths={};var f=Math.min(o,i)/2,g;switch(l){case-1:case 1:g=f/2;break;case 0:default:g=f*Math.SQRT2/2;break}s=Math.min(s,g);var y,T,x,b,d;switch(l){case-1:y=0,T=s,x=0,b=s*2,d=[180,0,0,180];break;case 1:y=s,T=0,x=s*2,b=0,d=[270,270,90,90];break;case 0:default:y=T=s/Math.SQRT2,x=b=y*2,d=[225,315,45,135];break}a?(this.paths.Left=new e.paths.Line([0,0],[0,o-b]),this.paths.Right=new e.paths.Line([i,0],[i,o-b])):(this.paths.Left=new e.paths.Line([0,b],[0,o-b]),this.paths.Right=new e.paths.Line([i,b],[i,o-b]),this.paths.Bottom=new e.paths.Line([x,0],[i-x,0]),this.paths.BottomLeft=new e.paths.Arc([y,T],s,d[0]-90,d[0]+90),this.paths.BottomRight=new e.paths.Arc([i-y,T],s,d[1]-90,d[1]+90)),this.paths.TopRight=new e.paths.Arc([i-y,o-T],s,d[2]-90,d[2]+90),this.paths.TopLeft=new e.paths.Arc([y,o-T],s,d[3]-90,d[3]+90),this.paths.Top=new e.paths.Line([x,o],[i-x,o])}return r})();t.Dogbone=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100},{title:"radius",type:"range",min:0,max:50,value:5},{title:"style",type:"select",value:[0,1,-1]},{title:"bottomless",type:"bool",value:!1}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l){this.paths={};var a=i/2;s<0&&(s=0),s===void 0&&(s=a),s=Math.min(s,a),s=Math.min(s,o);var f=Math.max(a-s,0),g=Math.max(o-s,0);l||(this.paths.Bottom=new e.paths.Line([-a,0],[a,0])),g&&(this.paths.Left=new e.paths.Line([-a,0],[-a,g]),this.paths.Right=new e.paths.Line([a,0],[a,g])),s>0&&(this.paths.TopLeft=new e.paths.Arc([-f,g],s,90,180),this.paths.TopRight=new e.paths.Arc([f,g],s,0,90)),f&&(this.paths.Top=new e.paths.Line([-f,o],[f,o]))}return r})();t.Dome=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100},{title:"radius",type:"range",min:0,max:50,value:25},{title:"bottomless",type:"bool",value:!1}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];this.paths={};var s,l,a=0;switch(i.length){case 3:s=i[0],l=i[1],a=i[2];break;case 2:a=i[1];case 1:var f=e.measure.modelExtents(i[0]);this.origin=e.point.subtract(f.low,[a,a]),s=f.high[0]-f.low[0]+2*a,l=f.high[1]-f.low[1]+2*a;break}var g=Math.min(l,s)/2;a=Math.min(a,g);var y=s-a,T=l-a;a>0&&(this.paths.BottomLeft=new e.paths.Arc([a,a],a,180,270),this.paths.BottomRight=new e.paths.Arc([y,a],a,270,0),this.paths.TopRight=new e.paths.Arc([y,T],a,0,90),this.paths.TopLeft=new e.paths.Arc([a,T],a,90,180)),y-a>0&&(this.paths.Bottom=new e.paths.Line([a,0],[y,0]),this.paths.Top=new e.paths.Line([y,l],[a,l])),T-a>0&&(this.paths.Right=new e.paths.Line([s,a],[s,T]),this.paths.Left=new e.paths.Line([0,T],[0,a]))}return r})();t.RoundRectangle=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100},{title:"radius",type:"range",min:0,max:50,value:11}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o){this.paths={},this.paths=new t.RoundRectangle(i,o,Math.min(o/2,i/2)).paths}return r})();t.Oval=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l,a,f){a===void 0&&(a=!1),f===void 0&&(f=!1);var g=this;this.paths={};var y;if(f&&(y={models:{}},this.models={Caps:y}),!(l<=0||s<=0)&&(i=e.angle.noRevolutions(i),o=e.angle.noRevolutions(o),e.round(i-o)!=0)){o<i&&(o+=360);var T=function(c,h,m,v){var E;return f?(E={paths:{}},y.models[c]=E):E=g,E.paths[c]=new e.paths.Arc(e.point.fromPolar(e.angle.toRadians(h),s),l,h+m,h+v)},x=function(c,h){return g.paths[c]=new e.paths.Arc([0,0],s+h,i,o)};x("Outer",l);var b=s-l>0;b&&x("Inner",-l);var d=[];d.push(T("StartCap",i,180,0)),d.push(T("EndCap",o,0,180));var u=e.measure.pointDistance(d[0].origin,d[1].origin);if(u/2<l){var p=e.path.intersection(d[0],d[1]);p&&((!b||!a)&&(d[0].startAngle=p.path1Angles[0],d[1].endAngle=p.path2Angles[0]),!a&&b&&p.intersectionPoints.length==2&&(T("StartCap2",i,180,0).endAngle=p.path1Angles[1],T("EndCap2",o,0,180).startAngle=p.path2Angles[1]+360))}}}return r})();t.OvalArc=n,n.metaParameters=[{title:"start angle",type:"range",min:-360,max:360,step:1,value:180},{title:"end angle",type:"range",min:-360,max:360,step:1,value:0},{title:"sweep",type:"range",min:0,max:100,step:1,value:50},{title:"radius",type:"range",min:0,max:100,step:1,value:15},{title:"self intersect",type:"bool",value:!1}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];this.paths={};var s,l;if(i.length===2&&!e.isObject(i[0]))s=i[0],l=i[1];else{var a=0,f;e.isModel(i[0])?(f=e.measure.modelExtents(i[0]),i.length===2&&(a=i[1])):f=i[0],this.origin=e.point.subtract(f.low,[a,a]),s=f.high[0]-f.low[0]+2*a,l=f.high[1]-f.low[1]+2*a}this.paths=new t.ConnectTheDots(!0,[[0,0],[s,0],[s,l],[0,l]]).paths}return r})();t.Rectangle=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o){this.paths={};var s={Ring_outer:i,Ring_inner:o};for(var l in s){var a=s[l];a===void 0||a<=0||(this.paths[l]=new e.paths.Circle(e.point.zero(),a))}}return r})();t.Ring=n,n.metaParameters=[{title:"outer radius",type:"range",min:0,max:100,step:1,value:50},{title:"inner radius",type:"range",min:0,max:100,step:1,value:20}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s){this.paths={};var l=new e.paths.Arc([0,0],i,0,360),a=new e.paths.Arc([o,0],s,0,360),f=e.solvers.circleTangentAngles(l,a);f?(f=f.sort(function(g,y){return g-y}),l.startAngle=f[0],l.endAngle=f[1],a.startAngle=f[1],a.endAngle=f[0],this.paths.Left=l,this.paths.Right=a,this.paths.Top=new e.paths.Line(e.point.fromAngleOnCircle(f[0],l),e.point.fromAngleOnCircle(f[0],a)),this.paths.Bottom=new e.paths.Line(e.point.fromAngleOnCircle(f[1],l),e.point.fromAngleOnCircle(f[1],a))):this.paths.Belt=new e.paths.Circle(Math.max(i,s))}return r})();t.Belt=n,n.metaParameters=[{title:"left radius",type:"range",min:0,max:100,value:30},{title:"distance between centers",type:"range",min:0,max:100,value:50},{title:"right radius",type:"range",min:0,max:100,value:15}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o){this.paths={};function s(b,d){return b+(d*d-b*b)/(2*b)}var l=o/2,a=i/2,f,g,y,T;i>o?(f=s(l,a),g=270,y=360-e.angle.toDegrees(Math.acos(a/f)),T=[0,f]):(f=s(a,l),g=180-e.angle.toDegrees(Math.asin(l/f)),y=180,T=[f,0]);var x=new e.paths.Arc(T,f,g,y);this.paths.curve_start=x,this.paths.curve_end=e.path.moveRelative(e.path.mirror(x,!0,!0),[i,o])}return r})();t.SCurve=n,n.metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l){l===void 0&&(l=!1);var a=this;this.paths={};var f;l&&(f={models:{}},this.models={Caps:f});var g=function(x,b){var d;l?(d={paths:{}},f.models[x]=d):d=a,d.paths[x]=b},y=e.angle.ofPointInDegrees(i,o),T=e.measure.pointDistance(i,o);this.paths.Top=new e.paths.Line([0,s],[T,s]),this.paths.Bottom=new e.paths.Line([0,-s],[T,-s]),g("StartCap",new e.paths.Arc([0,0],s,90,270)),g("EndCap",new e.paths.Arc([T,0],s,270,90)),e.model.rotate(this,y,[0,0]),this.origin=i}return r})();t.Slot=n,n.metaParameters=[{title:"origin",type:"select",value:[[0,0],[10,0],[10,10]]},{title:"end",type:"select",value:[[80,0],[0,30],[10,30]]},{title:"radius",type:"range",min:1,max:50,value:10}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i){this.paths={},this.paths=new t.Rectangle(i,i).paths}return r})();t.Square=n,n.metaParameters=[{title:"side",type:"range",min:1,max:100,value:100}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l){l===void 0&&(l=2),this.paths={},s||(s=o*r.InnerRadiusRatio(i,l));for(var a=t.Polygon.getPoints(i,o),f=t.Polygon.getPoints(i,s,180/i),g=[],y=0;y<i;y++)g.push(a[y]),g.push(f[y]);var T=new t.ConnectTheDots(!0,g);this.paths=T.paths,delete T.paths}return r.InnerRadiusRatio=function(i,o){return i>0&&o>1&&o<i/2?Math.cos(Math.PI*o/i)/Math.cos(Math.PI*(o-1)/i):0},r})();t.Star=n,n.metaParameters=[{title:"number of sides",type:"range",min:3,max:24,value:8},{title:"outer radius",type:"range",min:1,max:100,value:50},{title:"inner radius",type:"range",min:0,max:100,value:15},{title:"skip points (when inner radius is zero)",type:"range",min:0,max:12,value:2}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={}));var MakerJs;(function(e){(function(t){var n=(function(){function r(i,o,s,l,a,f,g){l===void 0&&(l=!1),a===void 0&&(a=!1);var y=this;this.models={};var T=0,x,b,d=function(u,p,c,h,m){var v=r.glyphToModel(u,h,f);if(v.origin=[p,0],a&&(v.paths||v.models)){var E=e.measure.modelExtents(v);if(E){var A=E.high[0]-E.low[0];e.model.originate(v,[E.low[0]+A/2,0])}}if(l&&T>0){var S={},C;x?C={models:{deleted:x,char:b}}:C=b,e.model.combine(C,v,!1,!0,!1,!0,S),x=S.out_deleted[1]}y.models[T]=v,T++,b=v};i.forEachGlyph(o,0,0,s,g,d)}return r.glyphToModel=function(i,o,s){var l={},a,f,g=0;function y(b){l.paths||(l.paths={}),l.paths["p_"+ ++g]=b}function T(b){l.models||(l.models={}),l.models["p_"+ ++g]=b}var x=i.getPath(0,0,o);return x.commands.map(function(b,d){var u=[[b.x,b.y],[b.x1,b.y1],[b.x2,b.y2]].map(function(p){if(p[0]!==void 0)return e.point.mirror(p,!1,!0)});switch(b.type){case"M":a=u[0];break;case"Z":u[0]=a;case"L":e.measure.isPointEqual(f,u[0])||y(new e.paths.Line(f,u[0]));break;case"C":T(new t.BezierCurve(f,u[1],u[2],u[0],s));break;case"Q":T(new t.BezierCurve(f,u[1],u[0],s));break}f=u[0]}),l},r})();t.Text=n,n.metaParameters=[{title:"font",type:"font",value:"*"},{title:"text",type:"text",value:"Hello"},{title:"font size",type:"range",min:10,max:200,value:72},{title:"combine",type:"bool",value:!1},{title:"center character origin",type:"bool",value:!1}]})(e.models||(e.models={}))})(MakerJs||(MakerJs={})),MakerJs.version="0.18.2";var Bezier=requireBezierJs();return dist}var distExports=requireDist();const makerjs=getDefaultExportFromCjs(distExports);var tinyInflate,hasRequiredTinyInflate;function requireTinyInflate(){if(hasRequiredTinyInflate)return tinyInflate;hasRequiredTinyInflate=1;var e=0,t=-3;function n(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function r(S,C){this.source=S,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=C,this.destLen=0,this.ltree=new n,this.dtree=new n}var i=new n,o=new n,s=new Uint8Array(30),l=new Uint16Array(30),a=new Uint8Array(30),f=new Uint16Array(30),g=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),y=new n,T=new Uint8Array(320);function x(S,C,O,R){var w,P;for(w=0;w<O;++w)S[w]=0;for(w=0;w<30-O;++w)S[w+O]=w/O|0;for(P=R,w=0;w<30;++w)C[w]=P,P+=1<<S[w]}function b(S,C){var O;for(O=0;O<7;++O)S.table[O]=0;for(S.table[7]=24,S.table[8]=152,S.table[9]=112,O=0;O<24;++O)S.trans[O]=256+O;for(O=0;O<144;++O)S.trans[24+O]=O;for(O=0;O<8;++O)S.trans[168+O]=280+O;for(O=0;O<112;++O)S.trans[176+O]=144+O;for(O=0;O<5;++O)C.table[O]=0;for(C.table[5]=32,O=0;O<32;++O)C.trans[O]=O}var d=new Uint16Array(16);function u(S,C,O,R){var w,P;for(w=0;w<16;++w)S.table[w]=0;for(w=0;w<R;++w)S.table[C[O+w]]++;for(S.table[0]=0,P=0,w=0;w<16;++w)d[w]=P,P+=S.table[w];for(w=0;w<R;++w)C[O+w]&&(S.trans[d[C[O+w]]++]=w)}function p(S){S.bitcount--||(S.tag=S.source[S.sourceIndex++],S.bitcount=7);var C=S.tag&1;return S.tag>>>=1,C}function c(S,C,O){if(!C)return O;for(;S.bitcount<24;)S.tag|=S.source[S.sourceIndex++]<<S.bitcount,S.bitcount+=8;var R=S.tag&65535>>>16-C;return S.tag>>>=C,S.bitcount-=C,R+O}function h(S,C){for(;S.bitcount<24;)S.tag|=S.source[S.sourceIndex++]<<S.bitcount,S.bitcount+=8;var O=0,R=0,w=0,P=S.tag;do R=2*R+(P&1),P>>>=1,++w,O+=C.table[w],R-=C.table[w];while(R>=0);return S.tag=P,S.bitcount-=w,C.trans[O+R]}function m(S,C,O){var R,w,P,F,D,L;for(R=c(S,5,257),w=c(S,5,1),P=c(S,4,4),F=0;F<19;++F)T[F]=0;for(F=0;F<P;++F){var B=c(S,3,0);T[g[F]]=B}for(u(y,T,0,19),D=0;D<R+w;){var G=h(S,y);switch(G){case 16:var _=T[D-1];for(L=c(S,2,3);L;--L)T[D++]=_;break;case 17:for(L=c(S,3,3);L;--L)T[D++]=0;break;case 18:for(L=c(S,7,11);L;--L)T[D++]=0;break;default:T[D++]=G;break}}u(C,T,0,R),u(O,T,R,w)}function v(S,C,O){for(;;){var R=h(S,C);if(R===256)return e;if(R<256)S.dest[S.destLen++]=R;else{var w,P,F,D;for(R-=257,w=c(S,s[R],l[R]),P=h(S,O),F=S.destLen-c(S,a[P],f[P]),D=F;D<F+w;++D)S.dest[S.destLen++]=S.dest[D]}}}function E(S){for(var C,O,R;S.bitcount>8;)S.sourceIndex--,S.bitcount-=8;if(C=S.source[S.sourceIndex+1],C=256*C+S.source[S.sourceIndex],O=S.source[S.sourceIndex+3],O=256*O+S.source[S.sourceIndex+2],C!==(~O&65535))return t;for(S.sourceIndex+=4,R=C;R;--R)S.dest[S.destLen++]=S.source[S.sourceIndex++];return S.bitcount=0,e}function A(S,C){var O=new r(S,C),R,w,P;do{switch(R=p(O),w=c(O,2,0),w){case 0:P=E(O);break;case 1:P=v(O,i,o);break;case 2:m(O,O.ltree,O.dtree),P=v(O,O.ltree,O.dtree);break;default:P=t}if(P!==e)throw new Error("Data error")}while(!R);return O.destLen<O.dest.length?typeof O.dest.slice=="function"?O.dest.slice(0,O.destLen):O.dest.subarray(0,O.destLen):O.dest}return b(i,o),x(s,l,4,3),x(a,f,2,1),s[28]=0,l[28]=258,tinyInflate=A,tinyInflate}var tinyInflateExports=requireTinyInflate();const inflate=getDefaultExportFromCjs(tinyInflateExports);function derive(e,t,n,r,i){return Math.pow(1-i,3)*e+3*Math.pow(1-i,2)*i*t+3*(1-i)*Math.pow(i,2)*n+Math.pow(i,3)*r}function BoundingBox(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}BoundingBox.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};BoundingBox.prototype.addPoint=function(e,t){typeof e=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),typeof t=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))};BoundingBox.prototype.addX=function(e){this.addPoint(e,null)};BoundingBox.prototype.addY=function(e){this.addPoint(null,e)};BoundingBox.prototype.addBezier=function(e,t,n,r,i,o,s,l){const a=[e,t],f=[n,r],g=[i,o],y=[s,l];this.addPoint(e,t),this.addPoint(s,l);for(let T=0;T<=1;T++){const x=6*a[T]-12*f[T]+6*g[T],b=-3*a[T]+9*f[T]-9*g[T]+3*y[T],d=3*f[T]-3*a[T];if(b===0){if(x===0)continue;const h=-d/x;0<h&&h<1&&(T===0&&this.addX(derive(a[T],f[T],g[T],y[T],h)),T===1&&this.addY(derive(a[T],f[T],g[T],y[T],h)));continue}const u=Math.pow(x,2)-4*d*b;if(u<0)continue;const p=(-x+Math.sqrt(u))/(2*b);0<p&&p<1&&(T===0&&this.addX(derive(a[T],f[T],g[T],y[T],p)),T===1&&this.addY(derive(a[T],f[T],g[T],y[T],p)));const c=(-x-Math.sqrt(u))/(2*b);0<c&&c<1&&(T===0&&this.addX(derive(a[T],f[T],g[T],y[T],c)),T===1&&this.addY(derive(a[T],f[T],g[T],y[T],c)))}};BoundingBox.prototype.addQuad=function(e,t,n,r,i,o){const s=e+.6666666666666666*(n-e),l=t+2/3*(r-t),a=s+1/3*(i-e),f=l+1/3*(o-t);this.addBezier(e,t,s,l,a,f,i,o)};function Path(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}Path.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})};Path.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})};Path.prototype.curveTo=Path.prototype.bezierCurveTo=function(e,t,n,r,i,o){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:r,x:i,y:o})};Path.prototype.quadTo=Path.prototype.quadraticCurveTo=function(e,t,n,r){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:r})};Path.prototype.close=Path.prototype.closePath=function(){this.commands.push({type:"Z"})};Path.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof BoundingBox){const t=e;this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),this.close();return}Array.prototype.push.apply(this.commands,e)};Path.prototype.getBoundingBox=function(){const e=new BoundingBox;let t=0,n=0,r=0,i=0;for(let o=0;o<this.commands.length;o++){const s=this.commands[o];switch(s.type){case"M":e.addPoint(s.x,s.y),t=r=s.x,n=i=s.y;break;case"L":e.addPoint(s.x,s.y),r=s.x,i=s.y;break;case"Q":e.addQuad(r,i,s.x1,s.y1,s.x,s.y),r=s.x,i=s.y;break;case"C":e.addBezier(r,i,s.x1,s.y1,s.x2,s.y2,s.x,s.y),r=s.x,i=s.y;break;case"Z":r=t,i=n;break;default:throw new Error("Unexpected path command "+s.type)}}return e.isEmpty()&&e.addPoint(0,0),e};Path.prototype.draw=function(e){e.beginPath();for(let t=0;t<this.commands.length;t+=1){const n=this.commands[t];n.type==="M"?e.moveTo(n.x,n.y):n.type==="L"?e.lineTo(n.x,n.y):n.type==="C"?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):n.type==="Q"?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):n.type==="Z"&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())};Path.prototype.toPathData=function(e){e=e!==void 0?e:2;function t(i){return Math.round(i)===i?""+Math.round(i):i.toFixed(e)}function n(){let i="";for(let o=0;o<arguments.length;o+=1){const s=arguments[o];s>=0&&o>0&&(i+=" "),i+=t(s)}return i}let r="";for(let i=0;i<this.commands.length;i+=1){const o=this.commands[i];o.type==="M"?r+="M"+n(o.x,o.y):o.type==="L"?r+="L"+n(o.x,o.y):o.type==="C"?r+="C"+n(o.x1,o.y1,o.x2,o.y2,o.x,o.y):o.type==="Q"?r+="Q"+n(o.x1,o.y1,o.x,o.y):o.type==="Z"&&(r+="Z")}return r};Path.prototype.toSVG=function(e){let t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&this.fill!=="black"&&(this.fill===null?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>",t};Path.prototype.toDOMElement=function(e){const t=this.toPathData(e),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",t),n};function fail(e){throw new Error(e)}function argument(e,t){e||fail(t)}const check={fail,argument,assert:argument},LIMIT16=32768,LIMIT32=2147483648,decode={},encode={},sizeOf={};function constant(e){return function(){return e}}encode.BYTE=function(e){return check.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]};sizeOf.BYTE=constant(1);encode.CHAR=function(e){return[e.charCodeAt(0)]};sizeOf.CHAR=constant(1);encode.CHARARRAY=function(e){const t=[];for(let n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t};sizeOf.CHARARRAY=function(e){return e.length};encode.USHORT=function(e){return[e>>8&255,e&255]};sizeOf.USHORT=constant(2);encode.SHORT=function(e){return e>=LIMIT16&&(e=-(2*LIMIT16-e)),[e>>8&255,e&255]};sizeOf.SHORT=constant(2);encode.UINT24=function(e){return[e>>16&255,e>>8&255,e&255]};sizeOf.UINT24=constant(3);encode.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,e&255]};sizeOf.ULONG=constant(4);encode.LONG=function(e){return e>=LIMIT32&&(e=-(2*LIMIT32-e)),[e>>24&255,e>>16&255,e>>8&255,e&255]};sizeOf.LONG=constant(4);encode.FIXED=encode.ULONG;sizeOf.FIXED=sizeOf.ULONG;encode.FWORD=encode.SHORT;sizeOf.FWORD=sizeOf.SHORT;encode.UFWORD=encode.USHORT;sizeOf.UFWORD=sizeOf.USHORT;encode.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,e&255]};sizeOf.LONGDATETIME=constant(8);encode.TAG=function(e){return check.argument(e.length===4,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]};sizeOf.TAG=constant(4);encode.Card8=encode.BYTE;sizeOf.Card8=sizeOf.BYTE;encode.Card16=encode.USHORT;sizeOf.Card16=sizeOf.USHORT;encode.OffSize=encode.BYTE;sizeOf.OffSize=sizeOf.BYTE;encode.SID=encode.USHORT;sizeOf.SID=sizeOf.USHORT;encode.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?(e=e-108,[(e>>8)+247,e&255]):e>=-1131&&e<=-108?(e=-e-108,[(e>>8)+251,e&255]):e>=-32768&&e<=32767?encode.NUMBER16(e):encode.NUMBER32(e)};sizeOf.NUMBER=function(e){return encode.NUMBER(e).length};encode.NUMBER16=function(e){return[28,e>>8&255,e&255]};sizeOf.NUMBER16=constant(3);encode.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,e&255]};sizeOf.NUMBER32=constant(5);encode.REAL=function(e){let t=e.toString();const n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(n){const o=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));t=(Math.round(e*o)/o).toString()}let r="";for(let o=0,s=t.length;o<s;o+=1){const l=t[o];l==="e"?r+=t[++o]==="-"?"c":"b":l==="."?r+="a":l==="-"?r+="e":r+=l}r+=r.length&1?"f":"ff";const i=[30];for(let o=0,s=r.length;o<s;o+=2)i.push(parseInt(r.substr(o,2),16));return i};sizeOf.REAL=function(e){return encode.REAL(e).length};encode.NAME=encode.CHARARRAY;sizeOf.NAME=sizeOf.CHARARRAY;encode.STRING=encode.CHARARRAY;sizeOf.STRING=sizeOf.CHARARRAY;decode.UTF8=function(e,t,n){const r=[],i=n;for(let o=0;o<i;o++,t+=1)r[o]=e.getUint8(t);return String.fromCharCode.apply(null,r)};decode.UTF16=function(e,t,n){const r=[],i=n/2;for(let o=0;o<i;o++,t+=2)r[o]=e.getUint16(t);return String.fromCharCode.apply(null,r)};encode.UTF16=function(e){const t=[];for(let n=0;n<e.length;n+=1){const r=e.charCodeAt(n);t[t.length]=r>>8&255,t[t.length]=r&255}return t};sizeOf.UTF16=function(e){return e.length*2};const eightBitMacEncodings={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};decode.MACSTRING=function(e,t,n,r){const i=eightBitMacEncodings[r];if(i===void 0)return;let o="";for(let s=0;s<n;s++){const l=e.getUint8(t+s);l<=127?o+=String.fromCharCode(l):o+=i[l&127]}return o};const macEncodingTableCache=typeof WeakMap=="function"&&new WeakMap;let macEncodingCacheKeys;const getMacEncodingTable=function(e){if(!macEncodingCacheKeys){macEncodingCacheKeys={};for(let i in eightBitMacEncodings)macEncodingCacheKeys[i]=new String(i)}const t=macEncodingCacheKeys[e];if(t===void 0)return;if(macEncodingTableCache){const i=macEncodingTableCache.get(t);if(i!==void 0)return i}const n=eightBitMacEncodings[e];if(n===void 0)return;const r={};for(let i=0;i<n.length;i++)r[n.charCodeAt(i)]=i+128;return macEncodingTableCache&&macEncodingTableCache.set(t,r),r};encode.MACSTRING=function(e,t){const n=getMacEncodingTable(t);if(n===void 0)return;const r=[];for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);if(o>=128&&(o=n[o],o===void 0))return;r[i]=o}return r};sizeOf.MACSTRING=function(e,t){const n=encode.MACSTRING(e,t);return n!==void 0?n.length:0};function isByteEncodable(e){return e>=-128&&e<=127}function encodeVarDeltaRunAsZeroes(e,t,n){let r=0;const i=e.length;for(;t<i&&r<64&&e[t]===0;)++t,++r;return n.push(128|r-1),t}function encodeVarDeltaRunAsBytes(e,t,n){let r=0;const i=e.length;let o=t;for(;o<i&&r<64;){const s=e[o];if(!isByteEncodable(s)||s===0&&o+1<i&&e[o+1]===0)break;++o,++r}n.push(r-1);for(let s=t;s<o;++s)n.push(e[s]+256&255);return o}function encodeVarDeltaRunAsWords(e,t,n){let r=0;const i=e.length;let o=t;for(;o<i&&r<64;){const s=e[o];if(s===0||isByteEncodable(s)&&o+1<i&&isByteEncodable(e[o+1]))break;++o,++r}n.push(64|r-1);for(let s=t;s<o;++s){const l=e[s];n.push(l+65536>>8&255,l+256&255)}return o}encode.VARDELTAS=function(e){let t=0;const n=[];for(;t<e.length;){const r=e[t];r===0?t=encodeVarDeltaRunAsZeroes(e,t,n):r>=-128&&r<=127?t=encodeVarDeltaRunAsBytes(e,t,n):t=encodeVarDeltaRunAsWords(e,t,n)}return n};encode.INDEX=function(e){let t=1;const n=[t],r=[];for(let l=0;l<e.length;l+=1){const a=encode.OBJECT(e[l]);Array.prototype.push.apply(r,a),t+=a.length,n.push(t)}if(r.length===0)return[0,0];const i=[],o=1+Math.floor(Math.log(t)/Math.log(2))/8|0,s=[void 0,encode.BYTE,encode.USHORT,encode.UINT24,encode.ULONG][o];for(let l=0;l<n.length;l+=1){const a=s(n[l]);Array.prototype.push.apply(i,a)}return Array.prototype.concat(encode.Card16(e.length),encode.OffSize(o),i,r)};sizeOf.INDEX=function(e){return encode.INDEX(e).length};encode.DICT=function(e){let t=[];const n=Object.keys(e),r=n.length;for(let i=0;i<r;i+=1){const o=parseInt(n[i],0),s=e[o];t=t.concat(encode.OPERAND(s.value,s.type)),t=t.concat(encode.OPERATOR(o))}return t};sizeOf.DICT=function(e){return encode.DICT(e).length};encode.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]};encode.OPERAND=function(e,t){let n=[];if(Array.isArray(t))for(let r=0;r<t.length;r+=1)check.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(encode.OPERAND(e[r],t[r]));else if(t==="SID")n=n.concat(encode.NUMBER(e));else if(t==="offset")n=n.concat(encode.NUMBER32(e));else if(t==="number")n=n.concat(encode.NUMBER(e));else if(t==="real")n=n.concat(encode.REAL(e));else throw new Error("Unknown operand type "+t);return n};encode.OP=encode.BYTE;sizeOf.OP=sizeOf.BYTE;const wmm=typeof WeakMap=="function"&&new WeakMap;encode.CHARSTRING=function(e){if(wmm){const r=wmm.get(e);if(r!==void 0)return r}let t=[];const n=e.length;for(let r=0;r<n;r+=1){const i=e[r];t=t.concat(encode[i.type](i.value))}return wmm&&wmm.set(e,t),t};sizeOf.CHARSTRING=function(e){return encode.CHARSTRING(e).length};encode.OBJECT=function(e){const t=encode[e.type];return check.argument(t!==void 0,"No encoding function for type "+e.type),t(e.value)};sizeOf.OBJECT=function(e){const t=sizeOf[e.type];return check.argument(t!==void 0,"No sizeOf function for type "+e.type),t(e.value)};encode.TABLE=function(e){let t=[];const n=e.fields.length,r=[],i=[];for(let o=0;o<n;o+=1){const s=e.fields[o],l=encode[s.type];check.argument(l!==void 0,"No encoding function for field type "+s.type+" ("+s.name+")");let a=e[s.name];a===void 0&&(a=s.value);const f=l(a);s.type==="TABLE"?(i.push(t.length),t=t.concat([0,0]),r.push(f)):t=t.concat(f)}for(let o=0;o<r.length;o+=1){const s=i[o],l=t.length;check.argument(l<65536,"Table "+e.tableName+" too big."),t[s]=l>>8,t[s+1]=l&255,t=t.concat(r[o])}return t};sizeOf.TABLE=function(e){let t=0;const n=e.fields.length;for(let r=0;r<n;r+=1){const i=e.fields[r],o=sizeOf[i.type];check.argument(o!==void 0,"No sizeOf function for field type "+i.type+" ("+i.name+")");let s=e[i.name];s===void 0&&(s=i.value),t+=o(s),i.type==="TABLE"&&(t+=2)}return t};encode.RECORD=encode.TABLE;sizeOf.RECORD=sizeOf.TABLE;encode.LITERAL=function(e){return e};sizeOf.LITERAL=function(e){return e.length};function Table(e,t,n){for(let r=0;r<t.length;r+=1){const i=t[r];this[i.name]=i.value}if(this.tableName=e,this.fields=t,n){const r=Object.keys(n);for(let i=0;i<r.length;i+=1){const o=r[i],s=n[o];this[o]!==void 0&&(this[o]=s)}}}Table.prototype.encode=function(){return encode.TABLE(this)};Table.prototype.sizeOf=function(){return sizeOf.TABLE(this)};function ushortList(e,t,n){n===void 0&&(n=t.length);const r=new Array(t.length+1);r[0]={name:e+"Count",type:"USHORT",value:n};for(let i=0;i<t.length;i++)r[i+1]={name:e+i,type:"USHORT",value:t[i]};return r}function tableList(e,t,n){const r=t.length,i=new Array(r+1);i[0]={name:e+"Count",type:"USHORT",value:r};for(let o=0;o<r;o++)i[o+1]={name:e+o,type:"TABLE",value:n(t[o],o)};return i}function recordList(e,t,n){const r=t.length;let i=[];i[0]={name:e+"Count",type:"USHORT",value:r};for(let o=0;o<r;o++)i=i.concat(n(t[o],o));return i}function Coverage(e){e.format===1?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ushortList("glyph",e.glyphs))):check.assert(!1,"Can't create coverage table format 2 yet.")}Coverage.prototype=Object.create(Table.prototype);Coverage.prototype.constructor=Coverage;function ScriptList(e){Table.call(this,"scriptListTable",recordList("scriptRecord",e,function(t,n){const r=t.script;let i=r.defaultLangSys;return check.assert(!!i,"Unable to write GSUB: script "+t.tag+" has no default language system."),[{name:"scriptTag"+n,type:"TAG",value:t.tag},{name:"script"+n,type:"TABLE",value:new Table("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Table("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(ushortList("featureIndex",i.featureIndexes)))}].concat(recordList("langSys",r.langSysRecords,function(o,s){const l=o.langSys;return[{name:"langSysTag"+s,type:"TAG",value:o.tag},{name:"langSys"+s,type:"TABLE",value:new Table("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:l.reqFeatureIndex}].concat(ushortList("featureIndex",l.featureIndexes)))}]})))}]}))}ScriptList.prototype=Object.create(Table.prototype);ScriptList.prototype.constructor=ScriptList;function FeatureList(e){Table.call(this,"featureListTable",recordList("featureRecord",e,function(t,n){const r=t.feature;return[{name:"featureTag"+n,type:"TAG",value:t.tag},{name:"feature"+n,type:"TABLE",value:new Table("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(ushortList("lookupListIndex",r.lookupListIndexes)))}]}))}FeatureList.prototype=Object.create(Table.prototype);FeatureList.prototype.constructor=FeatureList;function LookupList(e,t){Table.call(this,"lookupListTable",tableList("lookup",e,function(n){let r=t[n.lookupType];return check.assert(!!r,"Unable to write GSUB lookup type "+n.lookupType+" tables."),new Table("lookupTable",[{name:"lookupType",type:"USHORT",value:n.lookupType},{name:"lookupFlag",type:"USHORT",value:n.lookupFlag}].concat(tableList("subtable",n.subtables,r)))}))}LookupList.prototype=Object.create(Table.prototype);LookupList.prototype.constructor=LookupList;const table={Table,Record:Table,Coverage,ScriptList,FeatureList,LookupList,ushortList,tableList,recordList};function getByte(e,t){return e.getUint8(t)}function getUShort(e,t){return e.getUint16(t,!1)}function getShort(e,t){return e.getInt16(t,!1)}function getULong(e,t){return e.getUint32(t,!1)}function getFixed(e,t){const n=e.getInt16(t,!1),r=e.getUint16(t+2,!1);return n+r/65535}function getTag(e,t){let n="";for(let r=t;r<t+4;r+=1)n+=String.fromCharCode(e.getInt8(r));return n}function getOffset(e,t,n){let r=0;for(let i=0;i<n;i+=1)r<<=8,r+=e.getUint8(t+i);return r}function getBytes(e,t,n){const r=[];for(let i=t;i<n;i+=1)r.push(e.getUint8(i));return r}function bytesToString(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t}const typeOffsets={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Parser(e,t){this.data=e,this.offset=t,this.relativeOffset=0}Parser.prototype.parseByte=function(){const e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e};Parser.prototype.parseChar=function(){const e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e};Parser.prototype.parseCard8=Parser.prototype.parseByte;Parser.prototype.parseUShort=function(){const e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e};Parser.prototype.parseCard16=Parser.prototype.parseUShort;Parser.prototype.parseSID=Parser.prototype.parseUShort;Parser.prototype.parseOffset16=Parser.prototype.parseUShort;Parser.prototype.parseShort=function(){const e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e};Parser.prototype.parseF2Dot14=function(){const e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e};Parser.prototype.parseULong=function(){const e=getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e};Parser.prototype.parseFixed=function(){const e=getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e};Parser.prototype.parseString=function(e){const t=this.data,n=this.offset+this.relativeOffset;let r="";this.relativeOffset+=e;for(let i=0;i<e;i++)r+=String.fromCharCode(t.getUint8(n+i));return r};Parser.prototype.parseTag=function(){return this.parseString(4)};Parser.prototype.parseLongDateTime=function(){let e=getULong(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e};Parser.prototype.parseVersion=function(){const e=getUShort(this.data,this.offset+this.relativeOffset),t=getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,e+t/4096/10};Parser.prototype.skip=function(e,t){t===void 0&&(t=1),this.relativeOffset+=typeOffsets[e]*t};Parser.prototype.parseOffset16List=Parser.prototype.parseUShortList=function(e){e===void 0&&(e=this.parseUShort());const t=new Array(e),n=this.data;let r=this.offset+this.relativeOffset;for(let i=0;i<e;i++)t[i]=n.getUint16(r),r+=2;return this.relativeOffset+=e*2,t};Parser.prototype.parseShortList=function(e){const t=new Array(e),n=this.data;let r=this.offset+this.relativeOffset;for(let i=0;i<e;i++)t[i]=n.getInt16(r),r+=2;return this.relativeOffset+=e*2,t};Parser.prototype.parseByteList=function(e){const t=new Array(e),n=this.data;let r=this.offset+this.relativeOffset;for(let i=0;i<e;i++)t[i]=n.getUint8(r++);return this.relativeOffset+=e,t};Parser.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());const n=new Array(e);for(let r=0;r<e;r++)n[r]=t.call(this);return n};Parser.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());const n=new Array(e),r=Object.keys(t);for(let i=0;i<e;i++){const o={};for(let s=0;s<r.length;s++){const l=r[s],a=t[l];o[l]=a.call(this)}n[i]=o}return n};Parser.prototype.parseStruct=function(e){if(typeof e=="function")return e.call(this);{const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const i=t[r],o=e[i];n[i]=o.call(this)}return n}};Parser.prototype.parsePointer=function(e){const t=this.parseOffset16();if(t>0)return new Parser(this.data,this.offset+t).parseStruct(e)};Parser.prototype.parseListOfLists=function(e){const t=this.parseOffset16List(),n=t.length,r=this.relativeOffset,i=new Array(n);for(let o=0;o<n;o++){const s=t[o];if(s===0){i[o]=void 0;continue}if(this.relativeOffset=s,e){const l=this.parseOffset16List(),a=new Array(l.length);for(let f=0;f<l.length;f++)this.relativeOffset=s+l[f],a[f]=e.call(this);i[o]=a}else i[o]=this.parseUShortList()}return this.relativeOffset=r,i};Parser.prototype.parseCoverage=function(){const e=this.offset+this.relativeOffset,t=this.parseUShort(),n=this.parseUShort();if(t===1)return{format:1,glyphs:this.parseUShortList(n)};if(t===2){const r=new Array(n);for(let i=0;i<n;i++)r[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")};Parser.prototype.parseClassDef=function(){const e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(t===2)return{format:2,ranges:this.parseRecordList({start:Parser.uShort,end:Parser.uShort,classId:Parser.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")};Parser.list=function(e,t){return function(){return this.parseList(e,t)}};Parser.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}};Parser.pointer=function(e){return function(){return this.parsePointer(e)}};Parser.tag=Parser.prototype.parseTag;Parser.byte=Parser.prototype.parseByte;Parser.uShort=Parser.offset16=Parser.prototype.parseUShort;Parser.uShortList=Parser.prototype.parseUShortList;Parser.struct=Parser.prototype.parseStruct;Parser.coverage=Parser.prototype.parseCoverage;Parser.classDef=Parser.prototype.parseClassDef;const langSysTable={reserved:Parser.uShort,reqFeatureIndex:Parser.uShort,featureIndexes:Parser.uShortList};Parser.prototype.parseScriptList=function(){return this.parsePointer(Parser.recordList({tag:Parser.tag,script:Parser.pointer({defaultLangSys:Parser.pointer(langSysTable),langSysRecords:Parser.recordList({tag:Parser.tag,langSys:Parser.pointer(langSysTable)})})}))};Parser.prototype.parseFeatureList=function(){return this.parsePointer(Parser.recordList({tag:Parser.tag,feature:Parser.pointer({featureParams:Parser.offset16,lookupListIndexes:Parser.uShortList})}))};Parser.prototype.parseLookupList=function(e){return this.parsePointer(Parser.list(Parser.pointer(function(){const t=this.parseUShort();check.argument(1<=t&&t<=8,"GSUB lookup type "+t+" unknown.");const n=this.parseUShort(),r=n&16;return{lookupType:t,lookupFlag:n,subtables:this.parseList(Parser.pointer(e[t])),markFilteringSet:r?this.parseUShort():void 0}})))};const parse={getByte,getCard8:getByte,getUShort,getCard16:getUShort,getShort,getULong,getFixed,getTag,getOffset,getBytes,bytesToString,Parser};function parseCmapTableFormat12(e,t){t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong();let n;e.groupCount=n=t.parseULong(),e.glyphIndexMap={};for(let r=0;r<n;r+=1){const i=t.parseULong(),o=t.parseULong();let s=t.parseULong();for(let l=i;l<=o;l+=1)e.glyphIndexMap[l]=s,s++}}function parseCmapTableFormat4(e,t,n,r,i){e.length=t.parseUShort(),e.language=t.parseUShort();let o;e.segCount=o=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};const s=new parse.Parser(n,r+i+14),l=new parse.Parser(n,r+i+16+o*2),a=new parse.Parser(n,r+i+16+o*4),f=new parse.Parser(n,r+i+16+o*6);let g=r+i+16+o*8;for(let y=0;y<o-1;y+=1){let T;const x=s.parseUShort(),b=l.parseUShort(),d=a.parseShort(),u=f.parseUShort();for(let p=b;p<=x;p+=1)u!==0?(g=f.offset+f.relativeOffset-2,g+=u,g+=(p-b)*2,T=parse.getUShort(n,g),T!==0&&(T=T+d&65535)):T=p+d&65535,e.glyphIndexMap[p]=T}}function parseCmapTable(e,t){const n={};n.version=parse.getUShort(e,t),check.argument(n.version===0,"cmap table version should be 0."),n.numTables=parse.getUShort(e,t+2);let r=-1;for(let o=n.numTables-1;o>=0;o-=1){const s=parse.getUShort(e,t+4+o*8),l=parse.getUShort(e,t+4+o*8+2);if(s===3&&(l===0||l===1||l===10)){r=parse.getULong(e,t+4+o*8+4);break}}if(r===-1)throw new Error("No valid cmap sub-tables found.");const i=new parse.Parser(e,t+r);if(n.format=i.parseUShort(),n.format===12)parseCmapTableFormat12(n,i);else if(n.format===4)parseCmapTableFormat4(n,i,e,t,r);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");return n}function addSegment(e,t,n){e.segments.push({end:t,start:t,delta:-(t-n),offset:0})}function addTerminatorSegment(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function makeCmapTable(e){const t=new table.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.segments=[];for(let a=0;a<e.length;a+=1){const f=e.get(a);for(let g=0;g<f.unicodes.length;g+=1)addSegment(t,f.unicodes[g],a);t.segments=t.segments.sort(function(g,y){return g.start-y.start})}addTerminatorSegment(t);let n;n=t.segments.length,t.segCountX2=n*2,t.searchRange=Math.pow(2,Math.floor(Math.log(n)/Math.log(2)))*2,t.entrySelector=Math.log(t.searchRange/2)/Math.log(2),t.rangeShift=t.segCountX2-t.searchRange;let r=[],i=[],o=[],s=[],l=[];for(let a=0;a<n;a+=1){const f=t.segments[a];r=r.concat({name:"end_"+a,type:"USHORT",value:f.end}),i=i.concat({name:"start_"+a,type:"USHORT",value:f.start}),o=o.concat({name:"idDelta_"+a,type:"SHORT",value:f.delta}),s=s.concat({name:"idRangeOffset_"+a,type:"USHORT",value:f.offset}),f.glyphId!==void 0&&(l=l.concat({name:"glyph_"+a,type:"USHORT",value:f.glyphId}))}return t.fields=t.fields.concat(r),t.fields.push({name:"reservedPad",type:"USHORT",value:0}),t.fields=t.fields.concat(i),t.fields=t.fields.concat(o),t.fields=t.fields.concat(s),t.fields=t.fields.concat(l),t.length=14+r.length*2+2+i.length*2+o.length*2+s.length*2+l.length*2,t}const cmap={parse:parseCmapTable,make:makeCmapTable},cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],standardNames=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function DefaultEncoding(e){this.font=e}DefaultEncoding.prototype.charToGlyphIndex=function(e){const t=e.charCodeAt(0),n=this.font.glyphs;if(n)for(let r=0;r<n.length;r+=1){const i=n.get(r);for(let o=0;o<i.unicodes.length;o+=1)if(i.unicodes[o]===t)return r}return null};function CmapEncoding(e){this.cmap=e}CmapEncoding.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.charCodeAt(0)]||0};function CffEncoding(e,t){this.encoding=e,this.charset=t}CffEncoding.prototype.charToGlyphIndex=function(e){const t=e.charCodeAt(0),n=this.encoding[t];return this.charset.indexOf(n)};function GlyphNames(e){switch(e.version){case 1:this.names=standardNames.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(let t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<standardNames.length?this.names[t]=standardNames[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-standardNames.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(let t=0;t<e.numberOfGlyphs;t++)this.names[t]=standardNames[t+e.glyphNameIndex[t]];break;case 3:this.names=[];break;default:this.names=[];break}}GlyphNames.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)};GlyphNames.prototype.glyphIndexToName=function(e){return this.names[e]};function addGlyphNames(e){let t;const n=e.tables.cmap.glyphIndexMap,r=Object.keys(n);for(let i=0;i<r.length;i+=1){const o=r[i],s=n[o];t=e.glyphs.get(s),t.addUnicode(parseInt(o))}for(let i=0;i<e.glyphs.length;i+=1)t=e.glyphs.get(i),e.cffEncoding?e.isCIDFont?t.name="gid"+i:t.name=e.cffEncoding.charset[i]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(i))}function line(e,t,n,r,i){e.beginPath(),e.moveTo(t,n),e.lineTo(r,i),e.stroke()}const draw={line};function parseGlyphCoordinate(e,t,n,r,i){let o;return(t&r)>0?(o=e.parseByte(),(t&i)===0&&(o=-o),o=n+o):(t&i)>0?o=n:o=n+e.parseShort(),o}function parseGlyph(e,t,n){const r=new parse.Parser(t,n);e.numberOfContours=r.parseShort(),e._xMin=r.parseShort(),e._yMin=r.parseShort(),e._xMax=r.parseShort(),e._yMax=r.parseShort();let i,o;if(e.numberOfContours>0){const s=e.endPointIndices=[];for(let a=0;a<e.numberOfContours;a+=1)s.push(r.parseUShort());e.instructionLength=r.parseUShort(),e.instructions=[];for(let a=0;a<e.instructionLength;a+=1)e.instructions.push(r.parseByte());const l=s[s.length-1]+1;i=[];for(let a=0;a<l;a+=1)if(o=r.parseByte(),i.push(o),(o&8)>0){const f=r.parseByte();for(let g=0;g<f;g+=1)i.push(o),a+=1}if(check.argument(i.length===l,"Bad flags."),s.length>0){const a=[];let f;if(l>0){for(let T=0;T<l;T+=1)o=i[T],f={},f.onCurve=!!(o&1),f.lastPointOfContour=s.indexOf(T)>=0,a.push(f);let g=0;for(let T=0;T<l;T+=1)o=i[T],f=a[T],f.x=parseGlyphCoordinate(r,o,g,2,16),g=f.x;let y=0;for(let T=0;T<l;T+=1)o=i[T],f=a[T],f.y=parseGlyphCoordinate(r,o,y,4,32),y=f.y}e.points=a}else e.points=[]}else if(e.numberOfContours===0)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];let s=!0;for(;s;){i=r.parseUShort();const l={glyphIndex:r.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(i&1)>0?(i&2)>0?(l.dx=r.parseShort(),l.dy=r.parseShort()):l.matchedPoints=[r.parseUShort(),r.parseUShort()]:(i&2)>0?(l.dx=r.parseChar(),l.dy=r.parseChar()):l.matchedPoints=[r.parseByte(),r.parseByte()],(i&8)>0?l.xScale=l.yScale=r.parseF2Dot14():(i&64)>0?(l.xScale=r.parseF2Dot14(),l.yScale=r.parseF2Dot14()):(i&128)>0&&(l.xScale=r.parseF2Dot14(),l.scale01=r.parseF2Dot14(),l.scale10=r.parseF2Dot14(),l.yScale=r.parseF2Dot14()),e.components.push(l),s=!!(i&32)}if(i&256){e.instructionLength=r.parseUShort(),e.instructions=[];for(let l=0;l<e.instructionLength;l+=1)e.instructions.push(r.parseByte())}}}function transformPoints(e,t){const n=[];for(let r=0;r<e.length;r+=1){const i=e[r],o={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};n.push(o)}return n}function getContours(e){const t=[];let n=[];for(let r=0;r<e.length;r+=1){const i=e[r];n.push(i),i.lastPointOfContour&&(t.push(n),n=[])}return check.argument(n.length===0,"There are still points left in the current contour."),t}function getPath(e){const t=new Path;if(!e)return t;const n=getContours(e);for(let r=0;r<n.length;++r){const i=n[r];let o=null,s=i[i.length-1],l=i[0];if(s.onCurve)t.moveTo(s.x,s.y);else if(l.onCurve)t.moveTo(l.x,l.y);else{const a={x:(s.x+l.x)*.5,y:(s.y+l.y)*.5};t.moveTo(a.x,a.y)}for(let a=0;a<i.length;++a)if(o=s,s=l,l=i[(a+1)%i.length],s.onCurve)t.lineTo(s.x,s.y);else{let f=o,g=l;o.onCurve||(f={x:(s.x+o.x)*.5,y:(s.y+o.y)*.5},t.lineTo(f.x,f.y)),l.onCurve||(g={x:(s.x+l.x)*.5,y:(s.y+l.y)*.5}),t.lineTo(f.x,f.y),t.quadraticCurveTo(s.x,s.y,g.x,g.y)}t.closePath()}return t}function buildPath(e,t){if(t.isComposite)for(let n=0;n<t.components.length;n+=1){const r=t.components[n],i=e.get(r.glyphIndex);if(i.getPath(),i.points){let o;if(r.matchedPoints===void 0)o=transformPoints(i.points,r);else{if(r.matchedPoints[0]>t.points.length-1||r.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+t.name);const s=t.points[r.matchedPoints[0]];let l=i.points[r.matchedPoints[1]];const a={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};l=transformPoints([l],a)[0],a.dx=s.x-l.x,a.dy=s.y-l.y,o=transformPoints(i.points,a)}t.points=t.points.concat(o)}}return getPath(t.points)}function parseGlyfTable(e,t,n,r){const i=new glyphset.GlyphSet(r);for(let o=0;o<n.length-1;o+=1){const s=n[o],l=n[o+1];s!==l?i.push(o,glyphset.ttfGlyphLoader(r,o,parseGlyph,e,t+s,buildPath)):i.push(o,glyphset.glyphLoader(r,o))}return i}const glyf={getPath,parse:parseGlyfTable};function getPathDefinition(e,t){let n=t||{commands:[]};return{configurable:!0,get:function(){return typeof n=="function"&&(n=n()),n},set:function(r){n=r}}}function Glyph(e){this.bindConstructorValues(e)}Glyph.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||e.unicode!==void 0?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",getPathDefinition(this,e.path))};Glyph.prototype.addUnicode=function(e){this.unicodes.length===0&&(this.unicode=e),this.unicodes.push(e)};Glyph.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};Glyph.prototype.getPath=function(e,t,n,r,i){e=e!==void 0?e:0,t=t!==void 0?t:0,n=n!==void 0?n:72;let o,s;r||(r={});let l=r.xScale,a=r.yScale;if(r.hinting&&i&&i.hinting&&(s=this.path&&i.hinting.exec(this,n)),s)o=glyf.getPath(s).commands,e=Math.round(e),t=Math.round(t),l=a=1;else{o=this.path.commands;const g=1/this.path.unitsPerEm*n;l===void 0&&(l=g),a===void 0&&(a=g)}const f=new Path;for(let g=0;g<o.length;g+=1){const y=o[g];y.type==="M"?f.moveTo(e+y.x*l,t+-y.y*a):y.type==="L"?f.lineTo(e+y.x*l,t+-y.y*a):y.type==="Q"?f.quadraticCurveTo(e+y.x1*l,t+-y.y1*a,e+y.x*l,t+-y.y*a):y.type==="C"?f.curveTo(e+y.x1*l,t+-y.y1*a,e+y.x2*l,t+-y.y2*a,e+y.x*l,t+-y.y*a):y.type==="Z"&&f.closePath()}return f};Glyph.prototype.getContours=function(){if(this.points===void 0)return[];const e=[];let t=[];for(let n=0;n<this.points.length;n+=1){const r=this.points[n];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return check.argument(t.length===0,"There are still points left in the current contour."),e};Glyph.prototype.getMetrics=function(){const e=this.path.commands,t=[],n=[];for(let i=0;i<e.length;i+=1){const o=e[i];o.type!=="Z"&&(t.push(o.x),n.push(o.y)),(o.type==="Q"||o.type==="C")&&(t.push(o.x1),n.push(o.y1)),o.type==="C"&&(t.push(o.x2),n.push(o.y2))}const r={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(r.xMin)||(r.xMin=0),isFinite(r.xMax)||(r.xMax=this.advanceWidth),isFinite(r.yMin)||(r.yMin=0),isFinite(r.yMax)||(r.yMax=0),r.rightSideBearing=this.advanceWidth-r.leftSideBearing-(r.xMax-r.xMin),r};Glyph.prototype.draw=function(e,t,n,r,i){this.getPath(t,n,r,i).draw(e)};Glyph.prototype.drawPoints=function(e,t,n,r){function i(f,g,y,T){const x=Math.PI*2;e.beginPath();for(let b=0;b<f.length;b+=1)e.moveTo(g+f[b].x*T,y+f[b].y*T),e.arc(g+f[b].x*T,y+f[b].y*T,2,0,x,!1);e.closePath(),e.fill()}t=t!==void 0?t:0,n=n!==void 0?n:0,r=r!==void 0?r:24;const o=1/this.path.unitsPerEm*r,s=[],l=[],a=this.path;for(let f=0;f<a.commands.length;f+=1){const g=a.commands[f];g.x!==void 0&&s.push({x:g.x,y:-g.y}),g.x1!==void 0&&l.push({x:g.x1,y:-g.y1}),g.x2!==void 0&&l.push({x:g.x2,y:-g.y2})}e.fillStyle="blue",i(s,t,n,o),e.fillStyle="red",i(l,t,n,o)};Glyph.prototype.drawMetrics=function(e,t,n,r){let i;t=t!==void 0?t:0,n=n!==void 0?n:0,r=r!==void 0?r:24,i=1/this.path.unitsPerEm*r,e.lineWidth=1,e.strokeStyle="black",draw.line(e,t,-1e4,t,1e4),draw.line(e,-1e4,n,1e4,n);const o=this.xMin||0;let s=this.yMin||0;const l=this.xMax||0;let a=this.yMax||0;const f=this.advanceWidth||0;e.strokeStyle="blue",draw.line(e,t+o*i,-1e4,t+o*i,1e4),draw.line(e,t+l*i,-1e4,t+l*i,1e4),draw.line(e,-1e4,n+-s*i,1e4,n+-s*i),draw.line(e,-1e4,n+-a*i,1e4,n+-a*i),e.strokeStyle="green",draw.line(e,t+f*i,-1e4,t+f*i,1e4)};function defineDependentProperty(e,t,n){Object.defineProperty(e,t,{get:function(){return e.path,e[n]},set:function(r){e[n]=r},enumerable:!0,configurable:!0})}function GlyphSet(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(let n=0;n<t.length;n++)this.glyphs[n]=t[n];this.length=t&&t.length||0}GlyphSet.prototype.get=function(e){return typeof this.glyphs[e]=="function"&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]};GlyphSet.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};function glyphLoader(e,t){return new Glyph({index:t,font:e})}function ttfGlyphLoader(e,t,n,r,i,o){return function(){const s=new Glyph({index:t,font:e});return s.path=function(){n(s,r,i);const l=o(e.glyphs,s);return l.unitsPerEm=e.unitsPerEm,l},defineDependentProperty(s,"xMin","_xMin"),defineDependentProperty(s,"xMax","_xMax"),defineDependentProperty(s,"yMin","_yMin"),defineDependentProperty(s,"yMax","_yMax"),s}}function cffGlyphLoader(e,t,n,r){return function(){const i=new Glyph({index:t,font:e});return i.path=function(){const o=n(e,i,r);return o.unitsPerEm=e.unitsPerEm,o},i}}const glyphset={GlyphSet,glyphLoader,ttfGlyphLoader,cffGlyphLoader};function equals(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(!equals(e[n],t[n]))return!1;return!0}else return!1}function calcCFFSubroutineBias(e){let t;return e.length<1240?t=107:e.length<33900?t=1131:t=32768,t}function parseCFFIndex(e,t,n){const r=[],i=[],o=parse.getCard16(e,t);let s,l;if(o!==0){const a=parse.getByte(e,t+2);s=t+(o+1)*a+2;let f=t+3;for(let g=0;g<o+1;g+=1)r.push(parse.getOffset(e,f,a)),f+=a;l=s+r[o]}else l=t+2;for(let a=0;a<r.length-1;a+=1){let f=parse.getBytes(e,s+r[a],s+r[a+1]);n&&(f=n(f)),i.push(f)}return{objects:i,startOffset:t,endOffset:l}}function parseFloatOperand(e){let t="";const r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(;;){const i=e.parseByte(),o=i>>4,s=i&15;if(o===15||(t+=r[o],s===15))break;t+=r[s]}return parseFloat(t)}function parseOperand(e,t){let n,r,i,o;if(t===28)return n=e.parseByte(),r=e.parseByte(),n<<8|r;if(t===29)return n=e.parseByte(),r=e.parseByte(),i=e.parseByte(),o=e.parseByte(),n<<24|r<<16|i<<8|o;if(t===30)return parseFloatOperand(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return n=e.parseByte(),(t-247)*256+n+108;if(t>=251&&t<=254)return n=e.parseByte(),-(t-251)*256-n-108;throw new Error("Invalid b0 "+t)}function entriesToObject(e){const t={};for(let n=0;n<e.length;n+=1){const r=e[n][0],i=e[n][1];let o;if(i.length===1?o=i[0]:o=i,t.hasOwnProperty(r)&&!isNaN(t[r]))throw new Error("Object "+t+" already has key "+r);t[r]=o}return t}function parseCFFDict(e,t,n){t=t!==void 0?t:0;const r=new parse.Parser(e,t),i=[];let o=[];for(n=n!==void 0?n:e.length;r.relativeOffset<n;){let s=r.parseByte();s<=21?(s===12&&(s=1200+r.parseByte()),i.push([s,o]),o=[]):o.push(parseOperand(r,s))}return entriesToObject(i)}function getCFFString(e,t){return t<=390?t=cffStandardStrings[t]:t=e[t-391],t}function interpretDict(e,t,n){const r={};let i;for(let o=0;o<t.length;o+=1){const s=t[o];if(Array.isArray(s.type)){const l=[];l.length=s.type.length;for(let a=0;a<s.type.length;a++)i=e[s.op]!==void 0?e[s.op][a]:void 0,i===void 0&&(i=s.value!==void 0&&s.value[a]!==void 0?s.value[a]:null),s.type[a]==="SID"&&(i=getCFFString(n,i)),l[a]=i;r[s.name]=l}else i=e[s.op],i===void 0&&(i=s.value!==void 0?s.value:null),s.type==="SID"&&(i=getCFFString(n,i)),r[s.name]=i}return r}function parseCFFHeader(e,t){const n={};return n.formatMajor=parse.getCard8(e,t),n.formatMinor=parse.getCard8(e,t+1),n.size=parse.getCard8(e,t+2),n.offsetSize=parse.getCard8(e,t+3),n.startOffset=t,n.endOffset=t+4,n}const TOP_DICT_META=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],PRIVATE_DICT_META=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function parseCFFTopDict(e,t){const n=parseCFFDict(e,0,e.byteLength);return interpretDict(n,TOP_DICT_META,t)}function parseCFFPrivateDict(e,t,n,r){const i=parseCFFDict(e,t,n);return interpretDict(i,PRIVATE_DICT_META,r)}function gatherCFFTopDicts(e,t,n,r){const i=[];for(let o=0;o<n.length;o+=1){const s=new DataView(new Uint8Array(n[o]).buffer),l=parseCFFTopDict(s,r);l._subrs=[],l._subrsBias=0;const a=l.private[0],f=l.private[1];if(a!==0&&f!==0){const g=parseCFFPrivateDict(e,f+t,a,r);if(l._defaultWidthX=g.defaultWidthX,l._nominalWidthX=g.nominalWidthX,g.subrs!==0){const y=f+g.subrs,T=parseCFFIndex(e,y+t);l._subrs=T.objects,l._subrsBias=calcCFFSubroutineBias(l._subrs)}l._privateDict=g}i.push(l)}return i}function parseCFFCharset(e,t,n,r){let i,o;const s=new parse.Parser(e,t);n-=1;const l=[".notdef"],a=s.parseCard8();if(a===0)for(let f=0;f<n;f+=1)i=s.parseSID(),l.push(getCFFString(r,i));else if(a===1)for(;l.length<=n;){i=s.parseSID(),o=s.parseCard8();for(let f=0;f<=o;f+=1)l.push(getCFFString(r,i)),i+=1}else if(a===2)for(;l.length<=n;){i=s.parseSID(),o=s.parseCard16();for(let f=0;f<=o;f+=1)l.push(getCFFString(r,i)),i+=1}else throw new Error("Unknown charset format "+a);return l}function parseCFFEncoding(e,t,n){let r;const i={},o=new parse.Parser(e,t),s=o.parseCard8();if(s===0){const l=o.parseCard8();for(let a=0;a<l;a+=1)r=o.parseCard8(),i[r]=a}else if(s===1){const l=o.parseCard8();r=1;for(let a=0;a<l;a+=1){const f=o.parseCard8(),g=o.parseCard8();for(let y=f;y<=f+g;y+=1)i[y]=r,r+=1}}else throw new Error("Unknown encoding format "+s);return new CffEncoding(i,n)}function parseCFFCharstring(e,t,n){let r,i,o,s;const l=new Path,a=[];let f=0,g=!1,y=!1,T=0,x=0,b,d,u,p;if(e.isCIDFont){const E=e.tables.cff.topDict._fdSelect[t.index],A=e.tables.cff.topDict._fdArray[E];b=A._subrs,d=A._subrsBias,u=A._defaultWidthX,p=A._nominalWidthX}else b=e.tables.cff.topDict._subrs,d=e.tables.cff.topDict._subrsBias,u=e.tables.cff.topDict._defaultWidthX,p=e.tables.cff.topDict._nominalWidthX;let c=u;function h(E,A){y&&l.closePath(),l.moveTo(E,A),y=!0}function m(){let E;E=a.length%2!==0,E&&!g&&(c=a.shift()+p),f+=a.length>>1,a.length=0,g=!0}function v(E){let A,S,C,O,R,w,P,F,D,L,B,G,_=0;for(;_<E.length;){let q=E[_];switch(_+=1,q){case 1:m();break;case 3:m();break;case 4:a.length>1&&!g&&(c=a.shift()+p,g=!0),x+=a.pop(),h(T,x);break;case 5:for(;a.length>0;)T+=a.shift(),x+=a.shift(),l.lineTo(T,x);break;case 6:for(;a.length>0&&(T+=a.shift(),l.lineTo(T,x),a.length!==0);)x+=a.shift(),l.lineTo(T,x);break;case 7:for(;a.length>0&&(x+=a.shift(),l.lineTo(T,x),a.length!==0);)T+=a.shift(),l.lineTo(T,x);break;case 8:for(;a.length>0;)r=T+a.shift(),i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),T=o+a.shift(),x=s+a.shift(),l.curveTo(r,i,o,s,T,x);break;case 10:R=a.pop()+d,w=b[R],w&&v(w);break;case 11:return;case 12:switch(q=E[_],_+=1,q){case 35:r=T+a.shift(),i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),P=o+a.shift(),F=s+a.shift(),D=P+a.shift(),L=F+a.shift(),B=D+a.shift(),G=L+a.shift(),T=B+a.shift(),x=G+a.shift(),a.shift(),l.curveTo(r,i,o,s,P,F),l.curveTo(D,L,B,G,T,x);break;case 34:r=T+a.shift(),i=x,o=r+a.shift(),s=i+a.shift(),P=o+a.shift(),F=s,D=P+a.shift(),L=s,B=D+a.shift(),G=x,T=B+a.shift(),l.curveTo(r,i,o,s,P,F),l.curveTo(D,L,B,G,T,x);break;case 36:r=T+a.shift(),i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),P=o+a.shift(),F=s,D=P+a.shift(),L=s,B=D+a.shift(),G=L+a.shift(),T=B+a.shift(),l.curveTo(r,i,o,s,P,F),l.curveTo(D,L,B,G,T,x);break;case 37:r=T+a.shift(),i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),P=o+a.shift(),F=s+a.shift(),D=P+a.shift(),L=F+a.shift(),B=D+a.shift(),G=L+a.shift(),Math.abs(B-T)>Math.abs(G-x)?T=B+a.shift():x=G+a.shift(),l.curveTo(r,i,o,s,P,F),l.curveTo(D,L,B,G,T,x);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+q),a.length=0}break;case 14:a.length>0&&!g&&(c=a.shift()+p,g=!0),y&&(l.closePath(),y=!1);break;case 18:m();break;case 19:case 20:m(),_+=f+7>>3;break;case 21:a.length>2&&!g&&(c=a.shift()+p,g=!0),x+=a.pop(),T+=a.pop(),h(T,x);break;case 22:a.length>1&&!g&&(c=a.shift()+p,g=!0),T+=a.pop(),h(T,x);break;case 23:m();break;case 24:for(;a.length>2;)r=T+a.shift(),i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),T=o+a.shift(),x=s+a.shift(),l.curveTo(r,i,o,s,T,x);T+=a.shift(),x+=a.shift(),l.lineTo(T,x);break;case 25:for(;a.length>6;)T+=a.shift(),x+=a.shift(),l.lineTo(T,x);r=T+a.shift(),i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),T=o+a.shift(),x=s+a.shift(),l.curveTo(r,i,o,s,T,x);break;case 26:for(a.length%2&&(T+=a.shift());a.length>0;)r=T,i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),T=o,x=s+a.shift(),l.curveTo(r,i,o,s,T,x);break;case 27:for(a.length%2&&(x+=a.shift());a.length>0;)r=T+a.shift(),i=x,o=r+a.shift(),s=i+a.shift(),T=o+a.shift(),x=s,l.curveTo(r,i,o,s,T,x);break;case 28:A=E[_],S=E[_+1],a.push((A<<24|S<<16)>>16),_+=2;break;case 29:R=a.pop()+e.gsubrsBias,w=e.gsubrs[R],w&&v(w);break;case 30:for(;a.length>0&&(r=T,i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),T=o+a.shift(),x=s+(a.length===1?a.shift():0),l.curveTo(r,i,o,s,T,x),a.length!==0);)r=T+a.shift(),i=x,o=r+a.shift(),s=i+a.shift(),x=s+a.shift(),T=o+(a.length===1?a.shift():0),l.curveTo(r,i,o,s,T,x);break;case 31:for(;a.length>0&&(r=T+a.shift(),i=x,o=r+a.shift(),s=i+a.shift(),x=s+a.shift(),T=o+(a.length===1?a.shift():0),l.curveTo(r,i,o,s,T,x),a.length!==0);)r=T,i=x+a.shift(),o=r+a.shift(),s=i+a.shift(),T=o+a.shift(),x=s+(a.length===1?a.shift():0),l.curveTo(r,i,o,s,T,x);break;default:q<32?console.log("Glyph "+t.index+": unknown operator "+q):q<247?a.push(q-139):q<251?(A=E[_],_+=1,a.push((q-247)*256+A+108)):q<255?(A=E[_],_+=1,a.push(-(q-251)*256-A-108)):(A=E[_],S=E[_+1],C=E[_+2],O=E[_+3],_+=4,a.push((A<<24|S<<16|C<<8|O)/65536))}}}return v(n),t.advanceWidth=c,l}function parseCFFFDSelect(e,t,n,r){const i=[];let o;const s=new parse.Parser(e,t),l=s.parseCard8();if(l===0)for(let a=0;a<n;a++){if(o=s.parseCard8(),o>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+r+")");i.push(o)}else if(l===3){const a=s.parseCard16();let f=s.parseCard16();if(f!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+f);let g;for(let y=0;y<a;y++){if(o=s.parseCard8(),g=s.parseCard16(),o>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+r+")");if(g>n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+g);for(;f<g;f++)i.push(o);f=g}if(g!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+g)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+l);return i}function parseCFFTable(e,t,n){n.tables.cff={};const r=parseCFFHeader(e,t),i=parseCFFIndex(e,r.endOffset,parse.bytesToString),o=parseCFFIndex(e,i.endOffset),s=parseCFFIndex(e,o.endOffset,parse.bytesToString),l=parseCFFIndex(e,s.endOffset);n.gsubrs=l.objects,n.gsubrsBias=calcCFFSubroutineBias(n.gsubrs);const a=gatherCFFTopDicts(e,t,o.objects,s.objects);if(a.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+a.length);const f=a[0];if(n.tables.cff.topDict=f,f._privateDict&&(n.defaultWidthX=f._privateDict.defaultWidthX,n.nominalWidthX=f._privateDict.nominalWidthX),f.ros[0]!==void 0&&f.ros[1]!==void 0&&(n.isCIDFont=!0),n.isCIDFont){let b=f.fdArray,d=f.fdSelect;if(b===0||d===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");b+=t;const u=parseCFFIndex(e,b),p=gatherCFFTopDicts(e,t,u.objects,s.objects);f._fdArray=p,d+=t,f._fdSelect=parseCFFFDSelect(e,d,n.numGlyphs,p.length)}const g=t+f.private[1],y=parseCFFPrivateDict(e,g,f.private[0],s.objects);if(n.defaultWidthX=y.defaultWidthX,n.nominalWidthX=y.nominalWidthX,y.subrs!==0){const b=g+y.subrs,d=parseCFFIndex(e,b);n.subrs=d.objects,n.subrsBias=calcCFFSubroutineBias(n.subrs)}else n.subrs=[],n.subrsBias=0;const T=parseCFFIndex(e,t+f.charStrings);n.nGlyphs=T.objects.length;const x=parseCFFCharset(e,t+f.charset,n.nGlyphs,s.objects);f.encoding===0?n.cffEncoding=new CffEncoding(cffStandardEncoding,x):f.encoding===1?n.cffEncoding=new CffEncoding(cffExpertEncoding,x):n.cffEncoding=parseCFFEncoding(e,t+f.encoding,x),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new glyphset.GlyphSet(n);for(let b=0;b<n.nGlyphs;b+=1){const d=T.objects[b];n.glyphs.push(b,glyphset.cffGlyphLoader(n,b,parseCFFCharstring,d))}}function encodeString(e,t){let n,r=cffStandardStrings.indexOf(e);return r>=0&&(n=r),r=t.indexOf(e),r>=0?n=r+cffStandardStrings.length:(n=cffStandardStrings.length+t.length,t.push(e)),n}function makeHeader(){return new table.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function makeNameIndex(e){const t=new table.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(let n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}function makeDict(e,t,n){const r={};for(let i=0;i<e.length;i+=1){const o=e[i];let s=t[o.name];s!==void 0&&!equals(s,o.value)&&(o.type==="SID"&&(s=encodeString(s,n)),r[o.op]={name:o.name,type:o.type,value:s})}return r}function makeTopDict(e,t){const n=new table.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=makeDict(TOP_DICT_META,e,t),n}function makeTopDictIndex(e){const t=new table.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function makeStringIndex(e){const t=new table.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(let n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}function makeGlobalSubrIndex(){return new table.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function makeCharsets(e,t){const n=new table.Record("Charsets",[{name:"format",type:"Card8",value:0}]);for(let r=0;r<e.length;r+=1){const i=e[r],o=encodeString(i,t);n.fields.push({name:"glyph_"+r,type:"SID",value:o})}return n}function glyphToOps(e){const t=[],n=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});let r=0,i=0;for(let o=0;o<n.commands.length;o+=1){let s,l,a=n.commands[o];if(a.type==="Q"){const f=.3333333333333333,g=2/3;a={type:"C",x:a.x,y:a.y,x1:f*r+g*a.x1,y1:f*i+g*a.y1,x2:f*a.x+g*a.x1,y2:f*a.y+g*a.y1}}if(a.type==="M")s=Math.round(a.x-r),l=Math.round(a.y-i),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:l}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(a.x),i=Math.round(a.y);else if(a.type==="L")s=Math.round(a.x-r),l=Math.round(a.y-i),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:l}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(a.x),i=Math.round(a.y);else if(a.type==="C"){const f=Math.round(a.x1-r),g=Math.round(a.y1-i),y=Math.round(a.x2-a.x1),T=Math.round(a.y2-a.y1);s=Math.round(a.x-a.x2),l=Math.round(a.y-a.y2),t.push({name:"dx1",type:"NUMBER",value:f}),t.push({name:"dy1",type:"NUMBER",value:g}),t.push({name:"dx2",type:"NUMBER",value:y}),t.push({name:"dy2",type:"NUMBER",value:T}),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:l}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(a.x),i=Math.round(a.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}function makeCharStringsIndex(e){const t=new table.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(let n=0;n<e.length;n+=1){const r=e.get(n),i=glyphToOps(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:i})}return t}function makePrivateDict(e,t){const n=new table.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=makeDict(PRIVATE_DICT_META,e,t),n}function makeCFFTable(e,t){const n=new table.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),r=1/t.unitsPerEm,i={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o={},s=[];let l;for(let y=1;y<e.length;y+=1)l=e.get(y),s.push(l.name);const a=[];n.header=makeHeader(),n.nameIndex=makeNameIndex([t.postScriptName]);let f=makeTopDict(i,a);n.topDictIndex=makeTopDictIndex(f),n.globalSubrIndex=makeGlobalSubrIndex(),n.charsets=makeCharsets(s,a),n.charStringsIndex=makeCharStringsIndex(e),n.privateDict=makePrivateDict(o,a),n.stringIndex=makeStringIndex(a);const g=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return i.charset=g,i.encoding=0,i.charStrings=i.charset+n.charsets.sizeOf(),i.private[1]=i.charStrings+n.charStringsIndex.sizeOf(),f=makeTopDict(i,a),n.topDictIndex=makeTopDictIndex(f),n}const cff={parse:parseCFFTable,make:makeCFFTable};function parseHeadTable(e,t){const n={},r=new parse.Parser(e,t);return n.version=r.parseVersion(),n.fontRevision=Math.round(r.parseFixed()*1e3)/1e3,n.checkSumAdjustment=r.parseULong(),n.magicNumber=r.parseULong(),check.argument(n.magicNumber===1594834165,"Font header has wrong magic number."),n.flags=r.parseUShort(),n.unitsPerEm=r.parseUShort(),n.created=r.parseLongDateTime(),n.modified=r.parseLongDateTime(),n.xMin=r.parseShort(),n.yMin=r.parseShort(),n.xMax=r.parseShort(),n.yMax=r.parseShort(),n.macStyle=r.parseUShort(),n.lowestRecPPEM=r.parseUShort(),n.fontDirectionHint=r.parseShort(),n.indexToLocFormat=r.parseShort(),n.glyphDataFormat=r.parseShort(),n}function makeHeadTable(e){const t=Math.round(new Date().getTime()/1e3)+2082844800;let n=t;return e.createdTimestamp&&(n=e.createdTimestamp+2082844800),new table.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}const head={parse:parseHeadTable,make:makeHeadTable};function parseHheaTable(e,t){const n={},r=new parse.Parser(e,t);return n.version=r.parseVersion(),n.ascender=r.parseShort(),n.descender=r.parseShort(),n.lineGap=r.parseShort(),n.advanceWidthMax=r.parseUShort(),n.minLeftSideBearing=r.parseShort(),n.minRightSideBearing=r.parseShort(),n.xMaxExtent=r.parseShort(),n.caretSlopeRise=r.parseShort(),n.caretSlopeRun=r.parseShort(),n.caretOffset=r.parseShort(),r.relativeOffset+=8,n.metricDataFormat=r.parseShort(),n.numberOfHMetrics=r.parseUShort(),n}function makeHheaTable(e){return new table.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}const hhea={parse:parseHheaTable,make:makeHheaTable};function parseHmtxTable(e,t,n,r,i){let o,s;const l=new parse.Parser(e,t);for(let a=0;a<r;a+=1){a<n&&(o=l.parseUShort(),s=l.parseShort());const f=i.get(a);f.advanceWidth=o,f.leftSideBearing=s}}function makeHmtxTable(e){const t=new table.Table("hmtx",[]);for(let n=0;n<e.length;n+=1){const r=e.get(n),i=r.advanceWidth||0,o=r.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:i}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:o})}return t}const hmtx={parse:parseHmtxTable,make:makeHmtxTable};function makeLtagTable(e){const t=new table.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]);let n="";const r=12+e.length*4;for(let i=0;i<e.length;++i){let o=n.indexOf(e[i]);o<0&&(o=n.length,n+=e[i]),t.fields.push({name:"offset "+i,type:"USHORT",value:r+o}),t.fields.push({name:"length "+i,type:"USHORT",value:e[i].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t}function parseLtagTable(e,t){const n=new parse.Parser(e,t),r=n.parseULong();check.argument(r===1,"Unsupported ltag table version."),n.skip("uLong",1);const i=n.parseULong(),o=[];for(let s=0;s<i;s++){let l="";const a=t+n.parseUShort(),f=n.parseUShort();for(let g=a;g<a+f;++g)l+=String.fromCharCode(e.getInt8(g));o.push(l)}return o}const ltag={make:makeLtagTable,parse:parseLtagTable};function parseMaxpTable(e,t){const n={},r=new parse.Parser(e,t);return n.version=r.parseVersion(),n.numGlyphs=r.parseUShort(),n.version===1&&(n.maxPoints=r.parseUShort(),n.maxContours=r.parseUShort(),n.maxCompositePoints=r.parseUShort(),n.maxCompositeContours=r.parseUShort(),n.maxZones=r.parseUShort(),n.maxTwilightPoints=r.parseUShort(),n.maxStorage=r.parseUShort(),n.maxFunctionDefs=r.parseUShort(),n.maxInstructionDefs=r.parseUShort(),n.maxStackElements=r.parseUShort(),n.maxSizeOfInstructions=r.parseUShort(),n.maxComponentElements=r.parseUShort(),n.maxComponentDepth=r.parseUShort()),n}function makeMaxpTable(e){return new table.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}const maxp={parse:parseMaxpTable,make:makeMaxpTable},nameTableNames=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],macLanguages={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},macLanguageToScript={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},windowsLanguages={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function getLanguageCode(e,t,n){switch(e){case 0:if(t===65535)return"und";if(n)return n[t];break;case 1:return macLanguages[t];case 3:return windowsLanguages[t]}}const utf16="utf-16",macScriptEncodings={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},macLanguageEncodings={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function getEncoding(e,t,n){switch(e){case 0:return utf16;case 1:return macLanguageEncodings[n]||macScriptEncodings[t];case 3:if(t===1||t===10)return utf16;break}}function parseNameTable(e,t,n){const r={},i=new parse.Parser(e,t),o=i.parseUShort(),s=i.parseUShort(),l=i.offset+i.parseUShort();for(let a=0;a<s;a++){const f=i.parseUShort(),g=i.parseUShort(),y=i.parseUShort(),T=i.parseUShort(),x=nameTableNames[T]||T,b=i.parseUShort(),d=i.parseUShort(),u=getLanguageCode(f,y,n),p=getEncoding(f,g,y);if(p!==void 0&&u!==void 0){let c;if(p===utf16?c=decode.UTF16(e,l+d,b):c=decode.MACSTRING(e,l+d,b,p),c){let h=r[x];h===void 0&&(h=r[x]={}),h[u]=c}}}return o===1&&i.parseUShort(),r}function reverseDict(e){const t={};for(let n in e)t[e[n]]=parseInt(n);return t}function makeNameRecord(e,t,n,r,i,o){return new table.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:o}])}function findSubArray(e,t){const n=e.length,r=t.length-n+1;e:for(let i=0;i<r;i++)for(;i<r;i++){for(let o=0;o<n;o++)if(t[i+o]!==e[o])continue e;return i}return-1}function addStringToPool(e,t){let n=findSubArray(e,t);if(n<0){n=t.length;let r=0;const i=e.length;for(;r<i;++r)t.push(e[r])}return n}function makeNameTable(e,t){let n;const r=[],i={},o=reverseDict(nameTableNames);for(let y in e){let T=o[y];if(T===void 0&&(T=y),n=parseInt(T),isNaN(n))throw new Error('Name table entry "'+y+'" does not exist, see nameTableNames for complete list.');i[n]=e[y],r.push(n)}const s=reverseDict(macLanguages),l=reverseDict(windowsLanguages),a=[],f=[];for(let y=0;y<r.length;y++){n=r[y];const T=i[n];for(let x in T){const b=T[x];let d=1,u=s[x],p=macLanguageToScript[u];const c=getEncoding(d,p,u);let h=encode.MACSTRING(b,c);h===void 0&&(d=0,u=t.indexOf(x),u<0&&(u=t.length,t.push(x)),p=4,h=encode.UTF16(b));const m=addStringToPool(h,f);a.push(makeNameRecord(d,p,u,n,h.length,m));const v=l[x];if(v!==void 0){const E=encode.UTF16(b),A=addStringToPool(E,f);a.push(makeNameRecord(3,1,v,n,E.length,A))}}}a.sort(function(y,T){return y.platformID-T.platformID||y.encodingID-T.encodingID||y.languageID-T.languageID||y.nameID-T.nameID});const g=new table.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:a.length},{name:"stringOffset",type:"USHORT",value:6+a.length*12}]);for(let y=0;y<a.length;y++)g.fields.push({name:"record_"+y,type:"RECORD",value:a[y]});return g.fields.push({name:"strings",type:"LITERAL",value:f}),g}const _name={parse:parseNameTable,make:makeNameTable},unicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function getUnicodeRange(e){for(let t=0;t<unicodeRanges.length;t+=1){const n=unicodeRanges[t];if(e>=n.begin&&e<n.end)return t}return-1}function parseOS2Table(e,t){const n={},r=new parse.Parser(e,t);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(let i=0;i<10;i++)n.panose[i]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),n.version>=1&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),n.version>=2&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n}function makeOS2Table(e){return new table.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}const os2={parse:parseOS2Table,make:makeOS2Table,unicodeRanges,getUnicodeRange};function parsePostTable(e,t){const n={},r=new parse.Parser(e,t);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=standardNames.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(let i=0;i<n.numberOfGlyphs;i++)n.glyphNameIndex[i]=r.parseUShort();n.names=[];for(let i=0;i<n.numberOfGlyphs;i++)if(n.glyphNameIndex[i]>=standardNames.length){const o=r.parseChar();n.names.push(r.parseString(o))}break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(let i=0;i<n.numberOfGlyphs;i++)n.offset[i]=r.parseChar();break}return n}function makePostTable(){return new table.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}const post={parse:parsePostTable,make:makePostTable},subtableParsers=new Array(9);subtableParsers[1]=function e(){const t=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:1,coverage:this.parsePointer(Parser.coverage),deltaGlyphId:this.parseUShort()};if(n===2)return{substFormat:2,coverage:this.parsePointer(Parser.coverage),substitute:this.parseOffset16List()};check.assert(!1,"0x"+t.toString(16)+": lookup type 1 format must be 1 or 2.")};subtableParsers[2]=function e(){const t=this.parseUShort();return check.argument(t===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(Parser.coverage),sequences:this.parseListOfLists()}};subtableParsers[3]=function e(){const t=this.parseUShort();return check.argument(t===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(Parser.coverage),alternateSets:this.parseListOfLists()}};subtableParsers[4]=function e(){const t=this.parseUShort();return check.argument(t===1,"GSUB ligature table identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(Parser.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};const lookupRecordDesc={sequenceIndex:Parser.uShort,lookupListIndex:Parser.uShort};subtableParsers[5]=function e(){const t=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:n,coverage:this.parsePointer(Parser.coverage),ruleSets:this.parseListOfLists(function(){const r=this.parseUShort(),i=this.parseUShort();return{input:this.parseUShortList(r-1),lookupRecords:this.parseRecordList(i,lookupRecordDesc)}})};if(n===2)return{substFormat:n,coverage:this.parsePointer(Parser.coverage),classDef:this.parsePointer(Parser.classDef),classSets:this.parseListOfLists(function(){const r=this.parseUShort(),i=this.parseUShort();return{classes:this.parseUShortList(r-1),lookupRecords:this.parseRecordList(i,lookupRecordDesc)}})};if(n===3){const r=this.parseUShort(),i=this.parseUShort();return{substFormat:n,coverages:this.parseList(r,Parser.pointer(Parser.coverage)),lookupRecords:this.parseRecordList(i,lookupRecordDesc)}}check.assert(!1,"0x"+t.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};subtableParsers[6]=function e(){const t=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:1,coverage:this.parsePointer(Parser.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})};if(n===2)return{substFormat:2,coverage:this.parsePointer(Parser.coverage),backtrackClassDef:this.parsePointer(Parser.classDef),inputClassDef:this.parsePointer(Parser.classDef),lookaheadClassDef:this.parsePointer(Parser.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})};if(n===3)return{substFormat:3,backtrackCoverage:this.parseList(Parser.pointer(Parser.coverage)),inputCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookaheadCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookupRecords:this.parseRecordList(lookupRecordDesc)};check.assert(!1,"0x"+t.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};subtableParsers[7]=function e(){const t=this.parseUShort();check.argument(t===1,"GSUB Extension Substitution subtable identifier-format must be 1");const n=this.parseUShort(),r=new Parser(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:n,extension:subtableParsers[n].call(r)}};subtableParsers[8]=function e(){const t=this.parseUShort();return check.argument(t===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(Parser.coverage),backtrackCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookaheadCoverage:this.parseList(Parser.pointer(Parser.coverage)),substitutes:this.parseUShortList()}};function parseGsubTable(e,t){t=t||0;const n=new Parser(e,t),r=n.parseVersion();return check.argument(r===1,"Unsupported GSUB table version."),{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(subtableParsers)}}const subtableMakers=new Array(9);subtableMakers[1]=function e(t){return t.substFormat===1?new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(t.coverage)},{name:"deltaGlyphID",type:"USHORT",value:t.deltaGlyphId}]):new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new table.Coverage(t.coverage)}].concat(table.ushortList("substitute",t.substitute)))};subtableMakers[3]=function e(t){return check.assert(t.substFormat===1,"Lookup type 3 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(t.coverage)}].concat(table.tableList("altSet",t.alternateSets,function(n){return new table.Table("alternateSetTable",table.ushortList("alternate",n))})))};subtableMakers[4]=function e(t){return check.assert(t.substFormat===1,"Lookup type 4 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(t.coverage)}].concat(table.tableList("ligSet",t.ligatureSets,function(n){return new table.Table("ligatureSetTable",table.tableList("ligature",n,function(r){return new table.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:r.ligGlyph}].concat(table.ushortList("component",r.components,r.components.length+1)))}))})))};function makeGsubTable(e){return new table.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new table.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new table.LookupList(e.lookups,subtableMakers)}])}const gsub={parse:parseGsubTable,make:makeGsubTable};function parseMetaTable(e,t){const n=new parse.Parser(e,t),r=n.parseULong();check.argument(r===1,"Unsupported META table version."),n.parseULong(),n.parseULong();const i=n.parseULong(),o={};for(let s=0;s<i;s++){const l=n.parseTag(),a=n.parseULong(),f=n.parseULong(),g=decode.UTF8(e,t+a,f);o[l]=g}return o}function makeMetaTable(e){const t=Object.keys(e).length;let n="";const r=16+t*12,i=new table.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:t}]);for(let o in e){const s=n.length;n+=e[o],i.fields.push({name:"tag "+o,type:"TAG",value:o}),i.fields.push({name:"offset "+o,type:"ULONG",value:r+s}),i.fields.push({name:"length "+o,type:"ULONG",value:e[o].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),i}const meta={parse:parseMetaTable,make:makeMetaTable};function log2(e){return Math.log(e)/Math.log(2)|0}function computeCheckSum(e){for(;e.length%4!==0;)e.push(0);let t=0;for(let n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%=Math.pow(2,32),t}function makeTableRecord(e,t,n,r){return new table.Record("Table Record",[{name:"tag",type:"TAG",value:e!==void 0?e:""},{name:"checkSum",type:"ULONG",value:t!==void 0?t:0},{name:"offset",type:"ULONG",value:n!==void 0?n:0},{name:"length",type:"ULONG",value:r!==void 0?r:0}])}function makeSfntTable(e){const t=new table.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;const n=Math.pow(2,log2(t.numTables));t.searchRange=16*n,t.entrySelector=log2(n),t.rangeShift=t.numTables*16-t.searchRange;const r=[],i=[];let o=t.sizeOf()+makeTableRecord().sizeOf()*t.numTables;for(;o%4!==0;)o+=1,i.push({name:"padding",type:"BYTE",value:0});for(let s=0;s<e.length;s+=1){const l=e[s];check.argument(l.tableName.length===4,"Table name"+l.tableName+" is invalid.");const a=l.sizeOf(),f=makeTableRecord(l.tableName,computeCheckSum(l.encode()),o,a);for(r.push({name:f.tag+" Table Record",type:"RECORD",value:f}),i.push({name:l.tableName+" table",type:"RECORD",value:l}),o+=a,check.argument(!isNaN(o),"Something went wrong calculating the offset.");o%4!==0;)o+=1,i.push({name:"padding",type:"BYTE",value:0})}return r.sort(function(s,l){return s.value.tag>l.value.tag?1:-1}),t.fields=t.fields.concat(r),t.fields=t.fields.concat(i),t}function metricsForChar(e,t,n){for(let r=0;r<t.length;r+=1){const i=e.charToGlyphIndex(t[r]);if(i>0)return e.glyphs.get(i).getMetrics()}return n}function average(e){let t=0;for(let n=0;n<e.length;n+=1)t+=e[n];return t/e.length}function fontToSfntTable(e){const t=[],n=[],r=[],i=[],o=[],s=[],l=[];let a,f=0,g=0,y=0,T=0,x=0;for(let U=0;U<e.glyphs.length;U+=1){const I=e.glyphs.get(U),z=I.unicode|0;if(isNaN(I.advanceWidth))throw new Error("Glyph "+I.name+" ("+U+"): advanceWidth is not a number.");(a>z||a===void 0)&&z>0&&(a=z),f<z&&(f=z);const N=os2.getUnicodeRange(z);if(N<32)g|=1<<N;else if(N<64)y|=1<<N-32;else if(N<96)T|=1<<N-64;else if(N<123)x|=1<<N-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(I.name===".notdef")continue;const j=I.getMetrics();t.push(j.xMin),n.push(j.yMin),r.push(j.xMax),i.push(j.yMax),s.push(j.leftSideBearing),l.push(j.rightSideBearing),o.push(I.advanceWidth)}const b={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:average(o),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,l)};b.ascender=e.ascender,b.descender=e.descender;const d=head.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:b.xMin,yMin:b.yMin,xMax:b.xMax,yMax:b.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),u=hhea.make({ascender:b.ascender,descender:b.descender,advanceWidthMax:b.advanceWidthMax,minLeftSideBearing:b.minLeftSideBearing,minRightSideBearing:b.minRightSideBearing,xMaxExtent:b.maxLeftSideBearing+(b.xMax-b.xMin),numberOfHMetrics:e.glyphs.length}),p=maxp.make(e.glyphs.length),c=os2.make({xAvgCharWidth:Math.round(b.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:a,usLastCharIndex:f,ulUnicodeRange1:g,ulUnicodeRange2:y,ulUnicodeRange3:T,ulUnicodeRange4:x,fsSelection:e.tables.os2.fsSelection,sTypoAscender:b.ascender,sTypoDescender:b.descender,sTypoLineGap:0,usWinAscent:b.yMax,usWinDescent:Math.abs(b.yMin),ulCodePageRange1:1,sxHeight:metricsForChar(e,"xyvw",{yMax:Math.round(b.ascender/2)}).yMax,sCapHeight:metricsForChar(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",b).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),h=hmtx.make(e.glyphs),m=cmap.make(e.glyphs),v=e.getEnglishName("fontFamily"),E=e.getEnglishName("fontSubfamily"),A=v+" "+E;let S=e.getEnglishName("postScriptName");S||(S=v.replace(/\s/g,"")+"-"+E);const C={};for(let U in e.names)C[U]=e.names[U];C.uniqueID||(C.uniqueID={en:e.getEnglishName("manufacturer")+":"+A}),C.postScriptName||(C.postScriptName={en:S}),C.preferredFamily||(C.preferredFamily=e.names.fontFamily),C.preferredSubfamily||(C.preferredSubfamily=e.names.fontSubfamily);const O=[],R=_name.make(C,O),w=O.length>0?ltag.make(O):void 0,P=post.make(),F=cff.make(e.glyphs,{version:e.getEnglishName("version"),fullName:A,familyName:v,weightName:E,postScriptName:S,unitsPerEm:e.unitsPerEm,fontBBox:[0,b.yMin,b.ascender,b.advanceWidthMax]}),D=e.metas&&Object.keys(e.metas).length>0?meta.make(e.metas):void 0,L=[d,u,p,c,R,m,P,F,h];w&&L.push(w),e.tables.gsub&&L.push(gsub.make(e.tables.gsub)),D&&L.push(D);const B=makeSfntTable(L),G=B.encode(),_=computeCheckSum(G),q=B.fields;let k=!1;for(let U=0;U<q.length;U+=1)if(q[U].name==="head table"){q[U].value.checkSumAdjustment=2981146554-_,k=!0;break}if(!k)throw new Error("Could not find head table with checkSum to adjust.");return B}const sfnt={make:makeSfntTable,fontToTable:fontToSfntTable,computeCheckSum};function searchTag(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=n+r>>>1,o=e[i].tag;if(o===t)return i;o<t?n=i+1:r=i-1}return-n-1}function binSearch(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=n+r>>>1,o=e[i];if(o===t)return i;o<t?n=i+1:r=i-1}return-n-1}function Layout(e,t){this.font=e,this.tableName=t}Layout.prototype={searchTag,binSearch,getTable:function(e){let t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){let e=this.getTable();return e?e.scripts.map(function(t){return t.tag}):[]},getDefaultScriptName:function(){let e=this.getTable();if(!e)return;let t=!1;for(let n=0;n<e.scripts.length;n++){const r=e.scripts[n].tag;if(r==="DFLT")return r;r==="latn"&&(t=!0)}if(t)return"latn"},getScriptTable:function(e,t){const n=this.getTable(t);if(n){e=e||"DFLT";const r=n.scripts,i=searchTag(n.scripts,e);if(i>=0)return r[i].script;if(t){const o={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-i,0,o),o.script}}},getLangSysTable:function(e,t,n){const r=this.getScriptTable(e,n);if(r){if(!t||t==="dflt"||t==="DFLT")return r.defaultLangSys;const i=searchTag(r.langSysRecords,t);if(i>=0)return r.langSysRecords[i].langSys;if(n){const o={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-i,0,o),o.langSys}}},getFeatureTable:function(e,t,n,r){const i=this.getLangSysTable(e,t,r);if(i){let o;const s=i.featureIndexes,l=this.font.tables[this.tableName].features;for(let a=0;a<s.length;a++)if(o=l[s[a]],o.tag===n)return o.feature;if(r){const a=l.length;return check.assert(a===0||n>=l[a-1].tag,"Features must be added in alphabetical order."),o={tag:n,feature:{params:0,lookupListIndexes:[]}},l.push(o),s.push(a),o.feature}}},getLookupTables:function(e,t,n,r,i){const o=this.getFeatureTable(e,t,n,i),s=[];if(o){let l;const a=o.lookupListIndexes,f=this.font.tables[this.tableName].lookups;for(let g=0;g<a.length;g++)l=f[a[g]],l.lookupType===r&&s.push(l);if(s.length===0&&i){l={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};const g=f.length;return f.push(l),a.push(g),[l]}}return s},expandCoverage:function(e){if(e.format===1)return e.glyphs;{const t=[],n=e.ranges;for(let r=0;r<n.length;r++){const i=n[r],o=i.start,s=i.end;for(let l=o;l<=s;l++)t.push(l)}return t}}};function Substitution(e){Layout.call(this,e,"gsub")}function arraysEqual(e,t){const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function getSubstFormat(e,t,n){const r=e.subtables;for(let i=0;i<r.length;i++){const o=r[i];if(o.substFormat===t)return o}if(n)return r.push(n),n}Substitution.prototype=Layout.prototype;Substitution.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};Substitution.prototype.getSingle=function(e,t,n){const r=[],i=this.getLookupTables(t,n,e,1);for(let o=0;o<i.length;o++){const s=i[o].subtables;for(let l=0;l<s.length;l++){const a=s[l],f=this.expandCoverage(a.coverage);let g;if(a.substFormat===1){const y=a.deltaGlyphId;for(g=0;g<f.length;g++){const T=f[g];r.push({sub:T,by:T+y})}}else{const y=a.substitute;for(g=0;g<f.length;g++)r.push({sub:f[g],by:y[g]})}}}return r};Substitution.prototype.getAlternates=function(e,t,n){const r=[],i=this.getLookupTables(t,n,e,3);for(let o=0;o<i.length;o++){const s=i[o].subtables;for(let l=0;l<s.length;l++){const a=s[l],f=this.expandCoverage(a.coverage),g=a.alternateSets;for(let y=0;y<f.length;y++)r.push({sub:f[y],by:g[y]})}}return r};Substitution.prototype.getLigatures=function(e,t,n){const r=[],i=this.getLookupTables(t,n,e,4);for(let o=0;o<i.length;o++){const s=i[o].subtables;for(let l=0;l<s.length;l++){const a=s[l],f=this.expandCoverage(a.coverage),g=a.ligatureSets;for(let y=0;y<f.length;y++){const T=f[y],x=g[y];for(let b=0;b<x.length;b++){const d=x[b];r.push({sub:[T].concat(d.components),by:d.ligGlyph})}}}}return r};Substitution.prototype.addSingle=function(e,t,n,r){const i=this.getLookupTables(n,r,e,1,!0)[0],o=getSubstFormat(i,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});check.assert(o.coverage.format===1,"Ligature: unable to modify coverage table format "+o.coverage.format);const s=t.sub;let l=this.binSearch(o.coverage.glyphs,s);l<0&&(l=-1-l,o.coverage.glyphs.splice(l,0,s),o.substitute.splice(l,0,0)),o.substitute[l]=t.by};Substitution.prototype.addAlternate=function(e,t,n,r){const i=this.getLookupTables(n,r,e,3,!0)[0],o=getSubstFormat(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});check.assert(o.coverage.format===1,"Ligature: unable to modify coverage table format "+o.coverage.format);const s=t.sub;let l=this.binSearch(o.coverage.glyphs,s);l<0&&(l=-1-l,o.coverage.glyphs.splice(l,0,s),o.alternateSets.splice(l,0,0)),o.alternateSets[l]=t.by};Substitution.prototype.addLigature=function(e,t,n,r){const i=this.getLookupTables(n,r,e,4,!0)[0];let o=i.subtables[0];o||(o={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},i.subtables[0]=o),check.assert(o.coverage.format===1,"Ligature: unable to modify coverage table format "+o.coverage.format);const s=t.sub[0],l=t.sub.slice(1),a={ligGlyph:t.by,components:l};let f=this.binSearch(o.coverage.glyphs,s);if(f>=0){const g=o.ligatureSets[f];for(let y=0;y<g.length;y++)if(arraysEqual(g[y].components,l))return;g.push(a)}else f=-1-f,o.coverage.glyphs.splice(f,0,s),o.ligatureSets.splice(f,0,[a])};Substitution.prototype.getFeature=function(e,t,n){if(/ss\d\d/.test(e))return this.getSingle(e,t,n);switch(e){case"aalt":case"salt":return this.getSingle(e,t,n).concat(this.getAlternates(e,t,n));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,n)}};Substitution.prototype.add=function(e,t,n,r){if(/ss\d\d/.test(e))return this.addSingle(e,t,n,r);switch(e){case"aalt":case"salt":return typeof t.by=="number"?this.addSingle(e,t,n,r):this.addAlternate(e,t,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,n,r)}};function isBrowser(){return typeof window<"u"}function nodeBufferToArrayBuffer(e){const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;++r)n[r]=e[r];return t}function arrayBufferToNodeBuffer(e){const t=new Buffer(e.byteLength),n=new Uint8Array(e);for(let r=0;r<t.length;++r)t[r]=n[r];return t}function checkArgument(e,t){if(!e)throw t}let instructionTable,exec,execGlyph,execComponent;function Hinting(e){this.font=e,this._fpgmState=this._prepState=void 0,this._errorState=0}function roundOff(e){return e}function roundToGrid(e){return Math.sign(e)*Math.round(Math.abs(e))}function roundToDoubleGrid(e){return Math.sign(e)*Math.round(Math.abs(e*2))/2}function roundToHalfGrid(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function roundUpToGrid(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function roundDownToGrid(e){return Math.sign(e)*Math.floor(Math.abs(e))}const roundSuper=function(e){const t=this.srPeriod;let n=this.srPhase;const r=this.srThreshold;let i=1;return e<0&&(e=-e,i=-1),e+=r-n,e=Math.trunc(e/t)*t,e+=n,i>0&&e<0?n:i<0&&e>0?-n:e*i},xUnitVector={x:1,y:0,axis:"x",distance:function(e,t,n,r){return(n?e.xo:e.x)-(r?t.xo:t.x)},interpolate:function(e,t,n,r){let i,o,s,l,a,f,g;if(!r||r===this){if(i=e.xo-t.xo,o=e.xo-n.xo,a=t.x-t.xo,f=n.x-n.xo,s=Math.abs(i),l=Math.abs(o),g=s+l,g===0){e.x=e.xo+(a+f)/2;return}e.x=e.xo+(a*l+f*s)/g;return}if(i=r.distance(e,t,!0,!0),o=r.distance(e,n,!0,!0),a=r.distance(t,t,!1,!0),f=r.distance(n,n,!1,!0),s=Math.abs(i),l=Math.abs(o),g=s+l,g===0){xUnitVector.setRelative(e,e,(a+f)/2,r,!0);return}xUnitVector.setRelative(e,e,(a*l+f*s)/g,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,n,r,i){if(!r||r===this){e.x=(i?t.xo:t.x)+n;return}const o=i?t.xo:t.x,s=i?t.yo:t.y,l=o+n*r.x,a=s+n*r.y;e.x=l+(e.y-a)/r.normalSlope},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},yUnitVector={x:0,y:1,axis:"y",distance:function(e,t,n,r){return(n?e.yo:e.y)-(r?t.yo:t.y)},interpolate:function(e,t,n,r){let i,o,s,l,a,f,g;if(!r||r===this){if(i=e.yo-t.yo,o=e.yo-n.yo,a=t.y-t.yo,f=n.y-n.yo,s=Math.abs(i),l=Math.abs(o),g=s+l,g===0){e.y=e.yo+(a+f)/2;return}e.y=e.yo+(a*l+f*s)/g;return}if(i=r.distance(e,t,!0,!0),o=r.distance(e,n,!0,!0),a=r.distance(t,t,!1,!0),f=r.distance(n,n,!1,!0),s=Math.abs(i),l=Math.abs(o),g=s+l,g===0){yUnitVector.setRelative(e,e,(a+f)/2,r,!0);return}yUnitVector.setRelative(e,e,(a*l+f*s)/g,r,!0)},normalSlope:0,setRelative:function(e,t,n,r,i){if(!r||r===this){e.y=(i?t.yo:t.y)+n;return}const o=i?t.xo:t.x,s=i?t.yo:t.y,l=o+n*r.x,a=s+n*r.y;e.y=a+r.normalSlope*(e.x-l)},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};Object.freeze(xUnitVector);Object.freeze(yUnitVector);function UnitVector(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}UnitVector.prototype.distance=function(e,t,n,r){return this.x*xUnitVector.distance(e,t,n,r)+this.y*yUnitVector.distance(e,t,n,r)};UnitVector.prototype.interpolate=function(e,t,n,r){let i,o,s,l,a,f,g;if(s=r.distance(e,t,!0,!0),l=r.distance(e,n,!0,!0),i=r.distance(t,t,!1,!0),o=r.distance(n,n,!1,!0),a=Math.abs(s),f=Math.abs(l),g=a+f,g===0){this.setRelative(e,e,(i+o)/2,r,!0);return}this.setRelative(e,e,(i*f+o*a)/g,r,!0)};UnitVector.prototype.setRelative=function(e,t,n,r,i){r=r||this;const o=i?t.xo:t.x,s=i?t.yo:t.y,l=o+n*r.x,a=s+n*r.y,f=r.normalSlope,g=this.slope,y=e.x,T=e.y;e.x=(g*y-f*l+a-T)/(g-f),e.y=g*(e.x-y)+T};UnitVector.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0};function getUnitVector(e,t){const n=Math.sqrt(e*e+t*t);return e/=n,t/=n,e===1&&t===0?xUnitVector:e===0&&t===1?yUnitVector:new UnitVector(e,t)}function HPoint(e,t,n,r){this.x=this.xo=Math.round(e*64)/64,this.y=this.yo=Math.round(t*64)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}HPoint.prototype.nextTouched=function(e){let t=this.nextPointOnContour;for(;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t};HPoint.prototype.prevTouched=function(e){let t=this.prevPointOnContour;for(;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};const HPZero=Object.freeze(new HPoint(0,0)),defaultState$1={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function State(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=xUnitVector,this.round=roundToGrid}}Hinting.prototype.exec=function(e,t){if(typeof t!="number")throw new Error("Point size is not a number!");if(this._errorState>2)return;const n=this.font;let r=this._prepState;if(!r||r.ppem!==t){let i=this._fpgmState;if(!i){State.prototype=defaultState$1,i=this._fpgmState=new State("fpgm",n.tables.fpgm),i.funcs=[],i.font=n,exports.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{exec(i)}catch(s){console.log("Hinting error in FPGM:"+s),this._errorState=3;return}}State.prototype=i,r=this._prepState=new State("prep",n.tables.prep),r.ppem=t;const o=n.tables.cvt;if(o){const s=r.cvt=new Array(o.length),l=t/n.unitsPerEm;for(let a=0;a<o.length;a++)s[a]=o[a]*l}else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{exec(r)}catch(s){this._errorState<2&&console.log("Hinting error in PREP:"+s),this._errorState=2}}if(!(this._errorState>1))try{return execGlyph(e,r)}catch(i){this._errorState<1&&(console.log("Hinting error:"+i),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}};execGlyph=function(e,t){const n=t.ppem/t.font.unitsPerEm,r=n;let i=e.components,o,s,l;if(State.prototype=t,!i)l=new State("glyf",e.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),l.step=-1),execComponent(e,l,n,r),s=l.gZone;else{const a=t.font;s=[],o=[];for(let f=0;f<i.length;f++){const g=i[f],y=a.glyphs.get(g.glyphIndex);l=new State("glyf",y.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+f+"---"),l.step=-1),execComponent(y,l,n,r);const T=Math.round(g.dx*n),x=Math.round(g.dy*r),b=l.gZone,d=l.contours;for(let p=0;p<b.length;p++){const c=b[p];c.xTouched=c.yTouched=!1,c.xo=c.x=c.x+T,c.yo=c.y=c.y+x}const u=s.length;s.push.apply(s,b);for(let p=0;p<d.length;p++)o.push(d[p]+u)}e.instructions&&!l.inhibitGridFit&&(l=new State("glyf",e.instructions),l.gZone=l.z0=l.z1=l.z2=s,l.contours=o,s.push(new HPoint(0,0),new HPoint(Math.round(e.advanceWidth*n),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),l.step=-1),exec(l),s.length-=2)}return s};execComponent=function(e,t,n,r){const i=e.points||[],o=i.length,s=t.gZone=t.z0=t.z1=t.z2=[],l=t.contours=[];let a;for(let y=0;y<o;y++)a=i[y],s[y]=new HPoint(a.x*n,a.y*r,a.lastPointOfContour,a.onCurve);let f,g;for(let y=0;y<o;y++)a=s[y],f||(f=a,l.push(y)),a.lastPointOfContour?(a.nextPointOnContour=f,f.prevPointOnContour=a,f=void 0):(g=s[y+1],a.nextPointOnContour=g,g.prevPointOnContour=a);if(!t.inhibitGridFit&&(s.push(new HPoint(0,0),new HPoint(Math.round(e.advanceWidth*n),0)),exec(t),s.length-=2,exports.DEBUG)){console.log("FINISHED GLYPH",t.stack);for(let y=0;y<o;y++)console.log(y,s[y].x,s[y].y)}};exec=function(e){let t=e.prog;if(!t)return;const n=t.length;let r;for(e.ip=0;e.ip<n;e.ip++){if(exports.DEBUG&&e.step++,r=instructionTable[t[e.ip]],!r)throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));r(e)}};function initTZone(e){const t=e.tZone=new Array(e.gZone.length);for(let n=0;n<t.length;n++)t[n]=new HPoint(0,0)}function skip(e,t){const n=e.prog;let r=e.ip,i=1,o;do if(o=n[++r],o===88)i++;else if(o===89)i--;else if(o===64)r+=n[r+1]+1;else if(o===65)r+=2*n[r+1]+1;else if(o>=176&&o<=183)r+=o-176+1;else if(o>=184&&o<=191)r+=(o-184+1)*2;else if(t&&i===1&&o===27)break;while(i>0);e.ip=r}function SVTCA(e,t){exports.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function SPVTCA(e,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function SFVTCA(e,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function SPVTL(e,t){const n=t.stack,r=n.pop(),i=n.pop(),o=t.z2[r],s=t.z1[i];exports.DEBUG&&console.log("SPVTL["+e+"]",r,i);let l,a;e?(l=o.y-s.y,a=s.x-o.x):(l=s.x-o.x,a=s.y-o.y),t.pv=t.dpv=getUnitVector(l,a)}function SFVTL(e,t){const n=t.stack,r=n.pop(),i=n.pop(),o=t.z2[r],s=t.z1[i];exports.DEBUG&&console.log("SFVTL["+e+"]",r,i);let l,a;e?(l=o.y-s.y,a=s.x-o.x):(l=s.x-o.x,a=s.y-o.y),t.fv=getUnitVector(l,a)}function SPVFS(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.pv=e.dpv=getUnitVector(r,n)}function SFVFS(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.fv=getUnitVector(r,n)}function GPV(e){const t=e.stack,n=e.pv;exports.DEBUG&&console.log(e.step,"GPV[]"),t.push(n.x*16384),t.push(n.y*16384)}function GFV(e){const t=e.stack,n=e.fv;exports.DEBUG&&console.log(e.step,"GFV[]"),t.push(n.x*16384),t.push(n.y*16384)}function SFVTPV(e){e.fv=e.pv,exports.DEBUG&&console.log(e.step,"SFVTPV[]")}function ISECT(e){const t=e.stack,n=t.pop(),r=t.pop(),i=t.pop(),o=t.pop(),s=t.pop(),l=e.z0,a=e.z1,f=l[n],g=l[r],y=a[i],T=a[o],x=e.z2[s];exports.DEBUG&&console.log("ISECT[], ",n,r,i,o,s);const b=f.x,d=f.y,u=g.x,p=g.y,c=y.x,h=y.y,m=T.x,v=T.y,E=(b-u)*(h-v)-(d-p)*(c-m),A=b*p-d*u,S=c*v-h*m;x.x=(A*(c-m)-S*(b-u))/E,x.y=(A*(h-v)-S*(d-p))/E}function SRP0(e){e.rp0=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)}function SRP1(e){e.rp1=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)}function SRP2(e){e.rp2=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)}function SZP0(e){const t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||initTZone(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZP1(e){const t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||initTZone(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZP2(e){const t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||initTZone(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZPS(e){const t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||initTZone(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SLOOP(e){e.loop=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)}function RTG(e){exports.DEBUG&&console.log(e.step,"RTG[]"),e.round=roundToGrid}function RTHG(e){exports.DEBUG&&console.log(e.step,"RTHG[]"),e.round=roundToHalfGrid}function SMD(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64}function ELSE(e){exports.DEBUG&&console.log(e.step,"ELSE[]"),skip(e,!1)}function JMPR(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1}function SCVTCI(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64}function DUP(e){const t=e.stack;exports.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])}function POP(e){exports.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function CLEAR(e){exports.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0}function SWAP(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SWAP[]"),t.push(n),t.push(r)}function DEPTH(e){const t=e.stack;exports.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)}function LOOPCALL(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LOOPCALL[]",n,r);const i=e.ip,o=e.prog;e.prog=e.funcs[n];for(let s=0;s<r;s++)exec(e),exports.DEBUG&&console.log(++e.step,s+1<r?"next loopcall":"done loopcall",s);e.ip=i,e.prog=o}function CALL(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"CALL[]",t);const n=e.ip,r=e.prog;e.prog=e.funcs[t],exec(e),e.ip=n,e.prog=r,exports.DEBUG&&console.log(++e.step,"returning from",t)}function CINDEX(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"CINDEX[]",n),t.push(t[t.length-n])}function MINDEX(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"MINDEX[]",n),t.push(t.splice(t.length-n,1)[0])}function FDEF(e){if(e.env!=="fpgm")throw new Error("FDEF not allowed here");const t=e.stack,n=e.prog;let r=e.ip;const i=t.pop(),o=r;for(exports.DEBUG&&console.log(e.step,"FDEF[]",i);n[++r]!==45;);e.ip=r,e.funcs[i]=n.slice(o+1,r)}function MDAP(e,t){const n=t.stack.pop(),r=t.z0[n],i=t.fv,o=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+e+"]",n);let s=o.distance(r,HPZero);e&&(s=t.round(s)),i.setRelative(r,HPZero,s,o),i.touch(r),t.rp0=t.rp1=n}function IUP(e,t){const n=t.z2,r=n.length-2;let i,o,s;exports.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(let l=0;l<r;l++)i=n[l],!e.touched(i)&&(o=i.prevTouched(e),o!==i&&(s=i.nextTouched(e),o===s&&e.setRelative(i,i,e.distance(o,o,!1,!0),e,!0),e.interpolate(i,o,s,e)))}function SHP(e,t){const n=t.stack,r=e?t.rp1:t.rp2,i=(e?t.z0:t.z1)[r],o=t.fv,s=t.pv;let l=t.loop;const a=t.z2;for(;l--;){const f=n.pop(),g=a[f],y=s.distance(i,i,!1,!0);o.setRelative(g,g,y,s),o.touch(g),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-l)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",f)}t.loop=1}function SHC(e,t){const n=t.stack,r=e?t.rp1:t.rp2,i=(e?t.z0:t.z1)[r],o=t.fv,s=t.pv,l=n.pop(),a=t.z2[t.contours[l]];let f=a;exports.DEBUG&&console.log(t.step,"SHC["+e+"]",l);const g=s.distance(i,i,!1,!0);do f!==i&&o.setRelative(f,f,g,s),f=f.nextPointOnContour;while(f!==a)}function SHZ(e,t){const n=t.stack,r=e?t.rp1:t.rp2,i=(e?t.z0:t.z1)[r],o=t.fv,s=t.pv,l=n.pop();exports.DEBUG&&console.log(t.step,"SHZ["+e+"]",l);let a;switch(l){case 0:a=t.tZone;break;case 1:a=t.gZone;break;default:throw new Error("Invalid zone")}let f;const g=s.distance(i,i,!1,!0),y=a.length-2;for(let T=0;T<y;T++)f=a[T],f!==i&&o.setRelative(f,f,g,s)}function SHPIX(e){const t=e.stack;let n=e.loop;const r=e.fv,i=t.pop()/64,o=e.z2;for(;n--;){const s=t.pop(),l=o[s];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-n)+": ":"")+"SHPIX[]",s,i),r.setRelative(l,l,i),r.touch(l)}e.loop=1}function IP(e){const t=e.stack,n=e.rp1,r=e.rp2;let i=e.loop;const o=e.z0[n],s=e.z1[r],l=e.fv,a=e.dpv,f=e.z2;for(;i--;){const g=t.pop(),y=f[g];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"IP[]",g,n,"<->",r),l.interpolate(y,o,s,a),l.touch(y)}e.loop=1}function MSIRP(e,t){const n=t.stack,r=n.pop()/64,i=n.pop(),o=t.z1[i],s=t.z0[t.rp0],l=t.fv,a=t.pv;l.setRelative(o,s,r,a),l.touch(o),exports.DEBUG&&console.log(t.step,"MSIRP["+e+"]",r,i),t.rp1=t.rp0,t.rp2=i,e&&(t.rp0=i)}function ALIGNRP(e){const t=e.stack,n=e.rp0,r=e.z0[n];let i=e.loop;const o=e.fv,s=e.pv,l=e.z1;for(;i--;){const a=t.pop(),f=l[a];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"ALIGNRP[]",a),o.setRelative(f,r,0,s),o.touch(f)}e.loop=1}function RTDG(e){exports.DEBUG&&console.log(e.step,"RTDG[]"),e.round=roundToDoubleGrid}function MIAP(e,t){const n=t.stack,r=n.pop(),i=n.pop(),o=t.z0[i],s=t.fv,l=t.pv;let a=t.cvt[r];e&&(a=t.round(a)),exports.DEBUG&&console.log(t.step,"MIAP["+e+"]",r,"(",a,")",i),s.setRelative(o,HPZero,a,l),t.zp0===0&&(o.xo=o.x,o.yo=o.y),s.touch(o),t.rp0=t.rp1=i}function NPUSHB(e){const t=e.prog;let n=e.ip;const r=e.stack,i=t[++n];exports.DEBUG&&console.log(e.step,"NPUSHB[]",i);for(let o=0;o<i;o++)r.push(t[++n]);e.ip=n}function NPUSHW(e){let t=e.ip;const n=e.prog,r=e.stack,i=n[++t];exports.DEBUG&&console.log(e.step,"NPUSHW[]",i);for(let o=0;o<i;o++){let s=n[++t]<<8|n[++t];s&32768&&(s=-((s^65535)+1)),r.push(s)}e.ip=t}function WS(e){const t=e.stack;let n=e.store;n||(n=e.store=[]);const r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"WS",r,i),n[i]=r}function RS(e){const t=e.stack,n=e.store,r=t.pop();exports.DEBUG&&console.log(e.step,"RS",r);const i=n&&n[r]||0;t.push(i)}function WCVTP(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTP",n,r),e.cvt[r]=n/64}function RCVT(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"RCVT",n),t.push(e.cvt[n]*64)}function GC(e,t){const n=t.stack,r=n.pop(),i=t.z2[r];exports.DEBUG&&console.log(t.step,"GC["+e+"]",r),n.push(t.dpv.distance(i,HPZero,e,!1)*64)}function MD(e,t){const n=t.stack,r=n.pop(),i=n.pop(),o=t.z1[r],s=t.z0[i],l=t.dpv.distance(s,o,e,e);exports.DEBUG&&console.log(t.step,"MD["+e+"]",r,i,"->",l),t.stack.push(Math.round(l*64))}function MPPEM(e){exports.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)}function FLIPON(e){exports.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0}function LT(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LT[]",n,r),t.push(r<n?1:0)}function LTEQ(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LTEQ[]",n,r),t.push(r<=n?1:0)}function GT(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GT[]",n,r),t.push(r>n?1:0)}function GTEQ(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GTEQ[]",n,r),t.push(r>=n?1:0)}function EQ(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"EQ[]",n,r),t.push(n===r?1:0)}function NEQ(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"NEQ[]",n,r),t.push(n!==r?1:0)}function ODD(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"ODD[]",n),t.push(Math.trunc(n)%2?1:0)}function EVEN(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"EVEN[]",n),t.push(Math.trunc(n)%2?0:1)}function IF(e){let t=e.stack.pop();exports.DEBUG&&console.log(e.step,"IF[]",t),t||(skip(e,!0),exports.DEBUG&&console.log(e.step,"EIF[]"))}function EIF(e){exports.DEBUG&&console.log(e.step,"EIF[]")}function AND(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"AND[]",n,r),t.push(n&&r?1:0)}function OR(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"OR[]",n,r),t.push(n||r?1:0)}function NOT(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"NOT[]",n),t.push(n?0:1)}function DELTAP123(e,t){const n=t.stack,r=n.pop(),i=t.fv,o=t.pv,s=t.ppem,l=t.deltaBase+(e-1)*16,a=t.deltaShift,f=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+e+"]",r,n);for(let g=0;g<r;g++){const y=n.pop(),T=n.pop();if(l+((T&240)>>4)!==s)continue;let b=(T&15)-8;b>=0&&b++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",y,"by",b*a);const d=f[y];i.setRelative(d,d,b*a,o)}}function SDB(e){const n=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDB[]",n),e.deltaBase=n}function SDS(e){const n=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDS[]",n),e.deltaShift=Math.pow(.5,n)}function ADD(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"ADD[]",n,r),t.push(r+n)}function SUB(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SUB[]",n,r),t.push(r-n)}function DIV(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"DIV[]",n,r),t.push(r*64/n)}function MUL(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MUL[]",n,r),t.push(r*n/64)}function ABS(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"ABS[]",n),t.push(Math.abs(n))}function NEG(e){const t=e.stack;let n=t.pop();exports.DEBUG&&console.log(e.step,"NEG[]",n),t.push(-n)}function FLOOR(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"FLOOR[]",n),t.push(Math.floor(n/64)*64)}function CEILING(e){const t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"CEILING[]",n),t.push(Math.ceil(n/64)*64)}function ROUND(e,t){const n=t.stack,r=n.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),n.push(t.round(r/64)*64)}function WCVTF(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTF[]",n,r),e.cvt[r]=n*e.ppem/e.font.unitsPerEm}function DELTAC123(e,t){const n=t.stack,r=n.pop(),i=t.ppem,o=t.deltaBase+(e-1)*16,s=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+e+"]",r,n);for(let l=0;l<r;l++){const a=n.pop(),f=n.pop();if(o+((f&240)>>4)!==i)continue;let y=(f&15)-8;y>=0&&y++;const T=y*s;exports.DEBUG&&console.log(t.step,"DELTACFIX",a,"by",T),t.cvt[a]+=T}}function SROUND(e){let t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SROUND[]",t),e.round=roundSuper;let n;switch(t&192){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=n,t&48){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}t&=15,t===0?e.srThreshold=0:e.srThreshold=(t/8-.5)*n}function S45ROUND(e){let t=e.stack.pop();exports.DEBUG&&console.log(e.step,"S45ROUND[]",t),e.round=roundSuper;let n;switch(t&192){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=n,t&48){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}t&=15,t===0?e.srThreshold=0:e.srThreshold=(t/8-.5)*n}function ROFF(e){exports.DEBUG&&console.log(e.step,"ROFF[]"),e.round=roundOff}function RUTG(e){exports.DEBUG&&console.log(e.step,"RUTG[]"),e.round=roundUpToGrid}function RDTG(e){exports.DEBUG&&console.log(e.step,"RDTG[]"),e.round=roundDownToGrid}function SCANCTRL(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANCTRL[]",t)}function SDPVTL(e,t){const n=t.stack,r=n.pop(),i=n.pop(),o=t.z2[r],s=t.z1[i];exports.DEBUG&&console.log("SDPVTL["+e+"]",r,i);let l,a;e?(l=o.y-s.y,a=s.x-o.x):(l=s.x-o.x,a=s.y-o.y),t.dpv=getUnitVector(l,a)}function GETINFO(e){const t=e.stack,n=t.pop();let r=0;exports.DEBUG&&console.log(e.step,"GETINFO[]",n),n&1&&(r=35),n&32&&(r|=4096),t.push(r)}function ROLL(e){const t=e.stack,n=t.pop(),r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"ROLL[]"),t.push(r),t.push(n),t.push(i)}function MAX(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MAX[]",n,r),t.push(Math.max(r,n))}function MIN(e){const t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MIN[]",n,r),t.push(Math.min(r,n))}function SCANTYPE(e){const t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANTYPE[]",t)}function INSTCTRL(e){const t=e.stack.pop();let n=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"INSTCTRL[]",t,n),t){case 1:e.inhibitGridFit=!!n;return;case 2:e.ignoreCvt=!!n;return;default:throw new Error("invalid INSTCTRL[] selector")}}function PUSHB(e,t){const n=t.stack,r=t.prog;let i=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(let o=0;o<e;o++)n.push(r[++i]);t.ip=i}function PUSHW(e,t){let n=t.ip;const r=t.prog,i=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(let o=0;o<e;o++){let s=r[++n]<<8|r[++n];s&32768&&(s=-((s^65535)+1)),i.push(s)}t.ip=n}function MDRP_MIRP(e,t,n,r,i,o){const s=o.stack,l=e&&s.pop(),a=s.pop(),f=o.rp0,g=o.z0[f],y=o.z1[a],T=o.minDis,x=o.fv,b=o.dpv;let d,u,p,c;u=d=b.distance(y,g,!0,!0),p=u>=0?1:-1,u=Math.abs(u),e&&(c=o.cvt[l],r&&Math.abs(u-c)<o.cvCutIn&&(u=c)),n&&u<T&&(u=T),r&&(u=o.round(u)),x.setRelative(y,g,p*u,b),x.touch(y),exports.DEBUG&&console.log(o.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(n?">":"_")+(r?"R":"_")+(i===0?"Gr":i===1?"Bl":i===2?"Wh":"")+"]",e?l+"("+o.cvt[l]+","+c+")":"",a,"(d =",d,"->",p*u,")"),o.rp1=o.rp0,o.rp2=a,t&&(o.rp0=a)}instructionTable=[SVTCA.bind(void 0,yUnitVector),SVTCA.bind(void 0,xUnitVector),SPVTCA.bind(void 0,yUnitVector),SPVTCA.bind(void 0,xUnitVector),SFVTCA.bind(void 0,yUnitVector),SFVTCA.bind(void 0,xUnitVector),SPVTL.bind(void 0,0),SPVTL.bind(void 0,1),SFVTL.bind(void 0,0),SFVTL.bind(void 0,1),SPVFS,SFVFS,GPV,GFV,SFVTPV,ISECT,SRP0,SRP1,SRP2,SZP0,SZP1,SZP2,SZPS,SLOOP,RTG,RTHG,SMD,ELSE,JMPR,SCVTCI,void 0,void 0,DUP,POP,CLEAR,SWAP,DEPTH,CINDEX,MINDEX,void 0,void 0,void 0,LOOPCALL,CALL,FDEF,void 0,MDAP.bind(void 0,0),MDAP.bind(void 0,1),IUP.bind(void 0,yUnitVector),IUP.bind(void 0,xUnitVector),SHP.bind(void 0,0),SHP.bind(void 0,1),SHC.bind(void 0,0),SHC.bind(void 0,1),SHZ.bind(void 0,0),SHZ.bind(void 0,1),SHPIX,IP,MSIRP.bind(void 0,0),MSIRP.bind(void 0,1),ALIGNRP,RTDG,MIAP.bind(void 0,0),MIAP.bind(void 0,1),NPUSHB,NPUSHW,WS,RS,WCVTP,RCVT,GC.bind(void 0,0),GC.bind(void 0,1),void 0,MD.bind(void 0,0),MD.bind(void 0,1),MPPEM,void 0,FLIPON,void 0,void 0,LT,LTEQ,GT,GTEQ,EQ,NEQ,ODD,EVEN,IF,EIF,AND,OR,NOT,DELTAP123.bind(void 0,1),SDB,SDS,ADD,SUB,DIV,MUL,ABS,NEG,FLOOR,CEILING,ROUND.bind(void 0,0),ROUND.bind(void 0,1),ROUND.bind(void 0,2),ROUND.bind(void 0,3),void 0,void 0,void 0,void 0,WCVTF,DELTAP123.bind(void 0,2),DELTAP123.bind(void 0,3),DELTAC123.bind(void 0,1),DELTAC123.bind(void 0,2),DELTAC123.bind(void 0,3),SROUND,S45ROUND,void 0,void 0,ROFF,void 0,RUTG,RDTG,POP,POP,void 0,void 0,void 0,void 0,void 0,SCANCTRL,SDPVTL.bind(void 0,0),SDPVTL.bind(void 0,1),GETINFO,void 0,ROLL,MAX,MIN,SCANTYPE,INSTCTRL,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,PUSHB.bind(void 0,1),PUSHB.bind(void 0,2),PUSHB.bind(void 0,3),PUSHB.bind(void 0,4),PUSHB.bind(void 0,5),PUSHB.bind(void 0,6),PUSHB.bind(void 0,7),PUSHB.bind(void 0,8),PUSHW.bind(void 0,1),PUSHW.bind(void 0,2),PUSHW.bind(void 0,3),PUSHW.bind(void 0,4),PUSHW.bind(void 0,5),PUSHW.bind(void 0,6),PUSHW.bind(void 0,7),PUSHW.bind(void 0,8),MDRP_MIRP.bind(void 0,0,0,0,0,0),MDRP_MIRP.bind(void 0,0,0,0,0,1),MDRP_MIRP.bind(void 0,0,0,0,0,2),MDRP_MIRP.bind(void 0,0,0,0,0,3),MDRP_MIRP.bind(void 0,0,0,0,1,0),MDRP_MIRP.bind(void 0,0,0,0,1,1),MDRP_MIRP.bind(void 0,0,0,0,1,2),MDRP_MIRP.bind(void 0,0,0,0,1,3),MDRP_MIRP.bind(void 0,0,0,1,0,0),MDRP_MIRP.bind(void 0,0,0,1,0,1),MDRP_MIRP.bind(void 0,0,0,1,0,2),MDRP_MIRP.bind(void 0,0,0,1,0,3),MDRP_MIRP.bind(void 0,0,0,1,1,0),MDRP_MIRP.bind(void 0,0,0,1,1,1),MDRP_MIRP.bind(void 0,0,0,1,1,2),MDRP_MIRP.bind(void 0,0,0,1,1,3),MDRP_MIRP.bind(void 0,0,1,0,0,0),MDRP_MIRP.bind(void 0,0,1,0,0,1),MDRP_MIRP.bind(void 0,0,1,0,0,2),MDRP_MIRP.bind(void 0,0,1,0,0,3),MDRP_MIRP.bind(void 0,0,1,0,1,0),MDRP_MIRP.bind(void 0,0,1,0,1,1),MDRP_MIRP.bind(void 0,0,1,0,1,2),MDRP_MIRP.bind(void 0,0,1,0,1,3),MDRP_MIRP.bind(void 0,0,1,1,0,0),MDRP_MIRP.bind(void 0,0,1,1,0,1),MDRP_MIRP.bind(void 0,0,1,1,0,2),MDRP_MIRP.bind(void 0,0,1,1,0,3),MDRP_MIRP.bind(void 0,0,1,1,1,0),MDRP_MIRP.bind(void 0,0,1,1,1,1),MDRP_MIRP.bind(void 0,0,1,1,1,2),MDRP_MIRP.bind(void 0,0,1,1,1,3),MDRP_MIRP.bind(void 0,1,0,0,0,0),MDRP_MIRP.bind(void 0,1,0,0,0,1),MDRP_MIRP.bind(void 0,1,0,0,0,2),MDRP_MIRP.bind(void 0,1,0,0,0,3),MDRP_MIRP.bind(void 0,1,0,0,1,0),MDRP_MIRP.bind(void 0,1,0,0,1,1),MDRP_MIRP.bind(void 0,1,0,0,1,2),MDRP_MIRP.bind(void 0,1,0,0,1,3),MDRP_MIRP.bind(void 0,1,0,1,0,0),MDRP_MIRP.bind(void 0,1,0,1,0,1),MDRP_MIRP.bind(void 0,1,0,1,0,2),MDRP_MIRP.bind(void 0,1,0,1,0,3),MDRP_MIRP.bind(void 0,1,0,1,1,0),MDRP_MIRP.bind(void 0,1,0,1,1,1),MDRP_MIRP.bind(void 0,1,0,1,1,2),MDRP_MIRP.bind(void 0,1,0,1,1,3),MDRP_MIRP.bind(void 0,1,1,0,0,0),MDRP_MIRP.bind(void 0,1,1,0,0,1),MDRP_MIRP.bind(void 0,1,1,0,0,2),MDRP_MIRP.bind(void 0,1,1,0,0,3),MDRP_MIRP.bind(void 0,1,1,0,1,0),MDRP_MIRP.bind(void 0,1,1,0,1,1),MDRP_MIRP.bind(void 0,1,1,0,1,2),MDRP_MIRP.bind(void 0,1,1,0,1,3),MDRP_MIRP.bind(void 0,1,1,1,0,0),MDRP_MIRP.bind(void 0,1,1,1,0,1),MDRP_MIRP.bind(void 0,1,1,1,0,2),MDRP_MIRP.bind(void 0,1,1,1,0,3),MDRP_MIRP.bind(void 0,1,1,1,1,0),MDRP_MIRP.bind(void 0,1,1,1,1,1),MDRP_MIRP.bind(void 0,1,1,1,1,2),MDRP_MIRP.bind(void 0,1,1,1,1,3)];function Font(e){e=e||{},e.empty||(checkArgument(e.familyName,"When creating a new Font object, familyName is required."),checkArgument(e.styleName,"When creating a new Font object, styleName is required."),checkArgument(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),checkArgument(e.ascender,"When creating a new Font object, ascender is required."),checkArgument(e.descender,"When creating a new Font object, descender is required."),checkArgument(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||e.familyName+e.styleName},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new glyphset.GlyphSet(this,e.glyphs||[]),this.encoding=new DefaultEncoding(this),this.substitution=new Substitution(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new Hinting(this)}})}Font.prototype.hasChar=function(e){return this.encoding.charToGlyphIndex(e)!==null};Font.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)};Font.prototype.charToGlyph=function(e){const t=this.charToGlyphIndex(e);let n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n};Font.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;const n=[];for(let s=0;s<e.length;s+=1){const l=e[s];n.push(this.charToGlyphIndex(l))}let r=n.length;if(t.features){const s=t.script||this.substitution.getDefaultScriptName();let l=[];t.features.liga&&(l=l.concat(this.substitution.getFeature("liga",s,t.language))),t.features.rlig&&(l=l.concat(this.substitution.getFeature("rlig",s,t.language)));for(let a=0;a<r;a+=1)for(let f=0;f<l.length;f++){const g=l[f],y=g.sub,T=y.length;let x=0;for(;x<T&&y[x]===n[a+x];)x++;x===T&&(n.splice(a,T,g.by),r=r-T+1)}}const i=new Array(r),o=this.glyphs.get(0);for(let s=0;s<r;s+=1)i[s]=this.glyphs.get(n[s])||o;return i};Font.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)};Font.prototype.nameToGlyph=function(e){const t=this.nameToGlyphIndex(e);let n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n};Font.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""};Font.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;const n=this.getGposKerningValue;return n?n(e,t):this.kerningPairs[e+","+t]||0};Font.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}};Font.prototype.forEachGlyph=function(e,t,n,r,i,o){t=t!==void 0?t:0,n=n!==void 0?n:0,r=r!==void 0?r:72,i=i||this.defaultRenderOptions;const s=1/this.unitsPerEm*r,l=this.stringToGlyphs(e,i);for(let a=0;a<l.length;a+=1){const f=l[a];if(o.call(this,f,t,n,r,i),f.advanceWidth&&(t+=f.advanceWidth*s),i.kerning&&a<l.length-1){const g=this.getKerningValue(f,l[a+1]);t+=g*s}i.letterSpacing?t+=i.letterSpacing*r:i.tracking&&(t+=i.tracking/1e3*r)}return t};Font.prototype.getPath=function(e,t,n,r,i){const o=new Path;return this.forEachGlyph(e,t,n,r,i,function(s,l,a,f){const g=s.getPath(l,a,f,i,this);o.extend(g)}),o};Font.prototype.getPaths=function(e,t,n,r,i){const o=[];return this.forEachGlyph(e,t,n,r,i,function(s,l,a,f){const g=s.getPath(l,a,f,i,this);o.push(g)}),o};Font.prototype.getAdvanceWidth=function(e,t,n){return this.forEachGlyph(e,0,0,t,n,function(){})};Font.prototype.draw=function(e,t,n,r,i,o){this.getPath(t,n,r,i,o).draw(e)};Font.prototype.drawPoints=function(e,t,n,r,i,o){this.forEachGlyph(t,n,r,i,o,function(s,l,a,f){s.drawPoints(e,l,a,f)})};Font.prototype.drawMetrics=function(e,t,n,r,i,o){this.forEachGlyph(t,n,r,i,o,function(s,l,a,f){s.drawMetrics(e,l,a,f)})};Font.prototype.getEnglishName=function(e){const t=this.names[e];if(t)return t.en};Font.prototype.validate=function(){const e=this;function t(r,i){}function n(r){const i=e.getEnglishName(r);i&&i.trim().length>0}n("fontFamily"),n("weightName"),n("manufacturer"),n("copyright"),n("version"),this.unitsPerEm>0};Font.prototype.toTables=function(){return sfnt.fontToTable(this)};Font.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};Font.prototype.toArrayBuffer=function(){const t=this.toTables().encode(),n=new ArrayBuffer(t.length),r=new Uint8Array(n);for(let i=0;i<t.length;i++)r[i]=t[i];return n};Font.prototype.download=function(e){const t=this.getEnglishName("fontFamily"),n=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+n+".otf";const r=this.toArrayBuffer();if(isBrowser())window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,r.byteLength,function(i){i.root.getFile(e,{create:!0},function(o){o.createWriter(function(s){const l=new DataView(r),a=new Blob([l],{type:"font/opentype"});s.write(a),s.addEventListener("writeend",function(){location.href=o.toURL()},!1)})})},function(i){throw new Error(i.name+": "+i.message)});else{const i=require("fs"),o=arrayBufferToNodeBuffer(r);i.writeFileSync(e,o)}};Font.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Font.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Font.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};function addName(e,t){const n=JSON.stringify(e);let r=256;for(let i in t){let o=parseInt(i);if(!(!o||o<256)){if(JSON.stringify(t[i])===n)return o;r<=o&&(r=o+1)}}return t[r]=e,r}function makeFvarAxis(e,t,n){const r=addName(t.name,n);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:r}]}function parseFvarAxis(e,t,n){const r={},i=new parse.Parser(e,t);return r.tag=i.parseTag(),r.minValue=i.parseFixed(),r.defaultValue=i.parseFixed(),r.maxValue=i.parseFixed(),i.skip("uShort",1),r.name=n[i.parseUShort()]||{},r}function makeFvarInstance(e,t,n,r){const i=addName(t.name,r),o=[{name:"nameID_"+e,type:"USHORT",value:i},{name:"flags_"+e,type:"USHORT",value:0}];for(let s=0;s<n.length;++s){const l=n[s].tag;o.push({name:"axis_"+e+" "+l,type:"FIXED",value:t.coordinates[l]<<16})}return o}function parseFvarInstance(e,t,n,r){const i={},o=new parse.Parser(e,t);i.name=r[o.parseUShort()]||{},o.skip("uShort",1),i.coordinates={};for(let s=0;s<n.length;++s)i.coordinates[n[s].tag]=o.parseFixed();return i}function makeFvarTable(e,t){const n=new table.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+e.axes.length*4}]);n.offsetToData=n.sizeOf();for(let r=0;r<e.axes.length;r++)n.fields=n.fields.concat(makeFvarAxis(r,e.axes[r],t));for(let r=0;r<e.instances.length;r++)n.fields=n.fields.concat(makeFvarInstance(r,e.instances[r],e.axes,t));return n}function parseFvarTable(e,t,n){const r=new parse.Parser(e,t),i=r.parseULong();check.argument(i===65536,"Unsupported fvar table version.");const o=r.parseOffset16();r.skip("uShort",1);const s=r.parseUShort(),l=r.parseUShort(),a=r.parseUShort(),f=r.parseUShort(),g=[];for(let x=0;x<s;x++)g.push(parseFvarAxis(e,t+o+x*l,n));const y=[],T=t+o+s*l;for(let x=0;x<a;x++)y.push(parseFvarInstance(e,T+x*f,g,n));return{axes:g,instances:y}}const fvar={make:makeFvarTable,parse:parseFvarTable};function parseTaggedListTable(e,t){const n=new parse.Parser(e,t),r=n.parseUShort(),i=[];for(let o=0;o<r;o++)i[n.parseTag()]={offset:n.parseUShort()};return i}function parseCoverageTable(e,t){const n=new parse.Parser(e,t),r=n.parseUShort();let i=n.parseUShort();if(r===1)return n.parseUShortList(i);if(r===2){const o=[];for(;i--;){const s=n.parseUShort(),l=n.parseUShort();let a=n.parseUShort();for(let f=s;f<=l;f++)o[a++]=f}return o}}function parseClassDefTable(e,t){const n=new parse.Parser(e,t),r=n.parseUShort();if(r===1){const i=n.parseUShort(),o=n.parseUShort(),s=n.parseUShortList(o);return function(l){return s[l-i]||0}}else if(r===2){const i=n.parseUShort(),o=[],s=[],l=[];for(let a=0;a<i;a++)o[a]=n.parseUShort(),s[a]=n.parseUShort(),l[a]=n.parseUShort();return function(a){let f=0,g=o.length-1;for(;f<g;){const y=f+g+1>>1;a<o[y]?g=y-1:f=y}return o[f]<=a&&a<=s[f]&&l[f]||0}}}function parsePairPosSubTable(e,t){const n=new parse.Parser(e,t),r=n.parseUShort(),i=n.parseUShort(),o=parseCoverageTable(e,t+i),s=n.parseUShort(),l=n.parseUShort();let a;if(s!==4||l!==0)return;const f={};if(r===1){const g=n.parseUShort(),y=[],T=n.parseOffset16List(g);for(let x=0;x<g;x++){const b=T[x];let d=f[b];if(!d){d={},n.relativeOffset=b;let u=n.parseUShort();for(;u--;){const p=n.parseUShort();s&&(a=n.parseShort()),l&&n.parseShort(),d[p]=a}}y[o[x]]=d}return function(x,b){const d=y[x];if(d)return d[b]}}else if(r===2){const g=n.parseUShort(),y=n.parseUShort(),T=n.parseUShort(),x=n.parseUShort(),b=parseClassDefTable(e,t+g),d=parseClassDefTable(e,t+y),u=[];for(let c=0;c<T;c++){const h=u[c]=[];for(let m=0;m<x;m++)s&&(a=n.parseShort()),l&&n.parseShort(),h[m]=a}const p={};for(let c=0;c<o.length;c++)p[o[c]]=1;return function(c,h){if(!p[c])return;const m=b(c),v=d(h),E=u[m];if(E)return E[v]}}}function parseLookupTable(e,t){const n=new parse.Parser(e,t),r=n.parseUShort(),i=n.parseUShort(),o=i&16,s=n.parseUShort(),l=n.parseOffset16List(s),a={lookupType:r,lookupFlag:i,markFilteringSet:o?n.parseUShort():-1};if(r===2){const f=[];for(let g=0;g<s;g++){const y=parsePairPosSubTable(e,t+l[g]);y&&f.push(y)}a.getKerningValue=function(g,y){for(let T=f.length;T--;){const x=f[T](g,y);if(x!==void 0)return x}return 0}}return a}function parseGposTable(e,t,n){const r=new parse.Parser(e,t),i=r.parseFixed();check.argument(i===1,"Unsupported GPOS table version."),parseTaggedListTable(e,t+r.parseUShort()),parseTaggedListTable(e,t+r.parseUShort());const o=r.parseUShort();r.relativeOffset=o;const s=r.parseUShort(),l=r.parseOffset16List(s),a=t+o;for(let f=0;f<s;f++){const g=parseLookupTable(e,a+l[f]);g.lookupType===2&&!n.getGposKerningValue&&(n.getGposKerningValue=g.getKerningValue)}}const gpos={parse:parseGposTable};function parseWindowsKernTable(e){const t={};e.skip("uShort");const n=e.parseUShort();check.argument(n===0,"Unsupported kern sub-table version."),e.skip("uShort",2);const r=e.parseUShort();e.skip("uShort",3);for(let i=0;i<r;i+=1){const o=e.parseUShort(),s=e.parseUShort(),l=e.parseShort();t[o+","+s]=l}return t}function parseMacKernTable(e){const t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");const i=e.parseUShort()&255;if(e.skip("uShort"),i===0){const o=e.parseUShort();e.skip("uShort",3);for(let s=0;s<o;s+=1){const l=e.parseUShort(),a=e.parseUShort(),f=e.parseShort();t[l+","+a]=f}}return t}function parseKernTable(e,t){const n=new parse.Parser(e,t),r=n.parseUShort();if(r===0)return parseWindowsKernTable(n);if(r===1)return parseMacKernTable(n);throw new Error("Unsupported kern table version ("+r+").")}const kern={parse:parseKernTable};function parseLocaTable(e,t,n,r){const i=new parse.Parser(e,t),o=r?i.parseUShort:i.parseULong,s=[];for(let l=0;l<n+1;l+=1){let a=o.call(i);r&&(a*=2),s.push(a)}return s}const loca={parse:parseLocaTable};function loadFromFile(e,t){require("fs").readFile(e,function(r,i){if(r)return t(r.message);t(null,nodeBufferToArrayBuffer(i))})}function loadFromUrl(e,t){const n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",n.onload=function(){return n.status!==200?t("Font could not be loaded: "+n.statusText):t(null,n.response)},n.onerror=function(){t("Font could not be loaded")},n.send()}function parseOpenTypeTableEntries(e,t){const n=[];let r=12;for(let i=0;i<t;i+=1){const o=parse.getTag(e,r),s=parse.getULong(e,r+4),l=parse.getULong(e,r+8),a=parse.getULong(e,r+12);n.push({tag:o,checksum:s,offset:l,length:a,compression:!1}),r+=16}return n}function parseWOFFTableEntries(e,t){const n=[];let r=44;for(let i=0;i<t;i+=1){const o=parse.getTag(e,r),s=parse.getULong(e,r+4),l=parse.getULong(e,r+8),a=parse.getULong(e,r+12);let f;l<a?f="WOFF":f=!1,n.push({tag:o,offset:s,compression:f,compressedLength:l,length:a}),r+=20}return n}function uncompressTable(e,t){if(t.compression==="WOFF"){const n=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),r=new Uint8Array(t.length);if(inflate(n,r),r.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(r.buffer,0),offset:0}}else return{data:e,offset:t.offset}}function parseBuffer(e){let t,n;const r=new Font({empty:!0}),i=new DataView(e,0);let o,s=[];const l=parse.getTag(i,0);if(l==="\0\0\0"||l==="true"||l==="typ1")r.outlinesFormat="truetype",o=parse.getUShort(i,4),s=parseOpenTypeTableEntries(i,o);else if(l==="OTTO")r.outlinesFormat="cff",o=parse.getUShort(i,4),s=parseOpenTypeTableEntries(i,o);else if(l==="wOFF"){const v=parse.getTag(i,4);if(v==="\0\0\0")r.outlinesFormat="truetype";else if(v==="OTTO")r.outlinesFormat="cff";else throw new Error("Unsupported OpenType flavor "+l);o=parse.getUShort(i,12),s=parseWOFFTableEntries(i,o)}else throw new Error("Unsupported OpenType signature "+l);let a,f,g,y,T,x,b,d,u,p,c;for(let v=0;v<o;v+=1){const E=s[v];let A;switch(E.tag){case"cmap":A=uncompressTable(i,E),r.tables.cmap=cmap.parse(A.data,A.offset),r.encoding=new CmapEncoding(r.tables.cmap);break;case"cvt ":A=uncompressTable(i,E),c=new parse.Parser(A.data,A.offset),r.tables.cvt=c.parseShortList(E.length/2);break;case"fvar":f=E;break;case"fpgm":A=uncompressTable(i,E),c=new parse.Parser(A.data,A.offset),r.tables.fpgm=c.parseByteList(E.length);break;case"head":A=uncompressTable(i,E),r.tables.head=head.parse(A.data,A.offset),r.unitsPerEm=r.tables.head.unitsPerEm,t=r.tables.head.indexToLocFormat;break;case"hhea":A=uncompressTable(i,E),r.tables.hhea=hhea.parse(A.data,A.offset),r.ascender=r.tables.hhea.ascender,r.descender=r.tables.hhea.descender,r.numberOfHMetrics=r.tables.hhea.numberOfHMetrics;break;case"hmtx":x=E;break;case"ltag":A=uncompressTable(i,E),n=ltag.parse(A.data,A.offset);break;case"maxp":A=uncompressTable(i,E),r.tables.maxp=maxp.parse(A.data,A.offset),r.numGlyphs=r.tables.maxp.numGlyphs;break;case"name":u=E;break;case"OS/2":A=uncompressTable(i,E),r.tables.os2=os2.parse(A.data,A.offset);break;case"post":A=uncompressTable(i,E),r.tables.post=post.parse(A.data,A.offset),r.glyphNames=new GlyphNames(r.tables.post);break;case"prep":A=uncompressTable(i,E),c=new parse.Parser(A.data,A.offset),r.tables.prep=c.parseByteList(E.length);break;case"glyf":g=E;break;case"loca":d=E;break;case"CFF ":a=E;break;case"kern":b=E;break;case"GPOS":y=E;break;case"GSUB":T=E;break;case"meta":p=E;break}}const h=uncompressTable(i,u);if(r.tables.name=_name.parse(h.data,h.offset,n),r.names=r.tables.name,g&&d){const v=t===0,E=uncompressTable(i,d),A=loca.parse(E.data,E.offset,r.numGlyphs,v),S=uncompressTable(i,g);r.glyphs=glyf.parse(S.data,S.offset,A,r)}else if(a){const v=uncompressTable(i,a);cff.parse(v.data,v.offset,r)}else throw new Error("Font doesn't contain TrueType or CFF outlines.");const m=uncompressTable(i,x);if(hmtx.parse(m.data,m.offset,r.numberOfHMetrics,r.numGlyphs,r.glyphs),addGlyphNames(r),b){const v=uncompressTable(i,b);r.kerningPairs=kern.parse(v.data,v.offset)}else r.kerningPairs={};if(y){const v=uncompressTable(i,y);gpos.parse(v.data,v.offset,r)}if(T){const v=uncompressTable(i,T);r.tables.gsub=gsub.parse(v.data,v.offset)}if(f){const v=uncompressTable(i,f);r.tables.fvar=fvar.parse(v.data,v.offset,r.names)}if(p){const v=uncompressTable(i,p);r.tables.meta=meta.parse(v.data,v.offset),r.metas=r.tables.meta}return r}function load(e,t){(typeof window>"u"?loadFromFile:loadFromUrl)(e,function(i,o){if(i)return t(i);let s;try{s=parseBuffer(o)}catch(l){return t(l,null)}return t(null,s)})}function Sidebar({state:e,setState:t}){const{fontList:n,customFont:r,fontFamily:i,fontVariant:o,text:s,size:l,lineHeight:a,union:f,kerning:g,filled:y,separate:T,bezierAccuracy:x,dxfUnits:b,fill:d,stroke:u,strokeWidth:p,strokeNonScaling:c,fillRule:h}=e,m=n&&i?n.items.find(S=>S.family===i)?.variants||[]:[],v=reactExports.useMemo(()=>n?n.items.map(S=>jsxRuntimeExports.jsx("option",{value:S.family,children:S.family},S.family)):jsxRuntimeExports.jsx("option",{children:"Loading fonts..."}),[n]),E=async S=>{const C=S.target.files;if(!C||C.length===0)t(O=>({...O,customFont:void 0}));else{const O=await C[0].arrayBuffer(),R=parseBuffer(O);t(w=>({...w,customFont:R}))}},A=()=>{const S=document.getElementById("font-upload");S&&(S.value=""),t(C=>({...C,customFont:void 0}))};return jsxRuntimeExports.jsxs("aside",{children:[jsxRuntimeExports.jsxs("details",{open:!0,children:[jsxRuntimeExports.jsx("summary",{children:"Font Settings"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[jsxRuntimeExports.jsxs("span",{children:["Google font:",jsxRuntimeExports.jsx("a",{href:"https://fonts.google.com",target:"_blank",rel:"noopener noreferrer",style:{marginLeft:"0.5rem",fontSize:"0.85em"},children:"Browse fonts "})]}),jsxRuntimeExports.jsx("select",{id:"font-select",value:i,onChange:S=>t(C=>({...C,fontFamily:S.target.value})),disabled:!!r,style:{flex:"1",marginLeft:"0.5rem"},children:v})]}),jsxRuntimeExports.jsxs("label",{children:["variant:",jsxRuntimeExports.jsx("select",{id:"font-variant",value:o,onChange:S=>t(C=>({...C,fontVariant:S.target.value})),disabled:!!r,children:m.map(S=>jsxRuntimeExports.jsx("option",{value:S,children:S},S))})]}),jsxRuntimeExports.jsxs("label",{children:["(optional) upload font:",jsxRuntimeExports.jsx("input",{id:"font-upload",type:"file",onChange:E,accept:".ttf,.otf,.woff,.woff2"})]}),r&&jsxRuntimeExports.jsx("button",{onClick:A,children:"Remove"})]})]}),jsxRuntimeExports.jsxs("details",{open:!0,children:[jsxRuntimeExports.jsx("summary",{children:"Text Settings"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{children:["text:",jsxRuntimeExports.jsx("textarea",{id:"input-text",rows:3,value:s,onChange:S=>t(C=>({...C,text:S.target.value}))})]}),jsxRuntimeExports.jsxs("label",{children:["size:",jsxRuntimeExports.jsx("input",{type:"number",id:"input-size",value:l,onChange:S=>t(C=>({...C,size:Number(S.target.value)}))})]}),jsxRuntimeExports.jsxs("label",{children:["line height:",jsxRuntimeExports.jsx("input",{type:"number",id:"input-line-height",value:a,onChange:S=>t(C=>({...C,lineHeight:Number(S.target.value)})),step:"0.1",min:"0.1"})]}),jsxRuntimeExports.jsxs("label",{children:["kerning:",jsxRuntimeExports.jsx("input",{type:"checkbox",id:"input-kerning",checked:g,onChange:S=>t(C=>({...C,kerning:S.target.checked}))})]})]})]}),jsxRuntimeExports.jsxs("details",{open:!0,children:[jsxRuntimeExports.jsx("summary",{children:"Stroke"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{children:["Stroke color:",jsxRuntimeExports.jsx("input",{type:"color",id:"input-stroke",value:u,onChange:S=>t(C=>({...C,stroke:S.target.value}))}),jsxRuntimeExports.jsx("input",{type:"text",value:u,onChange:S=>t(C=>({...C,stroke:S.target.value})),placeholder:"#000000",style:{marginLeft:"8px",width:"80px"}})]}),jsxRuntimeExports.jsxs("label",{children:["Stroke Width:",jsxRuntimeExports.jsx("input",{type:"text",id:"input-stroke-width",value:p,onChange:S=>t(C=>({...C,strokeWidth:S.target.value}))})]}),jsxRuntimeExports.jsxs("label",{children:["Non-scaling stroke:",jsxRuntimeExports.jsx("input",{type:"checkbox",id:"input-stroke-non-scaling",checked:c,onChange:S=>t(C=>({...C,strokeNonScaling:S.target.checked}))})]})]})]}),jsxRuntimeExports.jsxs("details",{open:!0,children:[jsxRuntimeExports.jsx("summary",{children:"Fill"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{children:["fill:",jsxRuntimeExports.jsx("input",{type:"checkbox",id:"input-filled",checked:y,onChange:S=>t(C=>({...C,filled:S.target.checked}))})]}),jsxRuntimeExports.jsxs("label",{children:["Fill color:",jsxRuntimeExports.jsx("input",{type:"color",id:"input-fill",value:d,onChange:S=>t(C=>({...C,fill:S.target.value}))}),jsxRuntimeExports.jsx("input",{type:"text",value:d,onChange:S=>t(C=>({...C,fill:S.target.value})),placeholder:"#000000",style:{marginLeft:"8px",width:"80px"}})]}),jsxRuntimeExports.jsxs("label",{children:["Fill rule:",jsxRuntimeExports.jsxs("select",{id:"input-fill-rule",value:h,onChange:S=>t(C=>({...C,fillRule:S.target.value})),children:[jsxRuntimeExports.jsx("option",{value:"evenodd",children:"evenodd"}),jsxRuntimeExports.jsx("option",{value:"nonzero",children:"nonzero"})]})]})]})]}),jsxRuntimeExports.jsxs("details",{children:[jsxRuntimeExports.jsx("summary",{children:"Options"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{children:["union:",jsxRuntimeExports.jsx("input",{type:"checkbox",id:"input-union",checked:f,onChange:S=>t(C=>({...C,union:S.target.checked}))})]}),jsxRuntimeExports.jsxs("label",{children:["separate characters:",jsxRuntimeExports.jsx("input",{type:"checkbox",id:"input-separate",checked:T,onChange:S=>t(C=>({...C,separate:S.target.checked}))})]}),jsxRuntimeExports.jsxs("label",{children:["bezier accuracy",jsxRuntimeExports.jsx("span",{title:"0.5 = accurate to half a pixel \r.001 = accurate to 1/1000th of a pixel \rsmaller numbers take longer to compute \rleave blank for auto",children:""}),":",jsxRuntimeExports.jsx("input",{type:"text",id:"input-bezier-accuracy",placeholder:"auto",value:x,onChange:S=>t(C=>({...C,bezierAccuracy:S.target.value}))})]}),jsxRuntimeExports.jsxs("label",{children:["Dxf Units:",jsxRuntimeExports.jsxs("select",{id:"dxf-units",value:b,onChange:S=>t(C=>({...C,dxfUnits:S.target.value})),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select units..."}),Object.values(makerjs.unitType).map(S=>jsxRuntimeExports.jsx("option",{value:S,children:S},S))]})]})]})]})]})}function Output({state:e}){const{svgOutput:t,dxfOutput:n,errorMessage:r,text:i}=e,[o,s]=reactExports.useState("copy to clipboard"),l=()=>{const y=document.getElementById("output-svg");y&&(y.select(),document.execCommand("copy"),s("copied"),setTimeout(()=>{s("copy to clipboard")},2e3))},a=()=>{const y=document.createElement("a");y.href="data:image/svg+xml;base64,"+window.btoa(t),y.download=`${i}.svg`,y.click()},f=()=>{const y=document.createElement("a");y.href="data:application/dxf;base64,"+window.btoa(n),y.download=`${i}.dxf`,y.click()},g=()=>{const y=window.location.href;navigator.clipboard.writeText(y).then(()=>{const T=document.getElementById("create-link");T&&(T.textContent="copied",setTimeout(()=>{T.textContent="Create link"},2e3))})};return jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsxs("section",{children:[r&&jsxRuntimeExports.jsx("div",{id:"error-display",style:{color:"red",padding:"10px"},children:r}),jsxRuntimeExports.jsx("div",{id:"svg-render",dangerouslySetInnerHTML:{__html:t},style:{marginBottom:"20px"}})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h2",{children:"SVG Output"}),jsxRuntimeExports.jsxs("div",{className:"textarea-container",children:[jsxRuntimeExports.jsx("textarea",{id:"output-svg",readOnly:!0,value:t,style:{width:"100%",minHeight:"200px",fontFamily:"monospace"}}),jsxRuntimeExports.jsxs("div",{className:"buttons-container",children:[jsxRuntimeExports.jsx("button",{className:"btn",onClick:l,children:o}),jsxRuntimeExports.jsx("button",{className:"btn",onClick:a,children:"Download Svg"}),jsxRuntimeExports.jsx("button",{id:"create-link",className:"btn",onClick:g,children:"Create link"}),jsxRuntimeExports.jsx("button",{className:"btn",onClick:f,children:"Download Dxf"})]})]})]})]})}const apiKey="AIzaSyAOES8EmKhuJEnsn9kS1XKBpxxp-TgN8Jc";async function loadGoogleFonts(){return(await fetch(`https://www.googleapis.com/webfonts/v1/webfonts?key=${apiKey}`)).json()}async function renderSvg(e){try{const{fontList:t,fontFamily:n,fontVariant:r,customFont:i,text:o,size:s,lineHeight:l,union:a,filled:f,kerning:g,separate:y,bezierAccuracy:T,dxfUnits:x,fill:b,stroke:d,strokeWidth:u,strokeNonScaling:p,fillRule:c}=e;let h;if(i)h=i;else{const S=t.items.find(O=>O.family===n);if(!S)return{errorMessage:"Font not found"};const C=S.files[r]?.replace("http:","https:");if(!C)return{errorMessage:"Font variant not found"};h=await new Promise((O,R)=>{load(C,(w,P)=>{w?R(w):O(P)})})}const m=o.split(`
`),v={models:{}};if(m.forEach((S,C)=>{if(S.length===0)return;const O=parseFloat(T)||void 0,R=new makerjs.models.Text(h,S,s,a,!1,O,{kerning:g}),w=-C*s*l;makerjs.model.move(R,[0,w]),v.models[`line_${C}`]=R}),y){let S=0;for(const C in v.models){const O=v.models[C];for(const R in O.models)O.models[R].layer=String(S),S++}}const E=makerjs.exporter.toSVG(v,{fill:f?b:void 0,stroke:d||void 0,strokeWidth:u||void 0,fillRule:c||void 0,scalingStroke:!p}),A=makerjs.exporter.toDXF(v,{units:x,usePOLYLINE:!0});return{svgOutput:E,dxfOutput:A,errorMessage:""}}catch(t){return{errorMessage:t.toString()}}}const defaultState={fontList:null,customFont:void 0,fontFamily:"ABeeZee",fontVariant:"regular",text:"Verb",size:100,lineHeight:1.2,union:!1,kerning:!0,filled:!1,separate:!1,bezierAccuracy:"",dxfUnits:"",fill:"#000000",stroke:"#000000",strokeWidth:"0.25mm",strokeNonScaling:!0,fillRule:"evenodd",svgOutput:"",dxfOutput:"",errorMessage:""};function App(){const[e,t]=reactExports.useState(defaultState);return reactExports.useEffect(()=>{loadGoogleFonts().then(n=>{t(r=>({...r,fontList:n}))})},[]),reactExports.useEffect(()=>{e.fontList&&e.fontFamily&&e.fontVariant&&renderSvg(e).then(n=>{t(r=>({...r,...n}))})},[e.fontList,e.fontFamily,e.fontVariant,e.customFont,e.text,e.size,e.lineHeight,e.union,e.filled,e.kerning,e.separate,e.bezierAccuracy,e.dxfUnits,e.fill,e.stroke,e.strokeWidth,e.strokeNonScaling,e.fillRule]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sidebar,{state:e,setState:t}),jsxRuntimeExports.jsx(Output,{state:e})]})}export{App as default};
